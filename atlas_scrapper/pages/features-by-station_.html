June 29, 2023 |
8045 view(s) |
7 people thought this was helpful
Webex Calling media optimization with Interactive Connectivity Establishment (ICE)
Webex Calling media optimization ensures the best calling experience where possible. The media path is optimized between supported devices using Interactive Connectivity Establishment (ICE). Media optimization allows devices to send media directly to one another, which reduces latency and bandwidth usage.
Prerequisites and limitations
Media optimization is supported across desk phones (excluding DECT & ATA devices), Webex, and the Local Gateway solution. When you make calls within your organization, between supported devices, the media for your call flows directly between the devices whenever possible. This provides lower latency and better quality.

Please see What's New in Webex Calling for global enablement dates.
By default, media optimization is enabled on the desk phone devices and Webex and, usually, doesn’t require specified configuration.
For Local Gateway, media optimization can be enabled with the command STUN usage lite, which is reviewed in Register Local Gateway to Webex Calling

STUN (Session Traversal Utilities for NAT) is a standardized set of methods, including a network protocol, for traversal of network address translator gateways in applications of real-time voice, video, messaging, and other interactive communications.
The Local Gateway (CUBE) supports ICE-lite. There are several restrictions to ICE support on the CUBE, including ICE-lite is not supported with SIP-TDM gateways. Please see details about ICE-lite support on CUBE.
Media optimization support on Local Gateway requires a minimum CUBE software version of 17.3 or 16.12.5.
Media optimization with a Local Gateway requires network reachability between the device and the Local Gateway. This can be achieved by either:
Assigning a public IP address to the Local Gateway.
Ensuring that the Local Gateway host address is accessible to a device within the same network as the Local Gateway.
In order to route calls, signaling data is sent to the Webex Calling cloud. An active internet connection is always required to make Webex Calling calls. However, media makes up the majority of traffic for a call.
Calls can only be optimized within a single organization. For interorganization calls, media must flow via the PSTN for regulatory reasons.
If Call Recording is enabled, media for recorded calls is routed to the cloud and are not optimized.

ICE (Media optimization) and Call Recording are both features that independently introduce a small audio delay at the beginning of the call and when used together the audio delay is slightly longer and more noticeable to customers.
Phases of Webex Calling media optimization
Media optimization uses Interactive Connectivity Establishment (ICE) to discover optimized media paths.
This happens in the following phases:
Candidate discovery
When a call is made, an endpoint must first discover a list of addresses where it can receive media. These addresses, or candidates, include an endpoint’s local address, and a server reflexive address that can be used to contact the endpoint through a NAT. The server reflexive address is determined by querying a STUN server in the Webex Calling cloud.
Candidate exchange
In this phase, endpoints exchange the list of candidate addresses that are collected in Candidate discovery using SIP.
Connectivity checks
Endpoints test the candidate addresses exchanged in Candidate exchange to determine the best media path between two devices.
Media path optimization
Using a re-invite, the endpoints now begin to send media through the optimized path.
Analytics for media optimization
Data for optimized calls is available through the Media Quality analytics page or alternatively through the Troubleshooting tool within the Control Hub.