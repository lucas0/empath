Command References
Cisco IOS XE SD-WAN Qualified Command Reference
Bias-Free Language
Book Contents
Download
Print
Updated:
April 7, 2021
Chapter: CFM Commands
Chapter Contents

Note
This documentation set includes commands that are tested and verified on a Cisco IOS XE SD-WAN device using the Device Configuration-Based CLI Templates or the CLI add-on feature template.
alarm
cfm mep domain
cos
ethernet cfm ieee
ethernet cfm global
ethernet oam
ethernet oam remote-loopback
ethernet loopback permit
snmp-server enable traps ethernet cfm cc
snmp-server enable traps ethernet cfm crosscheck
ethernet evc
ethernet cfm domain level
offload sampling
sender-id
service (CFM-srv)
service evc
continuity-check
alarm
To configure an alarm when fault alarms are enabled, use the alarm command in Ethernet connectivity fault management (CFM) interface configuration mode. To remove the configuration, use the no form of this command.
notification
Sets the defects that are to be reported if fault alarms are enabled.
all
Reports all defects: DefRDI, DefMACStatus, DefRemote, DefError, and DefXcon.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE alarm command.
The following example shows how to set up notifications for all defects:
Interface interface-name
 cfm mep domain domain-name mpid id service service-name
  alarm notification all
cfm mep domain
To configure a maintenance endpoint (MEP) for a domain, use the cfm mep domain command in either service instance configuration mode or virtual forwarding instance (VFI) configuration mode. To remove the MEP, use the no form of this command.
Syntax Description
domain-name
String from 1 to 154 characters that identifies the domain name.
mpid
Indicates the maintenance point ID (MPID).
mpid-value
Integer from 1 to 8191 that identifies the MPID.
cos
(Optional) Indicates the class of service (CoS) for CFM packets.
cos-value
(Optional) Integer from 0 to 7 that specifies the CoS.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE cfm mep domain command.
The following example shows how to configure the cfm mep domain command:
Device(config)#ethernet cfm domain CUSTOMER level 7
Device(config-ecfm)#service customer_100 evc evc_100
cos
To set the class of service (CoS) for a Cisco IOS IP Service Level Agreements (SLAs) Ethernet operation, use the cos command in the appropriate submode of IP SLA configuration or IP SLA Ethernet monitor configuration mode. To return to the default value, use the no form of this command.
cos-value
Class of service (CoS) value. The range is from 0 to 7. The default is 0.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE cos command.
The following example shows how to configure this command:
Interface interface-name
 cfm mep domain domain-name mpid id service service-name
  alarm notification all*
  cos 0-7
ethernet cfm ieee
To enable the Ethernet Connectivity Fault Management 802.1ag Standard (CFM IEEE) version of CFM, use the ethernet cfm ieee command in global configuration mode. To disable the CFM IEEE version, use the no form of this command.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet cfm ieee command.
Device(config)# ethernet cfm ieee
ethernet cfm global
To enable Ethernet connectivity fault management (CFM) globally on a device, use the ethernet cfm global command in global configuration mode. To disable CFM globally on a device, use the no form of this command.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet cfm global command.
Device(config)# ethernet cfm global
ethernet oam
To enable Ethernet operations, maintenance, and administration (OAM) on an interface, use the ethernet oam command in interface configuration mode. To disable Ethernet OAM on an interface, use the no form of this command.
mode
(Optional) Sets the OAM client mode.
passive
(Optional) Sets the OAM client mode to passive. In passive mode, a device cannot initiate discovery, inquire about variables, or set loopback mode.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet oam command.
The following example shows how to activate an Ethernet OAM interface that was previously configured to be in passive mode:
Device(config)# interface gigabitethernet 0/1
Device(config-if)# ethernet oam mode passive
ethernet oam remote-loopback
To turn on or off Ethernet operations, maintenance, and administration (OAM) remote loopback functionality on an interface, use the ethernet oam remote-loopback command in privileged EXEC mode. This command does not have a no form.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet oam remote-loopback command.
The following example shows when a remote loopback session is supported:
Device# ethernet oam remote-loopback supported 
ethernet loopback permit
To configure an Ethernet data-plane loopback session on the interface, use the ethernet loopback permit command in interface configuration mode. To disable the Ethernet data-plane loopback session on the interface, use the no form of this command.
Syntax Description
external
Allows the activation of loopback of the traffic from the wire.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet loopback permit command.
The following example shows the how to configure an Ethernet data-plane loopback session:
Device(config)# interface ethernet 0/1
Device(config-if)# ethernet loopback permit external
      
snmp-server enable traps ethernet cfm cc
To enable Simple Network Management Protocol (SNMP) trap generation for Ethernet connectivity fault management (CFM) continuity check events, use the snmp-server enable traps ethernet cfm cc command in global configuration mode. To disable SNMP trap generation for Ethernet CFM continuity check events, use the no form of this command.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE snmp-server enable traps ethernet cfm cc command.
Device(config)# snmp-server enable traps ethernet cfm cc
snmp-server enable traps ethernet cfm crosscheck
To enable Simple Network Management Protocol (SNMP) trap generation for Ethernet connectivity fault management (CFM) continuity check events, in relation to the cross-check operation between statically configured maintenance endpoints (MEPs) and those learned via continuity check messages (CCMs), use the snmp-server enable traps ethernet cfm crosscheck command in global configuration mode. To disable SNMP trap generation for these continuity check events, use the no form of this command.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE snmp-server enable traps ethernet cfm crosscheck command.
Device (config)# snmp-server enable traps ethernet cfm crosscheck
ethernet evc
To define an Ethernet virtual connection (EVC) and to enter EVC configuration mode, use the ethernet evc command in global configuration mode. To delete the EVC, use the no form of this command.
Supported Parameters
evc-id
String from 1 to 100 characters that identifies the EVC.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
For more information about this command, see the Cisco IOS XE ethernet evc command.
Device(config)# ethernet evc evc-id
ethernet cfm domain level
To define a connectivity fault management (CFM) maintenance domain at a particular maintenance level and enter Ethernet CFM configuration mode, use the ethernet cfm domain level command in global configuration mode. To remove the CFM domain at the specified level, use the no form of this command.
Supported Parameters
domain-name
String of a maximum of 154 characters that identifies the domain.
level-id
Integer from 0 to 7 that identifies the maintenance level.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE ethernet cfm domain level command.
ethernet cfm domain domain-name level level-id
  id dns dns-name
  mep ccm-hold-time hours
  mep ccm-fastage enable
  mep archive-hold-time minutes
  sender-id chassis
  service vpn-id vpn-id port
  service vlan-id vlan-id port
  service number MA-number port
  service short-ma-name port
  service short-ma-name evc evc-name vlan vlanid direction down
offload sampling
To configure offload sampling rate, use the offload sampling command in the Ethernet CFM configuration mode. To return to the default value, use the no form of this command.
offload sampling sample-rate
no offload sampling
Supported Parameters
sample-rate
Configure the Offload sampling rate for each CCM interval. Range: 10 to 10,000
Command Modes
Ethernet CFM service configuration (config-ecfm-srv)
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
You configure CFM Sessions Hardware sessions for effective CPU utilization by offloading the one second CCM interval sessions on the hardware. Effective Cisco IOS XE Release 17.5.1a, an Cisco IOS XE Catalyst SD-WAN device can offload the one second interval CCM sessions on hardware as well. You can enable this feature for 1 second offload sampling rate by configuring the offload sampling 10 command on the router. This is not mandatory for all CFM sessions.
The offload sampling configuration means that when rmep session is created, the CCM packet from rmep will be punted to PI every offload sampling value. The actual punt interval time is [ccm interval * offload sampling]. For example, if CCM interval is 100ms, and the offload sampling is 100, then the punt interval of CCM packet from rmep is 100ms*100=10s. For CCM interval of 100ms/10ms/3.3ms, the default offload sampling value is 100.
ASR1000 routers can offload sessions with CCM interval of 100 milliseconds, 10 milliseconds, and 3.3 milliseconds. CCM session with 1 second interval does not get offloaded by default. To offload the CCM session with 1 second, configure the sampling rate (offload sampling). The CCM session with 10 minutes, 1 minute, and 10 seconds are not offloaded.
The suggested offload sampling for each CCM interval is as follows:
1s - 10
100ms - 100
10ms - 1000
3.3ms - 2000
To offload CCM sessions with 1 second, you must configure the hardware offload sampling rate. This example given below configures the offload sampling rate as 10 seconds.
Device(config)#ethernet cfm domain domain1 level 6
Device(config-ecfm)#service USER_SRV evc USER_EVC vlan 100 direction down
Device(config-ecfm-srv)#continuity-check
Device(config-ecfm-srv)#continuity-check interval 1s
Device(config-ecfm-srv)#offload sampling 10
sender-id
To indicate the contents of the Sender ID TLV field transmitted in Ethernet connectivity fault management (CFM) messages for members of a maintenance domain, use the sender-id command in Ethernet CFM configuration mode. To send no sender ID information, use the no form of this command.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE sender-id command.
Device(config)#ethernet cfm domain domain-name level 5
Device(config-ecfm)#sender-id chassis
 
service (CFM-srv)
To configure a maintenance association within a maintenance domain and enter Ethernet connectivity fault management (CFM) service configuration mode (config-ecfm-srv), use the service command in Ethernet CFM configuration mode. To remove the configuration, use the no form of this command.
Supported Parameters
ma-name
Short maintenance association name.
ma-num
Integer from 0 to 65535 that identifies the maintenance association.
vlan-id
Configures a primary VLAN.
vlan-id
Integer from 1 to 4094 that identifies the primary VLAN.
vpn-id
Configures a virtual private network (VPN).
vpn-id
Integer from 1 to 32767 that identifies the VPN.
port
(Optional) Configures a DOWN service direction without a VLAN association.
vlan
(Optional) Configures a VLAN.
direction
(Optional) Configures the service direction. The default is “up.”
down
(Optional) Configures the direction toward the LAN.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE service (CFM-srv) command.
ethernet cfm domain domain-name level level-id
 id dns dns-name
 mep ccm-hold-time hours
 mep ccm-fastage enable
 mep archive-hold-time minutes
 sender-id chassis
 service vpn-id vpn-id port
 service vlan-id vlan-id port
 service number MA-number port
 service short-ma-name port
 service short-ma-name evc evc-name vlan vlanid direction down
service evc
To set a universally unique ID for a customer service instance (CSI) within a maintenance domain, use the service evc command in Ethernet CFM configuration mode. To remove a universally unique ID for a service within a maintenance domain, use the no form of this command.
Supported Parameters
service
Specifies the service instance.
evc
Specifies the Ethernet virtual circuit (EVC).
evc-name
String that identifies the Ethernet virtual circuit (EVC).
vlan
Specifies the VLAN.
vlan-id
String the VLAN ID. Range is from 1 to 4094.
direction
Specifies the service direction.
down
Specifies the direction towards the LAN.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE service evc command.
ethernet cfm domain domain-name level level-id
 id dns dns-name
 mep ccm-hold-time hours
 mep ccm-fastage enable
 mep archive-hold-time minutes
 sender-id chassis
 service vpn-id vpn-id port
 service vlan-id vlan-id port
 service number MA-number port
 service short-ma-name port
 service short-ma-name evc evc-name vlan vlanid direction down
continuity-check
To enable the transmission of continuity check messages (CCMs), use the continuity-check command in Ethernet connectivity fault management (CFM) service configuration mode. To disable message transmission, use the no form of this command.
Supported Parameters
interval
(Optional) Configures the time period between message transmissions.
loss-threshold
(Optional) Sets the number of CCMs that should be missed before declaring that a remote maintenance endpoint (MEP) is down.
threshold
(Optional) Integer from 2 to 255. The default is 3.
Command History
Release
Modification
Cisco IOS XE Release 17.4.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE continuity-check command.
ethernet cfm domain domain-name level level-id
 id dns dns-name
 mep ccm-hold-time hours
 mep ccm-fastage enable
 mep archive-hold-time minutes
 sender-id chassis
 service vpn-id vpn-id port
 service vlan-id vlan-id port
 service number MA-number port
 service short-ma-name port
 service short-ma-name evc evc-name vlan vlanid direction down
  continuity-check
  continuity-check [interval cc-interval]
  continuity-check loss-threshold threshold
  ais period 1 or 60
  ais level 0-7
  ais expiry-threshold 0-255
  ais suppress-alarms
  maximum meps 1-65535
  sender-id chassis
  offload sampling sample
Was this Document Helpful?
Yes No
Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)