Configuration Examples and TechNotes
Deploy a N1K VSM as a Service on the CSP2100.
Save
Translations
Download
Print



Updated:March 5, 2018
Document ID:212835
Bias-Free Language
Contents
Introduction
Prerequisites
Components Used
Configure
Network Diagram
Preliminary Configurations
Configuring the service
Introduction
 This article covers the steps to be followed to deploy a Nexus 1000v VSM on a CSP 2100.
Prerequisites
 CSP2100 configured and setup with management connectivity.
Components Used
 CSP2100 running version 2.1.0.6
Configure
Network Diagram
The above uplink topology is used in the following document. This is only to be used as a reference, to understand how to create and assign uplinks to your service.
The above PortChannel is defined as trunk and the VLANs used for communication with the service are allowed.
Preliminary Configurations
Add the VSM images in the 'repository' 
You will find the below through 'Configuraion' (top right corner) > 'Repository'
Choose a file through 'Select' and 'Upload' to add to the repository
Configure the uplinks of the CSP. Configuration > pNICs
Select the interfaces from the list of available uplinks to be bound into a PortChannel
Name the port-channel and add a ranged of allowed VLANs
Set Bond mode to 'active/standy' - Pick an LACP mode ('off' is basically "mode on" - no protocol)
Click on 'Submit' to create the Port-channel
'Configuration Done' exits the config prompt.
You will find a new uplink is listed:
You may use a port-channel or a singular uplink, depending on your specific topology.
Configuring the service
Go to Configuration > Services and click on Create.
Enter a name for the service
Select a node from your cluster to deploy it on
Choose the desired image from the repository 
You need to define 3 vNICs as the VM expects them (mgmt., control, packet)
Choose the VLAN id, VLAN type 'access', Tagging 'false', Model 'e1000' 
For network choose 'external network' and pick the port-channel you defined ealier (or any desired uplink)
Repeat for the other two nics
Set the resources as required by the VSM (depends on version)
Add a VNC password - the VNC connection gives you console access to the Service once its deployed
Once all fields have been entered hit 'Deploy'. If there were any errors with the deployment the GUI should report them.
Once the Service is deployed. Go to Configuration > Services and power-on your newly created VSM.
You can then connect to it via the VNC connection to setup your VSM.
Ref: http://www.cisco.com/c/en/us/td/docs/switches/datacenter/csp_2100/quick_start/b_Cisco_CSP_2100_Quick_Start_2_1_0.html#task_3FB0EE9C7BC44F2893A83AFF373EA669 
Contributed by Cisco Engineers
Shardul Paranjape
Engineer Customer Support
Was this Document Helpful?
Yes No Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)
This Document Applies to These Products
Cloud Services Platform 2100