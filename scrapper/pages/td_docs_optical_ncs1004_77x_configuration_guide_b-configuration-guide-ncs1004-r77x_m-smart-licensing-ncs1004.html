Configuration Guides
Configuration Guide for Cisco NCS 1004, IOS XR Release 7.7.x
Bias-Free Language
Book Contents
Download
Print
Updated:
July 30, 2022
Chapter: Smart Licensing
Chapter Contents
This chapter describes the smart licensing configuration on Cisco NCS 1004.
Understanding Smart Licensing
Creating a Token
Configure Smart Licensing
Smart Licensing for OTN-XP Line Card
Smart Licensing for QXP Line Card
Understanding Smart Licensing
Smart Licensing is a cloud-based approach to licensing. Smart Licensing simplifies the licensing experience across the enterprise making it easier to purchase, deploy, track, and renew Cisco Software. It provides visibility into license ownership and consumption through a single, simple user interface. The solution allows you to easily track the status of your license and software usage trends.
Smart Licensing helps you simplify three core functions:
Purchasing: The software that you have installed in your network can be registered, without Product Activation Keys (PAKs).
Management: You can automatically track activations against your license entitlements. Also, there is no need to install the license file on every node. You can create license pools (logical grouping of licenses) to reflect your organization structure. Smart Licensing offers you Cisco Smart Software Manager, a centralized portal that enables you to manage all your Cisco software licenses from one centralized website.
Reporting: Through the portal, Smart Licensing offers an integrated view of the licenses you have purchased and what has been deployed in your network. You can use this data to make better purchasing decisions, based on your consumption.
Smart Licensing Features
Your device initiates a call home and requests the licenses it needs.
Pooled licences - Licences are company account-specific, and can be used with any compatible device in your company. You can activate or deactivate different types of licenses on the device without actually installing a license file on the device.
Licenses are stored securely on Cisco servers.
Licenses can be moved between product instances without license transfer. This greatly simplifies the reassignment of a software license as part of the Return Material Authorization (RMA) process.
It provides a complete view of all the Smart Software Licenses used in the network using a consolidated usage report of software licenses and devices in one easy-to-use portal.
Cisco Smart Account
Cisco Smart Account is an account where all products enabled for Smart Licensing are deposited. Cisco Smart Account allows you to manage and activate your licenses to devices, monitor license use, and track Cisco license purchases. Through transparent access, you have a real-time view into your Smart Licensing products. IT administrators can manage licenses and account users within your organization's Smart Account through the Smart Software Manager.
When creating a Smart Account, you must have the authority to represent the requesting organization. After you submit the request, it goes through a brief approval process. Access http://software.cisco.com to learn about, set up, or manage Smart Accounts.
Cisco Smart Software Manager Overview
Cisco Smart Software Manager enables you to manage all your Cisco Smart software licenses from one centralized website. With Cisco Smart Software Manager, you organize and view your licenses in groups called virtual accounts (collections of licenses and product instances). Use the Cisco Smart Software Manager to do the following tasks:
Create, manage, or view virtual accounts.
Create and manage Product Instance Registration Tokens.
Transfer licenses between virtual accounts or view licenses.
Transfer, remove, or view product instances.
Run reports against your virtual accounts.
Modify your email notification settings.
View overall account information.
Virtual Accounts
A Virtual Account exists as a sub-account tithing the Smart Account. Virtual Accounts are a customer-defined structure based on organizational layout, business function, geography, or any defined hierarchy. They are created and maintained by the Smart Account administrator. Smart Licencing allows you to create multiple license pools or virtual accounts within the Smart Software Manager portal. Using the Virtual Accounts option that you can aggregate licenses into discrete bundles that are associated with a cost center so that one section of an organization cannot use the licenses of another section of the organization. For example, if you segregate your company into different geographic regions, you can create a virtual account for each region to hold the licenses and product instances for that region.
All new licenses and product instances are placed in the default virtual account in the Smart Software Manager, unless you specify a different one during the order process. After you access the default account, you may choose to transfer them to any other account, provided you have the required access permissions.
Use the Smart Software Manager portal to create license pools or transfer licenses.
Product Instance Registration Tokens
A product requires a registration token until you have registered the product. On successful registration, the device receives an identity certificate. This certificate is saved and automatically used for all future communications with Cisco. Registration tokens are stored in the Product Instance Registration Token Table that is associated with your enterprise account. Registration tokens can be valid 1–365 days.
Product Instances
A product instance is an individual device with a unique device identifier (UDI) that is registered using a product instance registration token (or registration token). You can register any number of instances of a product with a single registration token. Each product instance can have one or more licenses residing in the same virtual account. Product instances must periodically connect to the Cisco Smart Software Manager servers during a specific renewal period. If you remove the product instance, its licenses are released and made available within the virtual account.
Smart Licensing Work Flow
The following figure depicts a working model of smart licensing that involves a three-step procedure.
Figure 1. Smart Licensing Work Flow


Setting up Smart Licensing: You can place the order for Smart Licensing, to manage licenses on the Cisco.com portal. You agree to the terms and conditions governing the use and access of Smart Licensing in the Smart Software Manager portal.
Enabling and Use Smart Licensing: Smart Licensing is enabled by default. You can use either of the following options to communicate:
Smart Call Home: The Smart Call Home feature is automatically configured when Smart Licensing is enabled. Smart Call Home is used by Smart Licensing as a medium for communication with the Cisco license service. Call Home feature allows Cisco products to periodically call-home and perform an audit and reconciliation of your software usage information. This information helps Cisco efficiently track your install base, keep them up and running, and effectively pursue service and support contract renewals. For more information on Smart Call Home feature, see http://www.cisco.com/c/dam/en/us/td/docs/switches/lan/smart_call_home/SCH_Deployment_Guide.pdf.
Smart Software Manager Satellite : is a component of Cisco Smart Licensing and works with Cisco Smart Software Manager (SSM). It helps customers intelligently manage product licenses, providing near real-time visibility and reporting of the Cisco licenses they purchase and consume.
For customers who do not want to manage their installed base using a direct Internet connection, the Smart Software Manager satellite is installed on the customer premises and provides a subset of Cisco SSM functionality. After you download the satellite application, deploy it, and register it to Cisco SSM, you can perform the following functions locally:
Activate or register a license
Get visibility to your company's licenses
Transfer licenses between company entities
Periodically, the satellite must synchronize with Cisco SSM to reflect the latest license entitlements.
For more information about the Smart Software Manager satellite, see http://www.cisco.com/c/en/us/buy/smart-accounts/software-manager-satellite.html.
Manage and Report Licenses: You can manage and view reports about your overall software usage in the Smart Software Manager portal. Compliance reporting describes the types of Smart Licensing reports.
Benefits of Smart Licensing
Licensing in NCS 1004
Software Entitlements of Cisco NCS 1004
Benefits of Smart Licensing
Licenses are not locked to perform configurations even if the license limit exceeds the paid license limit. You are notified with out-of-compliance notification to buy additional licenses when the license limit exceeds the paid license limit. This saves time with the ability to transfer licenses across the organization.
Licenses can be pooled across the entire organization, enabling them to be reused across organizational boundaries.
Provides software asset management information so that you can plan and track the licenses.
Licensing in NCS 1004
Cisco NCS 1004 has the following line card PIDs :
NCS1K4-1.2T-K9—High-cost PID. This card does not support smart licensing.
NCS1K4-1.2T-L-K9—Licensed PID for 1.2T line card and the licenses are charged per port.
NCS1K4-OTN-XPL—Licensed PID for OTN-XP line card.
NCS1K4-QXP-L-K9—Licensed PID for QXP line card.
NCS1K4-QXP-K9 —Non-licensed PID for QXP line card.
You can use either one or a combination of both types of the 1.2T line card in the NCS 1004.
Software Entitlements of Cisco NCS 1004
Software entitlement is a system that consists of a license manager on Cisco NCS 1004. The license manager manages licenses for various software and hardware features. The license manager parses and authenticates the license before accepting it.
The following table lists the features and its corresponding entitlements that can be enabled on Cisco NCS 1004 using licenses:
Table 1. Software Entitlements of Cisco NCS 1004
Feature
Software Entitlement
NCS1K4 Smart License-one QSFP28 client
S-NCS1K4-LIC-100G=
NCS1K4 Smart License - one QSFP28 client with encryption
S-NCS1K4-LIC-100X=
NCS1K4 Smart License - 100Gbps of client bandwidth
S-NCS1K4-100G-CL=
NCS1K4 Smart License - Long Haul
S_NCS1K4_LONGHAUL
NCS1K4 Smart License - Subsea
S_NCS1K4_SUBSEA
The licenses are charged per port basis and dependent on the number of trunk ports and client ports that you configure. The license count for the configuration of 4 x 100GE client ports or lesser is zero. For configurations greater than 4 x 100GE client ports, the license count is incremented by one for every 100GE client port configured at the slice level. The license count for the trunk port is incremented based on the BPS & optics configuration.
Creating a Token
To create a new token using Cisco Smart Software Manager, perform the following tasks:
Procedure
Step 1
Log in to the Cisco Smart Software Manager.
https://software.cisco.com/software/csws/ws/platform/home#SmartLicensing-Inventory
Step 2
Select the token with the name that was provided while creating the token.
Step 3
Click on the blue arrow on the token. The token ID generates.
Step 4
Copy the token and register the NCS1004 with the same token ID.
Configure Smart Licensing
To configure smart licensing in Cisco NCS 1004, perform the following tasks:
Procedure
Step 1
Configure the domain name server for the smart license server.
Example:
RP/0/RP0/CPU0:ios#configure 
Sat Dec 15 15:25:14.385 IST
RP/0/RP0/CPU0:NCS1004(config)#domain name-server 64.102.6.247
Step 2
Setup the CiscoTAC-1 profile and destination address for Smart Call Home, using the following commands:
call-home
service active
contact smart-licensing
profile CiscoTAC-1
active
destination address http {http|https}://{FQDN}/its/service/oddce/services/DDCEService
destination transport-method http
Note
  FQDN must be either Cisco Smart Software Manager FQDN (tools.cisco.com) or Smart Licensing satellite server FQDN. You must configure the DNS server before setting-up the call-home destination address as FQDN. Use the domain name-server {DNS server IP} command to configure the DNS server on the device.
Example:
 domain name-server 64.102.6.247
 call-home
 service active
 contact smart-licensing
 profile CiscoTAC-1
 active
 destination address http https://tools.cisco.com/its/service/oddce/services/DDCEService
 destination transport-method http
Note
  CiscoTAC-1 profile is the default profile for smart licensing and it must not be deleted.
Step 3
Configure the crypto ca Trust point profile, if CRL distribution point is not defined in the Satellite server certificate or if the device is not able to reach the host mentioned in the CRL distribution point.
Example:
RP/0/RP0/CPU0:ios(config)#crypto ca trustpoint Trustpool crl optional
Note
  You must skip step 3, when you configure smart licensing for OTN-XP line card.
Step 4
Create and copy the registration token ID using Cisco Smart Software Manager.
For more details about creating a token, see Creating a Token.
Step 5
In the privileged EXEC mode, register the token ID in Cisco NCS 1004, using the following commands:
license smart register idtoken token-ID
The registration may fail if the token is invalid or there is communication failure between the device and the portal or satellite. If there is a communication failure, there is a wait time of 24 hours before the device attempts to register again. To force the registration, use the license smart register idtoken token-ID force command.
When your device is taken off the inventory, shipped elsewhere for redeployment, or returned to Cisco for replacement using the return merchandise authorization (RMA) process, you can use the license smart deregister command to cancel the registration on your device. All smart licensing entitlements and certificates on the platform are removed.
ID certificates are renewed automatically after six months. In case, the renewal fails, the product instance goes into unidentified state. You can manually renew the ID certificate using the license smart renew id command.
Authorization periods are renewed by the Smart Licensing system every 30 days. As long as the license is in an 'Authorized' or 'Out-of-Compliance' (OOC), the authorization period is renewed. Use the license smart renew auth command to make an on-demand manual update of your registration. Thus, instead of waiting 30 days for the next registration renewal cycle, you can issue this command to instantly find out the status of your license.
After 90 days, the authorization period expires and the status of the associated licenses display "AUTH EXPIRED". Use the license smart renew auth command to retry the authorization period renewal. If the retry is successful, a new authorization period begins.
Verifying Smart Licensing Configuration
Criteria for the License Consumption of Subsea Networks
Criteria for the License Consumption of Long Haul Networks
License Registration
Verifying Smart Licensing Configuration
After enabling Smart Licensing, you can use the show commands to verify the default Smart Licensing configuration. If any issue is detected, take corrective action before making further configurations.
show license all
show license trace all
show license status
show license summary
show license tech
Show license udi
show license usage
show license platform detail
show license platform summary
show license platform trace
Show license platform trace all
show tech-support smartlic
show call-home detail
show call-home trace all
show tech-support call-home
The following table defines the available license authorization status in Cisco NCS 1004:
Table 2. License Authorization Status
License Authorization Status
Description
Unconfigured
Smart Software Licensing is not configured.
Unidentified
Smart Software Licensing is enabled but is not registered.
Registered
Device registration is completed and an ID certificate is received that is used for future communication with the Cisco licensing authority.
Authorized
Registration is completed with a valid Smart Account and license consumption has begun. This indicates compliance.
Out of Compliance
Consumption exceeds available licenses in the Smart Account.
Authorization Expired
The device is unable to communicate with the Cisco Smart Software Manager for an extended period. This state occurs after 90 days of expiry. The device attempts to contact the CSSM every hour to renew the authorization until the registration period expires.
Example 1:
The following example shows the sample output of the show license all command.
RP/0/RP0/CPU0:SIT-5#show license all
Wed Sep 22 17:18:19.761 IST

Smart Licensing Status
======================

Smart Licensing is ENABLED

Registration:
  Status: REGISTERED
  Smart Account: BU Production Test
  Virtual Account: NCS1000
  Export-Controlled Functionality: ALLOWED
  Initial Registration: SUCCEEDED on Jun 21 2021 12:40:52 IST
  Last Renewal Attempt: None
  Next Renewal Attempt: Dec 18 2021 12:40:51 IST
  Registration Expires: Jun 21 2022 12:35:49 IST

License Authorization: 
  Status: AUTHORIZED on Sep 09 2021 11:45:43 IST
  Last Communication Attempt: SUCCEEDED on Sep 09 2021 11:45:43 IST
  Next Communication Attempt: Oct 09 2021 11:45:42 IST
  Communication Deadline: Dec 08 2021 11:40:41 IST

Export Authorization Key:
  Features Authorized:
    <none>

Utility:
  Status: DISABLED

Data Privacy:
  Sending Hostname: yes
    Callhome hostname privacy: DISABLED
    Smart Licensing hostname privacy: DISABLED
  Version privacy: DISABLED

Transport:
  Type: Callhome

Miscellaneus:
  Custom Id: <empty>

License Usage
==============

NCS1K4 - Subsea - 1.2T Line Card (S_NCS1K4_SUBSEA):
  Description: NCS1K4 - Subsea - 1.2T Line Card
  Count: 3
  Version: 1.0
  Status: AUTHORIZED
  Export status: NOT RESTRICTED

NCS1K4 smart license - one QSFP28 client (S-NCS1K4-LIC-100G=):
  Description: NCS1K4 smart license - one QSFP28 client
  Count: 18
  Version: 1.0
  Status: AUTHORIZED
  Export status: NOT RESTRICTED

NCS1K4 smart license - one QSFP28 client with encryption (S-NCS1K4-LIC-100X=):
  Description: NCS1K4 smart license - one QSFP28 client with encryption
  Count: 2
  Version: 1.0
  Status: AUTHORIZED
  Export status: NOT RESTRICTED

NCS1K4 - Long Haul - 1.2T Line Card (S_NCS1K4_LONGHAUL):
  Description: NCS1K4 - Long Haul - 1.2T Line Card
  Count: 2
  Version: 1.0
  Status: AUTHORIZED
  Export status: NOT RESTRICTED

Product Information
===================
UDI: SN:CAT2249B009,UUID:default-sdr

Agent Version
=============
Smart Agent for Licensing: 4.13.32_rel/85

Reservation Info
================ 
License reservation: DISABLED
Example 2:
The following example shows the sample output of the show license platform detail command.
RP/0/RP0/CPU0:ios#show license platform detail
Mon Feb 11 15:59:55.422 IST
Current state:    REGISTERED

Collection: LAST: Mon Feb 11 2019 15:57:53 IST
            NEXT: Mon Feb 11 2019 16:57:53 IST
Reporting:  LAST: Mon Feb 11 2019 15:57:53 IST
            NEXT: Tue Feb 12 2019 15:57:53 IST

Parameters: Collection interval:          60 minute(s)
            Reporting  interval:        1440 minute(s)
            Throughput gauge:        1000000 Kbps

=================================================
Feature/Area 'system'
   Name:  System
   Status:   ACTIVE
   Flags: CONFIG 

   [ 1] Name:  NCS1K4 smart license - one QSFP28 client
        Entitlement Tag: regid.2018-05.com.cisco.S-NCS1K4-LIC-100G=,1.0_03df009f-5ac5-48da-af50-4279ddea5e24
        Count: Last reported:    8
               Next report:      0
   [ 2] Name:  NCS1K4 smart license - one QSFP28 client with encryption
        Entitlement Tag: regid.2018-05.com.cisco.S-NCS1K4-LIC-100X=,1.0_3938b0c5-f635-4426-9f0f-936d930cea9e
        Count: Last reported:    8
               Next report:      0
Example 3:
The following example shows the sample output of the show license status command.
RP/0/RP0/CPU0:ios#show license status
Mon Feb 11 16:02:24.499 IST

Smart Licensing is ENABLED
  Initial Registration: SUCCEEDED on Mon Feb 11 2019 15:51:10 IST
  Last Renewal Attempt: None
  Next Renewal Attempt: Sat Aug 10 2019 15:52:10 IST
  Registration Expires: Tue Feb 11 2020 15:46:59 IST

License Authorization: 
  Status: AUTHORIZED on Mon Feb 11 2019 15:53:40 IST
  Last Communication Attempt: SUCCEEDED on Mon Feb 11 2019 15:53:40 IST
  Next Communication Attempt: Wed Mar 13 2019 15:53:39 IST
  Communication Deadline: Sun May 12 2019 15:47:29 IST
Example 4:
The following example shows the sample output of the show license usage command.
RP/0/RP0/CPU0:ios#show license usage                                                                                                                                        
Mon Feb 11 15:59:29.817 IST                                                                                                                                                    
                                                                                                                                                                               
License Authorization: 
  Status: AUTHORIZED on Mon Feb 11 2019 15:53:40 IST

NCS1K4 smart license - one QSFP28 client (S-NCS1K4-LIC-100G=):
  Description: NCS1K4 smart license - one QSFP28 client
  Count: 8
  Version: 1.0
  Status: AUTHORIZED

NCS1K4 smart license - one QSFP28 client with encryption (S-NCS1K4-LIC-100X=):
  Description: NCS1K4 smart license - one QSFP28 client with encryption
 Count: 8
  Version: 1.0
  Status: AUTHORIZED
Example 5:
The following example shows the sample output of the show license udi command.
RP/0/RP0/CPU0:ios#show license udiMon Feb 11 16:02:46.733 IST

Product Information
===================
UDI: SN:CAT2231B18Y,UUID:default-sdr
Criteria for the License Consumption of Subsea Networks
Table 3. Feature History
Feature Name
Release Information
Feature Description
Licensing Feature Update Cisco IOS XR Release 7.3.2
Criteria for license consumption in Long Haul and Subsea networks are introduced. Long Haul (LH) and Subsea are two trunk-based license models that are implemented regardless of the line rate, in addition to the existing client-based licenses. These license models allow the user to easily track the status of licenses and software usage trends. The long-haul license is required to enable QPSK and 8QAM modes. The subsea license is required to enable BPSK and subsea specific controls such as extended chromatic dispersion, special non-linear compensation settings and so on.
The criteria for license consumption of subsea networks are as follows:
If you configure any of the following configurations on the trunk port and the configurations are present in the output of show running-configuration command, then the license is consumed.
Ios(config-optics)#filter-roll-off-factor <0-1>
Ios(config-optics)#rx-voa target-power <-190,+30>
Ios(config-optics)#rx-voa fixed-ratio <+100,+1700>
Ios(config-optics)#enh-colorless-mode <1-3>
Ios(config-optics)#enh-sop-tol-mode <1-3>
Ios(config-optics)#nleq-comp-mode <1-4>
Ios(config-optics)#cross-pol-gain-mode <1-15>
Ios(config-optics)#cross-pol-weight-mode <1-7>
Ios(config-optics)#cpr-win-mode <1-15>
Ios(config-optics)#cpr-ext-win-mode <1-15>
The license is consumed if the bps value is in the range of 1–2 bits per symbol or 1, excluding the boundary value of 2 in the following command:
show controller optics <trunk-port>
The license is consumed if the cd-min value is less than -10000 or cd-max value is greater than 100000, excluding the boundary values in the output of the following command:
show controller optics <trunk-port>
Example for License Consumption:
The following output of show license usage command shows the license usage count as one.
RP/0/RP0/CPU0:BH-SIT2#show license usage
Tue Aug  3 11:12:42.440 IST
License Authorization:
Status: AUTHORIZED on Aug 03 2021 11:10:12 IST
NCS1K4 - Subsea - 1.2T Line Card (S_NCS1K4_SUBSEA):
Description: NCS1K4 - Subsea - 1.2T Line Card
Count: 1
Version: 1.0
Status: AUTHORIZED
Export status: NOT RESTRICTED
Criteria for the License Consumption of Long Haul Networks
The smart license is consumed if the bps value is in the range of 2–4 bits per symbol including the boundary values in the output of the following command:
show controller optics 0/1/0/1
Example:
show controller optics 0/1/0/1
          Bits per symbol = 3.0000000000 bits/symbol
In the above example, the bits per symbol value is 3, so the license is consumed.

Note
The license is consumed even when the trunk port is in shutdown state.
The license is consumed only when the line card is up and running.
Example for License Consumption:
The following output of show license usage command shows the license usage count as two:
RP/0/RP0/CPU0:SIT-4#show license usage
Tue Aug 3 15:53:48.453 IST
License Authorization:
NCS1K4 - Long Haul - 1.2T Line Card (S_NCS1K4_LONGHAUL):
Description: NCS1K4 - Long Haul - 1.2T Line Card
Count: 2
Version: 1.0
Status: AUTHORIZED
Export status: NOT RESTRICTED
License Registration
You can use the following procedure to register license:
Procedure
Step 1
Register the license using the following command:
RP/0/RP0/CPU:ios#license smart register idtoken <idtoken>
Step 2
Browse to the URL : https://software.cisco.com/software/csws/ws/platform/home#module/SmartLicensing.
Step 3
Click Inventory.
Step 4
Click Product Instances.
Step 5
Select the node instance.
Step 6
Click Actions.
Step 7
Click Remove.
Step 8
Renew the authorization period using the following command:
RP/0/RP0/CPU0:ios#license smart renew auth
RP/0/RP0/CPU0:ios#show logging | i "Data and signature"
Thu May 27 09:57:02.237 UTC
RP/0/RP0/CPU0:May 27 09:54:57.783 UTC: smartlicserver[311]: 
LICENSE-SMART_LIC-3-AUTH_RENEW_FAILED : Authorization renewal with the Cisco Smart Software Manager (CSSM) : 
Error received from Smart Software Manager: Data and signature do not match  for udi PID:8812,SN:FOX2202WIVM 
Note
  The error message in the output of the show logging command is expected and is due to loss of synchronization between the CSSM server and the device after removing the product instance directly from the CSSM server.
Step 9
Perform deregister using the following command:
RP/0/RP0/CPU0:ios#license smart deregister
RP/0/RP0/CPU0:ios#show logging | i DEREG
Thu May 27 14:48:58.170 UTC
RP/0/RP0/CPU0:May 27 09:58:58.464 UTC: smartlicserver[311]: 
%LICENSE-SMART_LIC-3-AGENT_DEREG_FAILED : Smart Agent for Licensing DeRegistration with Cisco Smart Software Manager (CSSM) failed: 
Agent received a failure status in a response message. Please check the Agent log file for the detailed message. 
Note
  The error message in the output of the show logging command is expected.
Smart Licensing for OTN-XP Line Card
Overview
The license calculation is based on 100G client bandwidth and is independent of the client type.
The licensed OTN-XP Line Card PID is NCS1K4-OTN-XPL.
The license is charged based on the usage of 100G client bandwidth.
Checking the License Usage Count
Checking the License Usage Count
You can also check the number of licenses utilised, by entering the show license all command.
Configuring Slice
The following sample shows the configuration of slice 0 in Muxponder mode.
RP/0/RP0/CPU0:ios(config)#hw-module location 0/1 mxponder-slice 0
  trunk-rate 100G
  client-port-rate 2 lane 3 client-type OTU2
  client-port-rate 2 lane 4 client-type OTU2E
  client-port-rate 4 lane 1 client-type 10GE
  client-port-rate 4 lane 2 client-type OTU2
  client-port-rate 4 lane 3 client-type OTU2E
  client-port-rate 4 lane 4 client-type 10GE
  client-port-rate 5 lane 1 client-type OTU2E
  client-port-rate 5 lane 2 client-type 10GE
  client-port-rate 5 lane 3 client-type OTU2
  client-port-rate 5 lane 4 client-type OTU2E
Checking the Slice State
The following sample shows the status of the configured slice as Provisioned.
RP/0/RP0/CPU0:ios#show hw-module location 0/1 mxponder
Fri Dec  6 02:50:32.858 UTC

Location:             0/1
Slice ID:             0
Client Bitrate:       MIXED
Trunk  Bitrate:       100G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
Client Port                     Mapper/Trunk Port    Peer/Trunk Port        OTU40/1/0/0  
                                Traffic Split Percentage

OTU20/1/0/2/3                         NONE           ODU20/1/0/0/2/3           100
OTU20/1/0/4/2                         NONE           ODU20/1/0/0/4/2           100
OTU20/1/0/5/3                         NONE           ODU20/1/0/0/5/3           100
OTU2E0/1/0/2/4                        NONE           ODU2E0/1/0/0/2/4          100
OTU2E0/1/0/4/3                        NONE           ODU2E0/1/0/0/4/3          100
OTU2E0/1/0/5/1                        NONE           ODU2E0/1/0/0/5/1          100
OTU2E0/1/0/5/4                        NONE           ODU2E0/1/0/0/5/4          100
TenGigECtrlr0/1/0/4/1           ODU2E0/1/0/0/4/1          NONE                 100
TenGigECtrlr0/1/0/4/4           ODU2E0/1/0/0/4/4          NONE                 100
TenGigECtrlr0/1/0/5/2           ODU2E0/1/0/0/5/2          NONE                 100
Checking the License Count
The following sample shows the license usage count as 1.
RP/0/RP0/CPU0:ios#show license all 
Fri Dec  6 02:58:39.906 UTC

Smart Licensing Status
======================

Smart Licensing is ENABLED

Registration:
  Status: REGISTERED
  Smart Account: BU Production Test
  Virtual Account: NCS1000
  Export-Controlled Functionality: ALLOWED
  Initial Registration: SUCCEEDED on Dec 06 2019 02:54:27 UTC
  Last Renewal Attempt: None
  Next Renewal Attempt: Jun 03 2020 02:54:26 UTC
  Registration Expires: Dec 05 2020 02:49:42 UTC

License Authorization: 
  Status: AUTHORIZED on Dec 06 2019 02:56:50 UTC
  Last Communication Attempt: SUCCEEDED on Dec 06 2019 02:56:50 UTC
  Next Communication Attempt: Dec 06 2019 14:56:49 UTC
  Communication Deadline: Mar 05 2020 02:52:06 UTC

Export Authorization Key:
  Features Authorized:
    <none>

Utility:
  Status: DISABLED
Data Privacy:
  Sending Hostname: yes
    Callhome hostname privacy: DISABLED
    Smart Licensing hostname privacy: DISABLED
  Version privacy: DISABLED

Transport:
  Type: Callhome

License Usage
==============

NCS 1K4 smart License -  100Gbps of client bandwidth (S-NCS1K4-100G-CL=):
  Description: 100G Client bandwidth - Smart License
  Count: 1
  Version: 1.0
  Status: Authorized
  Export status: NOT RESTRICTED

Product Information
===================
UDI: SN:CAT2217B025,UUID:default-sdr

Agent Version
=============
Smart Agent for Licensing: 4.10.4_rel/21

Reservation Info
================ 
License reservation: DISABLED

Note
The license count for 10GE, OTU2, and OTU2e is calculated as follows:
If 1<= number of client ports used <=10, it implies the "S-NCS1K4-100G-CL=" has license count of 1 and similarly if 11<= number of client ports used <=20, it implies the "S-NCS1K4-100G-CL=" has license count of 2 and so on.
Smart Licensing for QXP Line Card
The license calculation is based on the number of trunk slices provisioned.
Licensed PID for QXP line card is NCS1K4-QXP-L-K9.
Checking the License Usage Count
You can also check the number of licenses utilised, by entering the show license all command.
Configuring Slice
The following sample shows the configuration of slice 0 in 400GE TXP mode.
RP/0/RP0/CPU0:ios#configure 
Thu Oct 21 23:12:12.906 UTC
RP/0/RP0/CPU0:ios(config)#hw-module location 0/1 mxponder-slice 0
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#trunk-rate 400G 
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#client-port-rate 1 client-type 400GE 
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#commit
Checking the Slice State
The following sample shows the status of the configured slice as Provisioned.
RP/0/RP0/CPU0:ios#show hw-module location 0/1 mxponder-slice 0
Thu Oct 21 23:14:08.700 UTC

Location:             0/1
Slice ID:             0
Client Bitrate:       400GE
Trunk  Bitrate:       400G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
ARP Snoop Enabled:    FALSE
Client Port                     Mapper/Trunk Port          CoherentDSP0/1/0/0   
                                Traffic Split Percentage

FourHundredGigECtrlr0/1/0/1              -                            100
Checking the License Count
The following sample shows the license usage count as 2.
RP/0/RP0/CPU0:ios#show license summary 
Tue Dec 28 22:35:29.824 UTC

Smart Licensing is ENABLED

Registration:
  Status: REGISTERED
  Smart Account: BU Production Test 
  Virtual Account: NCS1000
  Export-Controlled Functionality: ALLOWED
  Last Renewal Attempt: None
  Next Renewal Attempt: Jun 26 2022 22:19:25 UTC

License Authorization: 
  Status: AUTHORIZED
  Last Communication Attempt: SUCCEEDED
  Next Communication Attempt: Jan 27 2022 22:33:09 UTC

License Usage:
  License                 Entitlement Tag               Count Status
  -----------------------------------------------------------------------------
  NCS1K4 - QDD TXP Trunk  (S_N1K4_LIC_TRK)                  2 AUTHORIZED
Was this Document Helpful?
Yes No
Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)