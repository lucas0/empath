Configuration Examples and TechNotes
Configuring Multiple VRFs Under a Single VNet Using Nexus Dashboard Orchestrator
Save
Download
Print



Updated:November 30, 2020
Bias-Free Language
Contents
New and Changed Information
Support for Multiple VRFs Under Single VNet
Configuring Multiple VRFs Under a Single VNet in Cisco ACI Multi-Site Orchestrator
Trademarks
New and Changed Information
The following table provides an overview of the significant changes to the organization and features in this guide up to this current release. The table does not provide an exhaustive list of all changes made to the guide or of the new features up to this release.
Table 1. New Features and Changed Behavior
Feature or Change
Description
Where Documented
Initial release of document
Initial release of document.
Support for Multiple VRFs Under Single VNet

Note
The following content refers to "Multi-Site Orchestrator" which has been rebranded to Nexus Dashboard Orchestrator. Same information is applicable to both products.
Beginning with Release 5.1(2), the ability to carve out multiple VRFs has been extended beyond the infra VNet so that you can divide any VNet into multiple VRFs under the same tenant, where multiple VRFs can exist in a single VNet. This is useful for situations such as cloud service access, where you might want to carve out multiple networks (VRFs) within a given VNet, allowing you to have separate routing by having unique route tables for each VRF within the VNet in the cloud.
The following graphic shows an example manged object (MO) relationship tree with multiple VRFs under the same tenant (VNet).
Figure 1.
In this example, two VRFs exist under the same tenant (VNet):
The primary VRF with the name mainVRF
A secondary VRF with the name servicesVRF
A second CIDR block and subnet exists in the same cloud context profile, under the same tenant (VNet), but that second CIDR block and subnet is associated with the secondary VRF in that same VNet.
Configuring Multiple VRFs Under a Single VNet in Cisco ACI Multi-Site Orchestrator
The following procedures describe how to configure multiple VRFs under a single VNet to create the configuration that was described in Support for Multiple VRFs Under Single VNet, where two VRFs exist under the same tenant (VNet):
The primary VRF with the name mainVRF
A secondary VRF with the name servicesVRF
Before you begin
Review the information provided in Support for Multiple VRFs Under Single VNet.
In the Cisco ACI Multi-Site Orchestrator:
Create a new schema or edit an existing one.
Add the necessary sites to the template.
Procedure
Step 1
In the Cisco ACI Multi-Site Orchestrator, click on the template that you want to edit.
The main page for that templates appears.
Step 2
In the middle pane, scroll down to VRFs area.
Step 3
Configure the primary VRF.
Click Add VRF to add the primary VRF.
An Untitled VRF 1 box appears in the VRFs area.
Click the Untitled VRF 1 box.
The configuration information for that VRF appears in the right pane.
Enter a name for the primary VRF (for example, mainVRF).
Associate this VRF with a region (for example, centralus).
From the ACI Multi-Site Orchestrator perspective, this is the tenant or VNet that your VRF is associated with.
Configure the CIDR for the primary VRF.
For example: 192.1.1.1/16
Step 4
Configure the secondary VRF.
Click Add VRF to add the secondary VRF.
An Untitled VRF 1 box appears in the VRFs area.
Click the Untitled VRF 1 box.
The configuration information for that VRF appears in the right pane.
Enter a name for the secondary VRF (for example, servicesVRF).
Note that you will not be associating this secondary VRF with a region. That's because this secondary VRF will be associated with region that is associated with the primary VRF.
Step 5
In the middle pane, click on the primary VRF again (mainVRF) .
The configuration information for the primary VRF appears in the right pane.
Step 6
Click on the region that is associated with the primary VRF (centralus).
The Update Cloud Region CIDRs window appears.
Step 7
Click Add CIDRs, then enter the CIDR information that will be used for the secondary VRF.
For example: 192.2.2.2/16
Step 8
Verify that the selection in the CIDR Type field is set to Secondary.
Step 9
In the Select Associated VRF field, choose Hosted VRF.
The VRF field appears.
Step 10
In the VRF field, choose the secondary VRF (servicesVRF).
Step 11
Enter subnet information, if necessary, then click Save.
The two CIDRs appear under the region in the primary VRF:
A first CIDR, which is associated with the primary VRF (mainVRF)
A second CIDR, which is associated with the secondary VRF (servicesVRF)
Trademarks
THE SPECIFICATIONS AND INFORMATION REGARDING THE PRODUCTS REFERENCED IN THIS DOCUMENTATION ARE SUBJECT TO CHANGE WITHOUT NOTICE. EXCEPT AS MAY OTHERWISE BE AGREED BY CISCO IN WRITING, ALL STATEMENTS, INFORMATION, AND RECOMMENDATIONS IN THIS DOCUMENTATION ARE PRESENTED WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED.
The Cisco End User License Agreement and any supplemental license terms govern your use of any Cisco software, including this product documentation, and are located at: http://www.cisco.com/go/softwareterms.Cisco product warranty information is available at http://www.cisco.com/go/warranty. US Federal Communications Commission Notices are found here http://www.cisco.com/c/en/us/products/us-fcc-notice.html.
IN NO EVENT SHALL CISCO OR ITS SUPPLIERS BE LIABLE FOR ANY INDIRECT, SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST PROFITS OR LOSS OR DAMAGE TO DATA ARISING OUT OF THE USE OR INABILITY TO USE THIS MANUAL, EVEN IF CISCO OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
Any products and features described herein as in development or available at a future date remain in varying stages of development and will be offered on a when-and if-available basis. Any such product or feature roadmaps are subject to change at the sole discretion of Cisco and Cisco will have no liability for delay in the delivery or failure to deliver any products or feature roadmap items that may be set forth in this document.
Any Internet Protocol (IP) addresses and phone numbers used in this document are not intended to be actual addresses and phone numbers. Any examples, command display output, network topology diagrams, and other figures included in the document are shown for illustrative purposes only. Any use of actual IP addresses or phone numbers in illustrative content is unintentional and coincidental.
The documentation set for this product strives to use bias-free language. For the purposes of this documentation set, bias-free is defined as language that does not imply discrimination based on age, disability, gender, racial identity, ethnic identity, sexual orientation, socioeconomic status, and intersectionality. Exceptions may be present in the documentation due to language that is hardcoded in the user interfaces of the product software, language used based on RFP documentation, or language that is used by a referenced third-party product.
Cisco and the Cisco logo are trademarks or registered trademarks of Cisco and/or its affiliates in the U.S. and other countries. To view a list of Cisco trademarks, go to this URL: www.cisco.com go trademarks. Third-party trademarks mentioned are the property of their respective owners. The use of the word partner does not imply a partnership relationship between Cisco and any other company. (1721R)
Copyright Â© 2022, Cisco Systems, Inc. All rights reserved.
Was this Document Helpful?
Yes No Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)
This Document Applies to These Products
Cloud Network Controller
Nexus Dashboard Orchestrator