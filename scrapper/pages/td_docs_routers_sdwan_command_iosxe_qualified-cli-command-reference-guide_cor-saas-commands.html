Command References
Cisco IOS XE SD-WAN Qualified Command Reference
Bias-Free Language
Book Contents
Download
Print
Updated:
April 18, 2021
Chapter: Cloud onRamp for SaaS Commands
Chapter Contents
probe-path load-balance-dia latency-variance
probe-path load-balance-dia loss-variance
probe-path load-balance-dia source-ip-hash
probe saas-app
probe saas-app webex
probe-path load-balance-dia latency-variance
To configure the latency variance for Cloud onRamp for SaaS load balancing, use the probe-path load-balance-dia latency-variance command in global configuration mode. To disable Cloud onRamp for SaaS load balancing, use the no form of the command.
probe-path load-balance-dia latency-variance latency-variance
no probe-path load-balance-dia latency-variance
Syntax Description
latency-variance
To use another interface for load balancing, the latency value of the interface cannot vary from the latency of the best path interface by more than this number of milliseconds.
You can configure a smaller value to restrict load balancing only to interfaces with a latency value very close to that of the best path interface, or you can configure a larger value to be more inclusive of interfaces that might have a higher latency than the best path interface.
For example, if the best path interface has a latency of 5 milliseconds, and the latency-variance is set to 15, then another interface can be used for load balancing only if its latency is no more than 20 milliseconds.
Range: 1 to 1000 (milliseconds)
Default: 50
Command Default
50 milliseconds
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.5.1a
This command was introduced.
Usage Guidelines

Note
We recommend configuring Cloud onRamp for SaaS load balancing using Cisco SD-WAN Manager, not by CLI.
By default, Cloud onRamp for SaaS load balancing is disabled. Any of the following commands can enable Cloud onRamp for SaaS load balancing:
probe-path load-balance-dia latency-variance
probe-path load-balance-dia loss-variance
probe-path load-balance-dia source-ip-hash
Using the no form of each of the commands disables Cloud onRamp for SaaS load balancing after it has been enabled:
no probe-path load-balance-dia latency-variance
no probe-path load-balance-dia loss-variance
no probe-path load-balance-dia source-ip-hash
After determining the best path interface for a cloud application, Cloud onRamp for SaaS compares the performance statistics for other interfaces. To use another interface for load balancing, the following must be true:
The packet loss value of the interface must be within a configured percentage of the value for the best path interface. See the probe-path load-balance-dia loss-variance command.
The latency value of the interface cannot vary from the latency of the best path interface by more than a configured number of milliseconds (configured by this command).
Example
The following example configures a latency variance of 50 milliseconds.
Device(config)# probe-path load-balance-dia latency-variance 50
Example
The show full-configuration probe-path load-balance-dia command displays the currently configured parameters for Cloud onRamp for SaaS load balancing.
Device(config)# show full-configuration probe-path load-balance-dia
probe-path load-balance-dia latency-variance 50
probe-path load-balance-dia loss-variance 30
probe-path load-balance-dia source-ip-hash false
Example
The no form of each of the following commands disables Cloud onRamp for SaaS load balancing.
Device(config)# no probe-path load-balance-dia latency-variance
Device(config)# no probe-path load-balance-dia loss-variance
Device(config)# no probe-path load-balance-dia source-ip-hash
probe-path load-balance-dia loss-variance
To configure the packet loss variance for Cloud onRamp for SaaS load balancing, use the probe-path load-balance-dia loss-variance command in global configuration mode. To disable Cloud onRamp for SaaS load balancing, use the no form of the command.
probe-path load-balance-dia loss-variance loss-variance
no probe-path load-balance-dia loss-variance
Syntax Description
loss-variance
To use another interface for load balancing, the packet loss value of the interface must be within the percentage configured with loss-variance , compared with the value for the best path interface.
You can configure a smaller value to restrict load balancing only to interfaces with a packet loss value very close to that of the best path interface, or you can configure a larger value to be more inclusive of interfaces that might have a higher packet loss than the best path interface.
For example, if the best path interface has a packet loss value of 2% and the loss-variance value is 10, then another interface can be used for load balancing only if its packet loss value is no more than 12%.
Range: 1 to 100 (percent)
Default: 10
Command Default
10
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.5.1a
This command was introduced.
Usage Guidelines

Note
We recommend configuring Cloud onRamp for SaaS load balancing using Cisco SD-WAN Manager, not by CLI.
By default, Cloud onRamp for SaaS load balancing is disabled. Any of the following commands can enable Cloud onRamp for SaaS load balancing:
probe-path load-balance-dia latency-variance
probe-path load-balance-dia loss-variance
probe-path load-balance-dia source-ip-hash
Using the no form of each of the commands disables Cloud onRamp for SaaS load balancing after it has been enabled:
no probe-path load-balance-dia latency-variance
no probe-path load-balance-dia loss-variance
no probe-path load-balance-dia source-ip-hash
After determining the best path interface for a cloud application, Cloud onRamp for SaaS compares the performance statistics for other interfaces. To use another interface for load balancing, the following must be true:
The packet loss value of the interface must be within a configured percentage of the value for the best path interface (configured by this command).
The latency value of the interface cannot vary from the latency of the best path interface by more than a configured number of milliseconds. See the probe-path load-balance-dia latency-variance command.
Example
The following example configures a packet loss variance of 30 percent.
Device(config)# probe-path load-balance-dia loss-variance 30
Example
The show full-configuration probe-path load-balance-dia command displays the currently configured parameters for Cloud onRamp for SaaS load balancing.
Device(config)# show full-configuration probe-path load-balance-dia
probe-path load-balance-dia latency-variance 50
probe-path load-balance-dia loss-variance 30
probe-path load-balance-dia source-ip-hash false
Example
The no form of each of the following commands disables Cloud onRamp for SaaS load balancing.
Device(config)# no probe-path load-balance-dia latency-variance
Device(config)# no probe-path load-balance-dia loss-variance
Device(config)# no probe-path load-balance-dia source-ip-hash
probe-path load-balance-dia source-ip-hash
To ensure that all traffic from a single host uses a single interface, when using Cloud onRamp for SaaS load balancing, use the probe-path load-balance-dia source-ip-hash command in global configuration mode. To disable this option, use the no form of this command.
probe-path load-balance-dia source-ip-hash
no probe-path load-balance-dia source-ip-hash
Command Default
Disabled
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.5.1a
This command was introduced.
Usage Guidelines

Note
We recommend configuring Cloud onRamp for SaaS load balancing using Cisco SD-WAN Manager, not by CLI.
By default, Cloud onRamp for SaaS load balancing is disabled. Any of the following commands can enable Cloud onRamp for SaaS load balancing:
probe-path load-balance-dia latency-variance
probe-path load-balance-dia loss-variance
probe-path load-balance-dia source-ip-hash
Using the no form of each of the commands disables Cloud onRamp for SaaS load balancing after it has been enabled:
no probe-path load-balance-dia latency-variance
no probe-path load-balance-dia loss-variance
no probe-path load-balance-dia source-ip-hash
Cloud onRamp for SaaS determines the best network path for each type of cloud traffic. However, if multiple direct internet access (DIA) interfaces on a WAN edge device at a branch site provide acceptable performance for a cloud application, Cloud onRamp for SaaS can employ load balancing across multiple interfaces to further improve performance. When you enable load balancing across multiple interfaces of a WAN edge devices, load balancing is enabled for all cloud applications that are managed by Cloud onRamp for SaaS.
If you want all traffic from a single host, such as a device within your network, to use a single interface (not load balancing), you can enable this option. For example, you may want DNS and application traffic from a device to use the same interface. Use the probe-path load-balance-dia source-ip-hash command to configure this.
Example
Device(config)# probe-path load-balance-dia source-ip-hash
Example
The show full-configuration probe-path load-balance-dia command displays the currently configured parameters for Cloud onRamp for SaaS load balancing.
Device(config)# show full-configuration probe-path load-balance-dia
probe-path load-balance-dia latency-variance 50
probe-path load-balance-dia loss-variance 30
probe-path load-balance-dia source-ip-hash false
Example
Executing the no form of each of the following commands disables Cloud onRamp for SaaS load balancing.
Device(config)# no probe-path load-balance-dia latency-variance
Device(config)# no probe-path load-balance-dia loss-variance
Device(config)# no probe-path load-balance-dia source-ip-hash
probe saas-app
To define a SaaS application list for Cloud onRamp for SaaS, use the probe saas-app command in global configuration mode. To remove a SaaS application list, use the no form of the command.

Note
We do not recommend using this command. We recommend using Cisco SD-WAN Manager to configure this feature. Configuring Cloud onRamp for SaaS features using CLI commands causes devices to be out of synchronization with Cisco SD-WAN Manager.
probe saas-app applist-name application [ application ... ] { endpoint-ip ip-address | endpoint-fqdn fqdn | endpoint-url url }
no probe saas-app applist-name
Syntax Description
applist-name
Name of the SaaS application list.
application
Applications to include in the SaaS application list.
Minimum number of applications: 1
Maximum number of applications: 8
endpoint-ip ip-address
IP address of the application server to probe. Cloud onRamp for SaaS probes the server using port 80.
endpoint-fqdn fqdn
Fully qualified domain name of the application server to probe. Cloud onRamp for SaaS probes the server using port 80.
endpoint-url url
A URL using HTTP or HTTPS of the application server to probe. Cloud onRamp for SaaS probes the server using port 80 or port 443, depending on the URL provided.
Command Default
By default, no application list is defined.
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Example
The following example creates a SaaS application list called example-apps that includes two applications (example-audio and example-video) and specifies www.example.com as the endpoint for probing to find the best path.
probe saas-app example-apps
  app example-audio
  app example-video
  endpoint-fqdn www.example.com
probe saas-app webex
To enable Cloud onRamp for SaaS to determine the best path for network traffic for Webex, use the probe saas-app webex command in global configuration mode.

Note
We do not recommend using this command. It requires an understanding of Webex server information and knowledge of how to configure region-name, region-id, and endpoint-fqdn. In addition, using this command can cause a device to go out of synchronization with the configuration of Cloud onRamp for SaaS by Cisco SD-WAN Manager.
probe saas-app webex region region-name id region-id endpoint-fqdn server-fqdn
Syntax Description
region region-name
Region of the Webex server.
id region-id
Region ID of the Webex server.
endpoint-fqdn server-fqdn
Fully qualified domain name of the Webex server.
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.7.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines

Note
We do not recommend using this command. It requires an understanding of Webex server information and knowledge of how to regions and ID's. In addition, using this command can cause a device to go out of synchronization with the configuration of Cloud onRamp for SaaS by Cisco SD-WAN Manager.
The following example configures two webex servers.
probe
saas-app webex
  region ap-east-1
   id 231
   endpoint-fqdn  pinger.ap-east-1.net.infra.webex.com
     
  !
  region ap-northeast-1
   id 221
   endpoint-fqdn  pinger.ap-northeast-1.net.infra.webex.com
  !
Was this Document Helpful?
Yes No
Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)