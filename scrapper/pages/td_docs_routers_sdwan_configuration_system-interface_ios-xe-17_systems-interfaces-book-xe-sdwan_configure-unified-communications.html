End-User Guides
Cisco SD-WAN Systems and Interfaces Configuration Guide, Cisco IOS XE Release 17.x
Bias-Free Language
Book Contents
Translations
Download
Print
Updated:
July 2, 2020
Chapter: Cisco Unified Communications Voice Services
Chapter Contents
Table 1. Feature History
Feature Name
Release Information
Description
Integration with Cisco Unified Communications
Cisco IOS XE Release 17.3.1a
Cisco vManage Release 20.3.1
This release adds support for using a feature template to enable Cisco IP-based media services.
Cisco IOS XE Release 17.2.1r
This feature lets you use feature templates and voice policies to enable Cisco Unified Communications (UC) voice services for supported routers. When Cisco UC voice services are enabled, routers can process calls for various endpoints, including voice ports, POTS dial peers, SIP dial peers, and phone profiles in Cisco Unified SRST mode.
You can configure items for UC voice services from the Feature tab and the Voice Policy page for a supported device.
Configuring UC voice services for Cisco Unified Communications requires that Cisco vManage runs Cisco SD-WAN Release 20.1.1.
This feature is supported on Cisco 4000 Series Integrated Services Routers.
You can configure feature templates and voice policies to enable Cisco Unified Communications (UC) voice services for supported routers. These templates and policies configure parameters for FXO, FXS, and FXS/DID interfaces on these routers. Beginning with Cisco IOS XE Release 17.3.1a, parameters for PRI ISDN too can be configured. In addition, you can use the DSPFarm feature template to enable Cisco IP-based media services.
When Cisco UC voice services are enabled, routers can process calls for various endpoints, including voice ports for analog interfaces and digital interfaces, POTS dial peers, SIP dial peers, and phone profiles in Cisco Unified SRST mode.
Configuring UC voice services for Cisco Unified Communications requires that Cisco vManage runs Cisco SD-WAN Release 20.3.
For more detailed information about commands to configure and maintain Cisco IOS voice applications, see Cisco IOS Master Command List.
The following describe the general steps that you perform to configure, in various scenarios, voice services for Cisco Unified Communications:
Workflow for initial configuration of Cisco SD-WAN for Cisco Unified Communications.
Step 1—Add a voice card feature template.
Step 2—Add a call routing feature template.
Step 3—(Optional) Add an SRST feature template.
Step 4—(Optional) Add a DSPFarm Feature Template.
Step 5—(Optional) Add a voice policy.
Step 6—Provision a device template for Unified Communications.
Workflow for adding a voice port, POTS dial peer, SIP dial peer, or SRST phone profile subpolicy to a voice policy.
Step 1—Detach the device templates that include the UC voice policy and UC-specific feature templates.
Step 2—Add the subpolicy to the voice policy.
Step 3—Map the updated voice policy to endpoints as needed.
Step 4—Attach the feature templates to a device template.
Workflow for updating feature templates to add or delete UC endpoints.
Step 1—Detach the device templates that include the voice card UC-specific feature templates and a voice policy.
Step 2—Update the voice card feature templates as needed.
Step 3—Map the updated voice policy to endpoints as needed.
Step 4—Attach the feature templates to a device template.
Workflow for updating configuration parameters when the functionality of a voice port changes.
Step 1—Detach the device templates that include the voice card UC-specific feature templates and an associated voice policy mapping.
Step 2—Update the voice card feature template and voice policy as needed.
Step 3—Map the updated voice policy to endpoints as needed.
Step 4—Attach the feature templates and the voice policy to a device template.
Workflow for changing the interface type for a T1/E1 voice module.
Step 1—Detach the device template that includes the voice card feature template that defines the T1/E1 voice module, and detach the associated mapped voice policy.
Step 2—Unmap all voice policies from the PRI ISDN voice ports that are configured for the T1/E1 voice module, and unmap the POTS dial-peers for those ports.
Step 3—In the voice card feature template, delete the PRI ISDN voice ports that are configured for the T1/E1 voice module.
Step 4—Reattach the device template to devices.
Step 5—Reload the devices.
Step 6—Detach the device template from the devices.
Step 7—In the voice card feature template create new PRI ISDN voice ports for the T1/E1 voice module as needed.
Step 8—Map the voice card feature template and voice policy to the device template.
Step 9—Map the updated voice policy to the newly created PRI ISDN voice ports as needed.
Step 10—Reattach the device template to devices.
Workflow for updating the clock source configuration for a T1/E1 voice module to change the primary and secondary clock sources.
Step 1—In the voice card feature template for the T1/E1 voice module that you want to update, set the clock source for each PRI ISDN voice ports to Line, and push the configuration to devices.
Step 2—After the configuration is pushed successfully, in the voice card feature template set the clock source for each PRI ISDN voice port for the T1/E1 voice module to the desired values, and push the configuration to devices.
Add a Voice Card Feature Template
Add a Call Routing Feature Template
Add an SRST Feature Template
Add a DSPFarm Feature Template
Add a Voice Policy
Provision a Device Template for Unified Communications
Dial Peer CSV File
Translation Rules CSV File
Monitoring UC Operations
Cisco Unified Communications FXS and FXO Caller ID Support
Add a Voice Card Feature Template
A voice card feature template configures analog and PRI ISDN digital interfaces, which provide configuration settings for ports on voice cards in routers.
When you add a voice card feature template, for an analog interface, you configure the type of voice card you are configuring, port information for the card, and parameters for the service that you receive from your service provider. For a digital interface, you configure the type of voice card, the T1 or E1 controller, and related parameters.
When you add a module for a voice card, Cisco vManage assists you with the placement of the module by displaying available slots and sub-slots for the module. Cisco vManage determines the available slots and sub-slots based on the device model.
The following table describes options for configuring an analog interface.
Table 2. Analog Interface Configuration Options
Option
Description
Cisco IOS CLI Equivalent
Module
Select the type of voice module that is installed in the router.
—
Module Slot/Sub-slot
Enter the slot and sub-slot of the voice module.
voice-card slot/subslot
Use DSP
Enable this option if you want to use the built-in DSPs on the network interface module for TDM calls.
no local-bypass
Port Type
Select the type of ports on the voice module that you are configuring for this interface (FXS or FXO). You can select All to define the port type for all ports of the selected type, or Port Range to define the port type for a specified range of ports.
Using Port Range, you can create analog interfaces as described later in this procedure to configure different ranges of ports.
—
Description
Enter a description of the selected port or ports. For example, fax machine or paging system.
description string
Secondary Dialtone
Available if you select FXO from the Port Type drop-down list.
Set to On if you want the selected ports to generate a secondary dial tone when callers access an outside line.
secondary dialtone
Connection PLAR
Enter the Private Line Automatic Ringdown extension to which the selected ports forward inbound calls.
connection plar digits
OPX
Available if you select FXO from the Port Type drop-down list.
Check this option if you want to enable Off-Premises Extension for the PLAR extension.
connection plar opx digits
Signal Type
Select the Signal Type that indicates an on-hook or off-hook condition for calls that the ports receive. Options are Loopstart, Groundstart, or DID. The DID option is available if you select FXS from the Port Type drop-down list.
signal {groundstart | loopstart}
signal did {delay-dial | immediate | wink-start}
Caller-ID Enable
Available if you select a signal type of Loopstart or Groundstart.
Set to ON if you want to enable caller ID information for inbound calls.
caller-id enable
DID Signal Mode
Available if you select a signal type of DID.
Choose the mode for the DID signal type (Delay Dial, Immediate, or Wink Start).
Default: Wink Start.
signal did {delay-dial | immediate | wink-start}
Shutdown
Set to ON if you want to shut down ports that are not being used.
Default: Off.
shutdown
The following table describes options for configuring a digital interface.
Table 3. Digital Interface Configuration Options
Option
Description
Cisco IOS CLI Equivalent
Digital Interface Tab
Provides options for configuring parameters for a T1/E1 voice module and the clock source for the module ports. Before you configure these options, ensure that you have the appropriate DSP module installed for each T1/E1 voice module.
Module
Select the type of T1/E1 voice module that is installed in the router.
—
Interface Type
Select the type of interface on the voice module:
T1 PRI—Specifies T1 connectivity of 1.544 Mbps through the telephone switching network, using AMI or B8ZS coding
E1 PRI—Specifies a wide-area digital transmission scheme used predominantly in Europe that carries data at a rate of 2.048 Mbps
card type {t1 | e1} slot sub-slot
Slot/Sub-slot
Enter the slot and sub-slot of the voice module.
voice-card slot/sub-slot
Use DSP
Enable this option if you want to use the built-in DSPs on the network interface module for TDM calls.
no local-bypass
Interface
Perform these actions to configure the number of T1/E1 ports to be provisioned on the module, and the clock source for each port:
Click Add. The Port and Clock Selector window displays.
Check the check box that corresponds to each port that you want to configure. The number of ports that you can configure depends on the Module type that you select.
For each port, select the clock source:
Line—Sets the line clock as the primary clock source. With this option, the port clocks its transmitted data from a clock that is recovered from the line receive data stream.
Primary Clock—Sets the port to be a primary clock source.
Secondary Clock—Sets the port to be a secondary clock source.
Network—Sets the backplane clock or the system oscillator clock as the module clock source.
We recommend that you set one port to be the primary clock and set another port going to the same network as a secondary clock source to act as a backup.
Click Add.
controller {t1 | e1} slot/sub-slot/number
clock source {network | line | line primary | line secondary}
Network Participation
This check box displays after you add an interface.
Check this check box to configure the T1/E1 module to participate in the backplane clock.
Uncheck this check box to remove the clock synchronization with the backplane clock for the module.
By defult, this check box is checked.
network-clock synchronization participate slot/sub-slot
Shutdown
Perform these actions to disable or enable the controller, serial interface, or voice port that is associated with the interface port.
Click Shutdown Selected. The Shutdown window displays.
For each port, select the item or items that you want to enable (Controller, Serial, or Voice Port. If you do not select an item, it is enabled.
Click Add.
controller e1/t1 slot/sub-slot/port shutdown
interface serial slot/sub-slot/port:{ 15 | 23} shutdown
voice-port slot/sub-slot/port:{ 15 | 23} shutdown
Time Slots
Select the number of time slots of the interface type.
Valid ranges:
For T1 PRI—Time slots 1 through 24. The 24th time slot is the D channel.
For E1 PRI— Time slots 1 through 31. The 16th time slot is the D channel.
controller e1/t1 slot/sub-slot/port
pri-group timeslots timeslot-range [voice-dsp]
Framing
Select the frame type for the interface type.
For a T1 PRI interface type, options are:
esf—Extended super frame (default)
sf—Super frame
For an E1 PRI interface type, options are:
crc4—CRC4 framing type (default)
no-crc4—No CRC4 framing type
controller t1 slot/sub-slot/port framing [esf | sf]
controller e1 slot/sub-slot/port framing [crc4 | no-crc4] [australia]
Australia
This check box displays when you select E1 PRI for the interface type.
Check this check box to use the australia framing type.
controller e1 slot/sub-slot/port framing [crc4 | no-crc4] australia
Line Code
Select the line code type for the interface type.
For a T1 PRI interface type, options are:
ami—Use Alternate Mark Inversion as the line code type
b8zs—Use binary 8-zero substitution as the line code type (default)
For an E1 PRI interface type, options are:
ami—Use Alternate Mark Inversion as the line code type
hdb3—Use high-density binary 3 as the line code type (default)
controller t1 slot/sub-slot/port linecode [ami | b8zs]
controller e1 slot/sub-slot/port linecode [ami | hdb3]
Line Termination
This check box appears only for an Interface type of E1 PRI.
Select the line termination type for the E1 controller:
75-ohm—75 ohm unbalanced termination
120-ohm—120 ohm balanced termination (default)
controller e1 slot/sub-slot/port line-termination {75-ohm | 120-ohm}
Cable Length Type
This check box appears only for an Interface type of T1 PRI.
Select the cable length type for the T1 PRI interface type:
long—Long cable length
short—Short cable length
controller t1 slot/sub-slot/port cablelength {short | long}
Cable Length
This check box appears only for an interface type of T1 PRI.
Select the cable length for the T1 PRI interface type. Use this option to fine-tune the pulse of a signal at the receiver for a T1 cable.
The default value is 0db.
controller t1 slot/sub-slot/port cablelength {[short [110ft | 220ft | 330ft | 440ft | 550ft | 660ft ]] [long [-15db | -22.5db | -7.5db | 0db ]]}
Network Side
Enable this option to have the device use the standard PRI network-side interface.
By default, this option is disabled (set to No).
interface serial slot/sub-slot/port:{15| 23}
isdn protocol-emulate [network| user]
Switch Type
Select the ISDN switch type for this interface:
primary-qsig—Supports QSIG signaling according tot the Q.931 protocol. Network side functionality is assigned with the isdn protocol-emulate command.
primary-net5—NET5 ISDN PRI switch types for Asia, Australia, and New Zealand. ETSI-compliant switches for Euro-ISDN E-DSS1 signaling system.
primary-ntt—Japanese NTT ISDN PRI switches.
primary-4ess—Lucent (AT&T) 4ESS switch type for the United States.
primary-5ess—Lucent (AT&T) 5ESS switch type for the United States.
primary-dms100—Nortel DMS-100 switch type for the United States.
primary-ni—National ISDN switch type.
interface serial slot/sub-slot/port:{15| 23}
isdn switch-type [primary-4ess | primary-5ess |primary-dms100 | primary-net5 | primary-ni | primary-ntt | primary-qsig]
ISDN Timer
Perform these actions to configure the ISDN timers for the interface:
Click Add. The ISDN Timer window displays.
Configure the following timers as needed. The values are in milliseconds.
T200. Valid range: integers 400 through 400000. Default: 1000.
T203. Valid range: integers 400 through 400000. The default value is based on the switch type and network side configurations.
T301. Valid range: integers 180000 through 86400000. The default value is based on the switch type and network side configurations.
T303. Valid range: integers 400 through 86400000. The default value is based on the switch type and network side configurations.
T306. Valid range: integers 400 through 86400000. Default: 30000.
T309. Valid range: integers 0 through 86400000. The default value is based on the switch type and network side configurations.
T310. Valid range: integers 400 through 400000. The default value is based on the switch type and network side configurations.
T321. Valid range: Integers 0 through 86400000. The default value is based on the switch type and network side configurations.
Click Add.
interface serial slot/sub-slot/port:{15| 23}
isdn timer T200 value
isdn timer T203 value
isdn timer T301 value
isdn timer T303 value
isdn timer T306 value
isdn timer T309 value
isdn timer T310 value
isdn timer T321 value
Delay Connect Timer
Select the duration, in milliseconds, to delay connect a PRI ISDN hairpin call.
Valid range: integers 0 through 200. Default: 20.
voice-port slot/sub-slot/port:{15| 23} timing delay-connect value
Clock Tab
Use this tab to configure priority order for the primary and secondary clock sources that you selected for each module.
This tab is vailable after you configure a PRI ISDN digital interface and click Add.
Clock Priority Sorting
Configure the priority of up to six clock sources.
The drop-down list displays the interface ports for which a primary or secondary clock source is defined and that is configured for network participation.
Check a check box to select the port for inclusion in the priority list, and use the Up arrow next to a port to change its priority. The list displays the ports in order of priority, with the port with the highest priority at the top of the list.
After you configure the priority, this field displays the selected ports in priority order.
We recommend that all ports in the priority list be of the same type, either E1-PRI or T1-PRI.
network-clock input-source priority controller [t1| e1] slot/sub-slot/port
Automatically Sync
Select Add to enable network synchronization between all modules and the router.
Default: On.
network-clock synchronization automatic
Wait to restore clock
Enter the amount of time, in milliseconds, that the router waits before including a primary clock source in the clock selection process.
Valid range: 0 through 86400. Default: 300.
network-clock wait-to-restore milliseconds
To add a voice card feature template:
From the Cisco vManage menu, choose Configuration > Templates.
Click Feature Templates, and click Add Template.

Note
In Cisco vManage Release 20.7.x and earlier releases, Feature Templates is called Feature.
Select the supported device to which you want to add voice services.
Select Voice Card from the Unified Communications templates.
In Template Name, enter a name for the template.
This field may contain uppercase and lowercase letters, digits 0 through 9, hyphens (-), and underscores (_).
In Description, enter a description for the template.
This field can contain any characters and spaces.
To configure an analog interface, click New Analog Interface and configure interface options as described in the "Analog Configuration Options" table.
From Cisco IOS XE Release 17.3.1a, click Analog Interface in the Interface area to access New Analog Interface.
You can add as many analog interfaces as needed, based on the number of interfaces that your module supports.
After you configure each analog interface, click Add.
If any analog interfaces are already configured, they appear in the interfaces table on this page. To edit an existing interface, click … and click its pencil icon to edit the options in the window that pops up as described in the "Analog Configuration Options" table, and click Save Changes. To delete an interface, click … and click the trash can icon.
To configure a PRI ISDN digital interface, in the Interface area, click Digital Interface, click New Digital Interface, and configure interface options as described in the "Digital Interface Configuration Options" table.
After you configure each PRI ISDN digital interface, click Add.
Based on the number of interfaces that your module supports, you can add as many PRI ISDN digital interfaces as needed.
If any digital interfaces are already configured, they appear in the interfaces table on this page. To edit an existing interface, click ... and click its pencil icon to edit the options in the window that pops up as described in the "Digital Interface Configuration Options" table, and click Save Changes. To delete an interface, click …, and click its trash can icon.
After you save the interface configuration, you cannot change the module type, interface type, slot or sub-slot, or time slots.
If you want to change time slots, you must delete the interface and create a new one.
If you want to change the module type, interface type, and slot or sub-slot, detach the template from the device, unmap the voice policies that are associated with the interfaces, and delete all interfaces that are associated with the module and slot or sub-slot. Next, push the template to the device, reload the device, and create new required interfaces. Finally, push the new template to the device, and reattach the template to the device.
Click Save.
(Optional) If you want to configure more analog or PRI ISDN digital interfaces for this template, then:
From the Cisco vManage menu, choose Configuration > Templates.
Click Feature Templates.

Note
In Cisco vManage Release 20.7.x and earlier releases, Feature Templates is called Feature.
Click ... for the template you wish to configure, and click Edit.
Repeat Step 7 or Step 8 and Step 9.
Add a Call Routing Feature Template
A call routing feature template configures parameters for TDM-SIP trunking, including trusted IP addresses for preventing toll fraud, and a dial plan. A dial plan, made up of dial peers, defines how a router routes traffic to and from voice ports to the PSTN or to another branch.
The following table describes global options for configuring call routing.
Table 4. Global Call Routing Options
Option
Description
Cisco IOS CLI Equivalent
Trusted IPv4 Prefix List
Enter the IPv4 addresses with which the router can communicate through SIP.
Enter each IPv4 address in CIDR format. For example, 10.1.2.3/32. Separate each address with a comma (,).
The router does not communicate with other IPv4 addresses, which prevents fraudulent calls being placed through the router.
A Trusted IPv4 Prefix is required for TDM to IP calls.
voice service voip
ip address trusted list
ipv4 ipv4-address/ipv4-network-mask
Trusted IPv6 Prefix List
Enter the IPv6 addresses with which the router can communicate through SIP.
Separate each IPv6 address with a comma (,).
The router does not communicate with other IPv6 addresses, which prevents fraudulent calls being placed through the router.
A Trusted IPv6 Prefix is required for TDM to IP calls.
voice service voip
ip address trusted list
ipv6 ipv6-prefix//prefix-length
Source Interface
Enter the name of the source interface from which the router initiates SIP control and media traffic.
This information defines how the return/response to this traffic should be sent.
voice service voip
sip
bind control source-interface interface-id
bind media source-interface interface-id
The following table describes options for configuring dial peers.
Table 5. Dial Peer Options
Option
Description
Cisco IOS CLI Equivalent
Voice Dial Peer Tag
Enter a number to be used to reference the dial peer.
dial-peer voice number {pots | voip}
Dial Peer Type
Select the type of dial peer that you are creating (POTS or SIP).
dial-peer voice number {pots | voip}
Direction
Select the direction for traffic on this dial peer (Incoming or Outgoing).
Incoming:
dial-peer voice number {pots | voip}
incoming called-number string
Outgoing:
dial-peer voice number {pots | voip}
destination-pattern string
Description
Enter a description of this dial peer.
description
Numbering Pattern
Enter a string that the router uses to match incoming calls to the dial peer.
Enter the string as an E.164 format regular expression in the form [0-9,A-F#*.?+%()-]*T?.
Incoming:
dial-peer voice number {pots | voip}
incoming called-numberstring
Outgoing:
dial-peer voice number {pots | voip}
destination-pattern string
Forward Digits Type
Available if you select the POTS dial peer type and the Outgoing direction.
Select how the dial peer transmits digits in outgoing numbers:
All—The dial peer transmits all digits
None—The dial peer does not transmit digits that do not match the destination pattern
Some—The dial peer transmits the specified number of right-most digits
Default: None.
All:
dial-peer voice number pots
forward-digits all
None:
dial-peer voice number pots
forward-digits 0
Some:
dial-peer voice number pots
forward-digits number
Forward Digits
Available if you select Some for Forward Digits Type.
Enter the number of right-most digits in the outgoing number to transmit.
For example, if you set this value to 7 and the outgoing number is 1112223333, the dial peer transmits 2223333.
dial-peer voice number pots
forward-digits number
Prefix
Available if you select the POTS dial peer type and the Outgoing direction.
Enter digits to be prepended to the dial string for outgoing calls.
dial-peer voice number pots
prefix string
Transport Protocol
Available if you select SIP for the Dial Peer Type.
Choose the transport protocol (TCP or UDP) for SIP control signaling.
dial-peer voice number voip
session transport {tcp | udp}
Preference
Available if you select POTS or SIP for the Dial Peer Type.
Select an integer from 0 to 10, where the lower the number, the higher the preference.
If dial peers have the same match criteria, the system uses the one with the highest preference value.
Default: 0 (highest preference).
dial-peer voice number voip
preference value
dial-peer voice number pots
preference value
Voice Port
Available if you select the POTS dial peer type.
Enter the voice port that the router uses to match calls to the dial peer. For an analog port, enter the port you want. For a digital T1 PRI ISDN port, enter a port with the suffix:23. For a digital E1 PRI ISDN port, enter a port with the suffix :15.
For an outgoing dial peer, the router sends calls that match the dial peer to this port.
For an incoming dial peer, this port serves as an extra match criterion. The dial peers are matched only if a call comes in on this port.
dial-peer voice number pots
For an analog port:
port slot/subslot/port
For a digital port:
port slot/subslot/port:15
port slot/subslot/port:23
Destination Address
Available if you select the SIP dial peer type and the Outgoing direction.
Enter the network address of the remote voice gateway to which calls are sent after a local outgoing SIP dial peer is matched.
Enter the address in one of these formats:
dns:hostname.domain
sip-server
ipv4:destination-addres
ipv6:destination-address
session target {ipv4:destination-address | ipv6:destination-address| sip-server | dns:hostname.domain }
To add a call routing feature template:
From the Cisco vManage menu, choose Configuration > Templates.
Click Feature Templates, and click Add Template.

Note
In Cisco vManage Release 20.7.x and earlier releases, Feature Templates is called Feature.
Select the supported device to which you want to add call routing features.
Click Call Routing from the Unified Communications templates.
In Template Name, enter a name for the template.
This field can contain uppercase and lowercase letters, digits 0 through 9, hyphens (-), and underscores (_).
In Description, enter a description for the template.
This field can contain any characters and spaces.
In Global, configure options as described in the "Global Call Routing Options" table.
In Dial Plan, perform one of these actions:
To configure a dial peer directly, configure options as described in the "Dial Peer Options" table.
To create or edit a dial peer CSV file, click Download Dial Peer List to download the system provided file named Dial-Peers.csv. The first time you download this file, it contains field names but no records. Update this file as needed by using an application such as Microsoft Excel. For detailed information about this file, see Dial Peer CSV File.
To import configuration information from a dial peer CSV file that you have created, click Upload Dial Peer List.
You can add as many dial peers as needed. Click Add after you configure each dial peer.
If any dial peers already are configured, they appear in the dial peers table on this page. To edit a configured dial peer, click …, and click its pencil icon. Edit the options in the window that pops up as described in the table, and click Save Changes. To delete a dial peer, click …, and click its trash can icon.
Click Save.
Add an SRST Feature Template
An SRST feature template configures parameters for Cisco Unified Survivable Remote Site Telephony (SRST) for SIP. With Cisco Unified SRST, if the WAN goes down or is degraded, SIP IP phones in a branch site can register to the local gateway so that they continue to function for emergency services without requiring WAN resources that are no longer available.
The following table describes global options for configuring Cisco Unified SRST.
Table 6. Global Cisco Unified SRST Options
Option
Description
Cisco IOS CLI Equivalent
System Message
Enter a message that displays on endpoints when Cisco Unified SRST mode is in effect.
voice register global
system message string
Max Phones
Enter the number of phones that the system can register to the local gateway when in Cisco Unified SRST mode.
The available values and the maximum values that you can enter in this field depend on the device that you are configuring. Hover your mouse pointer over the Information icon next to this field to see maximum values for supported devices.
voice register global
max-pool max-voice-register-pools
Max Directory Numbers
Enter the number of DNs that the gateway supports when in Cisco Unified SRST mode.
The available values and the maximum values that you can enter in this field depend on the device that you are configuring. Hover your mouse pointer over the Information icon next to the Max phones to support field to see maximum values for supported devices.
voice register global
max-dn max-directory-numbers
Music on Hold
Select Yes to play music on hold on endpoints when a caller is on hold when in Cisco Unified SRST mode. Otherwise, select No.
—
Music on Hold file
Enter the path and file name of the audio file for music on hold.
The file must be in the system flash and must be in .au or .wav format. In addition, the file format must contain 8-bit 8-kHz data, for example, CCITT a-law or u-law data format.
call-manager-fallback
moh filename
The following table describes options for configuring Cisco Unified SRST phone profiles.
Table 7. SRST Phone Profile Options
Option
Description
Cisco IOS CLI Equivalent
Voice Register Pool Tag
Enter the unique sequence number of the IP phone to be configured.
The maximum value is defined by the Max phones to support option in the Global tab of the SRST feature template.
voice register pool pool-tag
Device Network IPv6 Prefix
Enter the IPv6 prefix of the network that contains the IP phone to support.
For example, a.b.c.d/24.
voice register pool pool-tag
id [network address mask mask]
Device Network IPv4 Prefix
Enter the IPv4 prefix of the network that contains the IP phone to support.
voice register pool pool-tag
id [network address mask mask]
To add an SRST feature template:
From the Cisco vManage menu, Choose Configuration > Templates.
Click Feature Templates, and click Add Template.

Note
In Cisco vManage Release 20.7.x and earlier releases, Feature Templates is called Feature.
Select the supported device to which you want to add Cisco Unified SRST features.
Click SRST from the Unified Communications templates.
In Template Name, enter a name for the template.
This field can contain uppercase and lowercase letters, digits 0 through 9, hyphens (-), and underscores (_).
In Description, enter a description for the template.
This field can contain any characters and spaces.
In Global Settings, configure options as described in the "Global SRST Options" table.
From Phone Profile, click New Phone Profile to create a phone profile, and configure options as described in the "SRST Phone Profile Options" table.
A phone profile provides pool tag and device network information for a SIP phone.
You can add as many phone profiles as needed. Click Add after you configure each phone profile.
If any phone profiles already are configured, they appear in the phone profiles table on this page. To edit a configured phone profile, click …, and click its pencil icon. Edit the options in the window that pops up as described in the table, and click Save Changes. To delete a phone profile, click …, and click its trash can icon.
Click Save.
Add a DSPFarm Feature Template
A DSP farm is a pool of DSP resources on a router. Cisco SD-WAN uses DSP farm resources that are available to Cisco Unified Communications Manager for Cisco Unified Communications Manager controlled transcoding, conferencing (non-secure only), and media termination point (MTP) services. Cisco Unified Communications Manager dynamically invokes these resources as needed in a call path.
A DSPFarm feature template is used to set up and provision a DSP farm. The template supports dedicated DSP modules only. T1/E1 modules are not supported.
When you add a DSPFarm feature template, you configure options for the following items:
Media resource modules—DSP modules and their placement on a router. You determine and build DSP farm profiles based on media resource modules.
DSP farm profiles—Each profile defines parameters for provisioning a specific DSP farm service type. A profile includes options for provisioning a group of DSP resources that is used for transcoding, conferencing (only non-secure conferencing is supported), or MTP services. A profile is registered to a Cisco Unified Communications Manager so that the Cisco Unified Communications Manager can invoke the resources for a service as needed.
SCCP config—Configures a local interface that is used to communicate with up to four Cisco Unified Communications Manager servers, and configures related information that is required to register the DSP farm profiles to Cisco Unified Communications Manager. Also configures one or more Cisco Unified Communications Manager groups, each of which includes up to four Cisco Unified Communications Manager servers that control the DSP farm services that, in turn, are associated with the servers.
When you add a media resource module, Cisco vManage assists you with the placement of the module by displaying available slots and sub-slots for the module. Cisco vManage determines the available slots and sub-slots based on the device model.
The following table describes options for configuring media resources.
Table 8. Media Resource Options
Option
Description
Cisco IOS CLI Equivalent
Module
Select the router resource module to carry DSP resources that are used by DSPFarm profiles.
—
Slot/sub-slot ID
Select the slot and sub-slot in which the resource module that you selected resides.
voice-card slot/subslot
dsp service dspfarm
The following table describes options for configuring DSP farm services.
Table 9. DSP Farm Service Options
Option
Description
Cisco IOS CLI Equivalent
Profile Type
Select the type of DSP farm service that this profile is for. Options are Transcoder, Conference, and MTP
dspfarm profile profile-identifier { conference | mtp | transcode }
Profile ID
A system-generated unique identifier for the profile.
—
Universal
Available if you select Transcoder for the Profile Type
When this check box is unchecked, transcoding is allowed only between the G.711 codec and other codecs.
When this check box is checked, transcoding is allowed between codecs of any type.
dspfarm profile profile-identifier transcode [universal ]
List Codec
Select the codecs that are available for the DSP farm service that this profile defines.
The following codecs are supported. For MTP profile types, you can select one option, or you can select pass-through and one other option. If you want to change a codec, unselect the current codec before selecting a new one.
For the Transcoder profile type:
g711alaw
g711ulaw
g729abr8
g729ar8
g729br8
g729r8
g722-64
ilbc
iSAC
pass-through
For the Conference profile type:
g711alaw
g711ulaw
g722r-64
g729abr8
g729ar8
g729br8
g729r8
For the MTP profile type for software MTP only:
g711ulaw
g711alaw
g722-64
g729abr8
g729ar8
g729br8
g729r8
ilbc
iSAC
pass-through
For the MTP profile type for hardware MTP only, or for hardware and software MTP:
g711ulaw
g711alaw
pass-through
codec codec-name
Conference Maximum Participants
Available if you select Conference for the Profile Type.
Select the maximum number of parties that can participate in a conference bridge (8, 16, or 32).
maximum conference-participants number
Maximum Sessions
Available if you select Transcoder or Conference for the Profile Type.
Enter the maximum number of sessions that this profile can support.
This value depends on the maximum number sessions that can be configured with the DSP resources that are available on the router. These resources are based on the type of modules in the router. To determine these resources, you can use a DSP calculator.
maximum sessions number
MTP Type
Available if you select MTP for the Profile Type.
Select the way in which the router performs minor MTP translations such as G.711alaw to G.711ulaw, and DTMF conversions.
Options are:
Hardware—MTP translations and conversions are performed by the hardware DSP resources
Software—MTP translations and conversions are performed by the router CPU
maximum session {hardware | software }
MTP Maximum Hardware Sessions
Available if you select Hardware for the MTP type.
Select the maximum number of hardware sessions that can be used for MTP translations and conversions.
Maximum value: 4000
maximum session hardware number
MTP Maximum Software Sessions
Available if you select Software for the MTP type.
Select the maximum number of CPU sessions that can be used for MTP translations and conversions.
Maximum value: 6000
maximum session software number
Application
Select the type of application to which the DSP farm services that are provisioned on the device are associated.
associate application sccp
Shutdown
Enable this option to take this profile out of service.
shutdown
The following table describes options for configuring SCCP.
Table 10. SCCP Options
Option
Description
Cisco IOS CLI Equivalent
CUCM Tab
Configure up to 12 Cisco Unified Communications Manager servers to which the profiles that you defined in the Profile tab register.
Local Interface
Enter the local interface that DSP services that are associated with the SCCP application use to register with Cisco Unified Communications Manager.
Enter the interface in this format:
interface-type/interface-number/port
where:
interface-type—Type of interface that the services use to register with Cisco Unified Communications Manager. The type can be a GigabitEthernet interface or a port channel interface.
interface-number—Interface number that the services use to register with Cisco Unified Communications Manager.
port—(Optional) Port on which the interface communicates with Cisco Unified Communications Manager. If you do not specify a port, the default value 2000 is used.
For example: GigabitEthernet0/0/0.
sccp local interface-type interface-number [port port-number]
Server List - x
Designate a Cisco Unified Communications Manager server to which the profiles that you defined in the Profile tab register.
In the first field, enter the IP address or DNS name of the Cisco Unified Communications Manager server.
In the second field, enter a numerical identifier for the Cisco Unified Communications Manager server.
Click the Plus Sign icon (+) to configure up to 11 additional servers. To remove a server, click its corresponding Minus Sign icon. (–).
sccp ccm {ipv4-address | ipv6-address | dns} identifier identifier-number version 7.0+
CUCM Groups Tab
This tab is available when at least one Cisco Unified Communications Manager server is configured in the Cisco Unified Communications Manager tab.
Configure a Cisco Unified Communications Manager group, which includes up to 4 Cisco Unified Communications Manager servers that control the DSP farm services that, in turn, are associated with the servers.
If any Cisco Unified Communications Manager groups are already configured, they appear in the table in this tab. To edit a configured Cisco Unified Communications Manager group, click its pencil icon in the Action column, edit the options in the window that pops up as described in the following rows, and click Save Changes. To delete a Cisco Unified Communications Manager group, click its trash can icon in the Action column.
Add New CUCM Group
Click to add a new Cisco Unified Communications Manager group.
sccp ccm group group-id
Server Groups Priority Order
Select the priority in which the Cisco Unified Communications Manager servers in this Cisco Unified Communications Manager group are used.
To do so:
Click this field to display a list of the Cisco Unified Communications Manager servers that you configured on the Cisco Unified Communications Manager tab.
Select the server that you want to be the primary server. This server has the highest priority.
Click the field again and select the server that you want to be the redundant server with the next highest priority. Repeat this step to select other redundant servers.
The servers appear in this field in priority order.
To remove a server from the group, click its X icon. To change the priority order of servers, remove the servers and add them back in the desired order.
associate ccm cisco-unified-communications-manager-id priority priority
CUCM Media Resource Name
Profile to be Associated
In the Cisco Unified Communications Manager Media Resource Name field, enter a unique name that is used to register a DSP farm profile to the Cisco Unified Communications Manager servers.
The name must contain from 6 to 15 characters. Characters can be letter, numbers, slashes (/), hyphens (-), and underscores (_). Space characters are not allowed.
In the corresponding Profile to be Associated field, select a DSP farm profile to be registered to this Cisco Unified Communications Manager group using the name that you entered.
To select a profile, click this field to display a list of the profile IDs that were configured on the Profile tab, and click the ID of the profile that you want.
To add another Cisco Unified Communications Manager media resource name and profile, click the plus sign (+). You can add up to 4 Cisco Unified Communications Manager media resources and profiles.
To remove a Cisco Unified Communications Manager media resource name and profile, click its corresponding minus sign (–).
associate ccm profile-identifier register device-name
CUCM Switchback
Select the switchback method that the Cisco Unified Communications Manager servers in this Cisco Unified Communications Manager group use to switch back after a failover:
graceful—Switchback occurs after all active sessions terminate gracefully.
guard—Switchback occurs either when active sessions are terminated gracefully or when the guard timer expires, whichever happens first.
immediate—Performs the Cisco Unified Communications Manager switchback to the higher priority Cisco Unified Communications Manager immediately when the timer expires, whether there is an active connection or not.
Default: graceful.
switchback method {graceful | guard [timeout-guard-value] | immediate}
CUCM Switchover
Select the switchover method that Cisco Unified Communications Manager servers in this Cisco Unified Communications Manager use group when failing over:
graceful—Switchback occurs after all active sessions terminate gracefully.
immediate—Switchover occurs immediately, whether there is an active connection or not.
Default: graceful.
switchover method {graceful | immediate}
To add a DSPFarm feature template:
From the Cisco vManage menu, choose Configuration > Templates.
Click Feature Templates, and click Add Template.

Note
In Cisco vManage Release 20.7.x and earlier releases, Feature Templates is called Feature.
Select the supported device to which you want to add a DSP farm.
Click DSPFarm from the Unified Communications templates.
In Template Name, enter a name for the template.
This field can contain uppercase and lowercase letters, digits 0 through 9, hyphens (-), and underscores (_).
In Description, enter a description for the template.
This field can contain any characters and spaces.
From Media Resources Modules, click Add Media Resources, and configure options as described in the "Media Resource Options" table.
A media resource module is a DSP module that is used by DSP Farm profiles.
You can add as many media resources interfaces as needed.
Click Add after you configure each media resource. After you configure a media resource, you cannot modify or delete it because other configuration items are based on the module and its placement. If you need to change a media resource configuration, you must remove the DSPFarm feature template and create a new one.
If any media resources are already configured, they appear in the table in this tab. To edit a configured media resource, click …, and click its pencil icon. Edit the options in the window that pops up as described in the "Media Resource Options" table, and click Save Changes. To delete a media resource, click …, and click its trash can icon.
From Profile, click Add New Profile to add a profile for a DSP farm service on a router, and configure options for the profile as described in the "DSP Farm Service Options" table.
Click Add after you configure a profile. You can add up to 10 DSP farm profiles for each feature template.
Before you create a profile, you must know the maximum number of sessions that can be configured with the DSP resources that are available on the router. These resources are based on the type of modules in the router. To determine these resources, you can use a DSP calculator.
After you add a profile, you can modify the List Codec, Maximum Sessions, Maximum Conference Participants, and Shutdown options. You cannot change the profile type. If you want to change the profile type, you must delete the profile and create a new one.
If any profiles are already configured, they appear in the table in this tab. To edit a configured profile, click …, and click its pencil icon. Edit the options in the window that pops up as described in the "DSP Farm Service Options" table, and click Save Changes. To delete a profile, click …, and click its trash can icon.
In SCCP Config, configure options as described in the "SCCP Options" table.
Click Save.
Add a Voice Policy
A voice policy defines how the system augments and manipulates calls for various endpoint types. Endpoints include voice ports, POTS dial peers, SIP dial peers, and Cisco Unified SRST phone profiles. A voice policy includes subpolicies for each endpoint that you want to configure.
To add a voice policy:
From the Cisco vManage menu, choose Configuration > Unified Communications.
Click Add Voice Policy.
In Voice Policy Name, enter a name for the policy.
Configure the following as required:
Voice Ports–See Configure Voice Ports for a Voice Policy
POTS Dial Peers–See Configure POTS Dial Peers for a Voice Policy
SIP Dial Peers–See Configure SIP Dial Peers for a Voice Policy
SRST Phones–See Configure SRST Phones for a Voice Policy
Click Save Policy.
Configure Voice Ports for a Voice Policy
Configure POTS Dial Peers for a Voice Policy
Configure SIP Dial Peers for a Voice Policy
Configure SRST Phones for a Voice Policy
Configure Voice Ports for a Voice Policy
When you configure voice ports for a voice policy, you configure options that define how the system augments and manipulates calls for the voice port endpoint type.
You can configure the following call functionality policy options, depending on the type of voice card you are using:
Trunk Group— Use these options to configure voice ports as a member of a trunk group for the card. You can configure one trunk group for voice card. The following table describes these options.
Table 11. Trunk Group Options for Voice Ports
Option
Description
Cisco IOS CLI Equivalent
Add New Trunk Group
Click to add a trunk group for the selected card.
You can add one trunk group for a voice port.
—
Copy from Existing
Click to copy an existing trunk group to a new trunk group. In the box that appears, change the name if desired, select a trunk group, and click Copy.
—
Name
Name of the trunk group.
The name can contain up to 32 characters.
trunk group name
Hunt-Scheme
Select the hunt scheme in the trunk group for outgoing calls:
least-idle both—Searches for an idle channel with the shortest idle time
least-idle even—Searches for an idle even-numbered channel with the shortest idle time
least-idle odd—Searches for an idle odd-numbered channel with the shortest idle time
least-used both—Searches for a trunk group member that has the highest number of available channels (applies only to PRI ISDN cards)
least-used even—Searches for a trunk group member that has the highest number of available even-numbered channels (applies only to PRI ISDN cards)
least-used odd—Searches for a trunk group member that has the highest number of available odd-numbered channels (applies only to PRI ISDN cards)
longest-idle both—Searches for an idle odd-numbered channel with the longest idle time
longest-idle even—Searches for an idle channel that has the highest number of available even-numbered channels
longest-idle odd—Searches for an idle channel that has the highest number of available odd-numbered channels
round-robin both—Searches trunk group members in turn for an idle channel, starting with the trunk group member that follows the last used member
round-robin even—Searches trunk group member in turn for an idle even-numbered channel, starting with the trunk group member that follows the last used member
round-robin odd—Searches trunk group member in turn for an idle odd-numbered channel, starting with the trunk group member that follows the last used member
sequential-both—Searches for an idle channel, starting with the trunk group member with the highest preference within the trunk group
sequential-even—Searches for an idle even-numbered channel, starting with the trunk group member with the highest preference within the trunk group
sequential-odd—Searches for an idle odd-numbered channel, starting with the trunk group member with the highest preference within the trunk group
random—Searches for a trunk group member at random and selects a channel from the member at random
Default: least-used both
trunk group name
hunt-scheme least-idle [both | even | odd ]
hunt-scheme least-used [both | even | odd ]
hunt-scheme longest-idle [both | even | odd ]
hunt-scheme round-robin [both | even | odd ]
hunt-scheme sequential [both | even | odd ]
hunt-scheme random
Max Calls
Enter the maximum number of calls that are allowed for the trunk group. If you do not enter a value, there is no limit on the number of calls.
If the maximum number of calls is reached, the trunk group becomes unavailable for more calls.
In field—Enter the maximum number of incoming calls that are allowed for this trunk group
Out field— Enter the maximum number of outgoing calls that are allowed for this trunk group
Valid range for both fields: integers 0 through 1000.
trunk group name
max-calls voice number-of-calls direction [ in | out]
Max-Retry
Select the maximum number of outgoing call attempts that the trunk group makes if an outgoing call fails.
If you do not enter a value and a call fails, the system does not attempt to make the call again.
Valid range: integers 1 through 5.
trunk group name
max-retry attempts
Save Trunk Group
Click to save the Trunk Group that you configured.
—
Translation Profile—Use these options to configure translation rules for calling and called numbers. The following table describes these options.
Table 12. Translation Profile Options for Calling and Called Numbers
Option
Description
Cisco IOS CLI Equivalent
Add New Translation Profile
Click to add a translation profile for the selected card.
You can create up to two translation profiles for this endpoint.
voice translation-profile name
Copy from Existing
Click to copy an existing translation profile to a new translation profile. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
—
Calling
Click to configure translation rules for the number that is calling in.
The Translation Rules pane displays.
translate calling translation-rule-number
Called
Click to configure translation rules for the number that is being called.
The Translation Rules pane displays.
translate called translation-rule-number
Translation Rules pane
Click Add New to create a translation rule.
Alternatively, you can click Copy From Existing to copy an existing translation rule to a new translation rule. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
In the Translation Rule Number field, enter a unique number that designates the precedence for this rule. Valid range: integers 1 through 100.
(Optional) To copy existing translation rules from a CSV file, click Import. Continue to add rules or click Finish. For detailed information about this file, see Translation Rules CSV File.
Click Add Rule.
In the Match field, enter the string that you want the translation rule to affect. Enter the string in regular expression format beginning and ending with a slash (/). For example, /^9/.
To include the backslash character (\) in a match string, precede the backslash with a backslash.
From the Action drop-down list, select the action that the system performs for calls that match the string in the Match field. The Reject option causes the system to reject the call. The Replace option causes the system to replace the match number with a value that you specify.
If you select the Replace action, in the Replace field that displays, enter the string to which to translate the matched string. Enter the number in regular expression format beginning and ending with a slash (/). For example, //, which indicates a replacement of no string.
To include the backslash character (\) in a replace string, precede the backslash with a backslash.
As an example, if you specify a match string of /^9/ and a replace string of //, the system removes the leading 9 from calls with a number that begins with 9. In this case, the system translates 914085551212 to 14085551212.
Click Save.
Add more translation rules as needed.
(Optional) Click Export to save the translation rules that you created in a CSV file.
Click Finish at the bottom of the pane.
voice translation-rule number
Match and Replace Rule:
rule precedence /match-pattern/ / replace-pattern/
Reject Rule:
rule precedence reject /match-pattern/
Station ID—Use these options to configure the name and number for caller ID display. The following table describes these options.
Table 13. Station ID Options
Option
Description
Cisco IOS CLI Equivalent
Station Name
Enter the name of the station.
The station name can contain up to 50 letters, numbers, and spaces, dashes (-), and underscores (_).
station-id name name
Station Number
Enter the phone number of the station in E.164 format.
The station number can contain up to 15 numeric characters.
station-id number number
Line Params—Use these options to configure line parameters on the card for voice quality. The following table describes these options.
Table 14. Line Params Options
Option
Description
Cisco IOS CLI Equivalent
Gain
Enter the gain, in dB, for voice input.
Valid range: –6 through 14. Default: 0
input gain decibels
Attenuation
Enter the amount of attenuation, in dB, for transmitted voice output.
Valid range: –6 through 14. Default: 3.
output attenuation decibels
Echo Canceller
Select Enable to apply echo cancellation to voice traffic.
By default, this option is enabled.
echo-cancel enable
Voice Activity Detection (VAD)
Select Enable to apply VAD to voice traffic.
By default, this option is enabled.
vad
Compand Type
Select the companding standard to be used to convert between analog and digital signals in PCM systems (U-law or A-law).
Default: U-Law.
compand-type {u-law | a-law}
Impedance
This field does not apply to PRI ISDN cards.
Select the terminating impedance for calls.
Default: 600r.
impedance {600c | 600r 900c | 900r | complex1 | complex2 | complex3 | complex4 | complex5 | complex6}
Call Progress Tone
Select the locale for call progress tones.
cptone locale
Tuning Params—Use these options to configure parameters for signaling between voice ports and another instrument. The following table describes these options.
Table 15. Tuning Params Options
Option
Description
Cisco IOS CLI Equivalent
Tuning Params Options for FXO Cards
Pre Dial Delay
Enter the delay, in seconds, of the delay on the FXO interface between the beginning of the off-hook state and the initiation of DTMF signaling.
Valid range: 0 through 10. Default: 1.
pre-dial-delay seconds
Supervisory Disconnect
Select the type of tone that indicates that a call has been released and that a connection should be disconnected:
Anytone—Any tone indicates a supervisory disconnect
Signal—A disconnect signal indicates a supervisory disconnect
Dualtone—A dual-tone indicates a supervisory disconnect
Default: Signal.
Anytone:
supervisory disconnect anytone
Signal:
supervisory disconnect
Dualtone:
supervisory disconnect dualtone {mid-call | pre-connect}
Dial Type
Select the dialing method for outgoing calls:
pulse—Pulse dialer
dtmf—Dual-tone multifrequency dialer
mf—Multifrequency dialer
Default: dtmf.
dial-type {dtmf | pulse | mf}
Timing Sup-Disconnect
Enter the minimum time, in milliseconds, that is required to ensure that an on-hook indication is intentional and not an electrical transient on the line before a supervisory disconnect occurs (based on power denial signaled by the PSTN or PBX).
Valid range: 50 through 1500. Default: 350.
timing sup-disconnect milliseconds
Battery Reversal
Battery reversal reverses the battery polarity on a PBX when a call connects, then changes the battery polarity back to normal when the far-end disconnects.
Select Answer to configure the port to support answer supervision by detection of battery reversal.
Select Detection Delay to configure the delay time after which the card acknowledges a battery-reversal signal, then enter the delay time in milliseconds. Valid range: 0 through 800. Default: 0 (no delay).
If an FXO port or its peer FXS port does not support battery reversal, do not configure battery reversal options to avoid unpredictable behavior.
battery-reversal [answer]
battery-reversal-detection-delay milliseconds
Timing Hookflash out
Enter the duration, in milliseconds, of hookflash indications that the gateway generates on the FXO interface.
Valid range: 50 through 1550. Default: 400.
timing hookflash-out milliseconds
Timing Guard out
Enter the number of milliseconds after a call disconnects before another outgoing call is allowed.
Valid range: 300 through 3000. Default: 2000.
timing guard-out milliseconds
Tuning Params Options for FXS Cards
Timing Hookflash In
Enter the minimum and maximum duration, in milliseconds, of an on-hook condition to be interpreted as a hookflash by the FXS card.
Valid range for minimum duration: 0 through 400. Default minimum value: 50.
Valid range for maximum duration: 50 through 1500. Default maximum value: 1000.
timing hookflash-in maximum-milliseconds minimum-milliseconds
Pulse Digit Detection
To enable pulse digit detection at the beginning of a call, select Yes.
Default: Yes.
pulse-digit-detection
Loop Length
Select the length for signaling on FXS ports (Long or Short).
Default: Short.
loop-length [long | short]
Ring
Frequency—Select the frequency, in Hz, of the alternating current that, when applied, rings a connected device. Default: 25.
DC Offset—Applies only if Loop Length is set to Long. Select the voltage threshold below which a ring does not sound on devices. Valid values: 10-volts, 20-volts, 24-volts, 30-volts, and 35-volts.
ring frequency number
ring dc-offset number
Ringer Equivalence Number (REN)
Select the REN for calls that this card processes. This number specifies the loading effect of a telephone ringer on a line.
Valid range: 1 through 5. Default: 1.
ren number
Supervisory Disconnect—Use these options to configure parameters for supervisory disconnect events. The following table describes these options.
Table 16. Supervisory Disconnect Options
Option
Description
Cisco IOS CLI Equivalent
Add New Supervisory Disconnect
Click to add a supervisory disconnect event.
—
Mode
Choose the mode for the supervisory disconnect event:
Custom CPTone—Provides options for configuring cptone detection parameters for a supervisory disconnect event
Dual Tone Detection Params— Provides options for configuring dual-tone detection parameters for a supervisory disconnect event
voice class custom-cptone cptone-name
voice class dualtone-detect-params tag
Supervisory Name
Applies to Custom CPTone mode. Enter a name for the supervisory disconnect event.
The name can contain up to 32 characters. Valid characters are letters, numbers, dashes (-), and underscores (_).
voice class custom-cptone cptone-name
Dualtone
Applies to Custom CPTone mode. Select the type of dual-tone that causes a disconnect. Options are:
Busy
Disconnect
Number Unobtainable
Out of Service
Reorder
Ringback
dualtone {ringback |busy | reorder | out-of-service | number-unobtainable | disconnect}
Cadence
Applies to Custom CPTone mode. Enter the cadence interval, in milliseconds, of the dual-tones that cause a disconnect. Enter the cadence as an on/off value pair, separated with a space. You can enter up to 4 on/off value pairs, separated with a space.
cadence cycle-1-on-time cycle-1-off-time [cycle-2-on-time cycle-2-off-time [cycle-3-on-time cycle-3-off-time [ cycle-4-on-time cycle-4-off-time ]]]
Dualtone Frequency
Applies to Custom CPTone mode. Enter the frequency, in Hz, of each tone in the dual-tone.
Valid range for each tone is 300 through 3600.
frequency frequency-1 [frequency-2]
Supervisory Number
Applies to Custom Dual Tone Detection Params mode.
Enter a unique number to identify dual-tone detection parameters.
Valid range: 1 through 10000.
voice class dualtone-detect-params tag-number
Cadence-Variation
Applies to Custom Dual Tone Detection Params mode. Enter the maximum time, in milliseconds, by which the tone onset can vary from the onset time and still be detected. The system multiplies the value that you enter by 10.
Valid range: 0 through 200 in units of 10. Default: 10.
cadence-variation time
Frequency
Applies to Custom Dual Tone Detection Params mode.
Max Delay—Enter the maximum delay, in milliseconds, before a supervisory disconnect is performed after the dual-tone is detected. The system multiplies the value that you enter by 10. Valid range: 0 through 100 in units of 10. Default: 10.
Max Deviation—Enter the maximum deviation, in Hz, by which each tone can deviate from configured frequencies and be detected. Valid range: 10 through 125. Default: 10.
Max Power—Enter the power of the dual-tone, in dBm0, above which a supervisory disconnect is no detected. Valid range: 0 through 20. Default: 10.
Min Power— Enter the power of the dual-tone, in dBm0, below which a supervisory disconnect is not detected. Valid range: 10 through 35. Default: 30.
Power Twist—Enter difference, in dBm0, between the minimum power and the maximum power of the dual-tone above which a supervisory disconnect is not detected. Valid range: 0 through 15. Default: 6.
freq-max-delay time
freq-max-deviation hertz
freq-max-power dBm0
freq-min-power dBm0
freq-power-twist dBm0
Save
Click to save the supervisory disconnect information that you configured.
—
DID Timers—Use these options to configure timers for DID calls. The following table describes these options.
Table 17. DID Timers Options
Option
Description
Cisco IOS CLI Equivalent
Wait Before Wink
Enter the amount of time, in milliseconds, that the card waits after receiving a call before sending a wink signal to notify the remote side that it can send DNIS information.
Valid range: 100 through 6500. Default: 550.
timing wait-wink milliseconds
Wink Duration
Enter the maximum amount of time, in milliseconds, of the wink signal for the card.
Valid range: 50 through 3000. Default: 200.
timing wait-duration milliseconds
Clear Wait
Enter the minimum amount of time, in milliseconds, between an inactive seizure signal and the call being cleared for the card.
Valid range: 200 through 2000. Default: 400.
timing clear-wait milliseconds
Dial Pulse Min Delay
Enter the amount of time, in milliseconds, between wink-like pulses for the card.
Valid range: 0 or 140 through 5000. Default: 140.
timing dial-pulse min-delay milliseconds
Answer Winkwidth
Enter the minimum delay time, in milliseconds, between the start of an incoming seizure and the wink signal.
Valid range: 110 through 290. Default: 210.
timing answer-winkwidth milliseconds
To configure voice ports for a voice policy, follow these steps:
From the Cisco vManage menu, choose Configuration > Unified Communications.
Click Add Voice Policy, and choose Voice Ports in the left pane.
From the Add Voice Ports Policy Profile drop-down list, select Create New.
Alternatively, you can select Copy from Existing to copy an existing voice policy to a new voice policy. In the box that appears, select the name of the policy profile to copy, enter a new name for the profile if desired, and click Copy.
Select FXO, FXS, PRI ISDN, or FXS DID to specify the type of voice port that the policy is for.
Select the types of call functionality policy options that you want to configure from the list of options that displays, and click Next. These option types include the following:
Trunk Group—Available for FXO, FXS, FXS DID, and PRI ISDN cards.
Use these options to configure voice ports as a member of a trunk group for the card.
Translation Profile—Available for FXO, FXS, PRI ISDN, and FXS DID cards.
Use these options to configure translation rules for calling and called numbers.
Station ID—Available for FXO, FXS, and FXS DID cards.
Use these options to configure the name and number for caller ID display.
Line Params—Available for FXO, FXS, PRI ISDN, and FXS DID cards.
Use these options to configure line parameters on the card for voice quality.
Tuning Params—Available for FXO and FXS cards.
Use these options to configure parameters for signaling between voice ports and another instrument.
Supervisory Disconnect—Available for FXO cards.
Use these options to configure parameters for supervisory disconnect events. These events provide an indication that a call has disconnected.
DID Timers—Available for FXS DID cards.
Use these options to configure timers for DID calls.
In the page that displays, configure as needed the options on the tabs as needed.
The tabs that are available depend on the voice port and call functionality policy option types that you selected.
Trunk Group options—For a description of these options, see the "Trunk Group Options for Voice Ports" table.
If any trunk groups are already configured for other voice cards, they appear in the trunk groups table on this page. To edit a configured trunk group, click …, and click its pencil icon. Edit the options in the window that pops up as described in the "Trunk Group Options for Voice Ports" table, and click Save Changes. To delete a trunk group, click …, and click its trash can icon.
After you click Save Trunk Group when saving trunk group options, configure the priority for a trunk group by double-click the Priority field for a trunk group in the Trunk Group table, entering a priority number, and pressing Enter or clicking outside of the Priority field. Valid priority numbers are integers 1 through 64. The number you enter is the priority of the POTS dial peer in the trunk group for incoming and outgoing calls.
Translation Profile options—For a description of these options, see the "Translation Profile Options for Calling and Called Numbers" table.
After you click Finish when configuring translation profile options, perform these actions:
Add another translation profile if needed. You can create up to two translation profiles for this endpoint.
Click Save Translation Profile.
For each translation profile that you create, double-click the dash (-) that displays in Direction column in the table of translation rules and select Incoming or Outgoing from the drop-down list that displays. The Incoming selection applies the corresponding translation rule to traffic that is incoming to this endpoint. The Outgoing selection applies the corresponding translation rule to traffic that is outgoing from this endpoint.
Station ID options—For a description of these options, see the "Station ID Options" table.
Line Params options—For a description of these options, see the "Line Params Options" table.
Tuning Params options—For a description of these options, see the "Tuning Params Options" table.
Supervisory Disconnect options—For a description of these options, see the "Supervisory Disconnect Options" table.
You can configure as many supervisory disconnect events as needed.
DID Timers options—For a description of these options, see the "DID Timers Options" table
Click Next
In Policy Profile Name, enter a name for this child policy.
In Policy Profile Description, enter a description for this child policy.
Click Save.
Configure POTS Dial Peers for a Voice Policy
When you configure POTS Dial Peers for a voice policy, you configure options that define how the system augments and manipulates calls for the POTS dial peer endpoint type.
You can configure the following options:
Trunk Groups—The following table describes these options.
Table 18. Trunk Group Options for POTS Dial Peers
Option
Description
Cisco IOS CLI Equivalent
Add New Trunk Group
Click to add a trunk group for the selected card.
You can add one trunk group for a voice port.
—
Copy from Existing
Click to copy an existing trunk group to a new trunk group. In the box that appears, change the name if desired, select a trunk group, and click Copy.
A trunk group name whose name is preceded with “{Master}” is already associated with this voice policy. When you copy a this type of trunk group, the system reuses the existing trunk group without creating another instance of the trunk group definition. In this case, you cannot change the name.
—
Name
Name of the trunk group.
The name can contain up to 32 characters.
trunk group name
Hunt-Scheme
Select the hunt scheme in the trunk group for outgoing calls:
least-idle both—Searches for an idle channel with the shortest idle time
least-idle even—Searches for an idle even-numbered channel with the shortest idle time
least-idle odd—Searches for an idle odd-numbered channel with the shortest idle time
least-used both—Searches for a trunk group member that has the highest number of available channels (applies to only PRI ISDN cards)
least-used even—Searches for a trunk group member that has the highest number of available even-numbered channels (applies only to PRI ISDN cards)
least-used odd—Searches for a trunk group member that has the highest number of available odd-numbered channels (applies only to PRI ISDN cards)
longest-idle both—Searches for an idle odd-numbered channel with the longest idle time
longest-idle even—Searches for an idle channel that has the highest number of available even-numbered channels
longest-idle odd—Searches for an idle channel that has the highest number of available odd-numbered channels
round-robin both—Searches trunk group members in turn for an idle channel, starting with the trunk group member that follows the last used member
round-robin even—Searches trunk group member in turn for an idle even-numbered channel, starting with the trunk group member that follows the last used member
round-robin odd—Searches trunk group member in turn for an idle odd-numbered channel, starting with the trunk group member that follows the last used member
sequential-both—Searches for an idle channel, starting with the trunk group member with the highest preference within the trunk group
sequential-even—Searches for an idle even-numbered channel, starting with the trunk group member with the highest preference within the trunk group
sequential-odd—Searches for an idle odd-numbered channel, starting with the trunk group member with the highest preference within the trunk group
random—Searches for a trunk group member at random and selects a channel from the member at random
Default: least-used both
trunk group name
hunt-scheme least-idle [both | even | odd ]
hunt-scheme least-used [both | even | odd ]
hunt-scheme longest-idle [both | even | odd ]
hunt-scheme round-robin [both | even | odd ]
hunt-scheme sequential [both | even | odd ]
hunt-scheme random
Max Calls
Enter the maximum number of calls that are allowed for the trunk group. If you do not enter a value, there is no limit on the number of calls.
If the maximum number of calls is reached, the trunk group becomes unavailable for more calls.
In field—Enter the maximum number of incoming calls that are allowed for this trunk group.
Out field— Enter the maximum number of outgoing calls that are allowed for this trunk group.
Valid range for both fields: integers 0 through 1000.
trunk group name
max-calls voice number-of-calls direction [ in | out]
Max-Retry
Select the maximum number of outgoing call attempts that the trunk group makes if an outgoing call fails.
If you do not enter a value and a call fails, the system does not attempt to make the call again.
Valid range: integers 1 through 5.
trunk group name
max-retry attempts
Translation Profiles—The following table describes these options.
Table 19. Translation Profile Options for POTS Dial Peers
Option
Description
Cisco IOS CLI Equivalent
Add New Translation Profile
Click to add a translation profile for the selected POTS dial peer.
You can create up to two translation profiles for this endpoint.
—
Copy from Existing
Click to copy an existing translation profile to a new translation profile. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
—
Name
Name of the translation profile.
The name can contain up to 32 characters.
voice translation-profile name
Calling
Click to configure translation rules for the number that is calling in.
The Translation Rules pane displays.
translate calling translation-rule-number
Called
Click to configure translation rules for the number that is being called.
The Translation Rules pane displays.
translate called translation-rule-number
Translation Rules pane
Click Add New to create a translation rule.
Alternatively, you can click Copy From Existing to copy an existing translation rule to a new translation rule. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
In the Translation Rule Number field, enter a unique number that designates the precedence for this rule. Valid range: integers 1 through 100.
(Optional) To copy existing translation rules from a CSV file, click Import. Continue to add rules or click Finish. For detailed information about this file, see Translation Rules CSV File.
Click Add Rule.
In the Match field, enter the string that you want the translation rule to affect. Enter the string in regular expression format beginning and ending with a slash (/). For example, /^9/.
To include the backslash character (\) in a match string, precede the backslash with a backslash.
From the Action drop-down list, select the action that the system performs for calls that match the string in the Match field. The Reject option causes the system to reject the call. The Replace option causes the system to replace the match number with a value that you specify.
If you select the Replace action, in the Replace field that displays, enter the string to which to translate the matched string. Enter the number in regular expression format beginning and ending with a slash (/). For example, //, which indicates a replacement of no string.
To include the backslash character (\) in a replace string, precede the backslash with a backslash.
As an example, if you specify a match string of /^9/ and a replace string of //, the system removes the leading 9 from calls with a number that begins with 9. In this case, the system translates 914085551212 to 14085551212.
Click Save.
Add more translation rules as needed.
(Optional) Click Export to save the translation rules that you created in a CSV file.
Click Finish at the bottom of the pane.
voice translation-rule number
Match and Replace Rule:
rule precedence /match-pattern/ / replace-pattern/
Reject Rule:
rule precedence reject /match-pattern/
To configure POTS dial peers for a voice policy:
From the Cisco vManage menu, choose Configuration > Unified Communications
Click Add Voice Policy, and choose POTS Dial Peer in the left pane.
From the Add POTS Dial Peer Policy Profile drop-down list, select Create New.
Alternatively, you can select Copy from Existing to copy an existing POTS dial peer policy to a new one. In the box that appears, select the name of the policy profile to copy, enter a new name for the profile if desired, and click Copy.
Select the types of POTS dial peers that you that you want to configure from the list of options that displays, and click next.
Options are Trunk Group (beginning with Cisco IOS XE Release 17.3.1a) and Translation Profile.
To configure trunk groups, perform the following actions.
If any trunk groups are already configured, they appear in the trunk groups table on this page. To edit a configured trunk group, click …, and click its pencil icon. Edit the options in the window that pops up as described in the "Trunk Groups for POTS Dial Peers Options" table, and click Save Changes. To delete a trunk group, click …, and click its trash can icon.
Configure trunk group options as described in the "Trunk Groups Options for POTS Dial Peers " table.
Add another trunk group if needed.
You can create up to 64 trunk groups for this endpoint.
Click Save Trunk Group.
Configure the priority for a trunk group by double-click the Priority field for a trunk group in the Trunk Group table, entering a priority number, and pressing Enter or clicking outside of the Priority field. Valid priority numbers are integers 1 through 64. Repeat this process for the other trunk groups in the table. The number you enter is the priority of the POTS dial peer in the trunk group for incoming and outgoing calls.
To configure translation profiles, perform these actions:
Configure translation profile options as described in the "Translation Profile Options for POTS Dial Peers" table.
Add another translation profile if needed.
You can create up to two translation profiles for this endpoint.
Click Save Translation Profile.
For each translation profile that you create, double-click the dash (-) that displays in Direction column in the table of translation rules and select Incoming or Outgoing from the drop-down list that displays.
The Incoming selection applies the corresponding translation rule to traffic that is incoming to this endpoint. The Outgoing selection applies the corresponding translation rule to traffic that is outgoing from this endpoint.
Click Next.
In Policy Profile Name, enter a name for this child policy.
In Policy Profile Description, enter a description for this child policy.
Click Save.
Configure SIP Dial Peers for a Voice Policy
When you configure SIP Dial Peers for a voice policy, you configure options that define how the system augments and manipulates calls for the SIP dial peer endpoint type.
You can configure the following options, depending on the policy type for which you are configuring SIP dial peers:
Translation Profiles—Use these options to configure translation rules for called and calling numbers on SIP dial peers. The following table describes these options.
Table 20. Translation Profile Options for Calling Numbers on SIP Dial Peers
Option
Description
Cisco IOS CLI Equivalent
Add New Translation Profile
Click to add a translation profile for the selected SIP dial peer.
You can create up to two translation profiles for this endpoint.
voice translation-profile name
Copy from Existing
Click to copy an existing translation profile to a new translation profile. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
—
Calling
Click to configure translation rules for the number that is calling in.
The Translation Rules pane displays.
translate calling translation-rule-number
Called
Click to configure translation rules for the number that is being called.
The Translation Rules pane displays.
translate called translation-rule-number
Translation Rules pane
Click Add New to create a translation rule.
Alternatively, you can click Copy From Existing to copy an existing translation rule to a new translation rule. In the box that appears, change the name if desired, select a called translation rule and a calling translation rule, and click Copy.
In the Translation Rule Number field, enter a unique number that designates the precedence for this rule. Valid range: integers 1 through 100.
(Optional) To copy existing translation rules from a CSV file, click Import. Continue to add rules or click Finish. For detailed information about this file, see Translation Rules CSV File.
Click Add Rule.
In the Match field, enter the string that you want the translation rule to affect. Enter the string in regular expression format beginning and ending with a slash (/). For example, /^9/.
To include the backslash character (\) in a match string, precede the backslash with a backslash.
From the Action drop-down list, select the action that the system performs for calls that match the string in the Match field. The Reject option causes the system to reject the call. The Replace option causes the system to replace the match number with a value that you specify.
If you select the Replace action, in the Replace field that displays, enter the string to which to translate the matched string. Enter the number in regular expression format beginning and ending with a slash (/). For example, //, which indicates a replacement of no string.
To include the backslash character (\) in a replace string, precede the backslash with a backslash.
As an example, if you specify a match string of /^9/ and a replace string of //, the system removes the leading 9 from calls with a number that begins with 9. In this case, the system translates 914085551212 to 14085551212.
Click Save.
Add more translation rules as needed.
(Optional) Click Export to save the translation rules that you created in a CSV file.
Click Finish at the bottom of the pane.
voice translation-rule number
Match and Replace Rule:
rule precedence /match-pattern/ / replace-pattern/
Reject Rule:
rule precedence reject /match-pattern/
Media Profiles—Use these options to configure codecs to be available for the SIP trunk communication with remote dial peers and DTMF relay options to use for SIP calls. The following table describes these options.
Table 21. Media Profile Options
Option
Description
Cisco IOS CLI Equivalent
Add New Media Profile
Click to add a translation profile for the dial peer.
—
Copy from Existing
Click to copy an existing media profile to a new media profile. In the box that appears, enter a media profile number for the profile, and click Copy.
—
Media Profile Number
Enter a number for this SIP media profile.
Valid range: Integers 1 through 10000.
voice class codec tag-number
Codec
Move from the Source list to the Target list the codecs that you want to be made available for the SIP trunk to use when communicating with the remote dial peer.
Codecs in the target list are in descending order of priority, with the highest priority at the top of the list. Drag and drop items in this list to rearrange them.
voice class codec tag-number
codec preference value codec-type
DTMF
Move from the Source list to the Target list the DTMF relay options that you want the system to use for SIP calls.
Items in the Target list are in descending order of priority, with the highest priority at the top of the list. Drag and drop items in this list to rearrange them.
If you want to include the Inband option in the Target list, it can be the only option in that list. If you want to include other options in the Target list, move the Inband option to the Source list before saving the media profile.
dtmf-relay {[[sip-notify] [sip-kpml] [rtp-nte]]}
Save
Click to save the configuration settings that you made.
—
Modem Pass-through—Use these options to configure the modem pass-through feature for a SIP dial peer endpoint. The following table describes these options.
Table 22. Modem Pass-Through Options
Option
Description
Cisco IOS CLI Equivalent
Add New Modem Pass-through
Click to add a modem pass-through for this SIP dial peer endpoint.
—
Copy from Existing
Click to copy an existing modem pass-through to a new modem pass-through profile. In the box that appears, select an existing modem pass-through, enter new name if desired, and click Copy.
—
Name
Name of the modem pass-through.
This name is used when you copy an existing modem pass-through profile to a new one.
—
Protocol
Select the protocol for the modem pass-through:
None—Modem pass-through is disabled on the device
NSE G.711ulaw—Uses named signaling events (NSEs) to communicate G.711ulaw codec switchover between gateways
NSE G.711alaw—Uses named signaling events (NSEs) to communicate G.711alaw codec switchover between gateways
None:
no modem passthrough
NSE G.711 ulaw:
modem passthrough nse codec g711ulaw
NSE G.711 alaw:
modem passthrough nse codec g711alaw
Save Modem Pass-Through
Click to save the configuration settings that you made.
—
Fax Protocol—Use these options to configure the fax protocol capability for a SIP dial peer endpoint. The following table describes these options.
Table 23. Fax Protocol Options
Option
Description
Cisco IOS CLI Equivalent
Add New Fax Protocol
Click to add a fax protocol for the dial peer.
—
Copy from Existing
Click to copy an existing fax protocol to a new fax protocol. In the box that appears, select an existing fax protocol, enter new name if desired, and click Copy.
—
Name
Name of the fax protocol.
This name is used when you copy an existing fax profile to a new fax profile.
—
Primary
Select from a set of fax protocol options. Each option is a bundled set of related fax commands.
For a detailed description of each bundle, see the “Primary Fax Protocol Command Bundles” table
The descriptions of the bundles include the following components:
nse—Uses NSEs to switch to T.38 fax relay mode
force—Unconditionally uses Cisco Network Services Engines (NSE) to switch to T.38 fax relay
version—Specifies a version for configuring fax speed:
0—Configures version 0, which uses T.38 version 0 (1998–G3 faxing)
3—Configures version 3, which uses T.38 version 3 (2004–V.34 or SG3 faxing)
none—No fax pass-through or T.38 fax relay is attempted
Pass-through—The fax stream uses one of the following high-bandwidth codecs:
g711ulaw—Uses the G.711 ulaw codec
g711alaw—Uses the G.711 alaw codec
fax protocol { none | pass-through {g711ulaw | g711alaw} [fallback none ]| t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] [fallback {none | pass-through {g711ulaw | g711alaw}}]}
Fallback
Available when the primary protocol bundle name that you selected in the Primary field begins with “T.38” or with “Fax Pass-through.”
Select the fallback mode for fax transmissions. This fallback mode is used if the primary fax protocol cannot be negotiated between device endpoints.
For a detailed description of each option, see the "Fallback Protocol Options” table.
fax protocol {none | pass-through {g711ulaw | g711alaw} [fallback none] | t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] [fallback {none | pass-through {g711ulaw | g711alaw}}]}
Low Speed
Available when the primary protocol bundle name that you selected in the Primary field begins with “T.38.”
Specifies the number of redundant T.38 fax packets to be sent for the low-speed V.21-based T.30 fax machine protocol.
Range: varies from 0 (no redundancy) to 5. Default: 0.
ls-redundancy value
High Speed
Available when the primary protocol bundle name that you selected in the Primary field begins with “T.38.”
Specifies the number of redundant T.38 fax packets to be sent for high-speed V.17, V.27, and V.29 T.4 or T.6 fax machine image data.
Range: varies from 0 (no redundancy) to 2. Default: 0
hs-redundancy value
Save Fax Protocol
Click to save the configuration settings that you made.
—
The following table describes the bundled sets of fax commands that are available for the Primary option when you configure the fax protocol capability for a SIP dial peer endpoint.
For low speed (ls) redundancy, the range varies from 0 (no redundancy) to 5. For high speed (HS redundancy, the range varies from 0 (no redundancy) to 2.
Table 24. Primary Fax Protocol Command Bundles
Fax Command Protocol Bundle
Description
Cisco IOS CLI Equivalent
T.38 Fax Relay Version 3
Primary fax protocol is T.38 fax relay version 3.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 3 ls-redundancy value hs-redundancy value
no fax-relay sg3-to-g3
T.38 Fax Relay Version 0
Primary fax protocol is T.38 fax relay version 0.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
T.38 Fax Relay Version 3 NSE
Primary fax protocol is NSE based T.38 fax relay version 3.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 3 nse ls-redundancy value hs-redundancy value
no fax-relay sg3-to-g3
T.38 Fax Relay Version 3 NSE force
Primary fax protocol is NSE force option of T.38 fax relay version 3.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 3 nse force ls-redundancy value hs-redundancy value
no fax-relay sg3-to-g3
T.38 Fax Relay Version 0 NSE
Primary fax protocol is NSE option of T.38 fax relay version 0.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
T.38 Fax Relay Version 0 NSE force
Primary fax protocol is NSE force option of T.38 fax relay version 0.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
T.38 Fax Relay Version 0 No ECM
Primary fax protocol is T.38 fax relay version 0 with ECM disabled.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
fax-relay ecm disable
T.38 Fax Relay Version 0 NSE No ECM
Primary fax protocol is NSE based T.38 fax relay version 0 with ECM disabled.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
fax-relay ecm disable
T.38 Fax Relay Version 0 NSE force No ECM
Primary fax protocol is NSE force option T.38 fax relay version 0 with ECM disabled.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
fax-relay ecm disable
T.38 Fax Relay Version 0 Rate 14.4 No ECM
Primary fax protocol is T.38 fax relay version 0 with ECM disabled and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 14400
T.38 Fax Relay Version 0 NSE Rate 14.4 No ECM
Primary fax protocol is NSE based T.38 fax relay version 0 with ECM disabled and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 14400
T.38 Fax Relay Version 0 NSE force Rate 14.4 No ECM
Primary fax protocol is NSE force option T.38 fax relay version 0 with ECM disabled and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 14400
T.38 Fax Relay Version 0 Rate 9.6 No ECM
Primary fax protocol is T.38 fax relay version 0 with ECM disabled and fax rate of 9,600 bps
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 9600
T.38 Fax Relay Version 0 NSE Rate 9.6 No ECM
Primary fax protocol is NSE based T.38 fax relay version 0 with ECM disabled and fax rate of 9,600 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 9600
T.38 Fax Relay Version 0 NSE force Rate 9.6 No ECM
Primary fax protocol is NSE force option T.38 fax relay version 0 with ECM disabled and fax rate of 9,600 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
fax-relay ecm disable
fax rate 9600
T.38 Fax Relay Version 0 Rate 14.4
Primary fax protocol is T.38 fax relay version 0 with ECM and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
fax rate 14400
T.38 Fax Relay Version 0 NSE Rate 14.4
Primary fax protocol is NSE based T.38 fax relay version 0 with ECM and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
fax rate 14400
T.38 Fax Relay Version 0 NSE force Rate 14.4
Primary fax protocol is NSE force option T.38 fax relay version 0 with ECM and fax rate of 14,400 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
fax rate 14400
T.38 Fax Relay Version 0 Rate 9.6
Primary fax protocol is T.38 fax relay version 0 with ECM and fax rate of 9,600 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 ls-redundancy value hs-redundancy value
fax rate 9600
T.38 Fax Relay Version 0 NSE Rate 9.6
Primary fax protocol is NSE based T.38 fax relay version 0 with ECM and fax rate of 9,600 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse ls-redundancy value hs-redundancy value
fax rate 9600
T.38 Fax Relay Version 0 NSE force Rate 9.6
Primary fax protocol is NSE force option T.38 fax relay version 0 with ECM and fax rate of 9,600 bps.
Options for selecting the low-speed and high-speed redundancy values are available.
fax protocol t38 version 0 nse force ls-redundancy value hs-redundancy value
fax rate 9600
None
Fax protocol is disabled.
fax protocol none
Fax Pass-through G711ulaw
Primary fax protocol is fax pass-through with pass-through codec set to g711ulaw.
fax protocol pass-through g711ulaw
Fax Pass-through G711ulaw No ECM
Primary fax protocol is fax pass-through with pass-through codec set to g711ulaw and ECM disabled.
fax protocol pass-through g711ulaw
fax-relay ecm disable
Fax Pass-through G711alaw
Primary fax protocol is fax pass-through with pass-through codec set to g711alaw.
fax protocol pass-through g711alaw
Fax Pass-through G711alaw No ECM
Primary fax protocol is fax pass-through with pass-through codec set to g711alaw and ECM disabled.
fax protocol pass-through g711alaw
fax-relay ecm disable
The following table describes the selections that are available for the Fallback option when you configure the fax protocol capability for a SIP dial peer endpoint.
Table 25. Fallback Protocol Options
Fallback Fax Protocol Options
Description
Cisco IOS CLI Equivalent
None
Fallback Fax Protocol is None. All special fax handling is disabled.
fax protocol t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] fallback none
fax protocol pass-through {g711ulaw | g711alaw } fallback none
Fax Pass-through G711ulaw
Fallback Fax Protocol is Fax Pass-through with pass-through codec set to g711ulaw.
fax protocol t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] fallback pass-through g711ulaw
Fax Pass-through G711alaw
Fallback Fax Protocol is Fax Pass-through with pass-through codec set to g711alaw.
fax protocol t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] fallback pass-through g711alaw
To configure SIP dial peers for a voice policy:
From the Cisco vManage menu, choose Configuration > Unified Communications.
Click SIP Dial Peer.
From the Add SIP Dial Peer Policy Profile drop-down list, choose Create New.
Alternatively, you can select Copy from Existing to copy an existing SIP dial peer policy to a new one. In the box that appears, select the name of the policy profile to copy, enter a new name for the profile if desired, and click Copy.
Select the policy types that you want to create and click Next:
Translation Profile—Lets you configure translation rules for calling and called numbers.
Media Profile—Lets you configure codecs to be available for the SIPtrunk communication with remote dial peers and DTMF relay options to use for SIP calls.
Modem Pass-through—Lets you configure the modem pass-through feature for a SIP dial peer endpoint.
Fax Protocol—Lets you lets you configure the fax protocol capability for a SIP dial peer endpoint. This capability is advertised and used when negotiating capabilities with the remote dial peer.
In the page that displays, configure options in the tabs that the following tables describe as needed.
The tabs that are available depend on the policy types that you selected.
Translation Profile options—For a description of these options, see the "Translation Profile Options for Calling Numbers on SIP Dial Peers" table.
After you click Finish when configuring a translation profile, perform these actions:
Add another translation profile if needed. You can create up to two translation profiles for this endpoint.
Click Save Translation Profile.
For each translation profile that you create, double-click the dash (-) that displays in Direction column in the table of translation rules and select Incoming or Outgoing from the drop-down list that displays. The Incoming selection applies the corresponding translation rule to traffic that is incoming to this endpoint. The Outgoing selection applies the corresponding translation rule to traffic that is outgoing from this endpoint.
Media Profile options—For a description of these options, see the "Media Profile Options" table.
Modem Pass-through options—For a description of these options, see the "Modem Pass-Through Options" table.
Fax Protocol options—For a description of these options, see the "Fax Protocol Options" table.
Click Next.
In Policy Profile Name, enter a name for this child policy.
In Policy Profile Description, enter a description for this child policy.
Click Save.
Configure SRST Phones for a Voice Policy
When you configure SRST Phones for a voice policy, you configure options that define how the system augments and manipulates calls for the Cisco Unified SRST phone endpoint type.
The following table describes options for configuring SRST phones for a voice policy.
Table 26. SRST Phones Configuration Options
Option
Description
Cisco IOS CLI Equivalent
Medial Profile Number
Enter a number for this Cisco Unified SRST media profile.
Valid range: Integers 1 through 10000.
voice class codec tag-number
Codec
Move from the Source list to the Target list the codecs that you want to be available for phones when they are in Cisco Unified SRST mode and communicating with other phones that are in the same site and registered to the same gateway.
Codecs in the target list are in descending order of priority, with the highest priority at the top of the list. Drag and drop items in this list to rearrange them.
voice class codec tag-number
codec preference value codec-type
DTMF field
Move from the source list to the target list the DTMF relay options that you want the system to use when in Cisco Unified SRST mode.
Items in the target list are in descending order of priority, with the highest priority at the top of the list. Drag and drop items in this list to rearrange them.
If you want to include the Inband option in the Target list, it can be the only option in that list. If you want to include other options in the Target list, move the Inband option to the Source list before saving the media profile.
dtmf-relay {[[sip-notify] [sip-kpml] [rtp-nte]]}
Save
Click to save the configuration settings that you made.
—
To configure SRST phones for a voice policy, follow these steps:
From the Cisco vManage menu, choose Configuration > Unified Communications
Click Add Voice Policy, and choose SRST Phone.
From the Add SRST Phone Policy Profile drop-down list, select Create New.
Alternatively, you can select Copy from Existing to copy an existing policy to a new one. In the box that appears, select the name of the policy profile to copy, enter a new name for the profile if desired, and click Copy.
Click Media Profile, and click Next.
Click Add New Media Profile.
In the page that displays, configure options as described in the "SRST Phones Configuration Options" table.
Click Next.
In Policy Profile Name, enter a name for this child policy.
In Policy Profile Description, enter a description for this child policy.
Click Save.
Provision a Device Template for Unified Communications
When you provision a device template for Unified Communications, you select UC-specific feature templates and set up the voice policy to include with the device template.
From the Cisco vManage menu, choose Configuration > Templates.
Click Device Templates, and click Create Template.

Note
In Cisco vManage Release 20.7.x and earlier releases, Device Templates is called Device.
From the Create Template drop-down list, select From Feature Template.
From the Device Model drop-down list, select the type of supported device to which you want to attach the UC-specific feature templates and map the voice policy.
Click Unified Communications.
To select UC-specific feature templates to include with the device template, perform these actions:
From the Voice Card drop-down list, select the voice card feature template that you want to attach to the device.
From the Call Routing drop-down list, select the call routing feature template that you want to attach to the device.
From the SRST drop-down list, select the SRST feature template that you want to attach to the device.
From the DSPFarm drop-down list, select the DSPFarm template that you want to attach to the device.
To set up the voice policy to include with the device template, perform these actions:
From the Voice Policy drop-down list, select the voice policy that you want to map to endpoints.
Click Mapping.
From the list of endpoint types in the left pane of the screen that displays, select the type of endpoint that contains the subpolicies that you want to map to specific endpoints.
From the list of subpolicies that displays, click …, and click Mapping for the subpolicy that you want to map to specific endpoints.
In the list of endpoints that displays, select each endpoint to which you want to map the subpolicy.
Click Map.
Click Save.
To create the device template, click Create.
When you map subpolicies to endpoints, the system generates the CLI commands that the following table shows.
Table 27. Generated CLI Commands for Subpolicies to Endpoints Mapping
Endpoint
Subpolicy
Cisco IOS CLI Application Mapping
Remarks
Voice Port FXO
Voice Port FXS
Voice Port FXS DID
Voice Port PRI ISDN
POTS Dial Peer
SIP Dial Peer
Translation profile
translation-profile incoming profile-name
translation-profile outgoing profile-name
A translation profile policy is applied to a dial peer or a voice profile.
SRST Phone
SIP Dial Peer
Media profile
voice register pool number
voice-class codec number
dtmf-relay {[[sip-notify] [sip-kpml] [rtp-nte]]}
A media profile policy includes voice class codec and DTMF relay configurations. This policy is applied to an incoming SIP dial peer, an outgoing SIP dial peer, or an SRST phone profile.
Voice Port FXO
Supervisory disconnect
voice port number
supervisory custom-cptone cptone-name
supervisory dualtone-detect=params tag
A supervisory disconnect policiy such as custom-cptone or dualtone-detect-params is applied to FXO voice interfaces.
Voice Port FXO
Voice Port FXS
Voice Port FXS DID
Voice Port PRI ISDN
POTS Dial Peer
Trunk group
trunk-group name [preference-num]
voice-port number trunk-group name [preference-num]
interface serial slot/sub-slot/port:{15 | 23}
dial-peer voice tag pots
trunkgroup name preference-num
If more than one interface is assigned to the same trunk group, the preference-num value determines the order in which the trunk group uses the interfaces.
A preference-num value of 1 is the highest preference, so an interface with that value is used first. A value of 64 is the lowest preference so an interface with that value is used last.
SIP Dial Peer
Modem pass-through
None:
no modem passthrough
G.711 ulaw:
modem passthrough nse codec g711ulaw
G.711 alaw:
modem passthrough nse codec g711alaw
—
SIP Dial Peer
Fax protocol
fax protocol {none | pass-through {g711ulaw | g711alaw} [fallback none] | t38 [nse [force]] [version {0 | 3}] [ls-redundancy value [hs-redundancy value]] [fallback {none | pass-through {g711ulaw | g711alaw}}]}
—
Dial Peer CSV File
A dial peer CSV file includes information for one or more incoming and outgoing SIP and POTS dial peers. The file must be comma delimited, and each record in the file must include each field that the following table describes, in the order shown.
Table 28. Dial Peer CSV Files Fields
Field
Description
Dial Peer Tag
Number that is used to reference the dial peer.
Dial Peer Type
Type of dial peer that you are creating (pots or voip).
Direction
Direction of traffic on the dial peer (Incoming or Outgoing).
Description
Description of the dial peer.
Forward Digits
How the dial peer transmits digits in outgoing numbers:
All—The dial peer transmits all digits in the number.
None—The dial peer does not transmit digits in the number that do not match the destination pattern.
n—The dial peer transmits the number of right-most digits in the number that the integer n represents. For example, if n is 7 and the outgoing number is 1112223333, the dial peer transmits 2223333.
Preference
For POTS dial peers, a unique numeric value for the dial peer. If dial peers have the same match criteria, the system uses the one with the highest preference value.
Prefix
Digits to be prepended to outgoing POTS dial peer calls.
Numbering Pattern
String that the router uses to match incoming calls to the dial peer.
Dest. Address
Network address of the remote voice gateway to which calls are sent after a local outgoing SIP dial peer is matched.
Voice Port
Voice port that the router uses to match calls to the dial peer.
For an outgoing dial peer, the router sends the calls that match the dial peer to this port.
For an incoming dial peer, this port serves as an additional match criterion. The dial peer is matched only if a call comes in on this port.
Transport Protocol
For SIP dial peers, transport protocol (TCP or UDP) for SIP control signaling.
Example dial peer CSV file:
Tag,type,Direction,Description,Forward Digits,Preference,Prefix,Pattern,Dest. Address,Voice Port,Transport
6545,voip,Outgoing,description To Voice Gateway,,1,,23456,ipv4:166.2.121.17,,udp
6756,voip,Outgoing,description ***Fax Number 6362-6362***,,0,,34567,ipv4:166.2.121.16,,tcp
768,voip,Outgoing, description Fire Alarm Dialer,,8,,5678,ipv4:166.2.121.19,,udp
10,pots,Incoming,,,5,,0115T,,1/0/1,
54,pots,Outgoing,,,6,,.T,,1/0/3,
23,pots,Incoming,,all,0,,76..,,1/0/4,
26,pots,Incoming,,5,1,55,9800.......,,1/0/5,
27,pots,Incoming,,5,1,55,9800.......,,0/1/5:15,
Translation Rules CSV File
When you configure translation rules for a translation profile, POTS dial peer, or SIP dial peer you can either create new translation rules or import existing translation rule information from a CSV file.
The file must be comma delimited, and each record in the file must include each field that the following table describes, in the order shown:
Table 29. Translation Rules CSV Files Fields
Field
Description
Match
String that you want the translation rule to affect. The string must be in regular expression format beginning and ending with a slash (/). For example, /^9/.
Action
Action that the system performs for calls that match the string in the Match field. Valid values are:
reject—Causes the system to reject the call
replace—Causes the system to replace the match string with the value in the Replace field
Replace
If the Action field contains replace, this field contains the string to which to translate the matched string. Enter the number in regular expression format beginning and ending with a slash (/). For example, //, which indicates a replacement of no string.
As an example, if you specify a match string of /^9/ and a replace string of //, the system removes the leading 9 from calls with a number that begins with 9. In this case, the system translates 914085551212 to 14085551212.
Example translation rules CSV file:
Match,Action,Replace
/34/,replace,/34/
/23/,reject,
/56/,replace,/100/
/16083652563/,replace,/6083652563/
Monitoring UC Operations
After you enable UC voice services for supported routers, you can monitor the real-time statuses of lines, calls, interfaces, and related items that a device processes.
To monitor UC operations:
From the Cisco vManage menu, choose Monitor > Devices.
Cisco vManage Release 20.6.x and earlier: From the Cisco vManage menu, choose Monitor > Network.
In the table of devices, select the device for which you want to monitor UC operations.
From Security Monitoring, click Real Time.
In Device Options, select one of these options:
Voice Calls—Displays information for active voice calls. See the "Voice Call Monitoring Information" table.
Voice VOIP Calls—Displays information for active VOIP calls. See the "Voice VoIP Calls Monitoring Information" table.
Voice Phone Info—Displays information about Cisco Unified SRST registrations. See the "Voice Phone Info Monitoring Information" table.
Voice Controller T1 E1 Current 15 mins Stats—Displays configuration and status information for the T1/E1 voice module that is installed in the device, compiled over the past 15 minutes. See the "Voice Controller T1 E1 Current 15 Mins Stats Monitoring Information" table.
Voice Controller T1 E1 Total Stats—Displays configuration and status information for the T1/E1 voice module that is installed in the device, compiled since the module last started. See the "Voice Controller T1 E1 Total Stats" table.
Voice ISDN Status—Displays information about Layer 1 and Layer 2 status for the ISDN controller, and information about active calls. "See the Voice ISDN Status Information table".
Voice DSPFarm SCCP CUCM Groups—Displays detailed information about Cisco Unified Communications Manager groups that are configured for DSP farm services on a device. See the "Voice DSPFarm SCCP CUCM Groups" table.
Voice DSPFarm Profile—Displays detailed information about DSP farm service profiles and media resources that are configured on the device. See the "Voice DSPFarm Profile Monitoring Information" table.
Voice DSP Farm SCCP Connections—Displays detailed information about SCCP connections between the device and Cisco Unified Communications Manager. See the "Voice DSPFarm SCCP Connections" table.
Voice DSPFarm Active—Displays operational and status information about DSP farm resources that are active on the device. See the "Voice DSPFarm Active" table.
You also can monitor operations that include UC operations by selecting the following options:
Interface Detail—Displays status and statistical information for interfaces that are configured for the router.
Interface Statistics—Displays statistical information for interfaces that are configured for the router
Interface T1/E1—Displays information for the T1/E1 voice module that is installed in the device
The following table describes the information that you see when you monitor voice calls.
Table 30. Voice Calls Monitoring Information
Field
Description
Call ID
System assigned identifier of a telephony call leg
Voice Port
Voice port used for the call
Codec
Negotiated codec used for the call
VAD
Indicates whether VAD is enabled or disabled for the call
DSP Cannel
DSP channel used for the call
DSP Type
Type of DSP used for the call
Aborted Packets
Number of packets aborted during the call
TX Packets
Number of packets transmitted during the call
RX Packets
Number of packets received during the call
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor voice VoIP calls.
Table 31. Voice VoIP Calls Monitoring Information
Field
Description
Call ID
System assigned identifier of an RTP connection for a call leg
Codec
Negotiated codec used for the call
Destination Address
IP address of the destination of the call
Destination Port
RTP port of the destination of the call
TX Packets
Number of packets transmitted during the call
RX Packets
Number of packets received during the call
Duration (ms)
Duration of the call, in milliseconds
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor voice phone information.
Table 32. Voice Phone Info Monitoring Information
Field
Description
Pool Tag
Tag number that is assigned to the Cisco Unified SRST phone pool on the device
ID Network
Identifier of the network subnet that the device uses to register phones that fallback from Cisco Unified Communications Manager to this device
Registration State
Indicates whether phones that are in Cisco Unified SRST mode are registered to this device
Dialpeer Tag
System assigned tag used by the dial peer that is assigned to the directory number of phones that are in Cisco Unified SRST mode and are registered to this device
Address
IP address of the device interface that is used for SIP SRST call control when phones fail over
Directory Number
Directory number of each phone that is in Cisco Unified SRST mode
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor voice controller T1/E1 information for the past 15 minutes.
Table 33. Voice Controller T1 E1 Current 15 Mins Stats Monitoring Information
Field
Description
Interface-slot-num
Slot number of the controller.
Insterface-subslot-num
Subslot number of the controller.
Interface-port-num
Port number of the controller.
Status
Status of the controller.
Type
Type of the controller.
Clock Source
Clock source used for the controller.
Line Code Violations
Number line code violations that have occurred.
Path Code Violations
Number path code violations that have occurred.
Slip Seconds
Number of slip seconds that have occurred. A slip can occur when there is a difference between the timing of a synchronous receiving terminal and the received signal.
Frame Loss Seconds
Number of seconds in which out of frame (OOF) errors have occurred.
Line Err. seconds
Number of seconds in which Line Errored Seconds (LES) have occurred. A LES is a second in which one or more Line Code Violation errors are detected.
Degraded Minutes
Number of Degraded Minutes that have occurred. A Degraded Minute is one in which the estimated error rate exceeds 1E-6 but does not exceed 1E-3.
Errored Seconds
Number of Errored Seconds that have occurred.
Bursty Errored Seconds
Number of Bursty Error Seconds that have occurred. A Bursty Error Second is a second with less than 320 and more than 1 path coding violation errors, no severely errored frame defects, and no detected incoming AIS defects.
Severely Errored Seconds
Number of Severely Errored Seconds that have occurred.
Unavailable Seconds
Number of Unavailable Seconds that have occurred. This value is calculated by counting the number of seconds that the interface is unavailable.
Last Updated
Date and time when the information on this page was last updated.
The following table describes the information that you see when you monitor voice controller T1/E1 information over the period since a device last started.
Table 34. Voice Controller T1 E1 Total Stats
Field
Description
Interface-slot-num
Slot number of the controller.
Insterface-subslot-num
Subslot number of the controller.
Interface-port-num
Port number of the controller.
Status
Status of the controller.
Type
Type of the controller.
Clock Source
Clock source used for the controller.
Line Code Violations
Number line code violations that have occurred.
Path Code Violations
Number path code violations that have occurred.
Slip Seconds
Number of slip seconds that have occurred. A slip can occur when there is a difference between the timing of a synchronous receiving terminal and the received signal.
Frame Loss Seconds
Number of seconds in which out of frame (OOF) errors have occurred
Line Err. seconds
Number of seconds in which Line Errored Seconds (LES) have occurred. A LES is a second in which one or more Line Code Violation errors are detected.
Degraded Minutes
Number of Degraded Minutes that have occurred. A Degraded Minute is one in which the estimated error rate exceeds 1E-6 but does not exceed 1E-3.
Errored Seconds
Number of Errored Seconds that have occurred.
Bursty Errored Seconds
Number of Bursty Error Seconds that have occurred. A Bursty Error Second is a second with less than 320 and more than 1 path coding violation errors, no severely errored frame defects, and no detected incoming AIS defects.
Severely Errored Seconds
Number of Severely Errored Seconds that have occurred.
Unavailable Seconds
Number of Unavailable Seconds that have occurred. This value is calculated by counting the number of seconds that the interface is unavailable.
Last Updated
Date and time when the information on this page was last updated.
The following table describes the information that you see when you monitor voice ISDN status.
Table 35. Voice ISDN Status Information
Field
Description
Key ID
Identifier of the table row
Interface
Name of the PRI ISDN digital interface
Switch Type
Switch type used for the PRI ISDN digital interface
Layer 1 Status
Layer 1 status of the PRI ISDN digital interface
Layer 2 Status
Layer 2 status of the PRI ISDN digital interface
Active Calls
Number of active calls on the PRI ISDN digital interface
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor Cisco Unified Communications Manager groups that are configured for DSP farm services on a device.
Table 36. Voice DSPFarm SCCP CUCM Groups Monitoring Information
Field
Description
CUCM Group ID
Identifier of the Cisco Unified Communications Manager group
Description
Description of the Cisco Unified Communications Manager group
Switchover Method
Method that the primary Cisco Unified Communications Manager server in this Cisco Unified Communications Manager group uses for failover
Switchback Method
Method that the secondary Cisco Unified Communications Manager server in this Cisco Unified Communications Manager group uses to switch back after a failover
CUCM ID
Identifier of each Cisco Unified Communications Manager server in the Cisco Unified Communications Manager group
CUCM Priority
Priority in which the Cisco Unified Communications Manager servers in this Cisco Unified Communications Manager group are used
Profile ID
Identifier of the DSP farm profile that is registered to each Cisco Unified Communications Manager server in the Cisco Unified Communications Manager group
Reg. Name
Name of the DSP farm profile that is registered to each Cisco Unified Communications Manager server in the Cisco Unified Communications Manager group
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor DSP farm service profiles and media resources that are configured on a device.
Table 37. Voice DSPFarm Profile Monitoring Information
Field
Description
Profile ID
Identifier of the DSP farm profile.
Service ID
Type of DSP farm service that is configured for this DSP farm profile.
Service Mode
Service mode for this DSP farm profile.
Resource ID
Resource identifier for the DSP resource group in this DSP farm profile.
Admin
Status of this DSP farm profile. If this field displays DOWN, ensure that the Shutdown option is not enabled in the Profile tab of the DSPFarm feature template that defines this DSP farm.
Operation
Status of the registration of the profile with Cisco Unified Communications Manager:
ACTIVE IN PROGRESS—Profile is in the process of registering with Cisco Unified Communications Manager
DOWN—Profile is unable to register with Cisco Unified Communications Manager
ACTIVE— Profile is registered with Cisco Unified Communications Manager
App. Type
Type of application with which the DSP farm services that are provisioned on the device are associated.
App. Status
Status of the association of this profile with Cisco Unified Communications Manager:
app-assoc-done—Profile is associated with Cisco Unified Communications Manager
app-assoc-not-done—Profile is not associated with Cisco Unified Communications Manager
Resource Provider
Information about the mediaresource family that relates to the profile.
Provider Status
Status of the media resources that relate to the profile.
Last Updated
Date and time when the information on this page was last updated.
The following table describes the information that you see when you monitor SCCP connections between a device and Cisco Unified Communications Manager.
Table 38. Voice DSPFarm SCCP Connections
Field
Description
Connection ID
Identifier of an SCCP connection for an active call that uses this DSP farm service
Session ID
Identifier of an SCCP session for an active call that uses this DSP farm service
Session Type
Type of DSP farm service for this SCCP connection
Mode
Mode for direction of traffic for this SCCP connection
Codec
Codec provisioned for this SCCP connection
Remote IP
IP address of the remote endpoint for this SCCP connection
Remote Port
Port number of the remote endpoint for this SCCP connection
Source Port
Port number of the local endpoint for this SCCP connection
Last Updated
Date and time when the information on this page was last updated
The following table describes the information that you see when you monitor DSP farm resources that are active on a device.
Table 39. Voice DSPFarm Active Monitoring Information
Field
Description
DSP
Identifier of the DSP for an active call that uses this DSP farm service
Status
Status of the DSP for an active call that uses this DSP farm service
Resource ID
Resource Identifier that is associated with the DSP that this connection uses
Bridge ID
Bridge Identifier that is associated with the DSP that this connection uses
Transmit Packets
Number of packets that this connection has transmitted
Received Packets
Number of packets that this connection has received
Last Updated
Date and time when the information on this page was last updated
Cisco Unified Communications FXS and FXO Caller ID Support
Table 40. Feature History
Feature Name
Release Information
Description
Cisco Unified Communications FXS and FXO Caller ID Support
Cisco IOS XE Release 17.8.1a
Cisco vManage Release 20.8.1
This feature lets you configure Foreign Exchange Station (FXS) and Foreign Exchange Office (FXO) caller ID features by using Cisco vManage CLI add-on feature templates.
Information About Adding Voice Features with a CLI Add-On Feature Template
Supported Devices for Adding Voice Features with a CLI Add-On Feature Template
Restrictions for Adding Voice Features with a CLI Add-On Feature Template
Configure Voice Features with a CLI Add-On Feature Template
Examples of Adding Voice Features with a CLI Add-On Feature Template
Information About Adding Voice Features with a CLI Add-On Feature Template
You can configure FXS and FXO caller ID features in Cisco IOS XE SD-WAN devices by using CLI add-on feature templates. For detailed information about CLI add-on feature templates, see CLI Add-On-Feature Templates.
Caller ID is an analog service by which a telephone central office switch sends digital information about an incoming call. The Caller ID feature for analog FXS ports is configurable on a per-port basis to phones that are connected to analog FXS voice ports. Caller ID also is available on analog FXO ports. Caller ID-related features are based on the identity of the calling party.
If an FXS voice port has caller-id commands configured, remove all the caller-id configurations before changing the signaling type from loop-start or ground-start to Direct Inward Dialing (DID).
If you remove a voice port from a device after a caller ID command is configured, remove the caller ID configuration from the device. Otherwise, a voice port configuration mismatch occurs between the Cisco IOS configuration and the Cisco SD-WAN configuration.
Supported Devices for Adding Voice Features with a CLI Add-On Feature Template
Cisco NIM-2FXO network interface module
Cisco NIM-4FXO network interface module
Cisco NIM-2FXSP network interface module
Cisco NIM-4FXSP network interface module
Cisco NIM-2FXS/4FXOP network interface module
Cisco SM-X-72FXS double-wide service module
Cisco SM-X-24FXS/4FXO single-wide service module
Cisco SM-X-16FXS/2FXO single-wide service module
Cisco SM-X-8FXS/12FXO single-wide service module
Restrictions for Adding Voice Features with a CLI Add-On Feature Template
Caller ID must be enabled with the caller-id enable command before you use any of the caller-id commands.
When the caller-id alerting dsp-pre-allocate command is used or disabled, the FXO voice port is automatically shut down and then brought up to allocate or deallocate the DSP voice channel if the FXO port is in the Idle state.
Configure Voice Features with a CLI Add-On Feature Template
The following commands provide configuration options for caller ID features:
caller-id alerting dsp-pre-allocate : Statically allocates a digital signal processor (DSP) voice channel for receiving caller ID information for an on-hook (Type 1) caller ID at a receiving FXO voice port.
caller-id alerting line-reversal : Sets the line-reversal alerting method for caller ID information for an on-hook (Type 1) caller ID at a sending FXS voice port and for an on-hook caller ID at a receiving FXO voice port.
caller-id alerting pre-ring : Sets a 250-millisecond pre-ring alerting method for caller ID information for an on-hook (Type 1) caller ID at a sending FXS and a receiving FXO voice port.
caller-id alerting ring : Sets the ring-cycle method for receiving caller ID information for an on-hook (Type 1) caller ID at a receiving FXO or a sending FXS voice port.
caller-id block : Requests blocking of caller ID information display at the far end of a call that originates from an FXS port.
caller-id format e911 : Specifies the caller ID message type that should be the enhanced 911 format for calls that are sent on FXS voice ports.
caller-id mode : Specifies a noncountry, standard caller ID mode for a receiving FXO or a sending FXS voice port.
clid dtmf-codes : Specifies global caller ID DTMF start, redirect, and end codes.
Examples of Adding Voice Features with a CLI Add-On Feature Template
The following example shows caller ID configuration for FXS ports:
voice service pots
    clid dtmf-codes ABC
!
voice-port 1/0/0
   caller-id enable
   caller-id alerting ring 3
    station name West Wing
   station number 4085550100
!
voice-port 1/0/1
   caller-id enable
    caller-id mode DTMF start * end #
    caller-id alerting line-reversal
    station name East Wing
    station number 4085550101
!
voice-port 1/0/2
   caller-id enable
    caller-id mode BT
    caller-id alerting pre-ring
    station name Jose
    station number 4085550102
!
voice-port 1/0/3
    caller-id enable
    caller-id block
    station name a-sample
    station number 4085552000
!
voice-port 1/0/4
    caller-id enable
    caller-id format e911
    station name sample-2
    station number 4085552222
  
The following example shows caller ID configuration for FXO ports:
voice service pots
    clid dtmf-codes ABC
!
voice-port 2/0/0
    cptone BR
    caller-id enable
    caller-id alerting line-reversal
    caller-id alerting dsp-pre-allocate
!
voice-port 2/0/1
    caller-id enable
    caller-id alerting ring 2
!
voice-port 2/0/2
    caller-id enable
    caller-id BT FSK
    caller-id alerting pre-ring
  
Was this Document Helpful?
Yes No
Feedback
Customers Also Viewed
Cisco SD-WAN Systems and Interfaces Configuration Guide, Cisco IOS XE Release 17.x --- CUBE Configuration
Cisco IOS XE SD-WAN Qualified Command Reference --- Voice Commands
Identify vEdge Certificate Expired on May 9, 2023
+ Show 3 More
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)