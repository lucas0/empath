Troubleshooting TechNotes
Collect an Admin-Tech in SDWAN Environment and Upload to TAC Case
Save
Translations
Download
Print



Updated:January 12, 2023
Document ID:216954
Bias-Free Language
Contents
Introduction
Prerequisites
Requirements
Components Used
Background Information
Generate Admin-Tech
Scenario 1. From vManage for Device Online
Scenario 2. From the CLI for Device Unreachable from vManage
Scenario 3. From the CLI for cEdge
Additional Notes
Transfer Admin-Tech Directly into a Cisco SR
Prerequisites
Retrieve the Upload Token for an SR
Use SCM to Get the Token
Upload Admin-Tech to an SR
Verify the Case Attachment
Introduction
This document describes how to initiate an admin-tech in an Software Defined Wide Area Network (SD-WAN) environment. 
Prerequisites
Requirements
Cisco recommends that you have knowledge of Cisco SD-WAN.
Components Used
The information in this document is based on Cisco vManage.
The information in this document was created from the devices in a specific lab environment. All of the devices used in this document started with a cleared (default) configuration. If your network is live, ensure that you understand the potential impact of any command.
Background Information
When you initiate an admin-tech in an Software Defined Wide Area Network (SD-WAN) environment, this is intended to help capture information for the Technical Assistance Center (TAC) in order to assist it to troubleshoot an issue. It helps to capture the admin-tech in the problem state. It covers the usage of the vManage GUI and CLI, Edge device CLI, and the upload of the admin-tech directly into the Cisco TAC case with the use of the token mechanism.
Generate Admin-Tech
Scenario 1. From vManage for Device Online
Step 1. Log in to vManage.
Step 2. Navigate to Tools > Operational Commands.
Note: Admin-Tech is generated by a user that has netadmin rights or with a custom usergroup user that has write access to Tools.
vManage 20.7.x and later
Step 3. Click the ... (three dots) for the device for which admin-tech needs to be generated (Step A).
Step 4. Click Admin Tech (Step B) as shown in the image.
Step 5. Check the relevant check boxes, as shown in the image.
Note: If the device has crashed, choose the Core option as shown. The core files, once collected via admin-tech, can be removed from the device in question. If it is not a crash, Logs and Tech are the minimum that need to be selected in order to generate an admin-tech.
Step 6. Click Generate.
Note: Close the pop-up window since it takes a while to generate an admin-tech. The duration depends upon the log size of each device.
Step 7. Click Show Admin Tech List as shown in the image.
Step 8. Click the Download icon.
Download it from the local system and upload it to a Service Request (SR).
Scenario 2. From the CLI for Device Unreachable from vManage
Step 1. Log in to vEdge via Secure Shell (SSH).
ssh -l <username> <IP-Address>
Note: Admin-tech is generated by a user that has netadmin rights. Enter the show users command in the CLI in order to show the group the user belongs to.
Step 2. Enter the request admin-tech command as shown in this image.
Step 3. Copy the admin-tech from the /home/admin/<dated-time-admin-tech.tar.gz> directory.
For example, if the local user is johndoe, admin-tech is placed in the /home/johndoe/ directory. If the netadmin user is authenticated against the RADIUS or TACACS central authentication server, admin-tech is found in the strong>/home/basic/ directory by default.
Note: Windows users use the WINSCP application in order to copy to the local system.
Note: Linux users use the scp command in order to copy the admin-tech to a reachable system. The command syntax is: scp /home/admin/ @
Scenario 3. From the CLI for cEdge
Step 1. Log in to cEdge via SSH.
ssh -l <username> <IP-Address>
Step 2. Enter the request platform software sdwan admin-tech command.
Step 3. Copy the admin-tech to TFTP, FTP, SCP to the external server.
An example of SCP from the local system is shown here.
Additional Notes
Note: In Release 20.1.x and later, the option to exclude specific files from the admin-tech from the CLI is available.
vEdge:
Transfer Admin-Tech Directly into a Cisco SR
In order to troubleshoot SDWAN related issues, upload the admin-tech directly from vManage to a Cisco SR. You can find it hard to download the rather bulky file to your own workstation when you are remote from the controller. After the slow download, you then need to upload the file to the SR, which is again a slow process. This procedure describes how to achieve it via the GUI and CLI on vManage.
Prerequisites
For the upload to work, the vManage requires connectivity to the public Internet. Cisco cloud-hosted vManage controllers have such capability. The user needs to have netadmin privileges to be able to request an admin-tech. You can only transfer one admin-tech into the SR at a time. For the upload to the SR, you need the SR number and an upload token. More information on different ways to upload is explained in Customer File Uploads to Cisco Technical Assistance Center. The Customer eXperience Drive (CXD) procedure is used in the example.
Retrieve the Upload Token for an SR
Use SCM to Get the Token
When an SR is opened, CXD automatically generates an upload token and inserts a note in the SR which contains the token and some details on how to use the service.
In order to retrieve the upload token, complete these steps:
Step 1. Log in to SCM.
Step 2. Open the desired case to get the upload token for.
Step 3. Click the Attachments tab.
Step 4. Click Generate Token. Once the token is generated, it is displayed to the right of the Generate Token button.
Notes:
- The Username is always the SR number. The term password and token refer to the upload token, which is used as a password when prompted by CXD.
- The note is attached automatically within a few minutes to the SR. If the user cannot find the note, they can contact the SR Owner and the token can be generated manually.
Upload Admin-Tech to an SR
vManage GUI
For vManage 20.7.x and later, perform steps 1-7 in Scenario 1. From vManage for Device Online.
Once step 7 is complete, and the admin-tech has been generated, click the cloud icon, fill in the information (SR Number, Token, and VPN 0 or 512) and click Upload.
After you click Upload, the Upload successful message is displayed to let you know that the admin-tech was successfully uploaded to the SR.
Also, now we have the ability on the vManage to fetch the admin-tech from the Edge device, if the admin-tech is already there on the device. It could be that the admin-tech has been generated via the CLI on the device. On vManage, now you can use the copy option to copy the image into vManage and subsequently use it to upload directly into the Cisco SR case, as mentioned previously.
Additional information is provided here.
You can see the admin-techs on the device via:
Once the download is initiated / completed:
The list of admin-techs shows the downloaded one. You can use the cloud icon to upload it into the Cisco SR.
In Release 20.6.x and later, if the vManage is in a Cluster mode, you can generate admin-tech across all the vManage nodes with the Generate Admin Tech for vManage option under Tools > Operational Commands.
Once generated, you can use the previous steps to upload the admin-techs directly to the TAC Case.
vManage CLI
Specific to vManage only, once request admin-tech is used via the CLI to generate the admin-tech and it is completed, you can enter the request upload command. Use this syntax in this example. Once prompted for the password, enter the token you retrieved earlier.
Verify the Case Attachment
Verify the admin-tech has been uploaded to the case with the use of SCM.
Revision History
Revision Publish Date Comments
4.0
12-Jan-2023
Updated the Upload Admin-Tech to an SR section. Updated Title, Introduction, Style Requirements and Alt Text.
3.0
13-Jun-2022
Updated the Upload Admin-Tech to an SR section.
2.0
07-Jun-2022
Addditional Information
1.0
24-Mar-2021
Initial Release
Contributed by Cisco Engineers
Shankar Vemulapalli
Cisco TAC Engineer
Danny De Ridder
Cisco TAC Engineer
Was this Document Helpful?
Yes No Feedback
Customers Also Viewed
Transfer Files between a cEdge and vManage
Troubleshoot SD-WAN Control Connections
Cisco SD-WAN Monitor and Maintain Configuration Guide --- Devices and Controllers
+ Show 3 More
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)
This Document Applies to These Products
SD-WAN
XE SD-WAN Routers