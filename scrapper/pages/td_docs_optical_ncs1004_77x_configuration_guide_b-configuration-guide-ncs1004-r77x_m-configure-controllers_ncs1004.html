Configuration Guides
Configuration Guide for Cisco NCS 1004, IOS XR Release 7.7.x
Bias-Free Language
Book Contents
Download
Print
Updated:
July 30, 2022
Chapter: Configuring Controllers
Chapter Contents
There are three types of controllers for the line card. The controllers are the optics controller, the ethernet controller, and the coherent DSP controller. This chapter describes the procedures used to configure these controllers.

Note
Unless otherwise specified, “line cards” refers to 1.2T and 1.2TL line cards.
AINS
FEC
Laser Squelching
Idle Insertion
Idle Insertion for Ethernet Controllers
LLDP Drop
Link Layer Discovery Protocol (LLDP) Support on Management Interface
Daisy Chain Support on Management Ports
DHCP Client
MAC Address Snooping on Client Ports
Transmit Shutdown
Loopback
Restore Factory Settings
Headless Mode
Trail Trace Identifier
Chromatic Dispersion
Transmit Power
Laser Bias Current High Threshold
Differential Group Delay Threshold
Optical Signal to Noise Ratio
Chromatic Dispersion Threshold
Receive Power Threshold
Transmit Power Threshold
Frequency
Pseudo Random Binary Sequence
FlexO GID and IID
FPD
AINS
The Automatic-In-Service (AINS) feature allows the controller to automatically move to the automatic-in-service state after the maintenance window is completed. A soak time period is associated with the AINS state. The controller automatically moves to the In-Service state after the soak time period is completed. During the AINS maintenance window, alarms are not propagated to the EMS/NMS monitoring system.
You can configure AINS on the client ports of the card.
AINS States
Soak Time Period
Configuring AINS
Disabling AINS
Displaying the AINS Configuration
Configuring AINS on OTN-XP Card
AINS States
The following table lists the AINS states.
State
Description
None
AINS is not enabled on the controller or the soak time period is complete.
Pending
AINS is configured on the controller. However, the soak time period has not started because either the primary state of controller is in Shutdown, Admin down, or Not ready state or the secondary state is in Maintenance state. AINS can also move to Pending state if alarms are raised during the soak time period.
Running
AINS is enabled on the controller. The primary state of the controller is Up and the secondary state is AINS.
If there are any service-affecting alarms when AINS is runring on ethernet or optics controllers, the AINS state moves to Pending state. When the alarms are cleared, the AINS state moves to Running state.
The AINS soak time period restarts when there are line card reloads, XR reloads, line card warm reloads, power cycles, or alarm conditioning.
Soak Time Period
You can configure the soak time period to be between 1 minute to 48 hours.
All alarms are suppressed during the AINS state. When the optical and ethernet alarms are raised on the port during the soak time period, the AINS state moves to Pending. These alarms are not displayed in the output of the show alarms brief card location 0/RP0/CPU0 active command but in the output of the show alarms brief card location 0/RP0/CPU0 conditions command. When all the alarms clear, the soak time period starts, and the AINS state moves to Running. When the soak time period expires, the port moves to IS state.
Configuring AINS
To configure AINS on a muxponder, use the following command:
configure
hw-module location location mxponder client-port-ains-soak hours hours minutes minutes
commit
The following is a sample in which all client ports are configured with AINS with soak time period specified to be 15 minutes.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#hw-module location 0/3 mxponder client-port-ains-soak hours 0 minutes 15
RP/0/RP0/CPU0:ios(config)#commit
To configure AINS on a muxponder slice, use the following command:
configure
hw-module location location mxponder-slice slice-number client-port-ains-soak hours hours minutes minutes
commit
The following is a sample in which slice 0 client ports are configured with AINS with soak time period specified to be 40 minutes.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#hw-module location 0/3 mxponder-slice 0 client-port-ains-soak hours 0 minutes 40
RP/0/RP0/CPU0:ios(config)#commit
Disabling AINS
To disable AINS on all muxponder client ports, set the hours and minutes to 0. Use the following commands:
configure
hw-module location location mxponder client-port-ains-soak hours hours minutes minutes
commit
The following is a sample in which AINS is disabled on all client ports.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#hw-module location 0/3 mxponder client-port-ains-soak hours 0 minutes 0
RP/0/RP0/CPU0:ios(config)#commit
To disable AINS on a muxponder slice, set the hours and minutes to 0. Use the following command:
configure
hw-module location location mxponder-slice slice-number client-port-ains-soak hours hours minutes minutes
commit
The following is a sample in which AINS is disabled on all client ports of slice 0.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#hw-module location 0/3 mxponder-slice 0 client-port-ains-soak hours 0 minutes 0
RP/0/RP0/CPU0:ios(config)#commit
Displaying the AINS Configuration
The AINS Soak field in the output indicates the current state of AINS. The current state can be None, Pending, or Running. The Total Duration field indicates the total soak time period that is configured. The Remaining Duration field indicates the soak time that remains, after which, the AINS state moves to None.
This example displays the ethernet controller statistics with AINS Soak in running state.
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/1/0/2
Thu Feb 21 19:52:55.001 UTC
Operational data for interface HundredGigECtrlr0/1/0/2:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: Running
      Total Duration: 0 hour(s) 15 minute(s)
      Remaining Duration: 0 hour(s) 5 minute(s) 37 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Holdoff Time: 0ms
This example displays the ethernet controller statistics with AINS Soak in pending state.
RP/0/RP0/CPU0:ios#show controllers HuC 0/0/0/2
Thu Mar 12 13:52:12.129 UTC
Operational data for interface HundredGigECtrlr0/0/0/2:

State:
    Administrative state: enabled
    Operational state: Down (Reason: State undefined)
    LED state: Red On
    Maintenance: Disabled
    AINS Soak: Pending
      Total Duration: 0 hour(s) 30 minute(s)
      Remaining Duration: 0 hour(s) 30 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known
    Alarms:
        Current:
            Local Fault
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 9

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
This example displays the optics controller statistics with AINS Soak in running state.
RP/0/RP0/CPU0:ios#show controller optics 0/1/0/3
Thu Feb 21 19:45:41.088 UTC

 Controller State: Up

 Transport Admin State: Automatic In Service

 Laser State: On

 LED State: Green

 Optics Status

         Optics Type:  Grey optics

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 0
         HIGH-LBC = 0               HIGH-DGD = 0
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 0
         TX-POWER-PROV-MISMATCH = 0

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          4.9      -12.0           0.0          0.0
         Tx Power Threshold(dBm)          3.5      -10.1           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 98 %
         Polarization parameters not supported by optics

        Total TX Power = 6.39 dBm

        Total RX Power = 5.85 dBm

         Lane  Laser Bias    TX Power    RX Power  Output Frequency
         ----  ----------  ----------  ----------  ----------------
           1      75.0 %    0.59 dBm    0.63 dBm  230.43 THz
           2      68.6 %    0.06 dBm   -0.68 dBm  230.43 THz
           3      69.0 %    0.26 dBm   -0.63 dBm  230.43 THz
           4      69.1 %    0.56 dBm   -0.10 dBm  230.43 THz

 Transceiver Vendor Details

         Form Factor            : QSFP28
         Name                   : CISCO-FINISAR
         Part Number            : FTLC1152RGPL-C2
         Rev Number             : CISCO-FINISAR
         Serial Number          : FNS22150LEC
         PID                    : QSFP-100G-CWDM4-S
         VID                    : V02
         CISCO-FINISAR
         Date Code(yy/mm/dd)    : 18/04/11
         Fiber Connector Type: LC
         Sonet Application Code: Not Set
         Ethernet Compliance Code: 100GBASE-CWDM4

 Transceiver Temperature : 32 Celsius



 AINS Soak                : Running
 AINS Timer               : 0h, 15m
 AINS remaining time      : 771 seconds
When the soak time expires, AINS state changes from Running to None. The Transport Admin State of optics controller changes from Automatic In Service to In Service.
RP/0/RP0/CPU0:ios# show controllers optics 0/1/0/3
Thu Feb 21 20:02:34.126 UTC

 Controller State: Up

 Transport Admin State: In Service

 Laser State: On

 LED State: Green

 Optics Status

         Optics Type:  Grey optics

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 0
         HIGH-LBC = 0               HIGH-DGD = 0
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 0
         TX-POWER-PROV-MISMATCH = 0

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          4.9      -12.0           0.0          0.0
         Tx Power Threshold(dBm)          3.5      -10.1           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 98 %
         Polarization parameters not supported by optics

        Total TX Power = 6.41 dBm

        Total RX Power = 5.85 dBm

         Lane  Laser Bias    TX Power    RX Power  Output Frequency
         ----  ----------  ----------  ----------  ----------------
           1      74.9 %    0.60 dBm    0.63 dBm  230.43 THz
           2      68.6 %    0.06 dBm   -0.70 dBm  230.43 THz
           3      69.0 %    0.30 dBm   -0.63 dBm  230.43 THz
           4      69.1 %    0.57 dBm   -0.11 dBm  230.43 THz

 Transceiver Vendor Details

         Form Factor            : QSFP28
         Name                   : CISCO-FINISAR
         Part Number            : FTLC1152RGPL-C2
         Rev Number             : CISCO-FINISAR
         Serial Number          : FNS22150LEC
         PID                    : QSFP-100G-CWDM4-S
         VID                    : V02
         CISCO-FINISAR
         Date Code(yy/mm/dd)    : 18/04/11
         Fiber Connector Type: LC
         Sonet Application Code: Not Set
         Ethernet Compliance Code: 100GBASE-CWDM4

 Transceiver Temperature : 32 Celsius



 AINS Soak                : None
 AINS Timer               : 0h, 0m
 AINS remaining time      : 0 seconds
Configuring AINS on OTN-XP Card
You can configure the default AINS settings for all controllers on the OTN-XP card using the shared plane configuration. The configuration is applied to any line card that is installed in the NCS 1004. Use the following commands:
configure
ains-soak hours hours minutes minutes
commit
The following is a sample in which all the controllers on the OTN-XP card are configured with AINS with soak time period specified to be two minutes.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#ains-soak hours 0 minutes 2
RP/0/RP0/CPU0:ios(config)#commit
RP/0/RP0/CPU0:ios(config)#do show controllers optics 0/1/0/0
Tue Apr 28 11:50:15.431 UTC                                 
 
Controller State: Down 
 
Transport Admin State: Automatic In Service 
 
Laser State: On 
 
LED State: Red 
                
 Optics Status  
 
         Optics Type:  100G QSFP28 LR4
 
         Alarm Status:
         -------------
         Detected Alarms: None
 
 
         LOS/LOL/Fault Status:
 
         Alarm Statistics:
 
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 0          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 0          
         HIGH-LBC = 0               HIGH-DGD = 0            
         OOR-CD = 0                 OSNR = 0                
         WVL-OOL = 0                MEA  = 0                
         IMPROPER-REM = 0                                   
         TX-POWER-PROV-MISMATCH = 0                         
 
         Performance Monitoring: Enable 
 
         THRESHOLD VALUES
         ----------------
 
         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          4.9      -12.0           0.0          0.0
         Tx Power Threshold(dBm)          3.5      -10.1           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00
                                                                                   
         LBC High Threshold = 98 %                                                 
         Polarization parameters not supported by optics                           
                                                                                   
        Total TX Power = 7.74 dBm                                                  
                                                                                   
        Total RX Power = -40.00 dBm                                                
                                                                                   
         Lane  Laser Bias    TX Power    RX Power  Output Frequency                
         ----  ----------  ----------  ----------  ----------------                
           1      67.2 %    1.85 dBm  -40.00 dBm  231.39 THz                       
           2      67.9 %    1.55 dBm  -40.00 dBm  230.59 THz                       
           3      67.5 %    1.58 dBm  -40.00 dBm  229.79 THz                       
           4      66.8 %    1.89 dBm  -40.00 dBm  230.25 THz                       
                                                                                   
 Transceiver Vendor Details                                                        
                                                                                   
         Form Factor            : QSFP28                                           
         Name                   : CISCO-FINISAR                                    
         Part Number            : 10-3204-01                                       
         Rev Number             : B                                                
         Serial Number          : FNS20510YUB                                      
         PID                    : ONS-QSFP28-LR4                                   
         VID                    : V01                                              
         Date Code(yy/mm/dd)    : 16/12/15                                         
         Fiber Connector Type: LC                                                  
         Otn Application Code: 4I1-9D1F                                            
         Sonet Application Code: Not Set                                           
         Ethernet Compliance Code: 100GBASE-LR4                                    
                                                                                   
 Transceiver Temperature : 27 Celsius                                              
                                                                                   
                                                                                   
                                                                                   
 AINS Soak                : Pending                                                
 AINS Timer               : 0h, 2m                                                 
 AINS remaining time      : 120 seconds                                            
To override the default AINS settings on a specific controller, use the following commands:
automatic-in-service controller optics R/S/I/P hours hours minutes minutes

Note
This configuration does not persist after an RP reload operation.
The following is a sample in which the optics controller on the OTN-XP card is configured with a soak time period of 45 minutes.
RP/0/RP0/CPU0:ios#automatic-in-service controller optics 0/1/0/0 hours 0 minutes 45
Tue Apr 28 11:55:15.666 UTC
RP/0/RP0/CPU0:ios#show controllers optics 0/1/0/0
Tue Apr 28 11:55:30.323 UTC                                 
 
Controller State: Down 
 
Transport Admin State: Automatic In Service 
 
Laser State: On 
 
LED State: Red 
                
 Optics Status  
 
         Optics Type:  100G QSFP28 LR4
 
         Alarm Status:
         -------------
         Detected Alarms: None
 
 
         LOS/LOL/Fault Status:
 
         Alarm Statistics:
 
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 0          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 0          
         HIGH-LBC = 0               HIGH-DGD = 0            
         OOR-CD = 0                 OSNR = 0                
         WVL-OOL = 0                MEA  = 0                
         IMPROPER-REM = 0                                   
         TX-POWER-PROV-MISMATCH = 0                         
 
         Performance Monitoring: Enable 
 
         THRESHOLD VALUES
         ----------------
 
         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          4.9      -12.0           0.0          0.0
         Tx Power Threshold(dBm)          3.5      -10.1           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00
                                                                                   
         LBC High Threshold = 98 %                                                 
         Polarization parameters not supported by optics                           
                                                                                   
        Total TX Power = 7.74 dBm                                                  
                                                                                   
        Total RX Power = -40.00 dBm                                                
                                                                                   
         Lane  Laser Bias    TX Power    RX Power  Output Frequency                
         ----  ----------  ----------  ----------  ----------------                
           1      67.2 %    1.85 dBm  -40.00 dBm  231.39 THz                       
           2      67.9 %    1.55 dBm  -40.00 dBm  230.59 THz                       
           3      67.5 %    1.58 dBm  -40.00 dBm  229.79 THz                       
           4      66.8 %    1.89 dBm  -40.00 dBm  230.25 THz                       
                                                                                   
 Transceiver Vendor Details                                                        
                                                                                   
         Form Factor            : QSFP28                                           
         Name                   : CISCO-FINISAR                                    
         Part Number            : 10-3204-01                                       
         Rev Number             : B                                                
         Serial Number          : FNS20510YUB                                      
         PID                    : ONS-QSFP28-LR4                                   
         VID                    : V01                                              
         Date Code(yy/mm/dd)    : 16/12/15                                         
         Fiber Connector Type: LC                                                  
         Otn Application Code: 4I1-9D1F                                            
         Sonet Application Code: Not Set                                           
         Ethernet Compliance Code: 100GBASE-LR4                                    
                                                                                   
 Transceiver Temperature : 27 Celsius                                              
                                                                                   
                                                                                   
                                                                                   
 AINS Soak                : Pending                                                
 AINS Timer               : 0h, 45m                                                 
 AINS remaining time      : 2700 seconds                                            
From Release 7.5.2 onwards, AINS is supported on the 16G FC and 32FC controllers.
The following is a sample to configure AINS in 16G FC controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#automatic-in-service controller SixteenGigFibreChanCtrlr  0/0/0/6/2 hours 0 minutes 15
RP/0/RP0/CPU0:ios(config)#commit
The following is a sample to verify AINS in 16G FC controller.
 show controllers SixteenGigFibreChanCtrlr 0/0/0/6/2 on XR

+++ 15:04:25 ne(default) exec +++
show controllers SixteenGigFibreChanCtrlr 0/0/0/6/2

Wed Apr 13 15:04:25.206 UTC

Operational data for Fibre Channel controller SixteenGigFibreChanCtrlr0/0/0/6/2

State:
        Admin State           : Up
        Operational state     : Up
        LED state             : Green On
        Secondary admin state : Automatic In Service
        AINS Soak             : Running
            Total Duration    : 0 hour(s) 15 minute(s)
            Remaining Duration: 0 hour(s) 14 minute(s) 29 second(s)
        Laser Squelch         : Disabled

Performance Monitoring is enabled

Operational values:
        Speed                    : 16 Gbps
        Loopback                 : None
        BER monitoring:
            Not supported
        Hold-off Time            : 0 ms
        Forward Error Correction : Not Configured
The following is a sample to configure AINS in 32G FC controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#automatic-in-service controller ThirtyTwoGigFibreChanCtrlr  0/0/0/0/4 hours 0 minutes 15
RP/0/RP0/CPU0:ios(config)#commit
The following is a sample to verify AINS in 32G FC controller.
 show controllers ThirtyTwoGigFibreChanCtrlr 0/0/0/0/4 on XR

+++ 15:04:25 ne(default) exec +++
show controllers ThirtyTwoGigFibreChanCtrlr 0/0/0/0/4

Wed Apr 13 15:04:25.393 UTC

Operational data for Fibre Channel controller ThirtyTwoGigFibreChanCtrlr0/0/0/0/4

State:
        Admin State           : Up
        Operational state     : Up
        LED state             : Green On
        Secondary admin state : Automatic In Service
        AINS Soak             : Running
            Total Duration    : 0 hour(s) 15 minute(s)
            Remaining Duration: 0 hour(s) 14 minute(s) 29 second(s)
        Laser Squelch         : Disabled

Performance Monitoring is enabled

Operational values:
        Speed                    : 32 Gbps
        Loopback                 : None
        BER monitoring:
            Not supported
        Hold-off Time            : 0 ms
        Forward Error Correction : Standard(Reed Solomon)

RP/0/RP0/CPU0:ne#
From Release 7.5.2 onwards, AINS is supported on the controllers for OTUCn-REGEN mode.
The following is a sample to configure AINS on the coherentDSP controllers for OTUCn-REGEN mode.
RP/0/RP0/CPU0:ios#automatic-in-service controller coherentDSP 0/0/0/12 hours 0 minutes 15
Tue May 24 17:51:06.979 UTC
The following sample verifies the AINS configured on the coherentDSP controllers for OTUCn-REGEN mode.
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/12
Tue May 24 17:52:29.558 UTC

Port                                            : CoherentDSP 0/0/0/12
Controller State                                : Up
Inherited Secondary State                       : Automatic-In-Service
Configured Secondary State                      : Automatic-In-Service
Derived State                                   : Automatic-In-Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 400.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 4 OOM = 0 AIS = 3
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 3 TIM = 1
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 2
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 2
FLEXO-LOF = 0
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 1.42E-04
POSTFEC BER                                     : 0.00E+00
Q-Factor                                        : 11.10 dB

Q-Margin                                        : 4.60dB

TTI :
        Remote hostname                         : ios
        Remote interface                        : CoherentDSP 0/0/0/12
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 10
        TX IID                                  : 1, 2, 3, 4,
        Rx GID                                  : 10
        RX IID                                  : 1, 2, 3, 4,

AINS Soak                                       : Running
AINS Timer                                      : 0h, 15m
AINS remaining time                             : 855 seconds
The following is a sample to configure AINS globally on the OTUCn-REGEN mode.
RP/0/RP0/CPU0:ios#configure terminal
Tue May 24 17:51:34.545 UTC
RP/0/RP0/CPU0:ios(config)#ains-soak hours 0 minutes 15
RP/0/RP0/CPU0:ios(config)#commit
Tue May 24 17:51:44.144 UTC
The following sample verifies the AINS configured on the coherentDSP controllers:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Tue May 24 17:52:34.445 UTC

Controller State: Up

Transport Admin State: Automatic In Service

Laser State: On

LED State: Green

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 0
         HIGH-LBC = 0               HIGH-DGD = 0
         OOR-CD = 0                 OSNR = 1
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 0
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.47 dBm
         RX Power = 0.40 dBm
         RX Signal Power = 0.30 dBm
         Frequency Offset = -1358 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          3.0      -25.5           0.0          0.0
         Tx Power Threshold(dBm)          3.0      -12.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 90 %
         Configured Tx Power = 0.50 dBm
         Configured CD High Threshold = 48000 ps/nm
         Configured CD lower Threshold = -48000 ps/nm
         Configured OSNR lower Threshold = 22.00 dB
         Configured DGD Higher Threshold = 67.00 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 4.0000000000  bits/symbol
         Modulation Type: 16QAM
         Chromatic Dispersion -1 ps/nm
         Configured CD-MIN -24000 ps/nm  CD-MAX 24000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 52.00 ps^2
         Optical Signal to Noise Ratio = 35.90 dB
         SNR = 19.40 dB
         Polarization Dependent Loss = 1.70 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 2.00 ps
         DAC RATE:  1x1.50

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3555-01
         Rev Number             : A0
         Serial Number          : ACA25420007
         PID                    : DP04CFP2-M25-K9
         VID                    : VES1
         Date Code(yy/mm/dd)    : 21/09/28
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 41 Celsius



AINS Soak                : Running
AINS Timer               : 0h, 15m
AINS remaining time      : 850 seconds
FEC
Forward error correction (FEC) is a feature that is used for controlling errors during data transmission. This feature works by adding data redundancy to the transmitted message using an algorithm. This redundancy allows the receiver to detect and correct a limited number of errors occurring anywhere in the message, instead of having to ask the transmitter to resend the message.
FEC States for Ethernet Controller
Configuring FEC on the Ethernet Controller
FEC States for CoherentDSP Controller
Q-Margin Support
Configuring FEC on CoherentDSP Controllers
Configuring FEC on OTN-XP Card
FEC States for Ethernet Controller
The following table lists the FEC states for the Ethernet controller.
State
Description
None
FEC is not enabled on the Ethernet controller.
Standard
Standard (Reed-Solomon) FEC is enabled on the Ethernet controller.
FEC configuration is automatically enabled for only the pluggables that support Auto-FEC. If you manually configure FEC, the manual configuration overrides the Auto-FEC.
The supported pluggables for Auto-FEC are:
QSFP-100G-SR4-S
QSFP-100G-CWDM4-S
QSFP-100G-SM-SR
QSFP-100G-AOC-1M
QSFP-100G-AOC-3M
QSFP-100G-AOC-10M
QDD-400-AOC15M
QDD-400G-FR4-S
QSFP-100G-ER4L
QDD-400G-DR4-S
QDD-400G-LR8-S
QDD-4X100G-LR-S
The LR4 pluggable is a 1310nm long range band pluggable that does not require you to enable FEC.
The software automatically enables FEC mode on the pluggables installed in the Cisco NCS 1004. When you upgrade the software of an NCS 1004 with pluggables in the FEC disabled mode, traffic is affected.
The following sample shows the running FEC configuration on the LR4 pluggable:
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/0/0/4
Thu Aug  8 15:41:20.857 IST
Operational data for interface HundredGigECtrlr0/0/0/4:
 
State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled
 
Phy:
    Media type: Not known
 
Autonegotiation disabled.
 
Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Holdoff Time: 0ms
 
The following sample shows the running FEC configuration on the non LR4 pluggable:
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/0/0/2
Thu Aug  8 15:41:56.457 IST
Operational data for interface HundredGigECtrlr0/0/0/2:
 
State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled
 
Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 66
 
Autonegotiation disabled.
 
Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
 
Configuring FEC on the Ethernet Controller

Note
The FEC configuration is not required for the supported pluggables. The configuration is required only in the case of non-Cisco qualified non-LR4 pluggables.
To configure FEC on the Ethernet controller, use the following command:
configure
controller HundredGigECtrlr R/S/I/P fec { none | standard }
commit
The following sample shows how to configure FEC on the Ethernet controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/1/0/10 fec standard
RP/0/RP0/CPU0:ios(config)#commit
The following sample shows the running FEC configuration on the Ethernet controller:
RP/0/RP0/CPU0:BH-SIT2#show controller HundredGigECtrlr 0/1/0/10
Tue Jul 16 15:30:30.165 IST
Operational data for interface HundredGigECtrlr0/1/0/10:

State:
    Administrative state: enabled
    Operational state: Down (Reason: State undefined)
    LED state: Red On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known
    Alarms:
        Current:
            Loss of Frequency Sync Data
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
FEC States for CoherentDSP Controller
The following table lists the FEC states for the coherentDSP controllers.
Table 1. FEC State for CoherentDSP Controllers
State
Description
EnhancedSD15
FEC Soft-Decision 15.
EnhancedSD27
FEC Soft-Decision 27. Default.
Q-Margin Support
Q-margin is an important optical parameter that characterizes the health of an optical link. The Q-margin value is calculated based on the average bit error rate (BER) in the optical link.
Table 2. Feature History
Feature Name
Release Information
Description
Enhanced Q-Margin Support
Cisco IOS XR Release 7.3.1
Enhanced Q-Margin is supported for Forward error correction (FEC) and performance monitoring on CoherentDSP Controllers for 1.2T and 1.2TL cards. This enhanced Q-margin value is calculated based on the maximum number of errors for each frame. An attribute that is called instantaneous Q-margin is displayed in the output of the show controllers coherentDSP command. The lower the delta value between the instantaneous Q-margin value with the Q-margin value, the better the FEC performance of the NCS 1004 system. The instantaneous Q-margin values thus help you to optimize the system with continuous error correction in subsea transport networks.
Command modified:
show controllers coherentDSP
Enhanced Q-Margin Support
From Release 7.3.1 onwards, enhanced Q-Margin is supported for Forward error correction (FEC) and performance monitoring on CoherentDSP controllers for 1.2T and 1.2TL cards. Enhanced Q-margin provides a better error free signal in the optical link. The enhanced Q-margin value is calculated based on the maximum number of errors per frame. An attribute that is called instantaneous Q-margin is displayed in the output of the show controllers coherentDSP command. The lower the delta value between the instantaneous Q-margin value with the Q-margin value, the better the FEC performance of the NCS 1004 system.
To view Q-margin and enhanced Q-margin values for FEC on CoherentDSP controllers, see Verifying FEC on CoherentDSP Controllers.
To view Q-margin and enhanced Q-margin values for performance monitoring on CoherentDSP controllers, see Configuring PM Parameters.
Configuring FEC on CoherentDSP Controllers
To configure FEC on the CoherentDSP controller, use the following command:
configure
controller coherentDSP R/S/I/P
fec {EnhancedSD15 | EnhancedSD27}
commit
The following sample shows how to configure FEC on the CoherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/0
RP/0/RP0/CPU0:ios(config-CoDSP)#fec EnhancedSD15
Tue Feb 25 11:25:52.670 UTC
WARNING! Changing FEC mode can impact traffic
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Verifying FEC on CoherentDSP Controllers
Verifying FEC on CoherentDSP Controllers
The following sample shows the FEC configuration on the CoherentDSP controller:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/0                                                                                    
Tue Feb 25 11:26:08.235 UTC                                                                                                                                    

Port                                            : CoherentDSP 0/0/0/0
Controller State                                : Up                 
Inherited Secondary State                       : Normal             
Configured Secondary State                      : Normal             
Derived State                                   : In Service         
Loopback mode                                   : None               
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable                  
Bandwidth                                       : 50.0Gb/s                
Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0   
FECMISMATCH = 0 FEC-UNC = 0       
Detected Alarms                                 : None
Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 0.00 dB  
Q-Margin                                        : -5.00dB
Instantaneous Q_margin                        :  0 dB


TTI :
        Remote IP addr                          : 0.0.0.0
FEC mode                                        : Soft-Decision 15

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Configuring FEC on OTN-XP Card
FEC is supported on the CoherentDSP controllers for the OTN-XP card and O-FEC is the default FEC option configured on the card.
From Release 7.3.1 onwards, CFP2-DCO trunk is configured with 0-FEC.

Note
The options enhanced SD15 and SD17 are not supported on the OTN-XP card.

Note
CFEC is not supported on CFP2-DCO.
To configure FEC on the CoherentDSP controller for the OTN-XP card, use the following command:
configure
controller coherentDSP R/S/I/P
fec OFEC
commit
The following sample shows how to configure O-FEC option on the CoherentDSP controller for the OTN-XP card:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/0
RP/0/RP0/CPU0:ios(config-CoDSP)#fec OFEC
Tue Feb 25 11:25:52.670 UTC
WARNING! Changing FEC mode can impact traffic
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Verifying FEC on OTN-XP Card
Configuring FEC on OTN-XP Card – QDD-400G-ZRP
Verifying FEC on OTN-XP Card
The following sample shows the FEC configuration on the CoherentDSP controller for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/0                                                                                    
Tue Feb 25 11:26:08.235 UTC                                                                                                                                    

Port                                            : CoherentDSP 0/0/0/0
Controller State                                : Up                 
Inherited Secondary State                       : Normal             
Configured Secondary State                      : Normal             
Derived State                                   : In Service         
Loopback mode                                   : None               
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable                  
Bandwidth                                       : 50.0Gb/s                
Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0   
FECMISMATCH = 0 FEC-UNC = 0       
Detected Alarms                                 : None
Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 0.00 dB  
Q-Margin                                        : -5.00dB
Instantaneous Q_margin                        :  0 dB


TTI :
        Remote IP addr                          : 0.0.0.0
FEC mode                                        : O-FEC

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Configuring FEC on OTN-XP Card – QDD-400G-ZRP
The QDD-400G-ZRP coherent trunk pluggable supports two types of FEC modes on the OTN-XP card:
C-FEC
O-FEC
You can configure the required FEC mode on the OTN-XP card. You can migrate from CFEC to OFEC or OFEC to CFEC mode.

Note
On configuring datapath, the default FEC enabled is C-FEC mode.

Note
The change in FEC mode affects traffic.
To configure FEC on the CoherentDSP controller for the OTN-XP card, use the following command:
configure
controller coherentDSP R/S/I/P
fec fec-type
commit
The following sample shows how to configure O-FEC option on the CoherentDSP controller for the OTN-XP card:
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/11 
RP/0/RP0/CPU0:ios(config-CoDSP)#fec OFEC 
Fri Jul 23 18:19:31.204 UTC
WARNING! Changing FEC mode can impact traffic
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Fri Jul 23 18:19:32.835 UTC
The following sample shows how to configure C-FEC option on the CoherentDSP controller for the OTN-XP card:
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/11 
RP/0/RP0/CPU0:ios(config-CoDSP)#fec CFEC 
Fri Jul 23 18:19:31.204 UTC
WARNING! Changing FEC mode can impact traffic
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Fri Jul 23 18:19:32.835 UTC
Verifying FEC on OTN-XP Card – QDD-400G-ZRP
Verifying FEC on OTN-XP Card – QDD-400G-ZRP
The following sample shows the FEC configuration on the CoherentDSP controller with the trunk controller status as C-FEC for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controller coherentDSP 0/0/0/11 
Fri Jul 23 17:36:45.342 UTC

Port                                            : CoherentDSP 0/0/0/11
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 400.0Gb/s

Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 9.02E-04 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 9.90 dB 

Q-Margin                                        : 2.70dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : C_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 0
        Rx GID                                  : 0

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
The following sample shows the FEC configuration on the CoherentDSP controller with the trunk controller status as O-FEC for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controller coherentDSP 0/0/0/11  
Fri Jul 23 17:46:51.775 UTC

Port                                            : CoherentDSP 0/0/0/11
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 400.0Gb/s

Alarm Information:
LOS = 3 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 1   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 3.36E-04 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 10.60 dB 

Q-Margin                                        : 4.10dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 0
        Rx GID                                  : 0

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
The following sample shows the FEC configuration on the optics controller with the trunk controller optics as C-FEC for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controller optics 0/0/0/11
Wed Sep 15 00:36:24.383 UTC

 Controller State: Up 

 Transport Admin State: In Service 

 Laser State: On 

 LED State: Green 
 
 Optics Status 

         Optics Type:  QSFP-DD DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=49, Frequency=193.70THz,
         Wavelength=1547.715nm 

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:
          
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 1          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1          
         HIGH-LBC = 0               HIGH-DGD = 0          
         OOR-CD = 0                 OSNR = 1          
         WVL-OOL = 0                MEA  = 0          
         IMPROPER-REM = 0          
         TX-POWER-PROV-MISMATCH = 0          
         Laser Bias Current = 0.0 %
         Actual TX Power = -8.09 dBm 
         RX Power = -7.31 dBm 
         RX Signal Power = -7.67 dBm 
         Frequency Offset = 81 MHz 
 Performance Monitoring: Enable 

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          3.0      -23.5           0.0          0.0
         Tx Power Threshold(dBm)          0.0      -16.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 90 % 
         Configured Tx Power = -7.00 dBm 
         Configured CD High Threshold = 2400 ps/nm 
         Configured CD lower Threshold = -2400 ps/nm 
         Configured OSNR lower Threshold = 24.00 dB 
         Configured DGD Higher Threshold = 40.00 ps 
         Baud Rate =  59.8437500000 GBd
         Bits per Symbol = 4.0000000000  bits/symbol 
         Modulation Type: 16QAM 
         Chromatic Dispersion 0 ps/nm 
         Configured CD-MIN -2400 ps/nm  CD-MAX 2400 ps/nm 
         Polarization Mode Dispersion = 0.0 ps 
         Second Order Polarization Mode Dispersion = 29.00 ps^2 
         Optical Signal to Noise Ratio = 36.40 dB 
         SNR = 17.30 dB 
         Polarization Dependent Loss = 0.40 dB 
         Polarization Change Rate = 0.00 rad/s 
         Differential Group Delay = 3.00 ps 

 Transceiver Vendor Details
          
         Form Factor            : QSFP-DD
         Name                   : CISCO
         Part Number            : 10-3496-01
         Rev Number             : 11
         Serial Number          : 210153241
         PID                    : QDD-400G-ZRP-S
         VID                    : ES04
         Date Code(yy/mm/dd)    : 20/21/01
         Fiber Connector Type: LC 
         Otn Application Code: Not Set 
         Sonet Application Code: Not Set 
         Ethernet Compliance Code: Not set 
 Transceiver Temperature : 57 Celsius
 AINS Soak                : None 
 AINS Timer               : 0h, 0m
 AINS remaining time      : 0 seconds
The following sample shows the FEC configuration on the optics controller with the trunk controller optics as O-FEC for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controller optics 0/3/0/9
Wed Sep 15 00:41:22.027 UTC

 Controller State: Up 

 Transport Admin State: In Service 

 Laser State: On 

 LED State: Green 
 
 Optics Status 

         Optics Type:  QSFP-DD DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=49, Frequency=193.70THz,
         Wavelength=1547.715nm 

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:
          
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 3          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 5          
         HIGH-LBC = 0               HIGH-DGD = 0          
         OOR-CD = 0                 OSNR = 4          
         WVL-OOL = 0                MEA  = 0          
         IMPROPER-REM = 6          
         TX-POWER-PROV-MISMATCH = 0          
         Laser Bias Current = 0.0 %
         Actual TX Power = -11.10 dBm 
         RX Power = -11.56 dBm 
         RX Signal Power = -11.62 dBm 
         Frequency Offset = -66 MHz 
Performance Monitoring: Enable 

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          3.0      -24.5           0.0          0.0
         Tx Power Threshold(dBm)          0.0      -16.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 90 % 
         Configured Tx Power = -10.00 dBm 
         Configured CD High Threshold = 52000 ps/nm 
         Configured CD lower Threshold = -52000 ps/nm 
         Configured OSNR lower Threshold = 21.10 dB 
         Configured DGD Higher Threshold = 67.00 ps 
         Baud Rate =  60.1385467980 GBd
         Bits per Symbol = 4.0000000000  bits/symbol 
         Modulation Type: 16QAM 
         Chromatic Dispersion 0 ps/nm 
         Configured CD-MIN -13000 ps/nm  CD-MAX 13000 ps/nm 
         Polarization Mode Dispersion = 0.0 ps 
         Second Order Polarization Mode Dispersion = 24.00 ps^2 
         Optical Signal to Noise Ratio = 35.70 dB 
         SNR = 19.40 dB 
         Polarization Dependent Loss = 0.20 dB 
         Polarization Change Rate = 0.00 rad/s 
         Differential Group Delay = 1.00 ps 

 Transceiver Vendor Details
          
         Form Factor            : QSFP-DD
         Name                   : CISCO-ACACIA
         Part Number            : DP04QSDD-E
         Rev Number             : A
         Serial Number          : ACA2524006W
         PID                    : QDD-400G-ZRP-S
         VID                    : V01
         Date Code(yy/mm/dd)    : 21/06/18
         Fiber Connector Type: LC 
         Otn Application Code: Not Set 
         Sonet Application Code: Not Set 
         Ethernet Compliance Code: Not set 

 Transceiver Temperature : 62 Celsius
 AINS Soak                : None 
 AINS Timer               : 0h, 0m
 AINS remaining time      : 0 seconds
Laser Squelching
You can enable laser squelching on Ethernet controllers. When laser squelching is enabled, the laser is shut down in the event of trunk faults (LOS, LOF), and a SQUELCHED alarm is raised on the mapped client port.
To configure laser squelching on the Ethernet controllers, use the following commands:
configure
controller HundredGigECtrlr Rack/Slot/Instance/Port
laser-squelch
commit
The following is a sample where laser squelching is enabled on the Ethernet controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/1/0/10
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#laser-squelch
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the laser squelch status on the controller.
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/1/0/10
Fri Feb 22 15:18:47.011 UTC
Operational data for interface HundredGigECtrlr0/1/0/10:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Configuring Laser Squelching on OTN-XP Card
Configuring Laser Squelching on OTN-XP Card
From R7.2.1 onwards, laser squelching is supported on 10GE controllers for the OTN-XP card.
From R7.3.1 onwards, laser squelching is supported on 100GE or 400GE controllers for the OTN-XP card.
From Release 7.5.2 onwards, laser squelching is supported on the 16G FC and 32G FC controllers for the OTN-XP card.
Configuring Laser Squelching on 10GE Controllers
To configure laser squelching on the 10GE controllers for the OTN-XP card, use the following commands:
configure
controller tenGigECtrlr Rack/Slot/Instance/Port/Lanenumber
laser-squelch
commit
The range of Lanenumber is from 1 to 4.
The following is a sample where laser squelching is enabled on the 10GE controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller tenGigECtrlr 0/0/0/4/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#laser-squelch
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the laser squelch status on the 10GE controller.
P/0/RP0/CPU0:ios#show controllers tenGigECtrlr 0/0/0/4/1
Wed May 6 06:28:29.603 UTC
Operational data for interface TenGigECtrlr0/0/0/4/1:

State:
Administrative state: enabled
Operational state: Up
LED state: Green On
Maintenance: Disabled
AINS Soak: None
Total Duration: 0 hour(s) 0 minute(s)
Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
Laser Squelch: Enabled

Phy:
Media type: Not known

Autonegotiation disabled.

Operational values:
Speed: 10Gbps
Duplex: Full Duplex
Flowcontrol: None
Loopback: None (or external)
Inter-packet gap: standard (12)
BER monitoring:
Not supported
Holdoff Time: 0ms
Configuring Laser Squelching on 100GE Controllers
To configure laser squelching on the 100GE controllers for the OTN-XP card, use the following commands:
configure
controller HundredGigECtrlr Rack/Slot/Instance/Port
laser-squelch
commit
The following is a sample where laser squelching is enabled on the 100GE controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/0/0/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#laser-squelch
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the laser squelch status on the 100GE controller.
RP/0/RP0/CPU0:ios#show controller hundredGigECtrlr 0/0/0/1
Fri Jul 23 16:07:11.541 UTC
Operational data for interface HundredGigECtrlr0/0/0/1:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
Statistics:
FEC:
Corrected Codeword Count: 134967789
Uncorrected Codeword Count: 0
Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Configuring Laser Squelching on 400GE Controllers
To configure laser squelching on the 400GE controllers for the OTN-XP card, use the following commands:
configure
controller fourHundredGigECtrlr Rack/Slot/Instance/Port
laser-squelch
commit
The following is a sample where laser squelching is enabled on the 400GE controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller fourHundredGigECtrlr 0/0/0/8
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#laser-squelch
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the laser squelch status on the 400GE controller.
RP/0/RP0/CPU0:ios#show controller fourhundredGigECtrlr 0/0/0/8
Fri Jul 23 16:07:11.541 UTC
Operational data for interface fourHundredGigECtrlr0/0/0/8:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known

Statistics:
FEC:
Corrected Codeword Count: 134967789
Uncorrected Codeword Count: 0
Autonegotiation disabled.

Operational values:
    Speed: 400Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Configuring Laser Squelching on 16G FC and 32G FC Controllers
The following is a sample where laser squelching is enabled on the 16G FC controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller SixteenGigFibreChanCtrlr 0/1/0/0/2 laser-squelch
RP/0/RP0/CPU0:ios(config)#commit
Sat Apr  9 13:03:26.746 UTC
RP/0/RP0/CPU0:ios(config)#end
The following is a sample where laser squelching is enabled on the 32G FC controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller ThirtyTwoGigFibreChanCtrlr 0/1/0/6/4 laser-squelch
RP/0/RP0/CPU0:ios(config)#commit
Sat Apr  9 13:05:26.746 UTC
RP/0/RP0/CPU0:ios(config)#end
The following sample verifies the laser squelching enabled on the 16G FC controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#show controllers SixteenGigFibreChanCtrlr 0/1/0/0/2

+++ 13:03:44 fe(default) exec +++
show controllers SixteenGigFibreChanCtrlr 0/1/0/0/2

Sat Apr  9 13:03:43.743 UTC

Operational data for Fibre Channel controller SixteenGigFibreChanCtrlr0/1/0/0/2

State:
 Admin State           : Up
 Operational state     : Up
 LED state             : Green On
 Secondary admin state : Normal
 AINS Soak             : None
     Total Duration    : 0 hour(s) 0 minute(s)
     Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
 Laser Squelch         : Enabled

Performance Monitoring is enabled

Operational values:
 Speed                    : 16 Gbps
 Loopback                 : None
 BER monitoring:
     Not supported
 Hold-off Time            : 0 ms
 Forward Error Correction : Not Configured
RP/0/RP0/CPU0:ios#
The following sample verifies the laser squelching enabled on the 32G FC controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#show controllers ThirtyTwoGigFibreChanCtrlr 0/1/0/6/4

+++ 13:03:44 fe(default) exec +++
show controllers ThirtyTwoGigFibreChanCtrlr 0/1/0/6/4

Sat Apr  9 13:03:43.923 UTC

Operational data for Fibre Channel controller ThirtyTwoGigFibreChanCtrlr0/1/0/6/4

State:
 Admin State           : Up
 Operational state     : Up
 LED state             : Green On
 Secondary admin state : Normal
 AINS Soak             : None
     Total Duration    : 0 hour(s) 0 minute(s)
     Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
 Laser Squelch         : Enabled

Performance Monitoring is enabled

Operational values:
 Speed                    : 32 Gbps
 Loopback                 : None
 BER monitoring:
     Not supported
 Hold-off Time            : 0 ms
 Forward Error Correction : Standard(Reed Solomon)
Idle Insertion
When a fault occurs on the trunk port, you can hold the propagation of local faults using the idle insertion feature. This feature is enabled on the ethernet controller by configuring the hold-off timer.
When the fault occurs on the trunk, idles are inserted in the traffic stream from the trunk port to the client port for the duration of the configured holdoff-time. If the trunk port remains faulty beyond the configured holdoff-time, a local fault is transmitted towards the client device. If the trunk recovers from the fault before the holdoff-time expires, traffic resumes.
This feature can be used on customer deployments to prevent reset of client ports during a PSM switchover.
You can enable the idle insertion feature by using the following commands:
configure
controller HundredGigECtrlr Rack/Slot/Instance/Port
holdoff-time trunk-fault time-value
The range of timevalue is from 0 ms to 3000 ms.
The following is a sample for enabling the hold off -timer in 100GE controllers:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/1/0/10
RP/0/RP0/CPU0:ios (config-eth-ctrlr)#holdoff-time trunk-fault 3000
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
To view the hold-off time that is configured on 100GE controller, use the following command:
show controllers hundredGigECtrlr Rack/Slot/Instance/Port
Example
RP/0/RP0/CPU0:ios#show controllers HundredGigECtrlr 0/1/0/10
Fri Feb 22 18:58:06.888 UTC
Operational data for interface HundredGigECtrlr0/1/0/10:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 3000ms
Enabling Idle Insertion on OTN-XP Card
Enabling Idle Insertion on OTN-XP Card
From R7.2.1 onwards, you can enable the idle insertion feature on the 10GE controller for OTN-XP card.
From R7.3.1 onwards, you can enable the idle insertion feature on 100GE or 400GE controllers for the OTN-XP card.
To enable idle insertion on the 10GE controller, enter the following commands:
configure
controller tenGigECtrlr Rack/Slot/Instance/Port/Lanenumber
holdoff-time trunk-fault time-value
commit
The range of Lanenumber is from 1 to 4 and the range of holdoff-time trunk-fault time-value is from 0 to 3000 ms.
The following is a sample for enabling the idle insertion feature in 10GE controllers:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller tenGigECtrlr 0/0/0/4/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#holdoff-time trunk-fault 2000
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
To view the hold-off time that is configured on 10GE controllers, use the following command:
show controllers tenGigECtrlr Rack/Slot/Instance/Port/Lanenumber
Example
RP/0/RP0/CPU0:ios#show controllers TenGigECtrlr 0/0/0/4/1
Thu Mar 26 12:46:16.543 UTC
Operational data for interface TenGigECtrlr0/0/0/4/1:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 10Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    Inter-packet gap: standard (12)
    BER monitoring:
        Not supported
    Holdoff Time: 2000ms
Configuring Idle Insertion on 100GE Controllers
To configure idle insertion on the 100GE controllers for the OTN-XP card, use the following commands:
configure
controller HundredGigECtrlr Rack/Slot/Instance/Port
holdoff-time trunk-fault time-value
commit
The range of timevalue is from 0 ms to 3000 ms.
The following is a sample where idle insertion is enabled on the 100GE controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/0/0/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#holdoff-time trunk-fault 3000
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the idle insertion status on the 100GE controller.
RP/0/RP0/CPU0:ios#show controller hundredGigECtrlr 0/0/0/1
Fri Jul 23 16:07:11.541 UTC
Operational data for interface HundredGigECtrlr0/0/0/1:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
Statistics:
FEC:
Corrected Codeword Count: 134967789
Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
        Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 3000ms
Configuring Idle Insertion on 400GE Controllers
To configure idle insertion on the 400GE controllers for the OTN-XP card, use the following commands:
configure
controller fourHundredGigECtrlr Rack/Slot/Instance/Port
holdoff-time trunk-fault time-value
commit
The following is a sample where idle insertion is enabled on the 400GE controller for the OTN-XP card.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller fourHundredGigECtrlr 0/0/0/10
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#holdoff-time trunk-fault 2000
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
The following is a sample to view the idle insertion status on the 400GE controller.
RP/0/RP0/CPU0:ios#show controller fourhundredGigECtrlr 0/0/0/10
Fri Jul 23 16:07:11.541 UTC
Operational data for interface fourHundredGigECtrlr0/0/0/10:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
Statistics:
FEC:
Corrected Codeword Count: 134967789
Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 400Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
        Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 2000ms
Idle Insertion for Ethernet Controllers
Table 3. Feature History
Feature Name
Release Information
Feature Description
Idle Insertion for Ethernet Controllers
Cisco IOS XR Release 7.5.2
Idle insertion for Ethernet controllers feature performs end-to-end link verification between 100GE or 400GE Ethernet controllers before bringing up the actual traffic. This feature enables you to perform pre-provisioning checks to isolate link errors in advance without any Ethernet testers. This feature is supported on the 1.2T C band, 1.2T L band, and 800G QSFP-DD Transponder line cards.
Idle insertion for Ethernet controllers feature allows you to perform end-to-end link verification between 100GE or 400GE Ethernet controllers before bringing up the actual traffic. This feature is supported on the 1.2T, 1.2TL, and 2-QDD-C cards.

Note
OTU4 client rate is not supported.
Idle frames can be inserted in both the ingress and egress directions on Ethernet controllers and the LOCAL-FAULT and REMOTE-FAULT alarms are cleared. The performance monitoring counters on the pcs layer are monitored to check for any errors on the link.

Warning
Do not configure the Idle insertion for Ethernet controllers feature on the link that carries live traffic.
Recommended Topology for Link Verification
Configuring Idle Insertion for Ethernet Controllers
Verifying Idle Insertion Configuration for Ethernet Controllers
Recommended Topology for Link Verification
The following diagram describes the recommended topology for link verification:
Figure 1. Topology for Link Verification
The following steps describe the sequence for link verification using this topology:
Both the near-end and far-end clients have the LOCAL-FAULT alarm if the trunk is up on both the ends.
Enable idle ingress on the near-end client. The idle frame transmits toward the trunk link and reaches the far-end client. The LOCAL-FAULT alarm is then cleared on the far-end client.
As the far-end client has fiber loop, the idle frame is inserted again into the same client RX toward the trunk link and reaches the near-end client. The LOCAL-FAULT alarm is then cleared on the near-end client as well.
When you enable idle insertion on any client and in any direction, the idle frame transmits in loop similar to this topology and all the LOCAL-FAULT and the REMOTE-FAULT alarms are cleared.
The link can be monitored after all the alarms are cleared. The link has a problem if any alarm is reported during the link test.
Configuring Idle Insertion for Ethernet Controllers
Before You Begin:
Do not configure idle frame insertion with hold-off timer.
Do not configure PRBS on the trunk.
You can configure this feature by using the following commands:
configure
controller hundredGigECtrlr Rack/Slot/Instance/Port
insert-idle ingress
insert-idle egress
commit
end
The following is a sample for enabling the idle ingress and idle egress in 100GE controllers:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller hundredGigECtrlr 0/2/0/2
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#insert-idle ingress
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#insert-idle egress
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#end
You can disable this feature by using the following commands:
configure
controller hundredGigECtrlr Rack/Slot/Instance/Port
no insert-idle ingress
no insert-idle egress
commit
end
Limitation
After disabling the idle frame insertion feature, the LOCAL-FAULT or REMOTE-FAULT alarm may not appear again because the idle frames are in loop. Hence, you must break the idle frame loop in the link by performing either one of the following:
Perform fiber OIR on either the near-end or far-end client port.
Perform shut and unshut operation on any client port.
Verifying Idle Insertion Configuration for Ethernet Controllers
To verify the idle ingress and idle egress that is configured on the Ethernet controllers, use the following command:
RP/0/RP0/CPU0:ios# show controllers hundredGigECtrlr Rack/Slot/Instance/Port
Example
RP/0/RP0/CPU0:ios#show controllers hundredGigECtrlr 0/2/0/2
Wed Mar 30 06:56:58.878 UTC
Operational data for interface HundredGigECtrlr0/2/0/2:
State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled
    
    Insert Idle Ingress: Enabled
    Insert Idle Egress: Enabled
    
Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 0
Autonegotiation disabled.
Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
LLDP Drop
Link Layer Discovery Protocol (LLDP) Snooping is enabled by default on all ethernet controllers.
To verify the LLDP neighbors, use the following commands:
RP/0/RP0/CPU0:ios#show lldp neighbors detail 
Tue Mar 12 11:49:20.819 IST
Capability codes:
        (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device
        (W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other

------------------------------------------------
Local Interface: HundredGigECtrlr0/1/0/7
Chassis id: 008a.96cd.34e1
Port id: Hu0/0/0/4
Port Description - not advertised
System Name: ncs5500_node

System Description: 
 6.1.4, NCS-5500

Time remaining: 116 seconds
Hold Time: 120 seconds
System Capabilities: R
Enabled Capabilities: R
Management Addresses - not advertised
Peer MAC Address: 00:8a:96:cd:34:10


------------------------------------------------
Local Interface: HundredGigECtrlr0/1/0/13
Chassis id: 008a.96cd.34e1
Port id: Hu0/0/0/5
Port Description - not advertised
System Name: ncs5500_node

System Description: 
 6.1.4, NCS-5500

Time remaining: 90 seconds
Hold Time: 120 seconds
System Capabilities: R
Enabled Capabilities: R
Management Addresses - not advertised
Peer MAC Address: 00:8a:96:cd:34:14


Total entries displayed: 2
RP/0/RP0/CPU0:ios#show lldp neighbors
Tue Mar 12 16:17:56.713 IST
Capability codes:
        (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device
        (W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other

Device ID       Local Intf               Hold-time  Capability     Port ID
ncs5500_node    HundredGigECtrlr0/1/0/7  120        R               Hu0/0/0/4
ncs5500_node    HundredGigECtrlr0/1/0/13 120        R               Hu0/0/0/5

Total entries displayed: 2
When you enable LLDP drop on the client controller ports of the muxponder or muxponder slice, the LLDP frames drop on the ports without forwarding.

Note
LLDP on 400GE is not supported on the OTN-XP card.
Configuring LLDP Drop
Verifying the Status of LLDP Drop
Configuring LLDP Drop
You can configure the LLDP drop for a muxponder or muxponder slice. By default, the LLDP drop status is set to False. On enabling the LLDP Drop, the status is set to True.
To configure LLDP drop on a muxponder use the following command:
configure
hw-module location location mxponder drop-lldp

Note
Use the no form of the command to disable LLDP drop.
commit
Limitation
When you disable LLDP globally, the LLDP gets disabled on all the interfaces.

Note
By default, LLDP is enabled for NCS 1004. But when you enable and disable LLDP in the global configuration mode, LLDP gets disabled on all the interfaces.
Workaround: You must enable LLDP globally or reload the Router.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios#hw-module location 0/1 mxponder drop-lldp
RP/0/RP0/CPU0:ios#commit
configure
hw-module location location mxponder-slice slice-number drop-lldp

Note
Use the no form of the command to disable LLDP drop.
To configure LLDP drop on a muxponder slice, use the following command:
commit
The following is a sample in which slice 0 client ports are enabled with LLDP drop.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#hw-module location 0/1 mxponder-slice 0 drop-lldp
RP/0/RP0/CPU0:ios(config)#commit
Verifying the Status of LLDP Drop
To verify the LLDP drop enabled status, use the following command.
RP/0/RP0/CPU0:ios#show hw-module location all mxponder
Fri Feb 22 13:22:19.281 UTC

Location:             0/0
Client Bitrate:       NONE
Trunk  Bitrate:       NONE
Status:               Not Provisioned


Location:             0/1
Slice ID:             0
Client Bitrate:       100GE
Trunk  Bitrate:       500G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
Client Port                     Mapper/Trunk Port          CoherentDSP0/1/0/0
                                Traffic Split Percentage

HundredGigECtrlr0/1/0/2         ODU40/1/0/0/0                      100
HundredGigECtrlr0/1/0/3         ODU40/1/0/0/1                      100
HundredGigECtrlr0/1/0/4         ODU40/1/0/0/2                      100
HundredGigECtrlr0/1/0/5         ODU40/1/0/0/3                      100
HundredGigECtrlr0/1/0/6         ODU40/1/0/0/4                      100


Location:             0/1
Slice ID:             1
Client Bitrate:       100GE
Trunk  Bitrate:       500G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
Client Port                     Mapper/Trunk Port          CoherentDSP0/1/0/1
                                Traffic Split Percentage

HundredGigECtrlr0/1/0/8         ODU40/1/0/1/0                      100
HundredGigECtrlr0/1/0/9         ODU40/1/0/1/1                      100
HundredGigECtrlr0/1/0/10        ODU40/1/0/1/2                      100
HundredGigECtrlr0/1/0/11        ODU40/1/0/1/3                      100
HundredGigECtrlr0/1/0/12        ODU40/1/0/1/4                      100


Location:             0/2
Slice ID:             0
Client Bitrate:       100GE
Trunk  Bitrate:       500G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
Client Port                     Mapper/Trunk Port          CoherentDSP0/2/0/0
                                Traffic Split Percentage

HundredGigECtrlr0/2/0/2         ODU40/2/0/0/0                      100
HundredGigECtrlr0/2/0/3         ODU40/2/0/0/1                      100
HundredGigECtrlr0/2/0/4         ODU40/2/0/0/2                      100
HundredGigECtrlr0/2/0/5         ODU40/2/0/0/3                      100
HundredGigECtrlr0/2/0/6         ODU40/2/0/0/4                      100


Location:             0/2
Slice ID:             1
Client Bitrate:       100GE
Trunk  Bitrate:       500G
Status:               Provisioned
LLDP Drop Enabled:    FALSE
Client Port                     Mapper/Trunk Port          CoherentDSP0/2/0/1
                                Traffic Split Percentage

HundredGigECtrlr0/2/0/8         ODU40/2/0/1/0                      100
HundredGigECtrlr0/2/0/9         ODU40/2/0/1/1                      100
HundredGigECtrlr0/2/0/10        ODU40/2/0/1/2                      100
HundredGigECtrlr0/2/0/11        ODU40/2/0/1/3                      100
HundredGigECtrlr0/2/0/12        ODU40/2/0/1/4                      100


Location:             0/3
Slice ID:             0
Client Bitrate:       100GE
Trunk  Bitrate:       300G
Status:               Provisioned
LLDP Drop Enabled:    TRUE
Client Port                     Mapper/Trunk Port          CoherentDSP0/3/0/0
                                Traffic Split Percentage

HundredGigECtrlr0/3/0/2         ODU40/3/0/0/0                      100
HundredGigECtrlr0/3/0/3         ODU40/3/0/0/1                      100
HundredGigECtrlr0/3/0/4         ODU40/3/0/0/2                      100
Link Layer Discovery Protocol (LLDP) Support on Management Interface
The LLDP support on management interface feature requires a system to form LLDP neighborship over the system management interface, through which it advertises and learns LLDP neighbor information. This information about neighbors used to learn about the neighbors and in turn the topology of the devices for Operations, Administration, and Maintenance (OAM) purposes.
Advantages of LLDP
Provides support on non-Cisco devices.
Enables neighbor discovery between non-Cisco devices.
Limitation
When you disable LLDP globally, the LLDP gets disabled on all the interfaces.

Note
By default, LLDP is enabled for NCS 1004. But when you enable and disable LLDP in the global configuration mode, LLDP gets disabled on all the interfaces.
Workaround: You must enable LLDP globally or reload the Router.
Cisco Discovery Protocol (CDP) vs LLDP
The CDP is a device discovery protocol that runs over Layer 2. Layer 2 is also known as the data link layer that runs on all Cisco devices, such as routers, bridges, access servers, and switches. This protocol allows the network management applications to automatically discover and learn about other Cisco devices that connect to the network.
The LLDP is also a device discovery protocol that runs over Layer 2. This protocol allows the network management applications to automatically discover and learn about other non-Cisco devices that connect to the network.
Interoperability between non-Cisco devices using LLDP
LLDP is also a neighbor discovery protocol that is used by network devices to advertise information about themselves to other devices on the network. This protocol runs over the data link layer, which allows two systems running different network layer protocols to learn about each other.
With LLDP, the user can also access the information about a particular physical network connection. If the user uses a non-Cisco monitoring tool (through SNMP), LLDP helps you identify the Object Identifiers (OIDs) that the system supports. The following OIDs are supported:
1.0.8802.1.1.2.1.4.1.1.4
1.0.8802.1.1.2.1.4.1.1.5
1.0.8802.1.1.2.1.4.1.1.6
1.0.8802.1.1.2.1.4.1.1.7
1.0.8802.1.1.2.1.4.1.1.8
1.0.8802.1.1.2.1.4.1.1.9
1.0.8802.1.1.2.1.4.1.1.10
1.0.8802.1.1.2.1.4.1.1.11
1.0.8802.1.1.2.1.4.1.1.12
Neighbor Discovery
System advertises the LLDP TLV (Type Length Value) details over the management network using which other devices in the management network can learn about this device.
Configuring LLDP
LLDP full stack functionality is supported on all three management interfaces supported in NCS 1004.
You can selectively enable or disable LLDP on any of the management interfaces on demand.
You can selectively enable or disable LLDP transmit or receive functionality at the management interface level.
Information gathered using LLDP can be stored in the device Management Information Database (MIB) and queried with the Simple Network Management protocol (SNMP).
LLDP operational data are available in both Command Line Interface and netconf-yang interface.
Enabling LLDP Globally
When you enable LLDP globally, all interfaces that support LLDP are automatically enabled for both transmit and receive operations.

Note
You can override this default operation at the interface to disable receive or transmit operations.
The following table describes the global LLDP attributes that the user can configure:
Table 4.
Attribute
Default
Range
Description
Holdtime
120
0–65535
Specifies the hold time (in sec). Hold time refers to the time or duration that an LLDP device maintains the neighbor information before discarding.
Reinit
2
2–5
Delay (in sec) for LLDP initialization on any interface
Timer
30
5-65534
Specifies the rate at which LLDP packets are sent (in sec)
The following example shows the commands to configure LLDP globally. The global LLDP configuration enables LLDP on all the three management interfaces.
RP/0/RP0/CPU0:regen#configure terminal
RP/0/RP0/CPU0:regen(config)#lldp management enable 
RP/0/RP0/CPU0:regen(config)#lldp holdtime 30 
RP/0/RP0/CPU0:regen(config)#lldp reinit 2 
RP/0/RP0/CPU0:regen(config)#commit
Verification
You can verify the LLDP configuration using the show running-config lldp command.
The output of show running-config lldp command is as follows:
RP/0/RP0/CPU0:regen#show running-config lldp
Tue Dec 10 10:36:11.567 UTC
lldp
timer 30
reinit 2
holdtime 120
management enable
!
You can verify the LLDP data using the show lldp interface and show lldp neighbors commands.
The output of show lldp interface command is as follows:
RP/0/RP0/CPU0:regen#show lldp interface 
Thu Nov  7 08:45:22.934 UTC


MgmtEth0/RP0/CPU0/0:
        Tx: enabled
        Rx: enabled
        Tx state: IDLE
        Rx state: WAIT FOR FRAME


MgmtEth0/RP0/CPU0/1:
        Tx: enabled
        Rx: enabled
        Tx state: IDLE
        Rx state: WAIT FOR FRAME
The output of show lldp neighbors command is as follows:
RP/0/RP0/CPU0:M-131#show lldp neighbors
Mon Dec  2 11:01:20.143 CET
Capability codes:
        (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device
        (W) WLAN Access Point, (P) Repeater, (S) Station, (O) Other

Device ID       Local Intf               Hold-time  Capability     Port ID
[DISABLED]      MgmtEth0/RP0/CPU0/0      120        B               gi19
MYS-130         MgmtEth0/RP0/CPU0/1      120        R               MgmtEth0/RP0/CPU0/1
where [ DISABLED] shows that the LLDP is disabled on the interface MgmtEth0/RP0/CPU0/0.
Enabling LLDP per Management Interface
The following example shows the commands to configure LLDP at the management interface level.
RP/0/RP0/CPU0:ios(config)#interface mgmtEth 0/RP0/CPU0/X
RP/0/RP0/CPU0:ios(config-if)#lldp enable
RP/0/RP0/CPU0:ios(config-if)#commit
Disabling LLDP Transmit and Receive Operations
The following example shows the commands to disable the LLDP transmit operations at the specified management interface.
RP/0/RP0/CPU0:ios(config)#interface mgmtEth 0/RP0/CPU0/X
RP/0/RP0/CPU0:ios(config-if)#lldp transmit disable
RP/0/RP0/CPU0:ios(config-if)#commit
The following example shows the commands to disable the LLDP receive operations at the specified management interface.
RP/0/RP0/CPU0:ios(config)#interface mgmtEth 0/RP0/CPU0/X
RP/0/RP0/CPU0:ios(config-if)#lldp receive disable
RP/0/RP0/CPU0:ios(config-if)#commit
Debugging LLDP Issues
The following commands are used for debugging issues in the LLDP functionality.
show lldp traffic
debug lldp all
debug lldp errors
debug lldp events
debug lldp packets
debug lldp tlvs
debug lldp trace
debug lldp verbose
Daisy Chain Support on Management Ports
Table 5. Feature History
Feature Name
Release Information
Description
Daisy Chain Support on Management Ports
Cisco IOS XR Release 7.7.1
In a daisy chain arrangement, multiple NCS 1004 nodes across two sites are linearly connected to each other over the management ports. As a result, when the TOR switches at a site are down, the NCS 1004 nodes of that site are still reachable from the NCS 1004 nodes at the other site. You can daisy chain up to five NCS 1004 nodes in the network.
Daisy Chain feature is supported only on the management ports 0 and 1 on the NCS 1004 chassis.
The following diagram shows the Daisy Chain topology. In this topology, three NCS 1004 nodes are connected to each other over the management ports.
Figure 2. Daisy Chain Topology
Configure Daisy Chain Support on Management Ports
Verify Daisy Chain
Enable Storm Control on TOR Switch
Disable DAD on Management Port
Configure Daisy Chain Support on Management Ports
Daisy Chain must be configured only on the management port 1.
Before You Begin:
Enable Storm Control on TOR Switch
Disable DAD on Management Port
STP must be running on the TOR switch.
Management port 0 must not be in shut down state and must be configured with either IPv4 or IPv6 address.
Management port 1 must not be configured with either IPv4 or IPv6 address.
LLDP is not supported on the management port 1 if Daisy Chain is configured.
To configure Daisy Chain on the management port 1, enter the following commands:
configure
interface mgmtEth 0/RP0/CPU0/1
no ipv4 address
no ipv6 address
bridge-port routed-interface mgmtEth 0/RP0/CPU0/0
Verify Daisy Chain
To verify the daisy chain that is configured on the management port, use the following commands.
!         
interface MgmtEth0/RP0/CPU0/0
 ipv4 address 10.127.60.220 255.255.255.0
!         
interface MgmtEth0/RP0/CPU0/1
 bridge-port routed-interface MgmtEth0/RP0/CPU0/0
!         
interface MgmtEth0/RP0/CPU0/2
 shutdown 
!      
Enable Storm Control on TOR Switch
In Daisy Chain configuration, one of the Top of the Rack (TOR) switch ports is in blocked state, provided NCS 1004 forwards STP BPDU in periodic intervals. Three consecutive hello misses move the port state from blocked to forwarding state.
When the NCS 1004 node reboots, the other port state of the TOR switch changes from blocking to forwarding state. Hence, a loop is created momentarily when both the TOR switch ports are in forwarding state. This loop results in duplication of packets on the network. Hence, storm control must be enabled on the TOR switch.
Enter the following commands from the TOR switch to enable storm control.
errdisable recovery interval 60
errdisable recovery cause storm-control
Disable DAD on Management Port
By default, IPv6 Duplicate Address Detection (DAD) is enabled on the management ports. Similar to storm control scenario, when IPv6 is configured for a management port, DAD happens due to looping in the network. Since DAD was enabled, management port will be down. In order to avoid management port being down due to momentary looping, DAD must be disabled on the management port 0.
Enter the following commands to disable DAD on the management port 0.
configure
interface mgmtEth0/RP0/CPU0/0
ipv6 nd dad attempts 0
DHCP Client
Table 6. Feature History
Feature Name
Release Information
Feature Description
Dynamic Host Configuration Protocol (DHCP) Client
Cisco IOS XR Release 7.3.2
The DHCP client enables the router interfaces to dynamically acquire the IPv4 or DHCPv4 or DHCPv6 server which is used to forward the response to the correct layer 2 address. The DHCP client ensures that configuration information reaches the correct device.
The Dynamic Host Configuration Protocol (DHCP) client functionality enables the router interfaces to dynamically acquire the IPv4 or DHCPv4 or DHCPv6 server, and forwards the responses back to the correct Layer 2 address so that the correct device gets the correct configuration information.
DHCP has the ability to allocate IP addresses only for a configurable period of time, called the lease period. If the client is required to retain this IP address for a longer period beyond the lease period, the lease period must be renewed before the IP address expires. The client renews the lease based on configuration that was sent from the server. The client unicasts a REQUEST message using the IP address of the server. When a server receives the REQUEST message and responds with an ACK message. The lease period of the client is extended by the lease time configured in the ACK message. DHCP client supports DHCPv6.
DHCP Client Options
Enabling DHCP Client on Management Ethernet Interface
Verifying DHCP Client on Management Ethernet Interface
DHCP Client Options
You can configure DHCPv6 client on management Ethernet interfaces. You can configure different DHCPv6 client options to differentiate between clients as required. The different DHCPv6 client options are also configured to differentiate how a DHCPv6 client communicates with a DHCPv6 server. The different DHCPv6 client options that can be configured are:
DUID: If the DUID DHCPv6 client option is configured on an interface, DHCPv6 client communicates with the DHCPv6 server through the link layer address.
Rapid Commit: If the Rapid Commit DHCPv6 client option is configured on an interface, DHCPv6 client can obtain configuration parameters from the DHCPv6 server through a rapid two-step exchange (solicit and reply) instead of the default four-step exchange (solicit, advertise, request, and reply).
DHCP Options: The various other DHCPv6 options that can be configured on a DHCPv6 client are:
Option 15: Option 15 is also known as the User Class option and it is used by a DHCPv6 client to identify the type or category of users or applications it represents.
Option 16: Option 16 is also known as the Vendor ID option and it is used by a DHCPv6 a client to identify the vendor that manufactured the hardware on which the client is running.
Option 23: Option 23 is also known as the Domain name Server (DNS) option provides a list of one or more IPv6 addresses of DNS recursive name servers to which a client's DNS resolver can send DNS queries.
Option 24: Option 24 is also known as the Domain List option and it specifies the domain search list that the client uses to resolve hostnames with the DNS.
DHCP Timers: This option is used to set different timer value for DHCP client configurations. The various DHCP timer options are:
Release-timeout: It is used to set retransmission timeout value for the initial release message.
Req-max-rt: It is used to set the maximum retransmission timeout value for the request message.
Req-max-rt: It is used to set the maximum retransmission timeout value for the request message.
Sol-max-delay: It is used to set the maximum delay time of the first solicit message.
Sol-max-rt: It is used to set the maximum solicit retransmission time.
Sol-time-out: It is used to set the intial timeout value of the solicit message.
Enabling DHCP Client on Management Ethernet Interface
To enable DHCP client on the management Ethernet interface, use the following command:
configure
interface MgmtEth R/S/I/P
ipv6 address dhcp-client-options
duid linked-layer-address
rapid-commit
{option 16 vendor | option 15 ciscoupnnp | option 23 | option 24}
timers sol-max-delay value | timers sol-time-out value | timers req-timeout value | timers req-max-rt value | timers release-timeout value}
ipv6 address dhcp
commit
The following sample shows to enable DHCP client on the management Ethernet interface:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#interface MgmtEth0/0/CPU0/0
RP/0/RP0/CPU0:ios(config)#ipv6 address dhcp-client-options
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#duid linked-layer-address
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#rapid-commit
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#option 16 vendor
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#option 15 ciscoupnnp
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#option 23
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#option 24
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers sol-max-delay 1
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers sol-time-out 1
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers sol-max-rt 120
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers req-timeout 1
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers req-max-rt 30
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#timers release-timeout 1
RP/0/RP0/CPU0:ios(config-dhcpv6-client)#commit
Verifying DHCP Client on Management Ethernet Interface
To verify DHCP client options on the management Ethernet interface, use the show dhcp ipv6 client and show dhcp ipv6 client detail commands:
RP/0/0/CPU0:ios#show dhcp ipv6 client
Thu Sep 17 10:45:44.493 IST

Interface name IPv6 Address State Lease Time Rem
---------------------- -------------- --------------- --------------------
MgmtEth0/0/1/0 500:1::1a/128 BOUND 7116


RP/0/RP0/CPU0:ios#show dhcp ipv6 client detail
Thu Sep 17 10:45:48.880 IST

-----------------------------------------------------
Client Interface name : MgmtEth0/0/`/0
Client Interface handle : 0x4040
Client MACAddr : 0219.bc81.e750
Client State : BOUND
Client Link Local Address : fe80::19:bcff:fe81:e750
Client IPv6 Address (Dhcp) : 500:1::1a/128
Lease Remaining (in secs) : 7112
DUID : 000300010219bc81e750

Client Configuration
Timers
SOL_MAX_DELAY : 1 secs (00:00:01)
SOL_TIMEOUT : 1 secs (00:00:01)
SOL_MAX_RT : 120 secs (00:02:00)
REQ_TIMEOUT : 1 secs (00:00:01)
REQ_MAX_RT : 30 secs (00:00:30)
REL_TIMEOUT : 1 secs (00:00:01)

Options
RAPID-COMMIT : True
USER-CLASS : ciscoupnnp
VENDOR-CLASS : vendor
DNS-SERVERS : True
DOMAIN-LIST : True

DUID Type : DUID_LL

Server Information
Server Address : fe80::1a:19ff:fe03:99ca
Preference : 255
DUID : 000300010206826e2e00
Status : SUCCESS
IA-NA
Status : SUCCESS
IAID : 0x40400001
T1 : 3600 secs (01:00:00)
T2 : 5760 secs (01:36:00)
IA-ADDR
IA NA Address : 500:1::1a
Preferred Time : 7200 secs (02:00:00)
Valid Time : 7200 secs (02:00:00)
Flags : 0x0
-----------------------------------------------------
MAC Address Snooping on Client Ports
MAC address snooping allows you to learn the MAC address of the neighbor, that is connected to the client ports. You can enable ARP snooping on all client ports and learn the MAC address of neighbors through CLI.
This feature overcomes the limitation, where LLDP (Link Layer Discovery protocol) cannot be enabled in some networks.
Limitations
When you enable or disable MAC address snooping on any slice, few packets are dropped during configuration.
Open config interface for enabling or disabling MAC address snooping is not supported.
SNMP MIB is not supported for the MAC address attribute.

Note
When you enable MAC address snooping on client ports, it overrides LLDP.
Configuring MAC Address Snooping on Client Ports
Viewing Neighbor MAC Address
Configuring MAC Address Snooping on Client Ports
You can configure MAC address or ARP snoop on slice in Muxponder slice mode using the following commands.
configure
hw-module location location mxponder-slice slice-number
client-rate 100GE
trunk-rate 600G { 100G | 150G | 200G | 250G | 300G | 350G | 400G | 450G | 500G | 550G | 600G }
arp-snoop
commit
Example
The following is a sample in which, MAC address or ARP snoop is configured on the client ports of slice 0 in Muxponder slice mode.
RP/0/RP0/CPU0:ios#configure
Mon Mar 16 19:30:33.933 UTC
RP/0/RP0/CPU0:ios(config)#hw-module location 0/3 mxponder-slice 0
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#client-rate 100GE
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#trunk-rate 600G
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#arp-snoop
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#commit
Mon Mar 16 19:30:52.636 UTC
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#end
The following is a sample in which, MAC address or ARP snoop is configured in Muxponder mode.
RP/0/RP0/CPU0:ios#configure 
Mon Mar 16 19:08:17.154 UTC
RP/0/RP0/CPU0:ios(config)#hw-module location 0/1 mxponder arp-snoop 
RP/0/RP0/CPU0:ios(config)#commit
The following sample shows the output of show controllers hundredGigEctrlr command, before configuring MAC address or ARP snoop on client ports.
RP/0/RP0/CPU0:ios#show controllers hundredGigECtrlr 0/1/0/2 
Mon Mar 16 19:40:37.434 UTC
Operational data for interface HundredGigECtrlr0/1/0/2:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Holdoff Time: 0ms
Viewing Neighbor MAC Address
You can view the neighbor's physical address after enabling MAC address or ARP snoop using the following command. MAC address snoop output is enabled after ARP packets are received on the respective 100G client.
show controllers hundredGigEctrlr R/S/I/P
The following sample shows the neighbor's MAC address after configuring MAC address or ARP snoop on client ports.
RP/0/RP0/CPU0:ios#show controllers hundredGigECtrlr 0/1/0/2 
Mon Mar 16 19:41:08.047 UTC
Operational data for interface HundredGigECtrlr0/1/0/2:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Disabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled
    Neighbor Address:
    0010.9400.5502

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
Transmit Shutdown
Transmit shut on trunk optics controller brings down the CFP2 transmit power.
From R7.3.2 onwards, you can configure transmit shut on optics controller in the 4x100GE-MXP-DD muxponder mode.
Configuring Transmit Shutdown on Trunk Optics Controller
Verifying Transmit Shutdown on Trunk Optics Controller
Configuring Transmit Shutdown on Trunk Optics Controller
To perform transmit shutdown, enter the following commands:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller Optics R/S/I/P
RP/0/RP0/CPU0:ios(config-Optics)#transmit-shutdown
RP/0/RP0/CPU0:ios(config-Optics)#commit
RP/0/RP0/CPU0:ios(config-Optics)#exit
RP/0/RP0/CPU0:ios(config)#exit
The following is a sample to perform transmit shutdown on the trunk port:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller Optics 0/1/0/12
RP/0/RP0/CPU0:ios(config-Optics)#transmit-shutdown
RP/0/RP0/CPU0:ios(config-Optics)#commit
RP/0/RP0/CPU0:ios(config-Optics)#exit
RP/0/RP0/CPU0:ios(config)#exit
The following is a sample to perform transmit shutdown on the trunk port in the 4x100GE-MXP-DD muxponder mode:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller Optics 0/1/0/9
RP/0/RP0/CPU0:ios(config-Optics)#transmit-shutdown
RP/0/RP0/CPU0:ios(config-Optics)#commit
RP/0/RP0/CPU0:ios(config-Optics)#exit
RP/0/RP0/CPU0:ios(config)#exit
Verifying Transmit Shutdown on Trunk Optics Controller
RP/0/RP0/CPU0:ios#sh controllers optics 0/1/0/12
Fri Feb 26 21:36:16.009 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: Off

LED State: Yellow

Optics Status

Optics Type: CFP2 DWDM
DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
Wavelength=1552.524nm

Alarm Status:
-------------
Detected Alarms:
LOW-TX-PWR

LOS/LOL/Fault Status:

Alarm Statistics:

-------------
HIGH-RX-PWR = 0 LOW-RX-PWR = 1
HIGH-TX-PWR = 0 LOW-TX-PWR = 1
HIGH-LBC = 0 HIGH-DGD = 0
OOR-CD = 0 OSNR = 0
WVL-OOL = 0 MEA = 0
IMPROPER-REM = 0
TX-POWER-PROV-MISMATCH = 0
Laser Bias Current = 0.0 %
Actual TX Power = -40.00 dBm
RX Power = -1.02 dBm
RX Signal Power = -12.20 dBm
Frequency Offset = -8 MHz

Performance Monitoring: Enable

THRESHOLD VALUES
----------------

Parameter High Alarm Low Alarm High Warning Low Warning
------------------------ ---------- --------- ------------ -----------
Rx Power Threshold(dBm) 4.9 -12.0 0.0 0.0
Tx Power Threshold(dBm) 3.5 -10.1 0.0 0.0
LBC Threshold(mA) N/A N/A 0.00 0.00

LBC High Threshold = 98 %
Configured Tx Power = -1.50 dBm
Configured CD High Threshold = 180000 ps/nm
Configured CD lower Threshold = -180000 ps/nm
Configured OSNR lower Threshold = 0.00 dB
Configured DGD Higher Threshold = 180.00 ps
Baud Rate = 63.1394691467 GBd
Bits per Symbol = 4.0000000000 bits/symbol
Modulation Type: 16QAM
Chromatic Dispersion 0 ps/nm
Configured CD-MIN -26000 ps/nm CD-MAX 26000 ps/nm
Polarization Mode Dispersion = 0.0 ps
Second Order Polarization Mode Dispersion = 16.00 ps^2
Optical Signal to Noise Ratio = 35.90 dB
SNR = 17.00 dB
Polarization Dependent Loss = 0.70 dB
Polarization Change Rate = 0.00 rad/s
Differential Group Delay = 1.00 ps

Transceiver Vendor Details

Form Factor : CFP2
Name : CISCO-ACACIA
Part Number : 10-3500-01
Rev Number : 01
Serial Number : ACA24230026
PID : ONS-CFP2D-400G-C
VID : VES1
Date Code(yy/mm/dd) : 10/09/Í
Fiber Connector Type: LC
Otn Application Code: Not Set
Sonet Application Code: Not Set
Ethernet Compliance Code: Not set

Transceiver Temperature : 55 Celsius



AINS Soak : None
AINS Timer : 0h, 0m
AINS remaining time : 0 seconds
RP/0/RP0/CPU0:ios#show controller optics 0/1/0/9
Wed Sep 15 00:41:22.027 UTC

 Controller State: Up 

 Transport Admin State: In Service 

 Laser State: On 

 LED State: Green 
 
 Optics Status 

         Optics Type:  QSFP-DD DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=49, Frequency=193.70THz,
         Wavelength=1547.715nm 

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:
          
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 3          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 5          
         HIGH-LBC = 0               HIGH-DGD = 0          
         OOR-CD = 0                 OSNR = 4          
         WVL-OOL = 0                MEA  = 0          
         IMPROPER-REM = 6          
         TX-POWER-PROV-MISMATCH = 0          
         Laser Bias Current = 0.0 %
         Actual TX Power = -11.10 dBm 
         RX Power = -11.56 dBm 
         RX Signal Power = -11.62 dBm 
         Frequency Offset = -66 MHz 

   Performance Monitoring: Enable 

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          3.0      -24.5           0.0          0.0
         Tx Power Threshold(dBm)          0.0      -16.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 90 % 
         Configured Tx Power = -10.00 dBm 
         Configured CD High Threshold = 52000 ps/nm 
         Configured CD lower Threshold = -52000 ps/nm 
         Configured OSNR lower Threshold = 21.10 dB 
         Configured DGD Higher Threshold = 67.00 ps 
         Baud Rate =  60.1385467980 GBd
         Bits per Symbol = 4.0000000000  bits/symbol 
         Modulation Type: 16QAM 
         Chromatic Dispersion 0 ps/nm 
         Configured CD-MIN -13000 ps/nm  CD-MAX 13000 ps/nm 
         Polarization Mode Dispersion = 0.0 ps 
         Second Order Polarization Mode Dispersion = 24.00 ps^2 
         Optical Signal to Noise Ratio = 35.70 dB 
         SNR = 19.40 dB 
         Polarization Dependent Loss = 0.20 dB 
         Polarization Change Rate = 0.00 rad/s 
         Differential Group Delay = 1.00 ps 

 Transceiver Vendor Details
          
         Form Factor            : QSFP-DD
         Name                   : CISCO-ACACIA
         Part Number            : DP04QSDD-E
         Rev Number             : A
         Serial Number          : ACA2524006W
         PID                    : QDD-400G-ZRP-S
         VID                    : V01
         Date Code(yy/mm/dd)    : 21/06/18
         Fiber Connector Type: LC 
         Otn Application Code: Not Set 
         Sonet Application Code: Not Set 
         Ethernet Compliance Code: Not set 

 Transceiver Temperature : 62 Celsius
 AINS Soak                : None 
 AINS Timer               : 0h, 0m
Loopback
You can configure the loopback on the CoherentDSP, FC, OTU, and Ethernet controllers to identify connection problems. The loopback can be configured only in the maintenance mode. Use the controller controller-type and the secondary-admin-state maintenance commands to place the controllers in the maintenance mode.

Note
Internal and line loopbacks are supported on the FC, OTU, and Ethernet controllers whereas only internal loopbacks are supported on the CoherentDSP controllers.
Configuring Loopback on the 1.2T Card
To configure the loopback, use the following commands:
configure
controller controllertype Rack/Slot/Instance/Port
sec-admin-state maintenance
loopback [ line | internal ]
commit
Example 1
The following example shows how a line loopback is configured on the Ethernet controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 1/0/1/10 secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config)#commit
Fri Feb 22 19:49:46.504 UTC
RP/0/RP0/CPU0:ios(config)#exit
The following example shows how to verify a line loopback configured on the Ethernet controller.
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/1/0/10
Fri Feb 22 19:50:08.328 UTC
Operational data for interface HundredGigECtrlr0/1/0/10:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Enabled
    AINS Soak: Pending
      Total Duration: 0 hour(s) 30 minute(s)
      Remaining Duration: 0 hour(s) 30 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 0

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: None (or external)
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/1/0/10 loopback line
RP/0/RP0/CPU0:ios(config)#commit
RP/0/RP0/CPU0:ios(config)#exit
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/1/0/10
Fri Feb 22 20:01:00.521 UTC
Operational data for interface HundredGigECtrlr0/1/0/10:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Enabled
    AINS Soak: Pending
      Total Duration: 0 hour(s) 30 minute(s)
      Remaining Duration: 0 hour(s) 30 minute(s) 0 second(s)
    Laser Squelch: Enabled

Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 0
            Uncorrected Codeword Count: 6

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: Line
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Example 2
The following example shows how to verify an internal loopback configured on the coherent DSP controller.
RP/0/RP0/CPU0:ios#show controllers coherentDSP  0/0/0/0
Fri Mar 13 22:00:20.951 UTC

Port                                            : CoherentDSP 0/0/0/0
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 0 LOF = 1 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 3 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00
POSTFEC BER                                     : 0.00E+00
Q-Factor                                        : 16.70 dB

Q-Margin                                        : 0.99dB

TTI :
        Remote hostname                         : ios
        Remote interface                        : CoherentDSP 0/0/0/0
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : Soft-Decision 27

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Configuring Loopback on OTN-XP Card
From R7.2.1 onwards, OTN-XP card supports loopback on the OTU2, OTU2e, OTU4, 10GE, and CoherentDSP controllers.
From R7.3.2 onwards, OTN-XP card supports loopback on the 100GE and 400GE controllers.
From R7.5.2 onwards, OTN-XP card supports loopback on the 16G FC and 32G FC controllers.
The CoherentDSP controller supports both line and internal.
To configure the loopback on the controllers, use the following commands:
configure
controller controller type Rack/Slot/Instance/Port/Lane number
sec-admin-state maintenance
loopback [ line | internal ]
commit
The range of Lane number is 1–4.
Example 1
The following example shows how an internal loopback is configured on the 10GE controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller tenGigECtrlr 0/0/0/5/2
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit 
The following example shows how to verify an internal loopback configured on the 10GE controller.
RP/0/RP0/CPU0:ios#show controllers tenGigECtrlr 0/0/0/5/2
Thu Apr 23 10:47:48.020 UTC
Operational data for interface TenGigECtrlr0/0/0/5/2:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Enabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 10Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: Internal
    Inter-packet gap: standard (12)
    BER monitoring:
        Not supported
    Holdoff Time: 0ms
Example 2
The following example shows how a line loopback is configured on the OTU2e controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller otu2e 0/0/0/11/3 
RP/0/RP0/CPU0:ios(config-otu2e)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-otu2e)#loopback line
RP/0/RP0/CPU0:ios(config-otu2e)#commit
Thu Apr 23 10:55:19.319 UTC
RP/0/RP0/CPU0:ios(config-otu2e)#end
The following example shows how to verify a line loopback configured on the OTU2e controller.
RP/0/RP0/CPU0:ios#show controllers otu2e 0/0/0/11/3 
Thu Apr 23 10:55:28.014 UTC

Port                                            : OTU2E 0/0/0/11/3
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Line
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 10.0Gb/s

Alarm Information:
LOS = 0 LOF = 1 LOM = 0
OOF = 1 OOM = 1 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 

TTI :
        Remote hostname                         : ios
        Remote interface                        : OTU2E 0/0/0/11/3
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : STANDARD

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Example 3
The following example shows how an internal loopback is configured on the OTU2 controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller otu2 0/0/0/5/1
RP/0/RP0/CPU0:ios(config-otu2)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-otu2)#loopback internal
RP/0/RP0/CPU0:ios(config-otu2)#commit
Thu Apr 23 11:01:00.562 UTC
RP/0/RP0/CPU0:ios(config-otu2)#end
The following example shows how to verify an internal loopback configured on the OTU2 controller.
RP/0/RP0/CPU0:ios#show controllers otU2 0/0/0/5/1
Thu Apr 23 11:01:04.126 UTC

Port                                            : OTU2 0/0/0/5/1
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 10.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 

TTI :
        Remote hostname                         : SM-TRC SAPI-SECSM-TRC DA
        Remote IP addr                          : 83.80.69.67

FEC mode                                        : STANDARD

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Example 4
The following example shows how an internal loopback is configured on the OTU4 controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller otu4 0/0/0/0
RP/0/RP0/CPU0:ios(config-otu4)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-otu4)#loopback internal 
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Apr 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how to verify an internal loopback configured on the OTU4 controller.
RP/0/RP0/CPU0:ios#show controllers otu4 0/0/0/0
Thu Apr 23 11:05:30.281 UTC

Port                                            : OTU4 0/0/0/0
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 100.0Gb/s

Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     
Detected Alarms                                 : None 

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 

TTI :
        Remote hostname                         : ios
        Remote interface                        : OTU4 0/0/0/0
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : STANDARD

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Example 5
The following example shows how an internal loopback is configured on the 16G FC controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller SixteenGigFibreChanCtrlr 0/2/0/1/1
RP/0/RP0/CPU0:ios(config-SixteenGigFibreChanCtrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-SixteenGigFibreChanCtrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-SixteenGigFibreChanCtrlr)#commit
Thu Apr 11 10:05:21.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how to verify the internal loopback configured on the 16G FC controller:
RP/0/RP0/CPU0:ios#show controller SixteenGigFibreChanCtrlr 0/1/0/0/2

Sat Apr  9 22:50:38.930 UTC

Operational data for Fibre Channel controller SixteenGigFibreChanCtrlr0/1/0/0/2

State:
 Admin State           : Up
 Operational state     : Up
 LED state             : Green On
 Secondary admin state : Maintenance
 AINS Soak             : None
     Total Duration    : 0 hour(s) 0 minute(s)
     Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
 Laser Squelch         : Disabled

Performance Monitoring is enabled

Operational values:
 Speed                    : 16 Gbps
 Loopback                 : Internal
 BER monitoring:
     Not supported
 Hold-off Time            : 0 ms
 Forward Error Correction : Not Configured
RP/0/RP0/CPU0:ios#
Example 6
The following example shows how an internal loopback is configured on the 32G FC controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller ThirtyTwoGigFibreChanCtrlr 0/1/0/6/4
RP/0/RP0/CPU0:ios(config-ThirtyTwoGigFibreChanCtrlr)#loopback internal

RP/0/RP0/CPU0:ios(config-ThirtyTwoGigFibreChanCtrlr)#commit

Sat Apr  9 22:50:11.666 UTC
RP/0/RP0/CPU0:ios(config-ThirtyTwoGigFibreChanCtrlr)#end
The following example shows how to verify the internal loopback configured on the 32G FC controller:
RP/0/RP0/CPU0:ios#show controller ThirtyTwoGigFibreChanCtrlr 0/1/0/6/4

Sat Apr  9 22:50:39.082 UTC

Operational data for Fibre Channel controller ThirtyTwoGigFibreChanCtrlr0/1/0/6/4

State:
 Admin State           : Up
 Operational state     : Up
 LED state             : Green On
 Secondary admin state : Maintenance
 AINS Soak             : None
     Total Duration    : 0 hour(s) 0 minute(s)
     Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
 Laser Squelch         : Disabled

Performance Monitoring is enabled

Operational values:
 Speed                    : 32 Gbps
 Loopback                 : Internal
 BER monitoring:
     Not supported
 Hold-off Time            : 0 ms
 Forward Error Correction : Standard(Reed Solomon)
RP/0/RP0/CPU0:ios#
Example: Loopback Configuration in 4X100G MXP on 100GE Controller
The following example shows how the client internal loopback is configured on the 100GE controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/2/0/1 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the client line loopback is configured on the 100GE controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller HundredGigECtrlr 0/2/0/1 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback line    
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the trunk internal is configured on the coherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/11
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback internal 
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the trunk line is configured on the coherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/11 
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback line    
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end 
Example: Loopback Configuration in 400G-TXP on 400GE Controller
The following example shows how the client internal loopback is configured on the 400GE controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller FourHundredGigECtrlr 0/2/0/10 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the client line loopback is configured on the 100GE controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller FourHundredGigECtrlr 0/2/0/10 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback line    
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the trunk internal is configured on the coherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/10
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback internal 
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end
The following example shows how the trunk line is configured on the coherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/10 
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback line    
RP/0/RP0/CPU0:ios(config-otu4)#commit
Thu Sep 23 11:05:22.429 UTC
RP/0/RP0/CPU0:ios(config-otu4)#end 
Configure Loopback in Inverse Muxponder Configured on the OTN-XP Card
You can configure loopback on the coherentDSP controllers in the inverse muxponder configuration.

Note
You must configure loopback on both trunk ports 12 and 13, otherwise traffic goes down.
The following example shows how loopback is configured on both the trunk ports:
RP/0/RP0/CPU0:ios#configure
Thu Sep 30 14:16:04.678 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/12 
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback internal 
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Thu Sep 30 14:16:19.594 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#controller coherentDSP 0/2/0/13   
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback internal 
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Thu Sep 30 14:16:32.390 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#
The following examples shows how to verify loopback configured on the OTN-XP card in the inverse muxponder configuration:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/2/0/12 
Thu Sep 30 14:17:04.411 UTC

Port                                            : CoherentDSP 0/2/0/12
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 2 LOF = 0 LOM = 0
OOF = 1 OOM = 0 AIS = 1
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 1
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 2.46E-08 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 14.60 dB 

Q-Margin                                        : 8.30dB 

TTI :
        Remote hostname                         : ios
        Remote interface                        : CoherentDSP 0/2/0/12
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 1, 2, 
        Rx GID                                  : 1
        RX IID                                  : 1, 2, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_2_0_13 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds


RP/0/RP0/CPU0:ios#sh controllers coherentDSP 0/2/0/13 
Thu Sep 30 14:17:08.140 UTC

Port                                            : CoherentDSP 0/2/0/13
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 1
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 15.70 dB 

Q-Margin                                        : 9.50dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 3, 4, 
        Rx GID                                  : 1
        RX IID                                  : 3, 4, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_2_0_12 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Configuring Loopback on 2-QDD-C Card
From R7.3.1 onwards, 2-QDD-C card supports loopback on the 100 and 400GE controllers.

Note
On applying client-side loopbacks, traffic is looped and does not continue in the 2-QDD-C card. QSFP squelching happens on applying internal loopback.
To configure the loopback on the controllers, use the following commands.
configure
controller controllertype Rack/Slot/Instance/Port/Lanenumber
sec-admin-state maintenance
loopback [ line | internal ]
commit
Example
The following example shows how an internal loopback is configured on a 100GE controller.
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller hundredGigECtrlr 0/0/0/5
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit 
The following example shows how to verify the internal loopback configured on a 100GE controller.
RP/0/RP0/CPU0:ios#show controllers hundredGigECtrlr 0/0/0/5
Thu Apr 23 10:47:48.020 UTC
Operational data for interface hundredGigECtrlr0/0/0/5:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Enabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled

Phy:
    Media type: Not known

Autonegotiation disabled.

Operational values:
    Speed: 10Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: Internal
    Inter-packet gap: standard (12)
    BER monitoring:
        Not supported
    Holdoff Time: 0ms
Example
From R7.5.2 onwards, Loopback is supported for the OTUCn-REGEN mode on the coherent DSP controller.
The following example shows how to configure an internal loopback on a coherent DSP controller.
Sun Dec 26 14:34:02.733 UTC
RP/0/RP0/CPU0:ios(config)#controller CoherentDSP 0/3/0/12
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Sun Dec 26 14:34:03.437 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#end
The following example shows how to verify internal loopback configured on a coherent DSP controller.
RP/0/RP0/CPU0:ios#show controller CoherentDSP 0/3/0/12

Sun Dec 26 14:34:28.391 UTC

Port : CoherentDSP 0/3/0/12
Controller State : Up
Inherited Secondary State : Normal
Configured Secondary State : Maintenance
Derived State : Maintenance
Loopback mode : Line
BER Thresholds : SF = 1.0E-5 SD = 1.0E-7
Performance Monitoring : Enable
Bandwidth : 200.0Gb/s

Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 1 OOM = 0 AIS = 1
IAE = 0 BIAE = 0 SF_BER = 0
SD_BER = 0 BDI = 5 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0 FLEXO_GIDM = 0
FLEXO-MM = 0 FLEXO-LOM = 0 FLEXO-RDI = 0
FLEXO-LOF = 0
Detected Alarms : None

Bit Error Rate Information
PREFEC BER : 3.12E-07
POSTFEC BER : 0.00E+00
Q-Factor : 14.00 dB

Q-Margin : 6.40dB

TTI :
Remote hostname : ios
Remote interface : CoherentDSP 0/2/0/13
Remote IP addr : 0.0.0.0

FEC mode : O_FEC

Flexo-Mode : Enable
Flexo Details:
Tx GID : 1
TX IID : 1, 2,
Rx GID : 1
RX IID : 1, 2,

AINS Soak : None
AINS Timer : 0h, 0m
AINS remaining time : 0 seconds
Example 1
Configuring Loopback on the QXP Card
The following example shows how to configure internal loopback on a coherent DSP controller.
RP/0/RP0/CPU0:ios#configure
Fri Jul 8 10:42:51.329 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/0
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback internal
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Fri Jul 8 10:43:48.644 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#end
The following example shows how to verify the internal loopback configured on a coherent DSP controller.
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/0
Fri Jul 8 10:45:53.820 UTC
Port : CoherentDSP 0/0/0/0
Controller State : Down
Inherited Secondary State : Normal
Configured Secondary State : Maintenance
Derived State : Maintenance
Loopback mode : Internal
BER Thresholds : SF = 1.0E-5 SD = 1.0E-7
Performance Monitoring : Enable
Bandwidth : 400.0Gb/s
Alarm Information:
LOS = 2 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0 SF_BER = 0
SD_BER = 0 BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0 FLEXO_GIDM = 0
FLEXO-MM = 0 FLEXO-LOM = 0 FLEXO-RDI = 0
FLEXO-LOF = 0
Detected Alarms : LOS
Bit Error Rate Information
PREFEC BER : 5.00E-01
POSTFEC BER : 0.00E+00
Q-Factor : 0.00 dB
Q-Margin : 0.00dB
OTU TTI Received
FEC mode : C_FEC
Flexo-Mode : Enable
Flexo Details:
Tx GID : 0
Rx GID : 0
AINS Soak : None
AINS Timer : 0h, 0m
AINS remaining time : 0 seconds
Example 2
The following example shows how to configure line loopback on a coherent DSP controller.
RP/0/RP0/CPU0:ios#configure
Fri Jul 8 10:48:48.577 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/0
RP/0/RP0/CPU0:ios(config-CoDSP)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-CoDSP)#loopback line
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Fri Jul 8 10:49:26.809 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#end
The following example shows how to verify the line loopback configured on a coherent DSP controller.
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/0
Fri Jul 8 10:49:44.073 UTC
Port : CoherentDSP 0/0/0/0
Controller State : Down
Inherited Secondary State : Normal
Configured Secondary State : Maintenance
Derived State : Maintenance
Loopback mode : Line
BER Thresholds : SF = 1.0E-5 SD = 1.0E-7
Performance Monitoring : Enable
Bandwidth : 400.0Gb/s
Alarm Information:
LOS = 2 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0 SF_BER = 0
SD_BER = 0 BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0 FLEXO_GIDM = 0
FLEXO-MM = 0 FLEXO-LOM = 0 FLEXO-RDI = 0
FLEXO-LOF = 0
Detected Alarms : LOS
Bit Error Rate Information
PREFEC BER : 5.00E-01
POSTFEC BER : 0.00E+00
Q-Factor : 0.00 dB
Q-Margin : 0.00dB
OTU TTI Received
FEC mode : C_FEC
Flexo-Mode : Enable
Flexo Details:
Tx GID : 0
Rx GID : 0
AINS Soak : None
AINS Timer : 0h, 0m
AINS remaining time : 0 seconds
Example 3
The following example shows how to configure internal loopback on the 400GE controller.
RP/0/RP0/CPU0:ios#configure
Fri Jul 8 11:19:26.286 UTC
RP/0/RP0/CPU0:ios(config)#controller FourHundredGigECtrlr 0/0/0/3
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit
Fri Jul 8 11:19:47.496 UTC
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#end
The following example shows how to verify the internal loopback configured on the 400GE controller.
RP/0/RP0/CPU0:ios#show controllers FourHundredGigECtrlr 0/0/0/3
Fri Jul 8 11:19:59.597 UTC
Operational data for interface FourHundredGigECtrlr0/0/0/3:
State:
Administrative state: enabled
Operational state: Down (Reason: State undefined)
LED state: Red On
Maintenance: Enabled
AINS Soak: None
Total Duration: 0 hour(s) 0 minute(s)
Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
Laser Squelch: Disabled
Insert Idle Ingress: Disabled
Insert Idle Egress: Disabled
Phy:
Media type: Not known
Alarms:
Current:
Loss of Signal
Statistics:
FEC:
Corrected Codeword Count: 702710
Uncorrected Codeword Count: 1147
Autonegotiation disabled.
Operational values:
Speed: 400Gbps
Duplex: Full Duplex
Flowcontrol: None
Loopback: Internal
BER monitoring:
Not supported
Forward error correction: Standard (Reed-Solomon)
Holdoff Time: 0ms
Example 4
The following example shows how to configure line loopback on the 4X100GE MXP.
RP/0/RP0/CPU0:ios(config)#controller hundredGigECtrlr 0/3/0/1/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback line 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit 
The following example shows how to verify the line loopback configured on the 4X100GE MXP.
RP/0/RP0/CPU0:ios#sh controllers hundredGigECtrlr 0/3/0/1/1
Fri Jul 22 10:34:39.730 UTC
Operational data for interface HundredGigECtrlr0/3/0/1/1:

State:
    Administrative state: enabled
    Operational state: Up
    LED state: Green On
    Maintenance: Enabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled
    Insert Idle Ingress: Disabled
    Insert Idle Egress: Disabled

Phy:
    Media type: Not known
    Statistics:
        FEC:
            Corrected Codeword Count: 6110368                  Valid: True       Start time: 13:10:41 Thu Jul 21 2022
            Uncorrected Codeword Count: 2771                   Valid: True       Start time: 13:10:41 Thu Jul 21 2022
        PCS:
            Total BIP errors: 63700992                         Valid: True       Start time: 13:10:41 Thu Jul 21 2022
            Total frame errors: 0                              Valid: False      Start time: 13:10:41 Thu Jul 21 2022
            Total Bad SH: 0                                    Valid: False      Start time: 13:10:41 Thu Jul 21 2022

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: Line
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Example 5
The following example shows how to configure internal loopback on the 4X100GE MXP.
RP/0/RP0/CPU0:ios#conf
RP/0/RP0/CPU0:ios(config)#controller hundredGigECtrlr 0/3/0/7/1
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#sec-admin-state maintenance 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#loopback internal 
RP/0/RP0/CPU0:ios(config-eth-ctrlr)#commit 
The following example shows how to verify the internal loopback configured on the 4X100GE MXP.
RP/0/RP0/CPU0:ios#show controller HundredGigECtrlr 0/3/0/7/1
Fri Jul 22 10:40:34.928 UTC

Operational data for interface HundredGigECtrlr0/3/0/7/1:

State:
    Administrative state: enabled
    Operational state: Down (Reason: State undefined)
    LED state: Red On
    Maintenance: Enabled
    AINS Soak: None
      Total Duration: 0 hour(s) 0 minute(s)
      Remaining Duration: 0 hour(s) 0 minute(s) 0 second(s)
    Laser Squelch: Disabled
    Insert Idle Ingress: Disabled
    Insert Idle Egress: Disabled

Phy:
    Media type: Not known
    Alarms:
        Current:
            Loss of Signal
    Statistics:
        FEC:
            Corrected Codeword Count: 31426046
            Uncorrected Codeword Count: 2187

Autonegotiation disabled.

Operational values:
    Speed: 100Gbps
    Duplex: Full Duplex
    Flowcontrol: None
    Loopback: Internal
    BER monitoring:
        Not supported
    Forward error correction: Standard (Reed-Solomon)
    Holdoff Time: 0ms
Restore Factory Settings

Note
Perform this operation only on the console port.
You can restore the factory settings on the NCS 1004. The entire system configuration, including usernames, passwords, and IP addresses, is removed. You can perform this operation only through the console port and not on the management interface. To restore NCS 1004 to factory settings, use the commit replace command. After the commit replace operation completes, you must perform the IOS XR reload operation.
The commit best-effort command merges the target configuration with the running configuration and commits only valid changes (best effort). Some configuration changes might fail due to semantic errors.
Example
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#commit replace
Tue Sep 24 09:36:59.430 UTC

This commit will replace or remove the entire running configuration. This
operation can be service affecting.
Do you wish to proceed? [no]: yes
RP/0/RP0/CPU0:ios(config)#exit
RP/0/RP0/CPU0:ios#reload
Tue Sep 24 09:38:12.881 UTC

Standby card not present or not Ready for failover. Proceed? [confirm]

Preparing system for backup. This may take a few minutes especially for large configurations.
        Status report: node0_RP0_CPU0: BACKUP INPROGRESS 

        Status report: node0_RP0_CPU0: BACKUP HAS COMPLETED SUCCESSFULLY 
[Done]

Proceed with reload?  [confirm]
Reloading node  0/RP0/CPU0

RL: Reboot initiated with code 1, cause User initiated graceful reload reboot_timeout 30 shutdown delay 0
RL: Shutdown initiated
Query the node to be reloaded 
 NODE_IP of noded to be reloaded 192.0.0.4
sending stop hb
Cause: User initiated graceful reload
VM IP addr sent for reload 192.0.0.4

Received ack from sdrmgr for reload request.Returncode:0
successful disconnection from service 
wd_disconnect_cb 548 CMP-WD disconnected successfully
Invmgr successful disconnection from service

RP/0/RP0/CPU0:ios#
Disconnecting from 'default-sdr--1' console. Continue(Y/N)?


Connecting to 'default-sdr--1' console
ÿûÿûÿûÿýbootlogd: ioctl(/dev/pts/2, TIOCCONS): Device or resource busy
/sbin/restorecon:  lstat(/etc/adjtime) failed:  No such file or directory
Configuring network interfaces... done.
Starting system message bus: dbus.
Starting OpenBSD Secure Shell server: sshd
sshd start/running, process 1739
Starting rpcbind daemon...done.
Starting random number generator daemonUnable to open file: /dev/tpm0
.
Starting system log daemon...0
Starting kernel log daemon...0
tftpd-hpa disabled in /etc/default/tftpd-hpa
Starting internet superserver: xinetd.
net.ipv4.ip_forward = 1
Libvirt not initialized for container instance
Starting crond: OK
SIOCADDRT: File exists

DBG_MSG: platform type is 0
[*] ima_policy have loaded, or IMA policy file does not exist
Start serial incoming on , Clearing ..
RP/0/RP0/CPU0:Sep 24 09:38:44.284 UTC: fpd-serv[256]: %PKT_INFRA-FM-3-FAULT_MAJOR : ALARM_MAJOR :FPD-NEED-UPGRADE :DECLARE :0/PM0:  

This (D)RP Node is not ready or active for login /configuration
.......
........
........

ios con0/RP0/CPU0 is now available

Press RETURN to get started.

!!!!!!!!!!!!!!!!!!!! NO root-system username is configured. Need to configure root-system username. !!!!!!!!!!!!!!!!!!!!
Headless Mode
During process restarts, CPU reload, or removal of CPU, the NCS 1004 operates in headless mode for up to 72 hours. During this time, traffic is not impacted, although the control plane is not up and running. Fault propagation continues to operate for failures on client and trunk ports. However, you cannot provision anything nor view operational data with a non-functional CPU. Performance monitoring data based on 15 minutes and 24 hour intervals is not supported with a non-functional CPU.
Trail Trace Identifier
The Trail trace identifier (TTI) feature helps you to identify the signal from the source to the destination within the network. You can configure the TTI sent or expected string only in ASCII string format. When the expected TTI string does not match the received TTI trace string, the controller goes down and the OTUK-TIM alarm is raised. To configure TTI on the coherent DSP controllers, use the following commands:
configure
controller coherentDSP R/S/I/P tti {sent | expected} ascii tti-string
commit

Note
The tti-string can have a maximum of 64 characters.
The following sample displays how to configure TTI on a coherent DSP controller with the sent and expected strings set to the same ASCII string. The state of the controller is up.
RP/0/RP0/CPU0:ios#config
Fri Mar 15 08:03:02.094 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/1/0/1 tti sent ascii 1234
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/1/0/1 tti expected ascii 1234
RP/0/RP0/CPU0:ios(config)#commit
Fri Mar 15 08:03:49.725 UTC
RP/0/RP0/CPU0:ios(config)#exit
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/1/0/1
Fri Mar 15 08:04:06.290 UTC

Port                                            : CoherentDSP 0/1/0/1
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 1 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 7.7E-03
POSTFEC BER                                     : 0.0E+00

OTU TTI Sent
     OPERATOR SPECIFIC  ASCII                   : 1234
                                                :
     OPERATOR SPECIFIC HEX                      : 31323334000000000000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Received
     OPERATOR SPECIFIC  ASCII                   : 1234
                                                :
     OPERATOR SPECIFIC HEX                      : 31323334000000000000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Expected
     OPERATOR SPECIFIC  ASCII                   : 1234
                                                :
     OPERATOR SPECIFIC HEX                      : 31323334000000000000000000000000
                                                : 00000000000000000000000000000000
FEC mode                                        : Soft-Decision 27

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
The following example shows how to configure TTI on a coherent DSP controller with the sent and expected strings set to different ASCII strings. The state of the controller goes down and the TIM alarm is raised.
RP/0/RP0/CPU0:ios#config
Fri Mar 15 08:54:29.780 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/1/0/1 tti sent ascii 1234
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/1/0/1 tti expected ascii 5678
RP/0/RP0/CPU0:ios(config)#commit
Fri Mar 15 08:56:12.293 UTC
RP/0/RP0/CPU0:ios(config)#exit
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/1/0/1
Fri Mar 15 08:56:33.910 UTC

Port                                            : CoherentDSP 0/1/0/1
Controller State                                : Down
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable

Alarm Information:
LOS = 1 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 3 TIM = 1
FECMISMATCH = 0 FEC-UNC = 0
Detected Alarms                                 : BDI TIM

Bit Error Rate Information
PREFEC  BER                                     : 8.2E-03
POSTFEC BER                                     : 0.0E+00

OTU TTI Sent
     OPERATOR SPECIFIC  ASCII                   : 1234
                                                :
     OPERATOR SPECIFIC HEX                      : 31323334000000000000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Received
     OPERATOR SPECIFIC  ASCII                   : 1234
                                                :
     OPERATOR SPECIFIC HEX                      : 31323334000000000000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Expected
     OPERATOR SPECIFIC  ASCII                   : 5678
                                                :
     OPERATOR SPECIFIC HEX                      : 35363738000000000000000000000000
                                                : 00000000000000000000000000000000
FEC mode                                        : Soft-Decision 27

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Configure TTI on OTN-XP Card
Configure TTI on OTN-XP Card
You can configure the TTI sent or expected string in the full ASCII format, or Source Access Point Identifier (SAPI)/Destination Access Point Identifier (DAPI) format on OTU, ODU, ODU-flex, ODUCn, and coherentDSP controllers for the OTN-XP card.
From R7.3.1 onwards, coherentDSP controller supports only the full ASCII string format.
From R7.3.2 onwards, coherentDSP controller supports SAPI/DAPI string format in addition to the full ASCII string format.
You can configure TTI for the following muxponder modes:
10G-Grey-MXP
4x100G-MXP-400G-TXP
The following table lists the ASCII format that is supported on each muxponder mode for TTI:
Table 7. ASCII Format Supported on Each Muxponder Mode
Muxponder Mode
ASCII with Character String
Controller
10G Grey
Full ASCII
64-character
OTU2, OTU2E, OTU4, ODU4, ODU2E (10G mapper)
SAPI ASCII
15-character
OTU2, OTU2E, OTU4, ODU4, ODU2E (10G mapper)
DAPI ASCII
15-character
OTU2, OTU2E, OTU4, ODU4, ODU2E (10G mapper)
Operator-specific ASCII
32-character
OTU2, OTU2E, OTU4, ODU4, ODU2E (10G mapper)
4x100G-MXP-400G-TXP
Full ASCII
64-character
OTU4, coherentDSP, ODUC4, ODU4 (100G mapper), and ODU-FLEX (400G mapper)
SAPI ASCII
15-character
OTU4, coherentDSP, ODUC4, ODU4 (100G mapper), and ODU-FLEX (400G mapper)
DAPI ASCII
15-character
OTU4, coherentDSP, ODUC4, ODU4 (100G mapper), and ODU-FLEX (400G mapper)
Operator-specific ASCII
32-character
OTU4, coherentDSP, ODUC4, ODU4 (100G mapper), and ODU-FLEX (400G mapper)
To configure TTI, use the following commands:
configure
controller controller-type R/S/I/P tti {sent | expected} {ascii | sapi ascii | dapi ascii | operator-specific ascii } tti-string
commit

Note
We recommend that you configure TTI in the SAPI/DAPI ASCII format.
The following is a sample configuration on ODU4 controller:
RP/0/RP0/CPU0:ios#configure 
Thu Sep 30 17:19:11.804 UTC
Current Configuration Session  Line       User     Date                     Lock
00001000-00005c15-00000000     vty0       root     Thu Sep 30 11:50:12 2021 
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti sent sapi ascii cisco123
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti expect sapi ascii 123cisco
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti sent dapi ascii dapistring123
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti expected dapi ascii 123stringdapi
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti sent operator-specific ascii operation123
RP/0/RP0/CPU0:ios(config)#controller odU4 0/1/0/12/7 tti expected operator-specific ascii 123operator
RP/0/RP0/CPU0:ios(config)#commit 
Thu Sep 30 17:21:49.521 UTC
RP/0/RP0/CPU0:ios(config)#end
The following is a sample output of the TTI configuration on the ODU4 controller:
RP/0/RP0/CPU0:ios#show controllers odU4 0/1/0/12/7 
Thu Sep 30 17:22:30.658 UTC

Port                                            : ODU4 0/1/0/12/7
Controller State                                : Down
Inherited Secondary state                       : Normal
Configured Secondary state                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-6  SD = 1.0E-7

Performance Monitoring                          : Enable 

Path Monitoring Mode                            : Operational 
PM TIM-CA state                                 : Disable 

Alarm Information:
AIS = 3 IAE = 0 BIAE = 0
SF_BER = 0      SD_BER = 0      BDI = 1
OCI = 0 LCK = 2 PTIM = 0
TIM = 1 CSF = 0 GFP LFD = 0
GFP LOCS = 0    GFP LOCCS = 0   GFP UPM = 0

Detected Alarms                                 : TIM 

ODU TTI Sent 
     SAPI  ASCII                                : c i s c o 1 2 3 
     SAPI  HEX                                  : 00636973636F31323300000000000000
     DAPI  ASCII                                : d a p i s t r i n g 1 2 3 
     DAPI  HEX                                  : 0064617069737472696E673132330000
     OPERATOR SPECIFIC ASCII                    : operation123
     OPERATOR SPECIFIC HEX                      : 6F7065726174696F6E3132330000000000000000000000000000000000000000
ODU TTI Received 

ODU TTI Expected 
     SAPI  ASCII                                : 1 2 3 c i s c o 
     SAPI  HEX                                  : 00313233636973636F00000000000000
     DAPI  ASCII                                : 1 2 3 s t r i n g d a p i 
     DAPI  HEX                                  : 00313233737472696E67646170690000
     OPERATOR SPECIFIC ASCII                    : 123operator
     OPERATOR SPECIFIC HEX                      : 3132336F70657261746F72000000000000000000000000000000000000000000
AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds

Private Line Emulation(PLE) supported           : No
You can configure TTI on OTUCn-REGEN mode on the OTN-XP Card.
The following sample displays how to configure TTI on a coherent DSP controller port 12 on the OTUCn-REGEN mode.
Mon Dec 27 12:03:53.642 UTC
RP/0/RP0/CPU0:ios(config)#controller CoherentDSP 0/3/0/12 tti sent ascii 1234cisco
RP/0/RP0/CPU0:ios(config)#commit
Mon Dec 27 12:03:54.333 UTC
RP/0/RP0/CPU0:ios(config)#end
Mon Dec 27 12:03:55.434 UTC
RP/0/RP0/CPU0:ios(config)#controller CoherentDSP 0/3/0/12 tti expected ascii cisco1234
RP/0/RP0/CPU0:ios(config)#commit
Mon Dec 27 12:03:56.137 UTC
RP/0/RP0/CPU0:ios(config)#end
The following sample verifies the TTI configuration on the inverse muxponder configured on the OTUCn-REGEN mode.
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/12
Tue May 24 17:49:14.301 UTC

Port                                            : CoherentDSP 0/0/0/12
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : In Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 400.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 1 TIM = 1
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 0
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 1.55E-04
POSTFEC BER                                     : 0.00E+00
Q-Factor                                        : 11.10 dB

Q-Margin                                        : 4.70dB

OTU TTI Sent
     FULL TTI ASCII                             : cisco123
                                                :
     FULL TTI HEX                               : 636973636F3132330000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Received
     FULL TTI ASCII                             : 123cisco
                                                :
     FULL TTI HEX                               : 313233636973636F0000000000000000
                                                : 00000000000000000000000000000000
OTU TTI Expected
     FULL TTI ASCII                             : 123cisco
                                                :
     FULL TTI HEX                               : 313233636973636F0000000000000000
                                                : 00000000000000000000000000000000
FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 1, 2, 3, 4,
        Rx GID                                  : 1
        RX IID                                  : 1, 2, 3, 4,

AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds


RP/0/RP0/CPU0:ios#
RP/0/RP0/CPU0:ios#show running-config controller coherentDSP 0/0/0/12
Tue May 24 17:49:21.749 UTC
controller CoherentDSP0/0/0/12
tti
  expected ascii 123cisco
  sent ascii cisco123
!
!
Configure TTI on Inverse Muxponder Configuration on the OTN-XP Card
The following sample displays how to configure TTI on a coherent DSP controller port 12 on the OTN-XP in inverse muxponder configuration mode.

Note
TTI configuration is not supported on the DSP controller port 13.
RP/0/RP0/CPU0:ios#configure
Thu Sep 30 14:18:13.288 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/2/0/12 
RP/0/RP0/CPU0:ios(config-CoDSP)#tti sent sapi ascii cisco
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
The following sample verifies the TTI configuration on the inverse muxponder configured on the OTN-XP Card.
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/2/0/12 
Thu Sep 30 14:19:05.367 UTC

Port                                            : CoherentDSP 0/2/0/12
Controller State                                : Up
Inherited Secondary State                       : Normal
Configured Secondary State                      : Maintenance
Derived State                                   : Maintenance
Loopback mode                                   : Internal
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 2 LOF = 0 LOM = 0
OOF = 1 OOM = 0 AIS = 1
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 1
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 4.11E-09 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 14.90 dB 

Q-Margin                                        : 8.60dB 

OTU TTI Sent 
     SAPI  ASCII                                : c i s c o 
     SAPI  HEX                                  : 00636973636F00000000000000000000
     DAPI  ASCII                                : 
     DAPI  HEX                                  : 
     OPERATOR SPECIFIC ASCII                    : 
     OPERATOR SPECIFIC HEX                      : CDCDCDCDED00DBBE2100000000000000050D9D29AD7F00007603BADC7698BADC
OTU TTI Received 
     SAPI  ASCII                                : c i s c o 
     SAPI  HEX                                  : 00636973636F00000000000000000000
FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 1, 2, 
        Rx GID                                  : 1
        RX IID                                  : 1, 2, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_2_0_13 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
Enable TIM CA on Path Monitoring Layer
You can enable Trace Identifier Mismatch (TIM) consequent action (CA) on the Path Monitoring (PM) layer using the pm-tim-ca command on mapper ODUs for Ethernet controller. The TTI transmit string in the SAPI/DAPI format is not configurable on ODUs that are transparent.
For example, the clients that are supported are ODU4, ODU2, and ODU2E, and lower-order ODUs such as ODU2 or ODU2E.
You can configure pm-tim-ca only on mapper ODUs such as ODU2E (10G mapper), ODU4 (100G mapper), and ODU-FLEX (400G mapper).
To configure pm-tim-ca on mapper ODU in the 4x100G-MXP-400G-TXP muxponder mode, use the following commands
configure
controller controller-type R/S/I/P
pm-tim-ca
commit
Chromatic Dispersion
You can configure chromatic dispersion on optics controllers. When you configure the maximum and minimum values for chromatic dispersion for any data rate, ensure the minimum difference between the configured values is equal to or greater than 1500 ps/nm.
The following table lists the default CD search range.
Data Rate
BPS
Card Support
Default CD Search Range
200G to 500G
BPS < = 3
1.2T, 1.2TL
-10,000 to 100,000 ps/nm
3 < BPS <= 4
1.2T, 1.2TL
-10,000 to 80,000 ps/nm
4 < BPS <=5
1.2T
-5,000 to 20,000 ps/nm
600G
BPS=5.2578125
1.2T
-2000 to 2,000 ps/nm
400G for 400G CFP2 DCO
BPS=4
OTN-XP
-24,000 to 24,000 ps/nm
400GE for ZRP
BPS=4
OTN-XP
For CFEC, -2,400 to 2,400 ps/nm
For OFEC, -13,000 to 13,000 ps/nm
200G to 400G
3 < BPS <= 6
2-QDD-C
-350000 to +350000 ps/nm
400GE for ZRP
BPS=4
QXP
For CFEC, -2,400 to 2,400 ps/nm
For OFEC, -160000 to 160000 ps/nm

Note
The cd-min and cd-max values must be set for BPS values that are greater than 4 in the 1.2T card.

Note
When the user provisions the cd-min and cd-max values that are outside the range through CLI, the provisioned values are accepted; however, only the actual values supported by the hardware are applied.
The following is a sample where chromatic dispersion is configured on the optics controller.
RP/0/RP0/CPU0:ios#configure
Mon Aug 19 19:31:42.115 UTC
RP/0/RP0/CPU0:ios(config)#controller  optics 0/1/0/1
RP/0/RP0/CPU0:ios(config-Optics)#cd-max 4000
RP/0/RP0/CPU0:ios(config-Optics)#cd-min -1000
RP/0/RP0/CPU0:ios(config-Optics)#commit
Mon Aug 19 19:35:24.697 UTC
RP/0/RP0/CPU0:ios(config-Optics)#exit
RP/0/RP0/CPU0:ios(config)#exit
RP/0/RP0/CPU0:ios#show run controller optics 0/1/0/*
Mon Aug 19 19:57:41.859 UTC
controller Optics0/1/0/0
 transmit-power -15
 dwdm-carrier 50GHz-grid itu-ch 55
 enh-sop-tol-mode 1
 cross-pol-gain-mode 10
 lbc-high-threshold 5
!
controller Optics0/1/0/1
 description trunk power UP
 cd-min -1000
 cd-max 4000
 enh-colorless-mode 2
 enh-sop-tol-mode 3
 nleq-comp-mode 4
 cross-pol-gain-mode 2
 cross-pol-weight-mode 3
 cpr-win-mode 3
 cpr-ext-win-mode 8
 rx-voa fixed-ratio 1200
 filter-roll-off-factor 0.035
!
controller Optics0/1/0/5
 soak-time 10
!
Transmit Power
From Release 7.3.1 onwards, you can configure transmit power on the CFP2 DCO optics for the OTN-XP card. The value ranges from -10 to +1 dBm.
From Release 7.3.2 onwards, you can configure transmit power on the QDD ZRP optics for the OTN-XP card. The following are the value ranges for OFEC and CFEC:
FEC Types
Transmit Power (dBm)
OFEC
-13 to -9
CFEC
-10 to -6
To configure transmit power on the CFP2 DCO optics for the OTN-XP card, use the following commands:
RP/0/RP0/CPU0:ios#configure
Mon Aug 19 19:31:42.115 UTC
RP/0/RP0/CPU0:ios(config)#controller optics 0/1/0/12
RP/0/RP0/CPU0:ios(config-Optics)#transmit-power -1.50
RP/0/RP0/CPU0:ios(config-Optics)#commit
Mon Aug 19 19:35:24.697 UTC
RP/0/RP0/CPU0:ios(config-Optics)#exit
RP/0/RP0/CPU0:ios(config)#exit
The following is a sample in which transmit power of -1.50 dBm is configured on the CFP2 DCO optics for the OTN-XP card.
RP/0/RP0/CPU0:ios(config-hwmod-mxp)#do show controllers optics 0/1/0/12
Mon Jan 18 19:05:26.009 UTC

Controller State: Down

Transport Admin State: In Service

Laser State: On

LED State: Green

Optics Status

Optics Type: CFP2 DWDM
DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
Wavelength=1552.524nm

Alarm Status:
-------------
Detected Alarms: None


LOS/LOL/Fault Status:

Alarm Statistics:

-------------
HIGH-RX-PWR = 0 LOW-RX-PWR = 0
HIGH-TX-PWR = 0 LOW-TX-PWR = 0
HIGH-LBC = 0 HIGH-DGD = 0
OOR-CD = 0 OSNR = 0
WVL-OOL = 0 MEA = 0
IMPROPER-REM = 0
TX-POWER-PROV-MISMATCH = 0
Laser Bias Current = 0.0 %
Actual TX Power = -1.47 dBm
RX Power = -0.86 dBm
RX Signal Power = 0.86 dBm
Frequency Offset = 0 MHz

Performance Monitoring: Enable

THRESHOLD VALUES
----------------

Parameter High Alarm Low Alarm High Warning Low Warning
------------------------ ---------- --------- ------------ -----------
Rx Power Threshold(dBm) 4.9 -12.0 0.0 0.0
Tx Power Threshold(dBm) 3.5 -10.1 0.0 0.0
LBC Threshold(mA) N/A N/A 0.00 0.00

LBC High Threshold = 98 %
Configured Tx Power = -1.50 dBm
Configured CD High Threshold = 180000 ps/nm
Configured CD lower Threshold = -180000 ps/nm
Configured OSNR lower Threshold = 0.00 dB
Configured DGD Higher Threshold = 180.00 ps
Baud Rate = 63.0999984741 GBd
Bits per Symbol = 4.0000000000 bits/symbol
Modulation Type: 16QAM
Chromatic Dispersion 0 ps/nm
Configured CD-MIN -26000 ps/nm CD-MAX 26000 ps/nm
Polarization Mode Dispersion = 0.0 ps
Second Order Polarization Mode Dispersion = 156.00 ps^2
Optical Signal to Noise Ratio = 35.80 dB
SNR = 10.50 dB
Polarization Dependent Loss = 0.00 dB
Polarization Change Rate = 0.00 rad/s
Differential Group Delay = 1.00 ps
Filter Roll Off Factor : 0.000
Rx VOA Fixed Ratio : 0.00 dB
Enhanced Colorless Mode : 0
Enhanced SOP Tolerance Mode : 0
Transmit Power on QDD ZRP Optics
To configure transmit power on the QDD ZRP optics for the OTN-XP card, use the following commands:
RP/0/RP0/CPU0:ios#configure
Mon Aug 19 19:31:42.115 UTC
RP/0/RP0/CPU0:ios(config)#controller optics 0/1/0/9
RP/0/RP0/CPU0:ios(config-Optics)#transmit-power -8
RP/0/RP0/CPU0:ios(config-Optics)#commit
Mon Aug 19 19:35:24.697 UTC
RP/0/RP0/CPU0:ios(config-Optics)#
The following is a sample in which transmit power of -8 dBm is configured on the QDD ZRP optics for the OTN-XP card:
RP/0/RP0/CPU0:ios#show controller optics 0/1/0/9
Wed Sep 15 00:36:24.383 UTC

 Controller State: Up 

 Transport Admin State: In Service 

 Laser State: On 

 LED State: Green 
 
 Optics Status 

         Optics Type:  QSFP-DD DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=49, Frequency=193.70THz,
         Wavelength=1547.715nm 

         Alarm Status:
         -------------
         Detected Alarms: None


         LOS/LOL/Fault Status:

         Alarm Statistics:
          
         -------------
         HIGH-RX-PWR = 0            LOW-RX-PWR = 1          
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1          
         HIGH-LBC = 0               HIGH-DGD = 0          
         OOR-CD = 0                 OSNR = 1          
         WVL-OOL = 0                MEA  = 0          
         IMPROPER-REM = 0          
         TX-POWER-PROV-MISMATCH = 0          
         Laser Bias Current = 0.0 %
         Actual TX Power = -8 dBm 
         RX Power = -7.31 dBm 
         RX Signal Power = -7.67 dBm 
         Frequency Offset = 81 MHz 
 Performance Monitoring: Enable 

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)          3.0      -23.5           0.0          0.0
         Tx Power Threshold(dBm)          0.0      -16.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 90 % 
         Configured Tx Power = -7.00 dBm 
         Configured CD High Threshold = 2400 ps/nm 
         Configured CD lower Threshold = -2400 ps/nm 
         Configured OSNR lower Threshold = 24.00 dB 
         Configured DGD Higher Threshold = 40.00 ps 
         Baud Rate =  59.8437500000 GBd
         Bits per Symbol = 4.0000000000  bits/symbol 
         Modulation Type: 16QAM 
         Chromatic Dispersion 0 ps/nm 
         Configured CD-MIN -2400 ps/nm  CD-MAX 2400 ps/nm 
         Polarization Mode Dispersion = 0.0 ps 
         Second Order Polarization Mode Dispersion = 29.00 ps^2 
         Optical Signal to Noise Ratio = 36.40 dB 
         SNR = 17.30 dB 
         Polarization Dependent Loss = 0.40 dB 
         Polarization Change Rate = 0.00 rad/s 
         Differential Group Delay = 3.00 ps 

 Transceiver Vendor Details
          
         Form Factor            : QSFP-DD
         Name                   : CISCO
         Part Number            : 10-3496-01
         Rev Number             : 11
         Serial Number          : 210153241
         PID                    : QDD-400G-ZRP-S
         VID                    : ES04
         Date Code(yy/mm/dd)    : 20/21/01
         Fiber Connector Type: LC 
         Otn Application Code: Not Set 
         Sonet Application Code: Not Set 
         Ethernet Compliance Code: Not set 
 Transceiver Temperature : 57 Celsius
 AINS Soak                : None 
 AINS Timer               : 0h, 0m
 AINS remaining time      : 0 seconds
Laser Bias Current High Threshold
You can configure the threshold of the laser bias current flowing on the phusical pluggable port on the trunk optics controller. The range is 0 to 100%
To configure the laser bias current threshold, use the following command:
configure
controller optics R/S/I/P
lbc-high-threshold lbc-value
commit
The following sample configures the high laser bias threshold on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#lbc-high-threshold 55
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the high rlaser bias threshold configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Differential Group Delay Threshold
You can configure the threshold value for the maximum acceptable differential group delay (DGD) on the trunk optics controllers. The DGD alarm is raised if DGD exceeds this value.
The range is 0–18000 (in the units of 0.01 ps).
To configure the maximum acceptable DGD, use the following command:
configure
controller optics R/S/I/P
dgd-high-threshold dgd-value
commit
The following sample configures the minimum acceptable DGD on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#dgd-high-threshold 30
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the maximum acceptable DGD configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Optical Signal to Noise Ratio
You can configure the minimum acceptable Optical Signal to Noise ratio (OSNR) value. The OSNR alarm is raised if OSNR goes below this value.
The range is 0–4000 (in units of 0.01db).
To configure the minimum acceptable OSNR, use the following command:
configure
controller optics R/S/I/P
osnr-low-threshold osnr-value
commit
The following sample configures the minimum acceptable OSNR on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#osnr-low-threshold 40
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the minimum acceptable OSNR configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Chromatic Dispersion Threshold
You can configure the minimum and maximum acceptable chromatic dispersion for the trunk optics controllers. The CD alarm is raised if the chromatic dispersion goes below the minimum or exceeds the maximum value.
The following is a sample of configuring the minimum and maximum chromatic dispersion threshold:
To configure the maximum nd minimum acceptable CD, use the following command:
configure
controller optics R/S/I/P
cd-high-threshold cd-high
cd-low-threshold cd-low
commit
The following sample configures the maximum and minimum acceptable CD on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#cd-high-threshold 2400
RP/0/RP0/CPU0:ios(config-Optics)#cd-low-threshold -2400
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the maximum and minimum acceptable CD configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Receive Power Threshold
You can configure the high and low threshold of the total optical signal power of the received signal on the trunk optics controller.
The range is –400 to 300 (in the units of 0.1 dBm).
To configure the high and low receive power threshold, use the following command:
configure
controller optics R/S/I/P
rx-high-threshold rx-high
rx-low-threshold rx-low
commit
The following sample configures the high receive power threshold on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#rx-high-threshold -20
RP/0/RP0/CPU0:ios(config-Optics)#rx-low-threshold -30
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the high receive power threshold configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Transmit Power Threshold
You can configure the high and low threshold of the total optical signal power of the transmitted signal on the trunk optics controller.
The range is –400 to 300 (in the units of 0.1 dBm).
To configure the high and low transmit power threshold, use the following command:
configure
controller optics R/S/I/P
tx-high-threshold tx-high
tx-low-threshold tx-low
commit
The following sample configures the high transmit power threshold on the controller optics:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller optics 0/0/0/12
RP/0/RP0/CPU0:ios(config-Optics)#tx-high-threshold 40
RP/0/RP0/CPU0:ios(config-Optics)#tx-low-threshold 20
RP/0/RP0/CPU0:ios(config-Optics)#commit
The following sample shows the high transmit power threshold configured on the controller optics:
RP/0/RP0/CPU0:ios#show controllers optics 0/0/0/12
Fri Nov 12 10:58:50.595 UTC

Controller State: Up

Transport Admin State: In Service

Laser State: On

LED State: Yellow

Optics Status

         Optics Type:  CFP2 DWDM
         DWDM carrier Info: C BAND, MSA ITU Channel=61, Frequency=193.10THz,
         Wavelength=1552.524nm

         Alarm Status:
         -------------
         Detected Alarms:
                 HIGH-RX-PWR   LOW-TX-PWR
                 HIGH-DGD

         LOS/LOL/Fault Status:

         Alarm Statistics:

         -------------
         HIGH-RX-PWR = 1            LOW-RX-PWR = 0
         HIGH-TX-PWR = 0            LOW-TX-PWR = 1
         HIGH-LBC = 0               HIGH-DGD = 6
         OOR-CD = 0                 OSNR = 0
         WVL-OOL = 0                MEA  = 0
         IMPROPER-REM = 1
         TX-POWER-PROV-MISMATCH = 0
         Laser Bias Current = 0.0 %
         Actual TX Power = 0.97 dBm
         RX Power = -0.53 dBm
         RX Signal Power = -1.20 dBm
         Frequency Offset = 63 MHz

         Performance Monitoring: Enable

         THRESHOLD VALUES
         ----------------

         Parameter                 High Alarm  Low Alarm  High Warning  Low Warning
         ------------------------  ----------  ---------  ------------  -----------
         Rx Power Threshold(dBm)         -2.0       -3.0           0.0          0.0
         Tx Power Threshold(dBm)          4.0        2.0           0.0          0.0
         LBC Threshold(mA)                N/A        N/A          0.00         0.00

         LBC High Threshold = 55 %
         Configured Tx Power = 1.00 dBm
         Configured CD High Threshold = 2400 ps/nm
         Configured CD lower Threshold = -2400 ps/nm
         Configured OSNR lower Threshold = 0.40 dB
         Configured DGD Higher Threshold = 0.30 ps
         Baud Rate =  63.1394679230 GBd
         Bits per Symbol = 3.0000000000  bits/symbol
         Modulation Type: 8QAM
         Chromatic Dispersion 0 ps/nm
         Configured CD-MIN -48000 ps/nm  CD-MAX 48000 ps/nm
         Polarization Mode Dispersion = 0.0 ps
         Second Order Polarization Mode Dispersion = 29.00 ps^2
         Optical Signal to Noise Ratio = 36.10 dB
         SNR = 17.50 dB
         Polarization Dependent Loss = 0.50 dB
         Polarization Change Rate = 0.00 rad/s
         Differential Group Delay = 1.00 ps

Transceiver Vendor Details

         Form Factor            : CFP2
         Name                   : CISCO-ACACIA
         Part Number            : 10-3500-01
         Rev Number             : 01
         Serial Number          : ACA24480037
         PID                    : ONS-CFP2D-400G-C
         VID                    : VES1
         Date Code(yy/mm/dd)    : 20/11/10
         Fiber Connector Type: LC
         Otn Application Code: Not Set
         Sonet Application Code: Not Set
         Ethernet Compliance Code: Not set

Transceiver Temperature : 46 Celsius



AINS Soak                : None
AINS Timer               : 0h, 0m
AINS remaining time      : 0 seconds
Frequency
You can configure the frequency on trunk ports of the line card.
The following table lists the frequency range with grid spacing supported on the line card:
Line Card
Frequency Range (THz)
Default Frequency (THz)
Grid Spacing
1.2T
191.25 to 196.1
193.1
50GHz and 100MHz
1.2TL
1
186.1 to 190.85
188.5
100MHz
OTN-XP CFP2 trunk
191.275 to 196.125
193.1
50GHz and 100MHz
OTN-XP QDD ZRP
191.275 to 196.125
193.70
6.25GHz, 50GHz, and 100MHz
2-QDD-C
191.15 to 196.1
193.1
50GHz and 100MHz
1 Only non-ITU channels are supported
To configure the wavelength, use the following commands:
configure
controller optics Rack/Slot/Instance/Port
dwdm-carrier {100MHz-grid frequency frequency} | {50GHz-grid [frequency frequency}
commit
Pseudo Random Binary Sequence
Table 8. Feature History
Feature Name
Release Information
Feature Description
PRBS (Pseudo Random Binary Sequence) on ODU4
Cisco IOS XR Release 7.3.1
1.2T card supports PRBS on the ODU4 controller. This feature allows you to test whether the traffic is error free during link bring up without depending on the peer port.
The Pseudo Random Binary Sequence (PRBS) feature allows you to perform data integrity checks between the NCS1004 trunk links without enabling the actual client traffic.
You need to enable PRBS feature on both the transmitting and receiving NCS 1004 trunk ports. The transmitting trunk port generates a bit pattern and sends it to the peer NCS 1004 device. The device detects if the sent bit pattern is received.
From R7.3.1 onwards, you can configure PRBS on the NCS 1004 trunk port for the 2-QDD-C card.
You can configure NCS 1004 trunk port in any one of the following modes for PRBS on the 1.2T card:
Source mode — The NCS 1004 at trunk port generates PRBS signal on the line continuously as per the configured PRBS pattern.
Sink mode — The NCS 1004 at trunk port gets locked to the ingress signal according to the configured pattern, analyzes and reports the errors.
Source-Sink mode — The NCS 1004 at trunk port acts as both the PRBS transmitter and receiver, that is, it generates PRBS signal as per the configured pattern, and also gets locked to the ingress signal with the same pattern, and reports the errors.

Note
From R7.3.1 onwards, the 1.2T card supports PRBS on ODU4.
NCS 1004 trunk port supports the following PRBS patterns:
PRBS31 — Sequence length is from 2^31 -1 bits.
PRBS23 — Sequence length is from 2^23 -1 bits.
PRBS15 — Sequence length is from 2^15 -1 bits.
PRBS7 —Sequence length is from 2^7 -1 bits.
Limitations of PRBS
There are following limitations with the PRBS feature:
There is no SNMP support to fetch the PRBS status or Performance Monitoring (PM).
TTI functionality is not supported with PRBS.
Loopback and PRBS configurations cannot coexist on a coherentDSP controller. Loopback configuration will be rejected if PRBS is already configured.
PRBS on ODU4 is supported only when the slice is provisioned in OTN client mode.
PRBS on OTN-XP Card
From R7.2.1 onwards, the OTN-XP card supports PRBS on the mapper optical data unit (ODU2e).

Note
ODU2e PRBS is not supported for OTU2E client rates.
NCS 1004 with the OTN-XP card, supports the following PRBS mode:
Source mode — The NCS 1004 at trunk port generates PRBS signal on the line continuously as per the configured PRBS pattern.
Sink mode — The NCS 1004 at trunk port gets locked to the ingress signal according to the configured pattern, analyzes and reports the errors.
Source-Sink mode — The NCS 1004 at trunk port acts as both the PRBS transmitter and receiver, that is, it generates PRBS signal as per the configured pattern, and also gets locked to the ingress signal with the same pattern, and reports the errors.
invertedpn31 —Inverted pattern. Sequence length is from 2^31 -1 bits.
NCS 1004 trunk port supports the following PRBS patterns:
PRBS31 — Sequence length is from 2^31 -1 bits.
PRBS23 — Sequence length is from 2^23 -1 bits.
PRBS15 — Sequence length is from 2^15 -1 bits.
PRBS7 —Sequence length is from 2^7 -1 bits.
Configuring Pseudo Random Binary Sequence
Verifying PRBS
Viewing PRBS Performance Monitoring Parameters
Configuring PRBS on OTN-XP Card
Clearing Bit Errors and Lock Time for PRBS
Configuring Pseudo Random Binary Sequence
The secondary admin state of the coherentDSP or ODU4 controller must be set to maintenance before enabling PRBS.
To enable the PRBS on the trunk port, use the following configuration command at the coherentDSP controller:
controller coherentDSP R/S/I/P prbs mode {source | sink | source-sink} pattern {pn31 | pn23 | pn15 | pn7}
To enable the PRBS on the trunk port, use the following configuration command at the ODU4 controller:
controller odu4 R/S/I/P/L opu prbs mode {source | sink | source-sink} pattern {pn31 | pn23 | pn15 | pn7}
When the PRBS is enabled on the trunk ports, you can view the following impacts in the corresponding client ports:
Client traffic is dropped in the direction of source to sink as the frames are overwritten by the PRBS pattern.
Remote fault is raised on the client ports nearer to the PRBS sink.
The following are the ODU4 PRBS combinations. The client ports must have physical loop back in all the combinations.
Near End client and Near End trunk ODU4
Near End client and Far End client ODU4
Near End client and Far End trunk ODU4
Near End trunk and Far End trunk ODU4
The following sample diagram describes the ODU4 PRBS combination for Near End client and Near End trunk.
Verifying PRBS
You can monitor the status of Pseudo Random Binary Sequence (PRBS) on the CoherentDSP or ODU4 controller using the following command:
show controllers coherentDSP | ODU4 R/S/I/P prbs-details
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/1/0/0 prbs-details
Wed Nov  6 23:12:22.464 UTC

----------------------PRBS details------------------
PRBS Test               : Enable
PRBS Mode               : Source
PRBS Pattern            : PN7
PRBS Status             : Not Applicable

---------------------------------------------------
RP/0/RP0/CPU0:ios#show controllers ODU4 0/3/0/8 prbs-details
Mon Jan 11 05:29:12.436 UTC

 -------------------------PRBS details----------------------------------
PRBS Test                       : Enable
PRBS Mode                       : Source
PRBS Pattern                    : PN7
PRBS Status                     : Not Applicable

---------------------------------------------------
RP/0/RP0/CPU0:ios#show controllers ODU4 0/3/0/1/1 prbs-details
Mon Jan 11 05:27:56.370 UTC

 -------------------------PRBS details----------------------------------
PRBS Test                       : Enable
PRBS Mode                       : Sink
PRBS Pattern                    : PN7
PRBS Status                     : Locked

---------------------------------------------------
You cannot view any details, if the PRBS is not enabled on the trunk.
PRBS status is shown as Not Applicable, when the mode is Source.
PRBS status is shown as unlocked, when the signal is not locked on the receiving side in the Sink or Source-Sink mode.
Viewing PRBS Performance Monitoring Parameters
PRBS PM parameters are not available for the controllers in Source mode. PRBS PM parameters are reset when PRBS configuration changes on the controller.
To view the PRBS PM parameters on the coherentDSP controller, use the following command:
show controllers coherentDSP | ODU4 R/S/I/P pm {current | history }{15-min|24-hour} prbs
The following tables describes the fields of PRBS PM parameters.
Table 9. PRBS PM Parameters
PM Parameter
Description
EBC
Cumulative count of PRBS bit errors in the sampling interval (15-minute or 24-hour). PRBS bit errors are accumulated only if PRBS signal is locked.
FOUND-COUNT
Number of state transitions from signal unlocked state to signal locked state in the sampling interval. If state change is not observed in the interval, the count is 0.
LOST-COUNT
Number of state transitions from signal locked state to signal unlocked state in the sampling interval. If state change is not observed in the interval, the count is 0.
FOUND-AT-TS
Latest timestamp when the PRBS state moves from unlocked state to locked state in the sampling interval. If state change is not observed in the interval, the value is null.
CONFIG-PTRN
Configured PRBS pattern on the port.
RP/0/RP0:ios#show controllers coherentDSP 0/0/0/1 pm current 15-min prbs
Mon Feb 13 00:58:48.327 UTC 
 
PRBS in the current interval [00:45:00 - 00:58:48 Mon Feb 13 2019] 
PRBS current bucket type : Valid 
EBC                      : 40437528165 
FOUND-COUNT              : 1 FOUND-AT-TS : 00:51:22 Mon Feb 13 2019
LOST-COUNT               : 1 LOST-AT-TS  : 00:52:52 Mon Feb 13 2019
CONFIG-PTRN              : PRBS_PATTERN_PN31 
Last clearing of "show controllers OTU" counters never 
RP/0/RP0:ios#show controllers ODU4 0/3/0/1/1 pm current 15-min prbs
Mon Jan 11 00:58:48.327 UTC 
 
PRBS in the current interval [00:45:00 - 00:58:48 Mon Jan 11 2021] 
PRBS current bucket type : Valid 
EBC                      : 40437528165 
FOUND-COUNT              : 1 FOUND-AT-TS : 00:51:22 Mon Jan 11 2021
LOST-COUNT               : 1 LOST-AT-TS  : 00:52:52 Mon Jan 11 2021
CONFIG-PTRN              : PRBS_PATTERN_PN7
Last clearing of "show controllers ODU" counters never 
Configuring PRBS on OTN-XP Card
To configure PBRS mode on the ODU2e controller, you must configure Optical Channel Payload Unit (OPU) on the ODU2e controller followed by the PRBS mode and the pattern. The PRBS supported pattern on the OTN-XP card is invertedPN31.
From R7.3.1 onwards, you can configure PRBS on client or mapper ODU4 and ODU flex controllers.
For fiber channel controllers, PRBS is supported on mapper ODU flex controllers.

Note
ODU2e PRBS is not supported for OTU2E client rates.
To configure PRBS mode on the ODU2e controller, enter the following commands:
configure
controller odu2e | oduflex R/S/I/P/client-port/lane-number
secondary-admin-state maintenance
opu
prbs mode {source | sink | source-sink} pattern invertedpn31 {direction {system | line}}
end
commit
The following example shows how to configure PRBS mode as source-sink with pattern as invertedpn31:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller odu2e0/2/0/12/3/2   
RP/0/RP0/CPU0:ios(config-odu2e)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-odu2e)#opu
RP/0/RP0/CPU0:ios(config-Opuk)#prbs mode source-sink pattern invertedpn31
RP/0/RP0/CPU0:ios(config-Opuk)#end
RP/0/RP0/CPU0:ios(config-odu2e)#commit
The following is a sample output of show controller odu2e command.
RP/0/RP0/CPU0(config-odu2e)#show controller odu2e 0/2/0/12/3/2 prbs-details 
Mon Mar 14 21:33:02.293 UTC

 -------------------------PRBS details----------------------------------
PRBS Test                       : Enable
PRBS Mode                       : Source-Sink
PRBS Pattern                    : INVERTED PN31
PRBS Status                     : Locked
PRBS Lock Time(in seconds)      : 1190
PRBS Bit Errors                 : 0

---------------------------------------------------
The following example shows how to configure PRBS mode as source-sink with pattern as invertedpn31 with direction as system:
RP/0/RP0/CPU0:ios#configure
Wed Nov 11 00:38:11.789 UTC
RP/0/RP0/CPU0:ios(config)#controller odu4 0/2/0/5
RP/0/RP0/CPU0:ios(config-odu4)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-odu4)#opu prbs mode source-sink pattern invertedpn31 direction system
RP/0/RP0/CPU0:ios(config-odu4)#commit
Wed Nov 11 00:38:26.391 UTC
The following example shows how to configure PRBS mode as source-sink with pattern as invertedpn31 with direction as line:
RP/0/RP0/CPU0:ios#configure
Wed Nov 11 00:38:11.789 UTC
RP/0/RP0/CPU0:ios(config)#controller odu4 0/2/0/5
RP/0/RP0/CPU0:ios(config-odu4)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-odu4)#opu prbs mode source-sink pattern invertedpn31 direction line
RP/0/RP0/CPU0:ios(config-odu4)#commit
Wed Nov 11 00:38:26.391 UTC
The following example shows how to configure PRBS on the mapper controller:
RP/0/RP0/CPU0:ios#configure
Thu Oct 7 13:17:27.267 UTC
RP/0/RP0/CPU0:ios(config)#controller odu4 0/2/0/13/8
RP/0/RP0/CPU0:ios(config-odu4)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-odu4)#opu prbs mode source-sink pattern invertedpn31
RP/0/RP0/CPU0:ios(config-odu4)#commit
The following example shows how to configure PRBS on the mapper controller with PRBS mode as source-sink and pattern as invertedpn31 with direction as line:
RP/0/RP0/CPU0:ios(config)#controller odu4 0/3/0/7
RP/0/RP0/CPU0:ios(config-odu4)#secondary-admin-state maintenance
RP/0/RP0/CPU0:ios(config-odu4)#opu prbs mode source-sink pattern invertedpn31 direction line
RP/0/RP0/CPU0:ios(config-odu4)#commit
Tue Oct 12 13:17:07.840 UTC
Verifying PRBS on OTN-XP Card
Verifying PRBS on OTN-XP Card
You can monitor the status of PRBS on the ODU2e controller using the following command:
show controllers odu2e R/S/I/P/client-port/client-lane prbs-details
The following example displays the output of the PRBS configuration with PRBS mode as sink:
RP/0/RP0/CPU0:ios#show controllers odu2e 0/2/0/12/3/2 prbs-details 
-------------------------PRBS details----------------------------------
PRBS Test               : Enable
PRBS Mode               : Sink
PRBS Pattern            : INVERTED PN31
PRBS Status             : Locked
The following example displays the output of the PRBS configuration with PRBS mode as source-sink:
RP/0/RP0/CPU0:ios#show controllers odu2e 0/2/0/12/3/2 prbs-details 
-------------------------PRBS details----------------------------------
PRBS Test               : Enable
PRBS Mode               : Source-Sink
PRBS Pattern            : INVERTED PN31
PRBS Status             : Locked
The following example displays the output of the PRBS configuration on the mapper controller:
RP/0/RP0/CPU0:ios#show controllers odu4 0/2/0/13/8 prbs-details
Thu Oct 7 13:21:19.444 UTC

-------------------------PRBS details----------------------------------
PRBS Test : Enable
PRBS Mode : Source-Sink
PRBS Pattern : INVERTED PN31
PRBS Status : Locked

---------------------------------------------------
The following example displays the output of the PRBS configuration on the mapper controller with PRBS mode as source-sink and pattern as invertedpn31 with direction as line:
RP/0/RP0/CPU0:ios#show controllers odu4 0/3/0/7 prbs-detailsTue Oct 12 13:17:22.748 UTC
Tue Oct 12 13:17:22.748 UTC
-------------------------PRBS details----------------------------------
PRBS Test : Enable
PRBS Mode : Source-Sink
PRBS Pattern : INVERTED PN31
PRBS Status : Unlocked
PRBS Direction : Line
PRBS Bit Errors : 0

--------------------------------------------------- 
Clearing Bit Errors and Lock Time for PRBS
Lock time is the time that is elapsed since the last PRBS lock is detected.
The following sample shows that bit errors are observed during the PRBS test:
RP/0/RP0/CPU0:ios#show controllers odu4 0/2/0/5 prbs-details
Fri Nov 13 03:21:44.191 UTC

-------------------------PRBS details----------------------------------
PRBS Test : Enable
PRBS Mode : Source-Sink
PRBS Pattern : INVERTED PN31
PRBS Status : Locked
PRBS Direction : Line
PRBS Lock Time(in seconds) : 28
PRBS Bit Errors : 23776

---------------------------------------------------
To clear the lock time and bit errors before the PRBS test, use the clear command:
RP/0/RP0/CPU0:ios#clear controller odu4 0/2/0/5 prbs-details
Fri Nov 13 03:21:50.726 UTC
PRBS bit errors cleared
The following sample displays the bit errors and lock time are removed.
RP/0/RP0/CPU0:ios#show controllers odu4 0/2/0/5 prbs-details
Fri Nov 14 03:21:44.191 UTC
-------------------------PRBS details----------------------------------
PRBS Test : Enable
PRBS Mode : Source-Sink
PRBS Pattern : INVERTED PN31
PRBS Status : Locked
PRBS Direction : Line
PRBS Lock Time(in seconds) : 2
PRBS Bit Errors : 0
FlexO GID and IID
In the 4x100G-MXP-400G-TXP LC mode, the OTN-XP card uses flexible OTN (flexO) interfaces on trunk ports. These flexO interfaces provide a flexible and interoperable mechanism to transport OTUCn signals by grouping standard lower rate interfaces. Each flexO interface group is identified by a flexO group identification (GID) number, which ranges 1–1,048,576. Each member of a flexO group is identified by a flexO instance identification (IID) number, which ranges 1–254.
From Release 7.3.1 onwards, flexO GID and IID configurations are supported on CoherentDSP controller for the OTN-XP card.
Configuring FlexO GID and IID
Verifying FlexO GID and IID
Flexo Parameter Update on Inverse Muxponder Configuration on the OTN-XP Card
Configuring FlexO GID and IID
To configure flexO GID and IID on the coherentDSP controller, enter the following commands:
configure
controller coherentDSP R/S/I/P
flexo
gid <gid-no> iid <iid-no>
commit
The following sample shows how to configure flexO GID and IID on the CoherentDSP controller:
RP/0/RP0/CPU0:ios#configure
RP/0/RP0/CPU0:ios(config)#controller coherentDSP0/2/0/12
RP/0/RP0/CPU0:ios(config-CoDSP)#flexo
RP/0/RP0/CPU0:ios(config-CoDSP)#gid 2 iid 5,6,7,8
RP/0/RP0/CPU0:ios(config-CoDSP)#commit
Verifying FlexO GID and IID
The following sample shows the flexO GID and IID configuration on the CoherentDSP controller:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/2/0/12                                                                                    
Tue Jan 12 11:26:08.235 UTC  
Port : CoherentDSP 0/2/0/12
Controller State : Up
Inherited Secondary State : Normal
Configured Secondary State : Normal
Derived State : In Service
Loopback mode : None
BER Thresholds : SF = 1.0E-5 SD = 1.0E-7
Performance Monitoring : Enable
Bandwidth : 400.0Gb/s

Alarm Information:
LOS = 0 LOF = 3 LOM = 0
OOF = 3 OOM = 0 AIS = 0
IAE = 0 BIAE = 0 SF_BER = 0
SD_BER = 0 BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0 FLEXO_GIDM = 1
FLEXO-MM = 1 FLEXO-LOM = 0 FLEXO-RDI = 3
FLEXO-LOF = 0 
Detected Alarms : None

Bit Error Rate Information
PREFEC BER : 6.43E-04 
POSTFEC BER : 0.00E+00 

TTI :
Remote hostname : ios
Remote interface : CoherentDSP 0/0/0/13
Remote IP addr : 0.0.0.0

FEC mode : O_FEC

Flexo-Mode : Enable
Flexo Details:
Tx GID : 2
TX IID : 5,6,7,8, 
Rx GID : 2
RX IID 5,6,7,8, 

AINS Soak : None
AINS Timer : 0h, 0m
AINS remaining time : 0 seconds
Flexo Parameter Update on Inverse Muxponder Configuration on the OTN-XP Card
By default, the value of flexo parameters for the coherentDSP controllers in the 400G inverse muxponder, are as follows:
CoherentDSP 0/0/0/12―GID is 1 and IID is 1, 2.
CoherentDSP 0/0/0/13―GID is 1 IID is 3, 4.
The following example displays the default configurations on the transmission side:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/13
Wed Jun  9 23:17:30.794 UTC

Port                                            : CoherentDSP 0/0/0/13
Controller State                                : Admin Down
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : Out Of Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 0.00 dB 

Q-Margin                                        : 0.00dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 3, 4, 
        Rx GID                                  : 0
        RX IID                                  : 0, 0, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_0_0_12 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
For 400G inverse muxponder, the flexo configuration on these coherent DSP controllers must be such that GID is the same on coherentDSP controllers on both port 12 and port 13, and IIDs are in the incremental order. In case if one of the node configurations is invalid, the Provisioning Failed alarm is raised on that particular controller. The Provisioning Failed alarm moves to the slice level in case you perform a line card reload.
The following sample configures the same IID on the coherentDSP 0/0/0/12 as that of coherentDSP 0/0/0/13 and shows the resulting Provisioning Failed alarm.
RP/0/RP0/CPU0:ios#configure 
Wed Jun  9 23:19:28.101 UTC
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/12
RP/0/RP0/CPU0:ios(config-CoDSP)#flexo gid 1 iid 3,4
RP/0/RP0/CPU0:ios(config-CoDSP)#commit 
Wed Jun  9 23:20:08.971 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#end
RP/0/RP0/CPU0:ios#show alarms brief system active
Wed Jun  9 23:20:11.940 UTC

------------------------------------------------------------------------------------
Active Alarms 
------------------------------------------------------------------------------------
Location Severity Group     Set Time                 Description                                                                                                                                                                                                                                                
------------------------------------------------------------------------------------                                                                                                                                                                                                                         
0/0      Major  Controller 06/09/202123:20:10 UTC CoherentDSP0/0/0/12-Provisioning Failed
The following sample configures incremental IIDs in the coherentDSP 0/0/0/12 and coherent DSP 0/0/0/13 and verifies that the Provisioning Failed alarms cleared:
RP/0/RP0/CPU0:ios(config)#controller coherentDSP 0/0/0/12
RP/0/RP0/CPU0:ios(config-CoDSP)#flexo gid 1 iid 5,6            
RP/0/RP0/CPU0:ios(config-CoDSP)#controller coherentDSP 0/0/0/13
RP/0/RP0/CPU0:ios(config-CoDSP)#flexo gid 1 iid 7,8            
RP/0/RP0/CPU0:ios(config-CoDSP)#commit 
Wed Jun  9 23:21:06.335 UTC
RP/0/RP0/CPU0:ios(config-CoDSP)#end
The following sample verifies the IID configurations in the coherentDSP 0/0/0/12 and coherentDSP 0/0/0/13:
RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/12
Wed Jun  9 23:21:15.321 UTC

Port                                            : CoherentDSP 0/0/0/12
Controller State                                : Admin Down
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : Out Of Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 0.00 dB 

Q-Margin                                        : 0.00dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 5, 6, 
        Rx GID                                  : 0
        RX IID                                  : 0, 0, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_0_0_13 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds


RP/0/RP0/CPU0:ios#show controllers coherentDSP 0/0/0/13
Wed Jun  9 23:21:20.348 UTC

Port                                            : CoherentDSP 0/0/0/13
Controller State                                : Admin Down
Inherited Secondary State                       : Normal
Configured Secondary State                      : Normal
Derived State                                   : Out Of Service
Loopback mode                                   : None
BER Thresholds                                  : SF = 1.0E-5  SD = 1.0E-7
Performance Monitoring                          : Enable
Bandwidth                                       : 200.0Gb/s

Alarm Information:
LOS = 0 LOF = 0 LOM = 0
OOF = 0 OOM = 0 AIS = 0
IAE = 0 BIAE = 0        SF_BER = 0
SD_BER = 0      BDI = 0 TIM = 0
FECMISMATCH = 0 FEC-UNC = 0     FLEXO_GIDM = 0
FLEXO-MM = 0    FLEXO-LOM = 0   FLEXO-RDI = 0
FLEXO-LOF = 0   
Detected Alarms                                 : None

Bit Error Rate Information
PREFEC  BER                                     : 0.00E+00 
POSTFEC BER                                     : 0.00E+00 
Q-Factor                                        : 0.00 dB 

Q-Margin                                        : 0.00dB 

TTI :
        Remote IP addr                          : 0.0.0.0

FEC mode                                        : O_FEC

Flexo-Mode                                      : Enable
Flexo Details:
        Tx GID                                  : 1
        TX IID                                  : 7, 8, 
        Rx GID                                  : 0
        RX IID                                  : 0, 0, 

Flexo Peers Information:
        Controller                              : CoherentDSP0_0_0_12 
        OTUCn rate                              : OTUC2


AINS Soak                                       : None
AINS Timer                                      : 0h, 0m
AINS remaining time                             : 0 seconds
The following sample verifies that the Provisioning Failed alarm was cleared:
                 
RP/0/RP0/CPU0:ios#show alarms brief system history

------------------------------------------------------------------------------------
History Alarms 
------------------------------------------------------------------------------------ --------------------------------- 
Location Severity Group       Set Time                Description                                Clear Time
                                                                                                                                                                                                                                  
                                                                                                                       
-----------------------------------------------------------------------------------------------------------------------
0/2      Major   Controller  09/30/2021 14:42:01 UTC  CoherentDSP0/2/0/12 - Provisioning Failed 09/30/2021 14:42:25 UTC                                                                                                                                                                                                              
                                                             
FPD
FPD command enables you to verify the status of the installed QDD ZRP pluggables. The following is the sample output for verifying the FPD status of the installed QDD ZRP pluggables.
RP/0/RP0/CPU0:ios#sh hw-module fpd
Fri Jul 23 12:47:52.106 UTC

Auto-upgrade:Disabled
                                                                         FPD Versions
                                                                        ==============
Location   Card type             HWver FPD device       ATR Status    Running   Programd  
-----------------------------------------------------------------------------------------
0/0        NCS1K4-OTN-XPL        3.0   LC_CPU_MOD_FW        CURRENT    21.27     21.27    
0/0        NCS1K4-OTN-XPL        7.0   LC_DP_MOD_FW         CURRENT     3.10      3.10    
0/0        NCS1K4-OTN-XPL        2.0   LC_QSFPDD_PORT_11    CURRENT   161.2009  161.2009  
0/0        NCS1K4-OTN-XPL        2.0   LC_QSFPDD_PORT_9     CURRENT   161.2009  161.2009 
In the above sample output, LC_QSFPDD_PORT_11 and LC_QSFPDD_PORT_9 indicate the provisioning of the QDD ZRP pluggables in the trunk ports 11 and 9. To resume traffic, the FPDs must be in CURRENT state. For more details on the FPD command, see Command Reference for Cisco NCS 1004.
Was this Document Helpful?
Yes No
Feedback
Customers Also Viewed
Configuration Guide for Cisco NCS 1004, IOS XR Release 7.9.x --- Configuring the Card Mode
OpenROADM Configuration Guide for Cisco NCS 1004 --- OpenROADM YANG Models
Configuration Guide for Cisco NCS 1004, IOS XR Release 7.5.x --- Configuring the Card Mode
+ Show 3 More
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)