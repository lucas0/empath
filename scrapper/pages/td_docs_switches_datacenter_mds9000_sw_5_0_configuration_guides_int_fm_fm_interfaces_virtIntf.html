Configuration Guides
Cisco Fabric Manager Interfaces Configuration Guide
Bias-Free Language
Book Contents
Download
Print
Updated:
July 29, 2010
Chapter: Configuring Virtual Interfaces
Chapter Contents

This chapter describes how to configure virtual Fibre Channel (FC) interfaces on a Cisco Nexus 5000 Series switch.
Note Before you configure virtual FC interfaces on a Cisco Nexus 5000 Series switch, you must enable and configure Fibre Channel over Ethernet (FCoE) on the switch. For information on enabling and configuring FCoE, refer to the Cisco Fabric Manager Fabric Configuration Guide.
This chapter includes the following sections:
•About Virtual Fibre Channel Interfaces
•Guidelines and Limitations
•Configuring Virtual Fibre Channel Interfaces
•Default Settings
About Virtual Fibre Channel Interfaces
Cisco Nexus 5000 Series switches support FCoE, which allows Fibre Channel and Ethernet traffic to be carried on the same physical Ethernet connection between the switch and the servers.
The Fibre Channel portion of FCoE is configured as a virtual Fibre Channel interface. Logical Fibre Channel features (such as interface mode) can be configured on virtual FC interfaces. A virtual FC interface must be bound to an interface before it can be used.
Note Virtual FC interfaces are created with the administrative state set to down. You need to explicitly configure the administrative state to bring the virtual FC interface into operation.
Guidelines and Limitations
When configuring virtual FC interfaces, note the following guidelines and limitations:
•Each virtual FC interface can be bound to one of the following interfaces:
–An Ethernet interface.
–An Ethernet PortChannel.
–A media access control (MAC) address of an FCoE Node (ENode) or a remote Fibre Channel Forwarder (FCF) identified by the virtual FC interface.
–An Ethernet host interface on a Cisco Nexus 2000 Series Fabric Extender.
•FCoE is supported only on 10-Gigabit Ethernet interfaces.
•FCoE is not supported on private VLANs.
Configuring Virtual Fibre Channel Interfaces
This section describes how to configure virtual FC interfaces and includes the following topics:
•Overview
•Configuring a Virtual Fibre Channel Interface
•Mapping VLANs to VSANs
•Assigning Fibre Channel VSAN Membership
•Creating a Virtual Fibre Channel Interface
•Deleting a Virtual Fibre Channel Interface
Overview
You can configure a virtual FC interface on a Cisco Nexus 5000 Series switch that runs Cisco NX-OS Release 4.0(1a) or later releases. You can bind a virtual FC interface to a physical Ethernet interface, an Ethernet PortChannel, or a remote MAC address.
The Ethernet interface that you bind the virtual FC interface to must be configured as follows:
•The Ethernet interface must be a trunk port (use the switchport mode trunk command).
•The FCoE VLAN that corresponds to the virtual Fibre Channel's VSAN must be in the allowed VLAN list.
•The FCoE VLAN must not be configured as the native VLAN of the trunk port.
•The Ethernet interface must be configured as PortFast (use the spanning-tree port type edge trunk command).
Following the above configuration guidelines will ensure a smooth upgrade to a T11 Fibre Channel Initialization Protocol (FIP)-based FCoE release in the future.
Configuring a Virtual Fibre Channel Interface
This section describes how to configure a virtual FC interface and includes the following topics:
•Configuring a Virtual Fibre Channel Interface Using Fabric Manager
•Configuring a Virtual Fibre Channel Interface Using Device Manager
Configuring a Virtual Fibre Channel Interface Using Fabric Manager
To configure virtual FC interfaces using Fabric Manager, follow these steps:
Step 1 In the Physical Attributes pane, expand Switches > Interfaces, and then choose VFC (FCoE).
You see the FC Virtual information pane shown in Figure 4-1.
The General tab in the Information pane displays the description, bind type, bound interface, bound MAC address, FCF priority value, VSAN port, and status for each virtual FC interface.
Figure 4-1 FC Virtual Information Pane
Step 2 In the Information pane, in the FC Virtual table, click a virtual FC interface row to configure, and do the following:
a. (Optional) You can modify the bind type for the selected virtual FC interface. To do so, click the Bind Type column. From the drop-down list, choose interfaceIndex or macAddress.
Note You cannot modify the bind type value of a virtual FC interface on a Cisco Nexus 5000 Series switch that runs a Cisco NX-OS release prior to Release 4.1(3). On such a switch, the Bind Type column will display interfaceIndex as the bind type.
b. (Optional) Double-click the Bind Interface column to choose a physical Ethernet interface or Ethernet PortChannel that will be bound to the virtual FC interface.
Note This column is dimmed if the Bind Type value is macAddress.
In the Bind Interface column, you can bind a virtual FC interface to one of the following:
–A physical Ethernet interface that runs at 10-Gigabit Ethernet speed.
–An Ethernet PortChannel on a Cisco Nexus 5000 Series switch that runs Cisco NX-OS Release 4.1(3) or later releases. The Ethernet PortChannel must have only one interface that runs at 10-Gigabit Ethernet speed.
–An Ethernet host interface on a Cisco Nexus 2000 Series Fabric Extender. However, you  cannot bind the Ethernet host interface of a Cisco Nexus N2224TP Series Fabric Extender,  Cisco Nexus N2232TP Series Fabric Extender, or Cisco Nexus N2232TT Series Fabric Extender.
c. (Optional) Double-click the Bind MAC Address column to enter the MAC address of the ENode or the remote FCF.
This column is dimmed if the Bind Type value is interfaceIndex.
d. (Optional) Double-click the FCF Priority column to enter a FCF priority value for the virtual FC interface. The value that you enter in this field will override the default FCF Priority value you configured in the FCoE Information pane. For more information on configuring FCoE, refer to the Cisco Fabric Manager Fabric Configuration Guide.
Note You cannot modify the FCF Priority value on a Cisco Nexus 5000 Series switch that runs a Cisco NX-OS release prior to Release 4.1(3).
e. In the Information pane toolbar, click the Apply Changes icon to save the configuration.
Step 3 In the Information pane toolbar, click the Create Row icon to create a virtual FC interface. For more information, see the "Creating a Virtual Fibre Channel Interface Using Fabric Manager" section.
Step 4 In the Information pane toolbar, click the Delete Row icon to delete a virtual FC interface. For more information, see the "Deleting a Virtual Fibre Channel Interface" section.
Configuring a Virtual Fibre Channel Interface Using Device Manager
To configure virtual FC interfaces using Device Manager, follow these steps:
Step 1 Launch Device Manager from the Cisco Nexus 5000 Series switch.
Step 2 Choose Interface > Virtual Interfaces > Fibre Channel.
You see the Virtual FC Interfaces dialog box shown in Figure 4-2.
The General tab displays the description, bind type, bound interface, bound MAC address, FCF priority value, VSAN port, and status for each virtual FC interface.
Figure 4-2 Virtual FC Interfaces Dialog Box
Step 3 Click a virtual FC interface row to configure. Modify the values for the virtual FC interface.
Note In the Bind Interface column, you can bind a virtual FC interface to one of the following:
 · A physical Ethernet interface that runs at 10-Gigabit Ethernet speed.
 · An Ethernet PortChannel on a Cisco Nexus 5000 Series switch that runs Cisco NX-OS
    Release 4.1(3) or later releases. The Ethernet PortChannel must have only one interface that    runs at 10-Gigabit Ethernet speed.
 · An Ethernet host interface on a Cisco Nexus 2000 Series Fabric Extender. However, you
    cannot bind the Ethernet host interface of a Cisco Nexus N2224TP Series Fabric Extender,
    Cisco Nexus N2232TP Series Fabric Extender, or Cisco Nexus N2232TT Series Fabric
    Extender.
For more information, see the "Configuring a Virtual Fibre Channel Interface Using Fabric Manager" section.
Step 4 Click Apply to save the configuration.
Step 5 Click Create to create a virtual FC interface. For more information, see the "Creating a Virtual Fibre Channel Interface Using Device Manager" section.
Step 6 Click Delete to delete a virtual FC interface. For more information, see the "Deleting a Virtual Fibre Channel Interface" section.
Mapping VLANs to VSANs
A VLAN-VSAN mapping indicates the VLAN that is used to transport Fibre Channel traffic for a specific VSAN. Each virtual FC interface is associated with only one VSAN. Any VSAN with associated virtual FC interfaces must be mapped to a dedicated FCoE-enabled VLAN. FCoE is not supported on private VLANs.
This section provides information about how to map a VLAN to a VSAN and includes the following topics:
•Mapping VLANs to VSANs Using Fabric Manager
•Mapping VLANs to VSANs Using Device Manager
Mapping VLANs to VSANs Using Fabric Manager
To create a mapping between a VSAN and its associated VLAN using Fabric Manager, follow these steps:
Step 1 In the Physical Attributes pane, choose Switches > FCoE.
Step 2 In the Information pane, click the VLAN-VSAN Mapping tab.
You see the VLAN-VSAN Mapping information pane shown in Figure 4-3.
The VLAN-VSAN Mapping tab displays the existing VLAN-VSAN mappings and the operational state of the VLAN-VSAN associations. You cannot modify an existing VLAN-VSAN mapping.
Figure 4-3 VLAN-VSAN Mapping Information Pane
Step 3 In the Information pane toolbar, click the Create Row icon to create a new mapping.
Note You must have a Cisco Nexus 5000 Series switch in the fabric to map a VLAN to a VSAN.
You see the Create dialog box shown in Figure 4-4.
Figure 4-4 Create VLAN-VSAN Mapping
Step 4 From the Switch drop-down list, choose a Cisco Nexus 5000 Series switch.
Step 5 In the VLAN Id and VSAN Id fields, enter the VLAN ID and the VSAN ID that will be mapped together.
Note The VLAN must already exist on the switch. If you enter a nonexistent VLAN ID to create the mapping, the mapping operation will fail.
Step 6 Click Create to create the mapping.
Mapping VLANs to VSANs Using Device Manager
To create a mapping between a VSAN and its associated VLAN using Device Manager, follow these steps:
Step 1 Launch Device Manager from the Cisco Nexus 5000 Series switch.
Step 2 Choose FCoE > Config.
You see the FCoE Config dialog box shown in Figure 4-5.
Figure 4-5 FCoE Config Dialog Box
Step 3 Click the VLAN-VSAN Mapping tab.
The VLAN-VSAN Mapping tab lists the existing VLAN-VSAN mappings and the operational state of the VLAN-VSAN associations. You cannot modify an existing VLAN-VSAN mapping.
Step 4 Click Create to create a new mapping.
You see the Create VLAN-VSAN Mapping dialog box shown in Figure 4-6.
Figure 4-6 Create VLAN-VSAN Mapping
Step 5 In the VLAN Id and VSAN Id fields, enter the VLAN ID and the VSAN ID that will be mapped together.
Note The VLAN must already exist on the switch. If you enter a nonexistent VLAN ID to create the mapping, the mapping operation will fail.
Step 6 Click Create to create the mapping.
Assigning Fibre Channel VSAN Membership
To associate a virtual FC interface with a VSAN port using Device Manager, follow these steps:
Step 1 Launch Device Manager from the Cisco Nexus 5000 Series switch.
Step 2 Choose FC > VSANs.
You see the VSAN dialog box shown in Figure 4-7.
Figure 4-7 VSAN Dialog Box
Step 3 Click the Membership tab. This tab displays the virtual FC interfaces associated with VSAN ports.
Step 4 For each VSAN port in the table, double-click the following VSAN parameters and choose a value to associate the virtual FC interface with the VSAN:
•FC—Fibre Channel ports in VSAN
•Channels—Ethernet PortChannels in VSAN
•FC Virtual Interface—Fibre Channel virtual interface to associate with the VSAN port
Step 5 Click Apply to save the changes.
Creating a Virtual Fibre Channel Interface
This section describes how to create a virtual FC interface and includes the following topics:
•Using the FCoE Configuration Wizard
•Creating a Virtual Fibre Channel Interface Using Fabric Manager
•Creating a Virtual Fibre Channel Interface Using Device Manager
Using the FCoE Configuration Wizard
To create a virtual Fibre Channel interface using the FCoE Configuration Wizard, follow these steps:
Step 1 On the Fabric Manager toolbar, click FCoE, or choose Tools > FCoE.
Note The FCoE button and the Tools > FCoE menu is enabled only if the fabric includes a Cisco Nexus 5000 Series switch. A Cisco Nexus 5000 Series switch is discovered as part of the fabric only if the switch has FCoE features enabled.
You see Step 1 of the FCoE Configuration Wizard shown in Figure 4-8. The wizard lists all FCoE-enabled switches in the fabric.
Figure 4-8 FCoE Configuration Wizard - Step 1
Step 2 Choose a switch, and then click Next.
You see Step 2 of the FCoE Configuration Wizard shown in Figure 4-9. The wizard shows a list of existing VLAN-VSAN mappings and the operational state of the VLAN-VSAN associations. You cannot modify an existing VLAN-VSAN mapping.
Figure 4-9 FCoE Configuration Wizard - Step 2
Step 3 Click Next or optionally do one of the following:
Note If you choose a VLAN-VSAN mapping before clicking Next, make sure the operational state of the mapping is "up". Otherwise, an error message appears and the control remains in this step of the Wizard.
a. (Optional) To delete the VLAN-VSAN mapping for the interface, choose an existing VLAN-VSAN mapping, click Delete, and then click Next to save the changes to the switch.
b. (Optional) To create a new VLAN-VSAN mapping for the interface, do the following:
•Click New.
A new row is added to the VLAN-VSAN mapping table.
Note You must have a Cisco Nexus 5000 Series switch in the fabric to create a VLAN-VSAN mapping.
•To use the same ID for VLAN ID and VSAN ID, check the Use same VLAN ID and VSAN ID check box.
Note The Use same VLAN ID and VSAN ID check box is checked by default.

(Optional) To automatically map a VLAN ID to a VSAN ID, you must check this check box before you create a VLAN-VSAN mapping.
–Choose a VLAN ID from the drop-down list in the VLAN Id column, or type a VLAN ID in the VLAN Id field.
The VSAN ID field is automatically populated with the VLAN ID value you typed or chose in the VLAN ID field.
Note If you do not check the Use same VLAN ID and VSAN ID check box, then you must choose a VSAN ID from the drop-down list in the VSAN Id column, or type a VSAN ID in the VSAN Id field.
•Click Next to save the changes to the switch.
You see Step 3 of the FCoE Configuration Wizard shown in Figure 4-10.
Figure 4-10 FCoE Configuration Wizard - Step 3
Step 4 Create and bind the virtual FC interface to the Ethernet interface, PortChannel, or Ethernet host interface of a Cisco Nexus 2000 Series Fabric Extender.
Note You cannot bind virtual FC interfaces to Ethernet interfaces that are part of Ethernet PortChannels. The vFC column is disabled for all such interfaces; for example, eth1/7 to eth1/10.
You can do one of the following:
•To automatically bind a virtual FC interface to a specific Ethernet interface and assign the virtual FC ID to the interface, check the Auto Assign vFC ID check box, and then, for an Ethernet interface, check the relevant check box in the vFC column. To bind all Ethernet interfaces, check the vFC check box (located at the top of the vFC column).
•To manually bind a virtual FC interface to a specific Ethernet interface and assign the virtual FC ID to the interface, uncheck the Auto Assign vFC ID check box. A vFC ID column appears (see Figure 4-11). In the vFC column, check the check box for the relevant Ethernet interface, and then type a vitual FC ID in the vFC ID field provided in the vFC ID column. To bind all Ethernet interfaces, check the vFC check box, and then type the vitual FC IDs in the vFC ID field for each Ethernet interface.
Figure 4-11 FCoE Configuration Wizard - Step 3 (vFC ID, Show All Interfaces)
Note Ethernet host interfaces of a Cisco Nexus N2224TP Series Fabric Extender, Cisco Nexus N2232TP Series Fabric Extender, or Cisco Nexus N2232TT Series Fabric Extender are not listed in this step of the wizard.

To view these interfaces, you must check the Show All Interfaces check box (see Figure 4-11). The Configure Action Status field displays the "Not FCoE Capable" status message for these interfaces. However, you cannot bind a virtual FC interface to any of these Ethernet interfaces.
The following guidelines define valid interfaces to which you can bind the virtual FC interface:
•The Ethernet interface must not have any virtual interface associated with it.
•The Ethernet PortChannel interface must contain only a single 10-Gigabit Ethernet interface.
•The Ethernet interface must not be connected to a Cisco Nexus 2000 Series Fabric Extender uplink port.
•The Ethernet interface must be a 10-Gigabit Ethernet interface.
•The Ethernet interface must not be in switchport monitor mode.
Step 5 Click Finish to commit and distribute the change.
Creating a Virtual Fibre Channel Interface Using Fabric Manager
To create a virtual FC interface using Fabric Manager, follow these steps:
Step 1 In the Physical Attributes pane, expand Switches > Interfaces, and then choose VFC (FCoE).
Note Cisco Fabric Manager 4.1(2) and later releases do not support the configuration of a virtual FC interface on a Cisco Nexus 5000 Series switch that runs a Cisco NX-OS release prior to Release 4.0(1a). Fabric Manager issues an error message if you try to configure a virtual FC interface on a Cisco Nexus 5000 Series switch that runs a Cisco NX-OS release prior to Release 4.0(1a).
Step 2 In the Information pane toolbar, click the Create Row icon.
You see the Create Virtual Interface dialog box shown in Figure 4-12.
Figure 4-12 Create Virtual Interface Dialog Box
Step 3 From the Switch drop-down list, choose the switch where the virtual FC interface will be created.
Fabric Manager preselects the next available virtual FC interface ID. Optionally, in the VFC ID field, enter a value for this ID as an integer from 1 to 8192.
Step 4 (Optional) To bind the virtual FC interface to an Ethernet interface or an Ethernet PortChannel, do the following:
a. Ensure that the interfaceIndex radio button is selected. The interfaceIndex radio button is selected by default.
b. Click the button located next to the Bind Interface field, and choose the physical Ethernet interface or Ethernet PortChannel number that will be bound to this virtual FC interface. Optionally, you can enter a value for the Ethernet interface or Ethernet PortChannel in the Bind Interface field.
Note The interface port selector dialog box (see Figure 4-14) does not display the Ethernet host interfaces of a Cisco Nexus N2224TP Series Fabric Extender, Cisco Nexus N2232TP Series Fabric Extender, or Cisco Nexus N2232TT Series Fabric Extender.
Step 5 (Optional) To bind the virtual FC interface to the MAC address of the ENode or the remote FCF, do the following:
a. Click the macAddress radio button.
b. In the MAC Address field, enter the MAC address of the ENode or the remote FCF identified by the virtual FC interface. For example, 00:15:60:0F:C1:D0.
Step 6 Click Create.
Step 7 (Optional) Repeat Step 3 through Step 6 to create additional virtual FC interfaces for the same switch or a different switch.
Step 8 In the Create Virtual Interface dialog box, click Close when done.
The FC Virtual information pane lists the new and existing virtual FC interfaces for the switch.
Creating a Virtual Fibre Channel Interface Using Device Manager
To create a virtual FC interface using Device Manager, follow these steps:
Step 1 Launch Device Manager from the Cisco Nexus 5000 Series switch.
Step 2 Choose Interface > Virtual Interfaces > Fibre Channel.
You see the Virtual FC Interfaces dialog box (see Figure 4-2).
The General tab displays the description, bind type, bound Ethernet interface or PortChannel, bound MAC address, FCF priority value, VSAN port, and status for each virtual FC interface.
Step 3 Click Create.
You see the Create Virtual FC Interfaces General dialog box shown in Figure 4-13.
Figure 4-13 Create Virtual FC Interfaces Dialog Box
Step 4 In the VFC Id field, enter the virtual FC interface ID as an integer from 1 to 8192. The VFC Id field increments by 1.
Step 5 (Optional) To bind the virtual FC interface to an Ethernet interface or an Ethernet PortChannel or an Ethernet host interface on a Cisco Nexus 2000 Series Fabric Extender, do the following:
a. Ensure that the interfaceIndex radio button is selected. The interfaceIndex radio button is selected by default.
b. Click the button located next to the Bind Interface field. In the interface selector dialog box that appears (see Figure 4-14), choose the physical Ethernet interface, Ethernet PortChannel, or Ethernet host interface on a Cisco Nexus 2000 Series Fabric Extender to bind to the virtual FC interface. Optionally, you can enter a value for the Ethernet interface, Ethernet PortChannel, or Ethernet host interface in the Bind Interface field.
Figure 4-14 Interface Port Selector Dialog Box
Note You cannot bind a virtual FC interface to an Ethernet interface that runs at 1-Gigabit Ethernet speed or is connected to a port connecting the Cisco Nexus 5000 Series switch to a Cisco Nexus 2000 Series Fabric Extender.

The interface port selector dialog box (see Figure 4-14) does not display the Ethernet host interfaces of a Cisco Nexus N2224TP Series Fabric Extender, Cisco Nexus N2232TP Series Fabric Extender, or Cisco Nexus N2232TT Series Fabric Extender.
Step 6 (Optional) To bind the virtual FC interface to the MAC address of the ENode or the remote FCF, do the following:
a. Click the macAddress radio button.
b. In the MAC Address field, enter the MAC address of the ENode or the remote FCF identified by the virtual FC interface. For example, 00:15:60:0F:C1:D0.
Step 7 Click Create.
You see the virtual FC interface in the Virtual FC Interfaces dialog box.
Step 8 (Optional) Repeat Step 4 through Step 7 to create additional virtual FC interfaces.
Step 9 In the Create Virtual FC Interfaces General dialog box, click Close when done.
The Virtual FC Interfaces dialog box lists the new and existing virtual FC interfaces for the switch.
Deleting a Virtual Fibre Channel Interface
You can delete a virtual FC interface using Fabric Manager or Device Manager.
To delete a virtual FC interface, follow these steps:
Step 1 Do one of the following:
•In Fabric Manager, in the Physical Attributes pane, expand Switches > Interfaces, and then choose VFC (FCoE).
You see the Virtual Fibre Channel table in the Information pane.
•Launch Device Manager from the Cisco Nexus 5000 Series switch, and then choose Interface > Virtual Interfaces > Fibre Channel.
You see the Virtual FC Interfaces dialog box.
Step 2 Choose a virtual FC interface that you want to delete.
Step 3 Do one of the following:
•In Fabric Manager, in the Information pane toolbar, click the Delete Row icon.
•In Device Manager, in the Virtual FC Interfaces dialog box, click Delete.
In the confirmation dialog box that appears, confirm the deletion of the virtual FC interface.
Default Settings
Table 4-1 lists the default settings for all virtual FC interfaces.
Table 4-1 Default Virtual Fibre Channel Interface Parameters 
Parameters
Default
VSAN ID Port
1
Mode Admin
F
Mode Oper
Auto
Status Service
In
Status Admin
Down

Was this Document Helpful?
Yes No
Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)