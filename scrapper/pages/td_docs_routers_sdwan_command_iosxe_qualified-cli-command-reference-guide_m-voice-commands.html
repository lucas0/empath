Command References
Cisco IOS XE SD-WAN Qualified Command Reference
Bias-Free Language
Book Contents
Download
Print
Updated:
January 29, 2021
Chapter: Voice Commands
Chapter Contents
allow-connections
bind interface
caller-id alerting dsp-pre-allocate
caller-id alerting line-reversal
caller-id alerting pre-ring
caller-id alerting ring
caller-id block
caller-id enable
caller-id format e911
caller-id mode
clid dtmf-codes
codec preference
credentials
description (dial-peer voice voip)
destination-pattern
dial-peer voice (VOIP)
dtmf-relay (VOIP)
hunt-scheme least-used
hunt-scheme round-robin
hunt-scheme sequential
id network
keepalive retries
keepalive timeout
max-dn
max-pool
registrar server
security-policy (voice register global)
session protocol
session-transport
sccp ip precedence
system message (voice register global)
sip
sip-ua
supplementary-service sip
translation-profile (voice register)
voice-class codec (voice register pool)
voice-class codec (dial peer voice)
voice class codec
voice register global
voice register pool
voice service voip
allow-connections
To allow connections between specific types of endpoints in a VoIP network, use the allow-connections command in voice service configuration mode (voice service voip ). To refuse specific types of connections, use the no form of this command.
allow-connections sip to sip
no allow-connections sip to sip
Syntax Description
sip
Originating endpoint type, sip --Session Interface Protocol (SIP).
to
Indicates that the argument that follows is the connection target.
sip
Terminating endpoint type.
Command Default
SIP-to-SIP connections are disabled by default.
Command Modes
Voice-service configuration (config-voi-serv) using the voice service voip command
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE allow-connections command.
voice service voip
  
  allow-connections sip to sip
  no supplementary-service sip handle-replaces
  no supplementary-service sip moved-temporarily
  no supplementary-service sip refer
  sip
   registrar server expires max 300 min 200
bind interface
To bind an interface to a Cisco CallManager group, use the bindinterface command in SCCP Cisco CallManager configuration mode. To unbind the selected interface, use the no form of this command.
Supported Parameters
interface-type
Type of the selected interface.
interface-number
Number of the selected interface.
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE bind interface command.
bind interface <interface-name-slot/bay/port>
keepalive retries <1-32>
keepalive timeout <0-180>
sccp ip precedence <1-7>
caller-id alerting dsp-pre-allocate
To statically allocate a digital signal processor (DSP) resource for receiving caller ID information for an on-hook (Type 1) caller ID at a receiving Foreign Exchange Office (FXO) voice port, use the caller-id alerting dsp-pre-allocate command in voice-port configuration mode. To disable the effect of the command, delete the command from the CLI add-on feature template.
caller-id alerting dsp-pre-allocate
Syntax Description
alerting
Defines the caller ID alerting method.
dsp-pre-allocate
Performs DSP preallocation.
Command Default
DSP resource for receiving caller ID information are not allocated.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command.
The caller-id alerting dsp-pre-allocate command may be required on an FXO port if the central office uses line polarity reversal to signal the start of caller ID information transmission. Preallocating a DSP voice channel allows the DSP voice channel to listen for caller ID information continuously without requiring an alerting signal from the central office.
The following example shows how to configure a voice port at which the caller ID information is to be received:
voice-port 1/0/0
  cptone br
  caller-id enable
  caller-id alerting line-reversal
  caller-id alerting dsp-pre-allocate
caller-id alerting line-reversal
To set the line-reversal alerting method for caller ID information for an on-hook (Type 1) caller ID at a sending Foreign Exchange Station (FXS) voice port, and for an on-hook caller ID at a receiving Foreign Exchange Office (FXO) voice port, use the caller-id alerting line-reversal command in voice-port configuration mode. To disable the effect of the command, delete the command from the CLI add-on feature template.
caller-id alerting line-reversal
Syntax Description
alerting
Defines the caller ID alerting method.
line-reversal
Enables line-reversal alerting.
Command Default
The line-reversal alerting method for caller ID information is not set.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco SD-WAN Release 20.8.1
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command.
Before using this command, use the caller-id mode command to specify a noncountry, standard caller ID mode, or use the cptone command to specify a regional analog voice-interface-related tone, ring, and cadence setting for a voice port:
caller-id mode {BT | FSK | DTMF start x end y }.
cptone locale, Here, locale can be FR, DE, NO , IT, ES, ZA, TR, GB, AT, CN, HU, KR, BR, SE, DK, IS, NL, BE, IN, or SA .
The following example shows how to configure a voice port from which caller ID information is sent (FXS):
voice-port 1/0/0
   cptone br
   caller-id name A-sample
   caller-id number 4085550111
   caller-id enable
   caller-id alerting line-reversal
The following example shows how to configure a voice port from which caller ID information is received (FXO):
voice-port 2/0/0
   cptone br
   caller-id enable
   caller-id alerting line-reversal
   caller-id alerting dsp-pre-allocate
caller-id alerting pre-ring
To set a 250-millisecond pre-ring alerting method for caller ID information for an on-hook (Type 1) caller ID at a sending Foreign Exchange Station (FXS) and at a receiving Foreign Exchange Office (FXO) voice port, use the caller-id alerting pre-ring command in voice-port configuration mode. To disable the effect of the command, delete the command from the CLI add-on feature template.
caller-id alerting pre-ring
Syntax Description
alerting
Defines the caller ID alerting method.
pre-ring
Enables a 250-millisecond pre-ring alerting method for caller ID information.
Command Default
A 250-millisecond pre-ring alerting method for caller ID information is not set.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
This command is required only when the telephone device attached to an FXS port requires the pre-ring (immediate ring) method to signal the start of caller ID transmission. Use it on FXS voice ports that send caller ID information. This command allows the FXS port to send a short pre-ring before the normal ring cadence. On an FXO port, an incoming pre-ring is simply counted as a normal ring by use of the caller-id alerting ring command.
Before using this command, enable caller ID with the caller-id enable command.
Before using this command, use the caller-id mode command to specify a noncountry, standard caller ID mode, or use the cptone command to specify a regional analog voice-interface-related tone, ring, and cadence setting for a voice port:
caller-id mode {BT | FSK | DTMF start x end y }.
cptone locale, Here, locale can be FR, DE, NO , IT, ES, ZA, TR, GB, AT, CN, HU, KR, BR, SE, DK, IS, NL, BE, IN, or SA .
The following example shows how to configure a voice port from which caller ID information is sent:
voice-port 1/0/0
   cptone br
   caller-id enable
   station name A-sample
   station number 4085550111
   caller-id alerting pre-ring
The following example shows how to configure a voice port from which caller ID information is received (FXO):
voice-port 2/0/0
   cptone br
   caller-id enable
   caller-id alerting pre-ring
   
caller-id alerting ring
To set the ring-cycle method for receiving caller ID information for an on-hook (Type 1) caller ID at a receiving Foreign Exchange Office (FXO) or a sending Foreign Exchange Station (FXS) voice port, use the caller-id alerting ring command in voice-port configuration mode. To disable the effect of the command, delete the command from the CLI add-on feature template.
caller-id alerting ring [ 1 | 2 | 3 4 ]
Syntax Description
alerting
Defines the caller ID alerting method.
ring [1 | 2 | 3 | 4]
Sets number of ring ON cycles.
The default value is 1.
Command Default
The ring-cycle method for receiving caller ID information is set to 1.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command .
The caller ID alerting ring setting is determined by the Bellcore/Telcordia or ETSI standard that your telephone service provider uses for caller ID. Use the setting in the FXO loop-start and ground-start voice ports at which the caller ID information arrives, and in the FXS voice ports from which caller ID information is sent.
This setting must match on the sending and receiving ends of the telephone line connection.
The following example shows how to configure a voice port at which the caller ID information is received (FXO):
voice-port 2/0/0
   cptone US
   caller-id enable
   caller-id alerting ring 2
The following example shows how to configure a voice port from which caller ID information is sent (FXS):
voice-port 1/0/0
   cptone us
   station name A-sample
   station number 4085550111
   caller-id enable
   caller-id alerting ring 2
caller-id block
To request blocking of caller ID information display at the far end of a call that originates from a Foreign Exchange Station (FXS) port, use the caller-id block command in voice-port configuration mode at the originating FXS voice port. To allow the display of caller ID information, delete the command from the CLI add-on feature template.
caller-id block
Syntax Description
block
Blocks the caller ID of calls that are made from this port.
Command Default
The display of caller ID information is allowed.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command .
The following example shows how to configure a voice port from which caller ID information is sent to block the display of caller ID information:
voice-port 1/0/0
   caller-id enable
   caller-id block
caller-id enable
To enable a device to accept configuration settings from a caller-id command that configures caller ID functionality, use the caller-id enable command in voice-port configuration mode at the originating FXS or the receiving FXO voice port. To prevent a device from accepting configuration settings from a caller-id command that configures caller ID functionality, delete this command from the CLI add-on feature template.
caller-id enable
Syntax Description
enable
Enables a device to accept configuration settings from a caller-id command.
Command Default
This command is not configured.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
Configure the caller-id enable command before using any of the following commands:
caller-id alerting dsp-pre-allocate
caller-id alerting line-reversal
caller-id alerting pre-ring
caller-id alerting ring
caller-id block
caller-id format e911
caller-id mode
The following example shows how to enable a device to accept configuration settings from a caller-id command that configures caller ID functionality:
voice-port 1/0/0
   station name A-sample
   station number 4085550111
   caller-id enable
   caller-id alerting ring 2
caller-id format e911
To specify a caller ID message type that should be the Enhanced 911 format for calls sent on Foreign Exchange Station (FXS) voice ports, use the caller-id format e911 command in voice-port configuration mode at the originating FXS voice port. To use the default Multiple Data Message Format (MDMF) caller ID message type, delete the command from the CLI add-on feature template.
caller-id format 911
Syntax Description
e911
Specifies the Enhanced 911 format.
Command Default
The MDMF caller ID message type is used.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command.
The following example shows how to configure a voice port from which caller ID information is sent to use the Enhanced 911 format:
voice-port 1/0/0
   cptone US
   station name A-sample
   station number 4085550111
   caller-id enable
   caller-id format e911
caller-id mode
To specify a noncountry, standard caller ID mode, use the caller-id mode command in voice port configuration mode at the sending Foreign Exchange Station (FXS) voice port or at the receiving Foreign Exchange Office (FXO) voice port. To allow the caller ID mode to be country-specific, delete the command from the CLI add-on feature template.
caller-id mode { BT | FSK | DTMF [ start | { # | * | A | B | C | D } | end | { # | * | A | B | C | D } ] }
Syntax Description
BT
Specifies Frequency-Shift Keying (FSK) with Dual Tone Alerting Signal (DTAS) that is used by British Telecom.
FSK
Specifies that FSK be used before or during a call.
DTMF
Specifies that dual tone multifrequency (DTMF) digits be used with the start and end digit codes.
start
Specifies the start digit code for DTMF digits.
end
Specifies the end digit code for DTMF digits.
#
Specifies the DTMF digit #.
*
Specifies the DTMF digit *.
A
Specifies the DTMF digit A.
B
Specifies the DTMF digit B.
C
Specifies the DTMF digit C.
D
Specifies the DTMF digit D.
Command Default
The caller-ID mode is disabled.
Command Modes
Voice-port configuration (config-voiceport)
Command History
Release Modification
Cisco SD-WAN Release 20.8.1
This command was introduced.
Usage Guidelines
Before using this command, enable caller ID with the caller-id enable command.
This command allows you to configure a caller ID mode that is different from the caller ID mode that the cptone locale command configuration command specifies.
The caller-id mode DTMF command allows you to configure caller ID DTMF start and end codes that are different from the caller ID DTMF start and end codes that the global clid dtmf-codes configuration specifies.
The following example shows how to configures a noncountry, standard caller ID mode of DTMF with a start code A and end code C:
voice-port 1/0/0
   station name A-sample
   station number 4085550111
   caller-id enable
   caller-id mode DTMF start A end C
clid dtmf-codes
To specify global caller ID dual-tone multifrequency (DTMF) start, redirect, and end codes, use the clid dtmf-codes command in voice service pots configuration mode. To disable the effect of the command, delete the command from the CLI add-on feature template.
clid dtmf-codes start-code redirect-code end-code
Syntax Description
dtmf-codes
Defines the DTMF codes.
start-code
Global start code for the DTMF caller ID string.
Valid characters are:
Capital letters A through D
Numbers 0 through 9
Asterisk ( * )
Pound sign ( # )
redirect-code
Global redirect code for the DTMF caller ID string.
Valid characters are:
Capital letters A through D
Numbers 0 through 9
Asterisk ( * )
Pound sign ( # )
end-code
Global end code for the DTMF caller ID string.
Valid characters are:
Capital letters A through D
Numbers 0 through 9
Asterisk ( * )
Pound sign ( # )
Command Default
The methods for global caller ID DTMF start, redirect, and end codes are not set.
Command Modes
voice service pots configuration (conf-voi-serv)
Command History
Release Modification
Cisco IOS XE Release 17.8.1a
This command was introduced.
Usage Guidelines
This command is used to configure the global caller ID DTMF codes that are used if the caller-id mode DTMF command in voice-port x/y/z configuration mode is not configured.
The following example shows how to configure global caller ID DTMF start, redirect, and end codes to be A, B, and C, respectively:
voice service pots
      clid dtmf-codes ABC
codec preference
To specify a list of preferred codecs to use on a dial peer, use the codec preference command in voice class configuration mode. To disable this functionality, use the no form of this command.
codec preference value [ codec-type [ bytes payload-size | mode mode-value ] ]
no codec preference
Syntax Description
value
Order of preference. 1 is the most preferred and 24 is the least preferred.
codec-type
Preferred codec. Values are as follows:
g711alaw --G.711 a-law 64,000 bps.
g711ulaw --G.711 mu-law 64,000 bps.
g722-64 --G.722-64 at 64,000 bps.
g729r8 --G.729 8000 bps.
ilbc --internet Low Bitrate Codec (iLBC) at 13,330 bps or 15,200 bps.
If this option is not specified, the dial peer uses the default codec for all calls.
bytes payload-size
(Optional) Specifies that the size (bytes) of the voice payload of each frame. Values depend on the codec type and the packet voice protocol.
Applicable to:
g711alaw
g711ulaw
g722-64
g729r8
mode mode-value
(Optional, applies only to the internet low bitrate codec (iLBC), specified with the ilbc option.) Specifies bitrate. The following are valid values:
20: Configures 15.2 kbps
30: Configures 13.33 kbps
The default value is 20.
Command Default
If this command is not entered, no specific types of codecs are identified with preference.
Command Modes
voice class configuration (config-class)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE codec preference command.
voice class codec 1000
  codec preference 1 g729r8
  codec preference 2 g711ulaw bytes 160
  codec preference 3 g711alaw bytes 160
  codec preference 4 g722-64 bytes 160
credentials
To enter credentials configuration mode to configure a certificate for a Cisco Unified Communications Manager Express Certificate Ttrust List (CTL) provider or for Cisco Unified Survivable Remote Site Telephony (SRST) router communication to Cisco Unified Communications Manager, use the credentials command in global configuration mode. To set all the commands that are present in credentials configuration mode to the default nonsecure, use the no form of this command.
credentials
no credentials
Syntax Description
This command has no arguments or keywords.
Command Default
Nonsecure, so credentials are not provided.
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.10.1a
This command was introduced.
Usage Guidelines
The credential server provides certificates to any device that requests a certificate. The credentials server does not request any data from a client, and so, no authentication is necessary. When the client, Cisco Unified Communications Manager, requests a certificate, the credentials server provides the certificate. Cisco Unified Communications Manager exports the certificate to the phone, and the Cisco Unified IP phone holds the SRST router certificate in its configuration file. The device certificate for secure SRST routers is placed in the configuration file of the Cisco Unified IP phone because the entry limit in the CTL of Cisco Unified Communications Manager is 32.
Credentials service for SRST runs on default port 2445. Cisco Unified Communications Manager connects to port 2445 on the secure SRST router and retrieves the secure SRST device certificate during the TLS handshake.
Activate this command on all SRST routers.
Caution: For security reasons, credentials service should be deactivated on all the SRST routers after the task of provisioning to Cisco Unified Communications Manager is completed.
The following example shows how to enter credentials configuration mode and set the IP source address and the trustpoint:
credentials
  ip source-address 10.6.21.4 port 2445
  trustpoint srstca
   
description (dial-peer voice voip)
To add a description consisting of a line of up to 64 characters to describe a dial peer, use the description command in dial peer configuration mode. To delete the description, use the no form of this command.
description string
no description
Syntax Description
string
Description of dial peer, up to 64 characters.
Command Modes
Dial peer configuration (config-dial-peer)
Usage Guidelines
Use this command to include descriptive text about the dial peer. The description appears in show command output and does not affect the operation of the dial peer.
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE description command.
dial-peer voice 2000 voip
  description inbound PSTN calls
destination-pattern
To specify either the prefix or the full E.164 telephone number to be used for a dial peer, use the destination-pattern command in dial peer configuration mode.
destination-pattern string
no destination-pattern string
Syntax Description
string
Series of digits that specify a pattern for the E.164 or private dialing plan telephone number. Valid entries are the digits 0 through 9, the letters A through D, and the following special characters:
The asterisk (*) and pound sign (#) that appear on standard touch-tone dial pads.
Comma (,), which inserts a pause between digits.
Period (.), which matches any entered digit (this character is used as a wildcard).
Percent sign (%), which indicates that the preceding digit occurred zero or more times; similar to the wildcard usage.
Circumflex (^), which indicates a match to the beginning of the string.
Dollar sign ($), which matches the null string at the end of the input string.
Backslash symbol (\), which is followed by a single character, and matches that character. Can be used with a single character with no other significance (matching that character).
Question mark (?), which indicates that the preceding digit occurred zero or one time.
Brackets ([ ]), which indicate a range. A range is a sequence of characters enclosed in the brackets; only numeric characters from 0 to 9 are allowed in the range.
Parentheses (( )), which indicate a pattern and are the same as the regular expression rule.
Command Modes
Dial peer configuration (config-dial-peer)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
Use the destination-pattern command to define the E.164 telephone number for a dial peer.
The pattern you configure is used to match dialed digits to a dial peer. The dial peer is then used to complete the call. When a router receives voice data, it compares the called number (the full E.164 telephone number) in the packet header with the number configured as the destination pattern for the voice-telephony peer. The router then strips out the left-justified numbers that correspond to the destination pattern. If you have configured a prefix, the prefix is prepended to the remaining numbers, creating a dial string that the router then dials. If all numbers in the destination pattern are stripped out, the user receives a dial tone.
For usage guidelines, see the Cisco IOS XE destination-pattern command.
dial-peer voice 1000 voip
  description         Branch 1
  
  destination-pattern 1T
  no shutdown
  voice-class codec 1000
  session transport udp
  session protocol sipv2
  session target ipv4:10.1.101.8
  dtmf-relay rtp-nte digit-drop sip-kpml sip-notify
dial-peer voice (VOIP)
To define a particular dial peer, to specify the method of voice encapsulation, and to enter dial peer configuration mode, use the dial-peer voice command in global configuration mode. To delete a defined dial peer, use the no form of this command.
dial-peer voice dial-peer-tag voip
no dial-peer voice
dial-peer-tag
Dial peer tag.
Command Default
No dial peer is defined. No method of voice encapsulation is specified.
Command Modes
Global configuration (config)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
Use the dial-peer voice global configuration command to switch to dial peer configuration mode from global configuration mode and to define a particular dial peer. Use the exit command to exit dial peer configuration mode and return to global configuration mode.
For usage guidelines, see the Cisco IOS XE dial-peer voice command.
dial-peer voice 1000 voip
  description         Branch 1
  
  destination-pattern 1T
  no shutdown
  voice-class codec 1000
  session transport udp
  session protocol sipv2
  session target ipv4:10.1.101.8
  dtmf-relay rtp-nte digit-drop sip-kpml sip-notify
dtmf-relay (VOIP)
To specify how a Session Initiation Protocol (SIP) gateway relays dual tone multifrequency (DTMF) tones between telephony interfaces and an IP network, use the dtmf-relay command in dial peer voice configuration mode. To remove all signaling options and send the DTMF tones as part of the audio stream, use the no form of this command.
dtmf-relay { rtp-nte [ digit-drop | sip-info | sip-kpml | sip-notify ] | sip-info [ rtp-nte [ digit-drop ] | sip-kpml | sip-notify ] | sip-kpml [ rtp-nte [ digit-drop ] | sip-info | sip-notify ] | sip-notify [ rtp-nte [ digit-drop ] | sip-info | sip-kpml ] }
no dtmf-relay { rtp-nte | sip-info | sip-kpml | sip-notify }
Syntax Description
rtp-nte
Forwards DTMF tones by using RTP with the Named Telephone Event (NTE) payload type.
digit-drop
Passes digits out-of-band and drops in-band digits.
Note
  The digit-drop keyword is only available when the rtp -nte keyword is configured.
sip-info
Forwards DTMF tones using SIP INFO messages. This keyword is available only if the VoIP dial peer is configured for SIP.
sip-kpml
Forwards DTMF tones using SIP KPML over SIP SUBSCRIBE/NOTIFY messages. This keyword is available only if the VoIP dial peer is configured for SIP.
sip-notify
Forwards DTMF tones using SIP NOTIFY messages. This keyword is available only if the VoIP dial peer is configured for SIP.
Command Default
DTMF tones are disabled and sent in-band. That is, they are left in the audio stream.
Command Modes
Dial peer voice configuration
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE dtmf-relay (Voice over IP) command.
dial-peer voice 1000 voip
  description Branch 1
  
  destination-pattern 1T
  no shutdown
  voice-class codec 1000
  session transport udp
  session protocol sipv2
  session target ipv4:10.1.101.8
  dtmf-relay rtp-nte digit-drop sip-kpml sip-notify
hunt-scheme least-used
To enable the least used search method for finding an available channel in a trunk group for outgoing calls, use the hunt -scheme least -used command in trunk group configuration mode. To delete the hunt scheme from the trunk group profile, use the no form of the command.
Supported Parameters
both
Searches both even- and odd-numbered channels.
even
Searches for an idle even-numbered channel. If no idle even-numbered channels are available, an odd-numbered channel is sought.
odd
Searches for an idle odd-numbered channel. If no idle odd-numbered channels are available, an even-numbered channel is sought.
up
Searches channels in ascending order based within a trunk group member. Used with even , odd , both .
down
Searches channels in descending order within a trunk group member. Used with even , odd , both .
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE hunt-scheme least-used command.
hunt-scheme round-robin
To enable the round robin search method for finding an available channel in a trunk group for outgoing calls, use the hunt -scheme round -robin command in trunk group configuration mode. To delete the hunt scheme from the trunk group profile, use the no form of this command.
Supported Parameters
both
Searches for an idle channel among both even- and odd-numbered channels at the same precedence.
even
Searches for an idle even-numbered channel. If no idle even-numbered channel is available, an odd-numbered channel is used.
odd
Searches for an idle odd-numbered channel. If no idle odd-numbered channel is available, an even-numbered channel is used.
up
Searches channels in ascending order based within a trunk group member. Used with even , odd , both .
down
Searches channels in descending order within a trunk group member. Used with even , odd , both .
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE hunt-scheme round-robin command.
hunt-scheme sequential
To specify the sequential search method for finding an available channel in a trunk group for outgoing calls, use the hunt -scheme sequential command in trunk group configuration mode. To delete the hunt scheme from the trunk group profile, use the no form of this command.
Supported Parameters
both
Searches both even- and odd-numbered channels.
even
Searches for an idle even-numbered channel. If no idle even-numbered channel is available, an odd-numbered channel is sought.
odd
Searches for an idle odd-numbered channel. If no idle odd-numbered channel is available, an even-numbered channel is sought.
up
Searches channels in ascending order based within a trunk group member. Used with even , odd , both .
down
Searches channels in descending order within a trunk group member. Used with even , odd , both .
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE hunt-scheme sequential command.
hunt-scheme sequential [both | even | odd] [up | down] 
id network
To configure the IPv4 prefixes of the network that contains IP phones that Survivable Remote Site Telephony (SRST) supports, use the id network command in voice register pool configuration mode. To remove the prefixes, use the no form of this command.
id network address mask mask
Syntax Description
address
Specifies the IPv4 prefix.
mask
Specifies the IP subnet mask.
Command Default
This command has no default behavior.
Command Modes
Voice register pool configuration (config-register-pool)
Command History
Release Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
The command can be used to configure the IPv4 prefixes of the network that contains the IP phones that SRST supports.
Example
The following example show how to configure 10.10.10.0/24 as the network that contains the IP phones that the SRST feature supports.
Device(config)# voice register pool 100
Device(config-register-pool)# id network 10.10.10.0 mask 255.255.255.0
Related Commands
Command
Description
voice register pool
Enters voice register pool configuration mode.
keepalive retries
To set the number of keepalive retries from Skinny Client Control Protocol (SCCP) to Cisco Unified CallManager, use the keepalive retries command in SCCP Cisco CallManager configuration mode. To reset this number to the default value, use the no form of this command.
Supported Parameters
number
Number of keepalive attempts. Range is 1 to 32. Default is 3.
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE keepalive retries command.
bind interface <interface-name-slot/bay/port>
keepalive retries <1-32>
sccp ip precedence <1-7>
keepalive timeout
To set the length of time between keepalive messages from Skinny Client Control Protocol (SCCP) to Cisco Unified CallManager, use the keepalive timeout command in SCCP Cisco CallManager configuration mode. To reset the length of time to the default value, use the no form of this command.
Supported Parameters
seconds
Time between keepalive messages. Range is 1 to 180. Default is 30.
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE keepalive timeout command.
bind interface <interface-name-slot/bay/port>
keepalive timeout <0-180>
sccp ip precedence <1-7>
max-dn
To set the maximum number of extensions to be supported by a Cisco Unified SIP SRST router, use the max-dn command in voice register global mode (voice register global ). To reset this number to the default value, use the no form of this command.
max-dn max-directory-numbers
no max-dn
Syntax Description
max-directory-numbers
Maximum number of phone directory numbers to allow in the Cisco Unified SIP SRST system. The maximum you can set depends on the software version, router platform, and amount of memory that you have installed. Type ? to display range. The default is 0.
Command Default
The default is 0.
Command Modes
Voice register global
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
The max-dn command limits the number of directory numbers available in a Cisco Unified SIP SRST system. The maximum number of ephone-dns that you can create depends on the software version, router platform, and amount of memory that you have installed. Type ? to display range.
 voice register global
  max-dn   200
  max-pool 100
  system message "SRST mode"
max-pool
To set the maximum number of Session Initiation Protocol (SIP) voice register pools that are supported in Cisco Unified SIP SRST, use the max-pool command in voice register global configuration mode (voice register global ). To reset the maximum number to the default, use the no form of this command.
max-pool max-voice-registers-pools
no max-pool
Syntax Description
max-voice-registers-pools
Maximum number of SIP voice register pools supported by the Cisco router. The upper limit of voice register pools is platform-dependent; type ? for range.
Command Modes
Voice register global configuration (config-register-global)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
This command limits the number of SIP phones supported by Cisco Unified SIP SRST. The max-pool command is platform specific and defines the limit for the voice register pool command.
The max-dn command similarly limits the number of directory numbers (extensions) in Cisco Unified SIP SRST.
voice register global
  max-dn   200
  max-pool 100
  system message "SRST mode"
registrar server
To enable SIP registrar functionality, use the registrar server command in SIP configuration mode (voice service voip, then sip ). To disable SIP registrar functionality, use the no form of the command.
registrar server expires [ max sec [ min sec ] | min sec ]
no registrar server
Syntax Description
expires
(Optional) Sets the active time for an incoming registration.
maxsec
(Optional) Maximum expires time for a registration, in seconds. The range is from 600 to 86400. The default is 3600.
minsec
(Optional) Minimum expires time for a registration, in seconds. The range is from 60 to 3600. The default is 60.
Command Default
SIP registrar functionality on the Cisco Unified SRST router is disabled.
Command Modes
SIP configuration (conf-serv-sip)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
This command enables SIP phone registrations to SIP SRST during fallback mode. If this command is not entered, then phones will not register to SRST.
voice service voip
  
  allow-connections sip to sip
  no supplementary-service sip handle-replaces
  no supplementary-service sip moved-temporarily
  no supplementary-service sip refer
  sip
   registrar server expires max 300 min 200
security-policy (voice register global)
To define the security level of Session Initiation Protocol (SIP) phones allowed to register, use the security-policy command command in voice register global configuration mode. To return to the default, use the no form of this command.
security-policy secure
no security-policy secure
Syntax Description
secure
Requires SIP phones to use Transport Layer Security (TLS) for signaling transport. Non\-secure SIP phones are blocked from registering. This functionality is valid for Cisco Unified Survivable Remote Site Telephony (SRST).
Command Default
Phones of all security levels are permitted to register, which also is referred to as device-default mode.
Command Modes
Voice register global configuration (config-register-global)
Command History
Release Modification
Cisco IOS XE Release 17.10.1a
This command was introduced.
Usage Guidelines
The secure keyword configures the SIP registration security policy so that only encrypted phones can register to the Cisco Unified SRST device in the event of a failover from the primary call control. When this keyword is configured, nonsecure phones that use TCP or UDP for signaling transport, and authenticated phones that use TLS/TCP for signaling transport are blocked from registering.
The following example shows that only registration requests from encrypted SIP phones in a Cisco Unified SRST system are permitted:
voice register global
  security-policy secure
session protocol
To configure the session protocol for dial peer, use the session protocol command in dial-peer group configuration mode. To remove the session protocol configuration, use the no form of this command.
session protocol sipv2 [ target target ]
Syntax Description
target target
Specifies the IP address of the target to forward voice calls.
Example: ipv4:10.1.101.8
Command Default
Session Initiation Protocol (SIP) version 2 is the only supported protocol for voice dial peer with Cisco SD-WAN.
Command Modes
Dial-peer group configuration (config-dial-peer)
Command History
Release Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
The command can be used to configure SIP v2 as the session protocol. In addition, you can configure an IPv4 address as target to route the call towards for outbound VOIP dial-peers.
Example
The following examples show how to configure SIPv2 as the session protocol for a voice dial-peer, and configure the IP 10.1.101.8 as target to route the call to for outbound VOIP dial-peers.
Device(config)# dial-peer voice 1000 voip
Device(config-dial-peer)# session protocol sipv2 target ipv4:10.1.101.8
Device(config)#  dial-peer voice 1000 voip
Device(config-dial-peer)# session protocol sipv2
Device(config-dial-peer)# session target ipv4:10.1.101.8
Related Commands
Command
Description
dial-peer voice
Enter dial-peer group configuration mode.
session-transport
To specify the transport layer protocol that a SIP phone uses to connect to Cisco Unified SIP gateway, use the session-transport command in voice service voip sip or dial-peer voice modes. To reset to the default value, use the no form of this command.
session-transport { tcp [ tls ] | udp }
no session-transport
Syntax Description
tcp
Transmission Control Protocol (TCP) is used.
tls
(Available only with the tcp option) Transport layer security (TLS) over TCP.
udp
User Datagram Protocol (UDP) is used. This is the default.
Command Default
UDP is the default protocol.
Command Modes
voice service voip sip
dial-peer voice
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
This command sets the transport layer protocol parameter in the phone’s configuration file.
dial-peer voice 8000 voip
  description         Branch 7
   destination-pattern 8T
  no shutdown
  voice-class codec 1000
  session transport udp
  session protocol sipv2
  session target ipv4:10.1.101.8
  dtmf-relay rtp-nte digit-drop sip-kpml sip-notify
sccp ip precedence
To set the IP precedence value to be used by Skinny Client Control Protocol (SCCP), use the sccp ip precedence command in global configuration mode. To reset to the default, use the no form of this command.
Supported Parameters
value
IP precedence value. Range is from 1 (lowest) to 7 (highest).
Command History
Command History
Release
Modification
Cisco IOS XE Release 17.5.1a
Command qualified for use in Cisco SD-WAN Manager CLI templates.
Usage Guidelines
For more information about this command, see the Cisco IOS XE sccp ip precedence command.
bind interface <interface-name-slot/bay/port>
keepalive retries <1-32>
keepalive timeout <0-180>
sccp ip precedence <1-7>
system message (voice register global)
To define a message that displays on SIP phones in a Cisco Unified Survivable Remote Site Telephony (Cisco Unified SRST) system, use the system message command in voice register global configuration mode (accessible using the voice register global command). To return to the default, use the no form of this command.
system message string
no system message
Syntax Description
string
Message that displays on SIP phones after the phones failover to Cisco Unified SRST. The string can contain a maximum of 32 alphanumeric characters.
Command Default
There is no default message.
Command Modes
Voice register global configuration (config-register-global)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
The command allows you to customize the idle prompt message that displays on the status line of SIP phones after the phones lose connection with Cisco Unified Communications Manager and failover to Cisco Unified SRST. A configured message displays until the phones fallback to Cisco Unified Communications Manager. There is no default message.
voice register global
  max-dn   200
  max-pool 100
  system message "SRST mode"
sip
To enter the Session Initiation Protocol (SIP) configuration mode, use the sip command in voice-service VoIP configuration mode.
sip
Syntax Description
This command has no arguments or keywords.
Command Default
No default behavior or values.
Command Modes

Voice-service VoIP configuration (config-voi-srv)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
From the voice-service VoIP configuration mode, the sip command enables you to enter SIP configuration mode.
For usage guidelines, see the Cisco IOS XE sip command.
voice service voip
  
  allow-connections sip to sip
  no supplementary-service sip handle-replaces
  no supplementary-service sip moved-temporarily
  no supplementary-service sip refer
  sip
   registrar server expires max 300 min 200
sip-ua
To enable Session Initiation Protocol (SIP) user-agent configuration commands, use the sip-ua command in global configuration mode. To reset all SIP user-agent configuration commands to their default values, use the no form of this command.
sip-ua
no sip-ua
Syntax Description
This command has no arguments or keywords.
Command Default
If this command is not enabled, no SIP user-agent configuration commands can be entered.
Command Modes

Global configuration (config)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE sip-ua command.
The following example shows how to enter SIP user-agent configuration mode and configure the SIP user agent:
Device> enable
Device# configure terminal
Device(config)# sip-ua
supplementary-service sip
To enable SIP supplementary service capabilities for call forwarding and call transfers across a SIP network, use the supplementary-service sip command in voice service VOIP configuration mode (voice service voip ). To disable supplementary service capabilities, use the no form of this command.
supplementary-service sip { handle-replaces [ moved-temporarily ] [ refer ] | moved-temporarily [ handle-replaces ] [ refer ] | refer [ handle-replaces ] [ moved-temporarily ] }
no supplementary-service sip { handle-replaces | moved-temporarily | refer }
Syntax Description
handle-replaces
Replaces the Dialog-ID in the Replaces Header with the peer Dialog-ID.
moved-temporarily
Enables SIP Redirect response for call forwarding.
refer
Enables SIP REFER message for call transfers.
Command Default
SIP supplementary service capabilities are enabled globally.
Command Modes
Voice service configuration (conf-voi-serv)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
For usage guidelines, see the Cisco IOS XE supplementary-service sip command.
 voice service voip
  
  allow-connections sip to sip
  no supplementary-service sip handle-replaces
  no supplementary-service sip moved-temporarily
  no supplementary-service sip refer
  sip
   registrar server expires max 300 min 200
translation-profile (voice register)
To apply a translation profile to incoming or outgoing call legs on a SIP phone in a Cisco Unified Survivable Remote Site Telephony (SRST) system, use the translation-profile command in voice register dn or voice register pool configuration mode. To remove the translation profile, use the no form of this command.
translation-profile { incoming | outgoing } name
no translation-profile { incoming | outgoing }
Syntax Description
incoming
Specifies that this translation profile handles incoming calls.
outgoing
Specifies that this translation profile handles outgoing calls.
name
Name of the translation profile.
Command Default
Translation profile is not assigned to call legs on the phone.
Command Modes
Voice register dn configuration (config-register-dn)
Voice register pool configuration (config-register-pool)
Command History
Release Modification
Cisco IOS XE Release 17.10.1a
This command was introduced.
Usage Guidelines
This command assigns a predefined translation profile to incoming or outgoing call legs to and from the Cisco Unified SRST router. Use this command to apply the translation profile to a specific directory number or to all directory numbers on a SIP phone. Create the translation profile that you want to assign is created by using the voice translation-profile command.
The following example assigns the translation profile named profile1 to handle translation of outgoing calls from SIP phone 21:
voice register pool 21
  translation-profile outgoing profile1
The following example assigns the translation profile named profile2 to handle translation of incoming calls to extension 1200:
voice register dn 12
  number 1200
  translation-profile incoming profile2
voice-class codec (voice register pool)
To assign a previously configured codec selection preference list, use the voice-class codec command in voice register pool configuration mode. To remove the codec preference assignment from the voice register pool, use the no form of this command.
voice-class codec tag
no voice-class codec
Syntax Description
tag
Unique number assigned to the voice class. Range is from 1 to 10000.
The tag number maps to the tag number created by using the voice-class codec command in dial-peer configuration mode.
Command Default
There is no codec preference assignment in the voice register pool configuration.
Command Modes
Voice register pool configuration mode
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
During Cisco Unified Session Initiation Protocol (SIP) Survivable Remote Site Telephony (SRST) registration, a dial peer is created and that dial peer includes codec g729r8 by default. This command allows you to change the automatically selected default codec.
The id (voice register pool) command is required and must be configured before any other voice register pool commands. The id command identifies a locally available individual Cisco SIP IP phone or set of Cisco SIP IP phones.
dial-peer voice 8000 voip
  description Branch 7
   destination-pattern 8T
  no shutdown
  voice-class codec 1000
  session transport udp
  session protocol sipv2
  session target ipv4:10.1.101.8
  dtmf-relay rtp-nte digit-drop sip-kpml sip-notify
voice-class codec (dial peer voice)
To assign a previously configured codec selection preference list (codec voice class) to a voice over IP (VoIP) dial peer, use the voice-class codec command in dial-peer configuration mode. To remove the codec preference assignment from the dial peer, use the no form of this command.
voice-class codec tag
no voice-class codec
Syntax Description
tag
Unique number assigned to the voice class. Range: 1 to 10000.
The tag number maps to the tag number created using the voice class codec global configuration command.
Command Default
Dial peers have no codec voice class assigned.
Command Modes
Dial peer voice configuration (config-dial-peer)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
You can assign one voice class to each VoIP dial peer. If you assign another voice class to a dial peer, the last voice class assigned replaces the previous voice class.
dial-peer voice 100 voip
  voice-class codec 10
voice class codec
To enter voice-class configuration mode and assign an identification tag number for a codec voice class, use the voice class codec command in global configuration mode. To delete a codec voice class, use the no form of this command.
voice class codec tag value
Syntax Description
tag
Lets you specify the unique number that you assign to the voice class. Range is from 1 to 10000. There is no default.
value
Specifies the order of preference. 1 is the most preferred and 24 is the least preferred value.
Command Default
This command has no default behavior.
Command Modes
Global configuration (config)
Command History
Release Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Usage Guidelines
This command only creates the voice class for codec selection preference and assigns an identification tag. Use the codec preference command inside the codec class mode to specify the preference of the voice codec.
Example
The following example show how to configure voice class for codec selection preference and assigns 1 as identification tag.
Device(config)# voice class codec 1
Device(config-class)# codec preference 1 g729r8
Device(config-class)# codec preference 2 g711alaw
voice register global
To enter voice register global configuration mode in order to set global parameters for all supported Cisco SIP IP phones in a Cisco Unified Session Initiation Protocol (SIP) Survivable Remote Site Telephony (SRST) environment, use the voice register global command in global configuration mode. To automatically remove the existing DNs, pools, and global dialplan patterns, use the no form of this command.
voice register global
no voice register global
Syntax Description
This command has no arguments or keywords.
Command Default
There are no system-level parameters configured for SIP IP phones.
Command Modes
Global configuration (config)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Cisco Unified SIP SRST
Use this command and configure max-pool and max-dn to all SIP phone registrations to SRST.
voice register global
  max-dn   200
  max-pool 100
  system message "SRST mode"
voice register pool
To enter voice register pool configuration mode and create a pool configuration for a set of SIP phones in Cisco Unified SIP SRST, use the voice register pool command in global configuration mode. To remove the pool configuration, use the no form of this command.
voice register pool pool-tag
no voice register pool pool-tag
Syntax Description
pool-tag
Unique number assigned to the pool.
Command Default
There is no pool configured.
Command Modes
Global configuration (config)
Command History
Release
Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Cisco Unified SIP SRST
Use this command to enable user control on which registrations are to be accepted or rejected by a SIP SRST device. The voice register pool command mode can be used for specialized functions and to restrict registrations on the basis of the IP subnet parameter.
voice register global
  max-dn   200
  max-pool 100
  system message "SRST mode"
 voice register pool 100
  id network 10.0.0.0 mask 255.0.0.0
voice service voip
To configure voice-service VoIP, use the voice service voip command in global configuration mode. To remove the VoIP voice service, use the no form of this command.
voice service voip
Command Default
This command has no default behavior.
Command Modes
This command has no default behavior.
Command History
Release Modification
Cisco IOS XE Release 17.2.1v
Command qualified for use in Cisco vManage CLI templates.
Example
The following example show how to configure voice-service VoIP.
Device(config)# voice service voip
Was this Document Helpful?
Yes No
Feedback
Customers Also Viewed
Cisco SD-WAN Systems and Interfaces Configuration Guide, Cisco IOS XE Release 17.x --- Cisco Unified Communications Voice Services
Identify vEdge Certificate Expired on May 9, 2023
Cisco SD-WAN Getting Started Guide --- Install and Upgrade Cisco IOS XE Release 17.2.1r and Later
+ Show 3 More
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)