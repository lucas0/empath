Technical References
Cisco Cloud Services Platform REST API Guide
Save
Download
Print

Updated:April 18, 2019
Bias-Free Language
Cisco Cloud Services Platform REST API Guide
First Published: 2018-10-15
Last Updated: 2020-12-21
    Contents    
Contents
Information About the Cisco CSP REST API
Supported Response Formats
Supported Response Formats in Release 2.1.0 and Later Releases
Supported Response Formats in Release 1.0 and 2.0.0
List of Available Modules
REST APIs
Authentication, Authorization, and Accounting (AAA) APIs
Get Information About AAA Authentication Server Configuration and Caching Timeout
Specify the AAA Authentication Server
Specify the Timeout for AAA Authentication Response
Banner APIs
Configure the Pre-Login Banner
Delete the Pre-Login Banner
Configure the MOTD Banner
Delete the MOTD Banner
Configuration File APIs
Save a Running Configuration
Load a Saved Configuration
Cluster APIs
Get Information About Clusters
Create a Cluster
Add Members to a Cluster
Replace Cluster Members
Delete a Member from a Cluster
Delete a Cluster
Enable Node Failure detection and VNF Service migration
Update Node Eviction Parameters
Enable Storage Network
Enable Configuration Sync for Cluster
Update Configuration Sync
Collected Package API
Factory Default Reset API
Installation and Upgrade APIs
Patch Upgrade APIs
Patch Upgrade Cisco CSP 2100 Release Notes
Patch Upgrade Cisco CSP 2100 software
Check Status of Patch Upgrade
NTP Server APIs
Get Information About NTP Servers
Get Information About NTP Server Status
Add an NTP Server
Delete an NTP Server
Port Isolation APIs
Get Status Information About Port Isolation of VNF
Enable or Disable Port Isolation of VNF
OVS DPDK APIs
Get Status Information About OVS DPDK
Enable or Disable OVS with DPDK
pNIC APIs
Get Information About pNICs
Get Statistics for pNICs
Modify a pNIC
Get Information about LLDP Configuration
Enable or Disable LLDP
Create a Port Channel
Assign a pNIC to a Port Channel
Configure Link State Tracking of Individual pNIC
Delete a Port Channel
Get Description About an Individual pNIC
Configure Description of an Individual pNIC
Modify the Description of an Individual pNIC
Delete the Description of an Individual pNIC
Get Information About LLDP Neighbors
Configure Card Mode of an Individual pNIC
RADIUS APIs
Get Information About the RADIUS Servers
Add a RADIUS Server
Configure Timeout Duration
Configure Retransmit Count
Delete a RADIUS Server
Repository APIs
Get Information About All Files
Get Information About a File
Get Information About a Remote File
Copy Files  to Cisco CSP 2100
Create New Text File
Copy Files from Cisco CSP 2100 (Release 2.2.3 and Later Releases)
Copy Files from Cisco CSP 2100 (Release 2.2.2)
Delete an Image File
Rename an Image File
Resource APIs
Get Information About a Resource
Modify a Resource
Delete a Configured Resource Feature
Configure ACL Access for the Management Interface
Configure break
Add an NFS Storage Space
Delete an NFS Storage Space
Get Information About the CSP 2100 Version
Get Description About the CSP 2100 Resource
Configure Description of the CSP 2100 Resource
Modify the Description of the CSP 2100 Resource
Delete the Description of the CSP 2100 Resource
Services APIs
Get Information About Services
Create or Import a Service
Retain UUID of a Service
Get Description About a Service
Modify the Description of a Service
Delete the Description of a Service
Modify the Emulator-Pin of a Service
Get Mapping Information Between Physical CPUs and Virtual CPUs
Export a Service
Cancel Exporting a Service
Assign vNICs to a Service
SPAN and TCPDump vNICs
Get Information About vNIC, VF MAC Addresses, and SRIOV Interfaces
Assign Serial Port to a Service
Add VM Monitoring to a Service
Get VM Monitoring Information About a Service
Create VNF User Groups
Delete VNF User Group from Service
Modify VNF User Group of Service
Add Storage Disks to a Service
Delete Storage Disks
Saving .img File of Services
Delete Services
Session APIs
Get Information About Configured Session Idle Timeout
Configure Session Idle Timeout
SNMP APIs
Get Information About SNMP Agents
Configure Engine ID of an SNMP Agent
Get Information About SNMP Communities
Create or Modify an SNMP Community
Delete an SNMP Community
Get Information About SNMP Groups
Create or Modify an SNMP Group
Delete SNMP Groups
Get Information About SNMP Users
Create or Modify an SNMP User
Delete an SNMP User
Get Information About SNMP Hosts
Create or Modify an SNMP Host
Delete SNMP Hosts
Configure an SNMP Trap
Get Information About SNMP Server Agents
Get Information About SNMP Server View
Create or Modify an SNMP Server View
Get Information About SNMP Server Community
Configuring an SNMP Server Community
Get Information About SNMP Server Group
Specifying an SNMP Server Group Name
Get Information About SNMP Server User
Configuring an SNMP Server User
Get Information About SNMP Server Host
Configuring an SNMP Server Host
Get Information About SNMP Server Contact
Configuring SNMP Server Contact Information
Get Information About SNMP Server Location
Configuring SNMP Server Location Information
Get Information About SNMP Server EngineID
Configuring SNMP Server EngineID Information
Get Information About SNMP Server enable
Configure SNMP Server Enable
Delete SNMP Traps
Get Information About SNMP Traps
System APIs
Get CPU Pinning Status
Enable or Disable CPU Pinning
Get Information About Disk I/O Statistics
TACACS+ APIs
Get Information About TACACS+ Servers
Add or Modify a TACACS+ Server
Delete a TACACS+ Server
Time Zone APIs
Get Information About the Time Zone
Configure the Time Zone for Cisco CSP 2100
Change the Time Zone for Cisco CSP 2100
Delete the Configured Time Zone
Technical Support Information API
Generate Technical Support Information
User APIs
Get Information About the Cisco CSP 2100 Users
API History
Create a New User
Change a User’s Password
Release 2.2.2 and Later Releases
Release 2.1.0
Change a User’s Group
Delete a User
Get Status Information about Password Expiry
Enable or Disable Password Expiry on CSP
Enable or Disable TPM based Disk Encryption
vNICs APIs
Get Statistics for vNICs
Get Bandwidth for vNICs
Configure vNIC Bandwidth
Get Adminstatus of vNICs
Configure vNIC Adminstatus
Start, Stop, Show Counters APIs
Obtaining Documentation and Submitting a Service Request

  Information About the Cisco CSP REST API
You can perform operations on the Cisco Cloud Services Platform (Cisco CSP) objects using the Representational State Transfer (REST) API. The Cisco CSP 2100 REST APIs support create, retrieve, update, and delete (CRUD) operations. To call any REST function, you can use tools such as a web browser, the cURL tool, or Windows PowerShell. If you are using a web browser, type the URL. If you are using cURL or Windows PowerShell, use the following format:
curl –u username:password -X method https://ip-address:port_number/api/module locator
  Note: Starting with Release 2.1.0, Cisco CSP 2100 supports only port 443. Therefore, you do not need to specify the port number (port_number).
The module locator consists of two parts: a namespace and a module name.
module locator := namespace/module name
  The namespace indicates the broader class of functions and the module name refers to the specific object. For example:
curl –u admin:admin -X GET https://10.10.10.2:443/api/running/clusters
  In this example, running is the namespace and clusters is the module name.
Supported Response Formats
Supported Response Formats in Release 2.1.0 and Later Releases
Starting with Release 2.1.0, Cisco CSP 2100 supports only JSON format on port 443 for REST API response. You do not need to specify the port number in the REST API.
curl -u admin:admin -X GET https://10.10.10.2/api/running/pnics
{"pnic:pnics": {"pnic": [{"name": "Eth4-0"}, {"name": "Eth4-1"}, {"name": "Eth4-2"}, {"name": "Eth4-3"}, {"name": "Eth7-0"}, {"name": "Eth7-1"}]}}
Supported Response Formats in Release 1.0 and 2.0.0
Cisco CSP 2100 release 2.0.0 and 1.0 support the JSON and XML formats for REST API response. With port 443, JSON response format is supported. With port 8888, XML response format is supported. You need to specify the port number in the REST API.
JSON Response Format Example
curl -u admin:admin -X GET https://10.10.10.2:443/api/running/pnics
{"pnics": {"pnic": [{"name": "Eth4-0"}, {"name": "Eth4-1"}, {"name": "Eth4-2"}, {"name": "Eth4-3"}, {"name": "Eth7-0"}, {"name": "Eth7-1"}]}}
XML Response Format Example
curl -u admin:admin -X GET https://10.10.10.2:8888/api/running/pnics
<pnics xmlns="http://www.cisco.com/ns/test/pnic" xmlns:y="http://tail-f.com/ns/r
st"  xmlns:pnic="http://www.cisco.com/ns/test/pnic">
<pnic>
   <name>Eth4-0</name>
 </pnic>
 <pnic>
   <name>Eth4-1</name>
 </pnic>
 <pnic>
   <name>Eth4-2</name>
 </pnic>
 <pnic>
   <name>Eth4-3</name>
 </pnic>
 <pnic>
   <name>Eth7-0</name>
 </pnic>
 <pnic>
   <name>Eth7-1</name>
  </pnic>
/pnics>
List of Available Modules
Table 1. Available Modules
Module
Description
/api/running/security_servers
Module for specifying the server for AAA authentication, configuring a RADIUS or TACACS+ server.
/api/running/banner
Module for configuring a pre-login or MOTD banner.
/api/running/save-load
Module for saving a configuration to a file or loading a configuration from a file.
/api/running/clusters
Module for creating, deleting, and modifying clusters and for retrieving information about clusters.
/api/running/system
Module for specifying the ISO installation mode.
/api/running/package-install
Module for upgrading the Cisco CSP 2100 software and checking the upgrade status.
/api/running/ntps
Module for creating and deleting an NTP server and for retrieving information about an NTP server.
/api/operational/ntp_status
Module for retrieving information about the NTP server status.
/api/running/pnics
Module for retrieving information about pNICs and modifying pNICs.
/api/operational/pnics
Module for retrieving statistics about pNICs.
/api/operational/lldp
Module for retrieving LLDP neighbor information.
/api/operational/repository
Module for retrieving information about repository files.
/api/running/resources
Module for retrieving information about resources.
/api/running/running/clock
Module for configuring and changing the time zone, and deleting the configured time zone.
/api/running/support
Module for creating technical support information.
/api/running/services
Module for creating, deleting, and modifying services and for retrieving information about services.
/api/running/snmp
Module for creating, deleting, and modifying SNMP communities, groups, hosts, users, and traps.
/api/running/snmp-server
Module for creating, deleting and modifying SNMP view, community, group, user, host, and enabling traps. A new CLI that is compliant with the IOS style CLI with read or write configuration.
/api/running/csp_users
Module for creating, deleting, and modifying users.
/api/operational/vnics
Module for retrieving statistics about vNICs.
REST APIs
Authentication, Authorization, and Accounting (AAA) APIs
Get Information About AAA Authentication Server Configuration and Caching Timeout
Method
GET
Module
https://ip-address:port-number/api/running/security_servers/aaa
Description
Retrieves information about the AAA authentication server and caching time.
Parameters
None
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/aaa
{
  "security:aaa": {
    "authentication": "radius"
    "caching": {
    "rest_req_caching_tmput": 0"         
  }
}
}
API History
Release
Modification
2.7.0
The caching timeout parameter is introduced.
2.2.0
This API is introduced.
Specify the AAA Authentication Server
Method
POST
Module
https://ip-address:port-number/api/running/security_servers/aaa -H "Content-Type:application/vnd.yang.data+json" -d '{"aaa" : {"authentication" : "authentication_server "}}'
Description
Specifies the server to be used for AAA authentication.
Parameters
Name
Description
Importance
authentication_server
Specifies the server for AAA authentication. Valid values are:
·       tacacs: TACACS+ server. This is the default server.
·       radius: RADIUS server.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/security_servers/aaa -H "Content-Type:application/vnd.yang.data+json" -d '{"aaa" : {"authentication" : "radius"}}'
  API History
Release
Modification
2.2.0
This API is introduced.
Specify the Timeout for AAA Authentication Response
Method
PUT
Module
https://ip-address:port-number/api/running/security_servers/aaa -H "Content-Type:application/vnd.yang.data+json" -d '{"aaa" : {"caching" : {"rest_req_caching_tmout" : "caching_timeout "}}}'
Description
Specifies the caching timeout for external authentication responses from TACACS/RADIUS servers for the REST API requests.
Parameters
Name
Description
Importance
caching_timeout
Specifies the time in seconds to cache the external authentication responses. Valid values (seconds) are:
·       1-600: Caching is enabled.
·       0: Caching is disabled.
Required
Example
curl -u admin:admin -X PUT https://192.0.2.130/api/running/security_servers/aaa H "Content-Type:application/vnd.yang.data+json" -d '{"aaa" : {"caching" : {"rest_req_caching_tmout" : "100"}}}'
  API History
Release
Modification
2.7.0
The caching timeout parameter is introduced in the AAA authentication command.
Banner APIs
Configure the Pre-Login Banner
Method
POST
Module
https://ip-address:port-number/api/running/banner -H "Content-type: application/vnd.yang.data+json" -d '{"login":"filename"}'
Description
Configures a banner that is displayed before a user logs in to the Cisco CSP 2100. This banner is displayed on the login page of the web interface and the Cisco CSP 2100 CLI window.
After configuring the pre-login banner, if you make any changes in the banner file, you must do the following:
1.     Remove the banner file by using the following API:
curl -u username:password -X DELETE https://ip-address:port-number/api/running/banner/login -H "Content-type: application/vnd.yang.data+json" -d
For more information about how to delete the banner file, see the Delete the Pre-Login Banner section.
2.     Add the banner file again in the configuration by using the following API:
curl -u username:password -X POST https://ip-address:port-number/api/running/banner -H "Content-type: application/vnd.yang.data+json" -d '{"login":"filename"}'
Changes made in the banner file are not automatically updated in the pre-login banner. 
Parameters
Name
Description
Importance
filename
Name of the banner file available in the Cisco CSP 2100 repository. The banner file can be up to 1024 bytes in size.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/repository/_operations/get_images -H "Content-Type:application/vnd.yang.data+json"
{
  "output": {
    "image": [
      {
        "name": "n1000v-dk9.5.2.1.SV3.1.4.iso "
      },
      {
        "name": "vwaas150.tmp"
      },
      {
        "name": "banner.txt"
      }
    ]
  }
}
curl -u admin:admin -X POST https://192.0.2.130/api/running/banner -H "Content-Type: application/vnd.yang.data+json" -d '{"login":"banner.txt"}'
  API History
Release
Modification
2.1.0
This API is introduced.
Delete the Pre-Login Banner
Method
DELETE
Module
https://ip-address:port-number/api/running/banner/login -H "Content-type: application/vnd.yang.data+json" -d
Description
Deletes the configured pre-login banner.
Parameters
None
Example
curl -u admin:admin -X DELETE https://192.0.2.130/api/running/banner/login -H "Content-Type: application/vnd.yang.data+json" -d
  API History
Release
Modification
2.1.0
This API is introduced.
Configure the MOTD Banner
Method
POST
Module
https://ip-address:port-number/api/running/banner -H "Content-type: application/vnd.yang.data+json" -d '{"motd":"filename"}'
Description
Configures the message-of-the-day (MOTD) banner that is displayed after a user logs in to the Cisco CSP 2100. This banner is displayed in the web interface and the Cisco CSP 2100 CLI window.
After configuring the MOTD banner, if you make any changes in the banner file, you must do the following:
1.     Remove the banner file by using the following API:
curl -u username:password -X DELETE https://ip-address:port-number/api/running/banner/motd -H "Content-type: application/vnd.yang.data+json" -d
For more information about how to delete the banner file, see the Delete the MOTD Banner section.
2.     Add the banner file again in the configuration by using the following API:
curl -u username:password -X POST https://ip-address:port-number/api/running/banner -H "Content-type: application/vnd.yang.data+json" -d '{"motd":"filename"}'
Changes made in the banner file are not automatically updated in the MOTD banner. 
Parameters
Name
Description
Importance
filename
Name of the banner file available in the Cisco CSP 2100 repository. The banner file can be up to 1024 bytes in size.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/repository/_operations/get_images -H "Content-Type:application/vnd.yang.data+json"
{
  "output": {
    "image": [
      {
        "name": "n1000v-dk9.5.2.1.SV3.1.4.iso "
      },
      {
        "name": "vwaas150.tmp"
      },
      {
        "name": "motd.txt"
      }
    ]
  }
}
curl -u admin:admin -X POST https://192.0.2.130/api/running/banner -H "Content-Type: application/vnd.yang.data+json" -d ' {"motd":"motd.txt"}'
  API History
Release
Modification
2.1.0
This API is introduced.
Delete the MOTD Banner
Method
DELETE
Module
https://ip-address:port-number/api/running/banner/motd -H "Content-type: application/vnd.yang.data+json" -d
Description
Deletes the configured MOTD banner.
Parameters
None
Example
curl -u admin:admin -X DELETE https://192.0.2.130/api/running/banner/motd -H "Content-Type: application/vnd.yang.data+json" -d
API History
Release
Modification
2.1.0
This API is introduced.
Configuration File APIs
You can use the configuration file commands described in this section to save the running configuration to the repository and to load the running configuration from the repository to Cisco CSP 2100. If you had to perform a clean installation of Cisco CSP 2100 for any reason, these commands enable you to quickly restore the Cisco CSP configuration settings. For information about saving a running configuration and then loading it, see the Cisco Cloud Services Platform Configuration Guide.
Save a Running Configuration
Method
POST
Module
https://ip-address:port-number/api/running/save-load/_operations/save -H "Content-type: application/vnd.yang.data+json" -d '{"input": {" config-file":"filename"}}'
Description
Saves the running configuration to a file.
Parameters
Name
Description
Importance
filename
Name of the file in which the configuration is saved. This file is saved in the Cisco CSP 2100 repository.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/save-load/_operations/save -H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"config-file":"savefile.sav"}}'
API History
Release
Modification
2.1.0
This API is introduced.
Load a Saved Configuration
Method
POST
Module
https://ip-address:port-number/api/running/save-load/_operations/load-H "Content-type: application/vnd.yang.data+json" -d '{"input": {" config-file":"filename"}}'
Description
Loads a configuration from a file.
Parameters
Name
Description
Importance
filename
Name of the configuration file available in the Cisco CSP 2100 repository.
Note: You must also copy the appropriate files, such as the service ISO file (specified in iso_name) and banner files, required by the saved configuration file to the /osp/repository directory.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/save-load/_operations/load -H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"config-file":"savefile.sav"}}'
API History
Release
Modification
2.1.0
This API is introduced.
Cluster APIs
Get Information About Clusters
Method
GET
Module
https://ip-address:port-number/api/running/clusters
https://ip-address:port-number/api/running/clusters/cluster/name
https://ip-address:port-number/api/running/clusters?deep
Description
Retrieves information about the nodes associated with all clusters or a specific cluster.
To get detailed information about the nodes associated with all clusters or a specific cluster, use the ?deep parameter.
Parameters
Name
Description
Importance
name
Name of the cluster
Optional
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/clusters
{
  "cluster:clusters": {
    "cluster": [
      {
        "name": "cluster1"
      }
    ]
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/clusters/cluster/cluster1
{
  "cluster:cluster": {
    "name": "cluster1",
    "nodes": {
      "node": [
        {
          "member_ip": "192.0.2.134"
        },
        {
          "member_ip": "192.0.2.134"
        }
      ]
    }
  }
}
API History
Release
Modification
1.0
This API is introduced.
Create a Cluster
Method
POST
Module
Release 2.5.0
https://ip-address:port-number/api/running/clusters -H "Content-type: application/vnd.yang.data+json" -d '{"cluster": [{"name":"name", "nodes": {"node": [{"member_ip":"member_ip"}, {"member_ip": "member_ip"}]}}]}'
Note: Support for this API in releases earlier to 2.5.0 is deprecated.
Release 2.8.0
https:// ip-address:port-number/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"name","nodes":{"node":[{"member_ip":"member_ip"},{"member_ip":"member_ip"},{"member_ip":"member_ip"}]}}]}'
Note: We recommend you use the new API from 2.8.0 release onwards to create a cluster.
Description
Creates a cluster. Clusters enable you to make configuration changes to all other Cisco CSP 2100 members of a cluster by using the web interface of a Cisco CSP 2100 cluster member.
Parameters
Name
Description
Importance
name name
Specifies the name of the cluster.
Required
member_ip member_ip
Specifies the IP address of a member that is being assigned to the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas.
Required
Example
curl -ku admin:admin -X POST https://172.27.109.86/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"clusterdemo","nodes":{"node":[{"member_ip":"172.27.109.86"},{"member_ip":"172.27.109.48"},{"member_ip":"172.27.109.100"}]}}]}'
API History
Release
Modification
2.8.0
The new post cluster API is introduced.
2.5.0
The cluster API is deprecated.
1.0
The cluster API is introduced.
Add Members to a Cluster
Method
PATCH
Module
Release 2.5.0
https://ip-address:port-number/api/running/clusters/cluster -H "Content-type: application/vnd.yang.data+json" -d '{"cluster": {"name":"name", "nodes": {"node": [{"member_ip": "member_ip"}]}}}'
Note: Support for this API in releases earlier to 2.5.0 is deprecated.
Release 2.8.0
https:// ip-address:port-number /api/add_cluster_node/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"name","nodes":{"node":[{"member_ip":"member_ip"}]}}]}'
Note: We recommend you use the new API from 2.8.0 release onwards to add members to a cluster.
Description
Adds members to a cluster.
Parameters
Name
Description
Importance
name name
Specifies the name of the cluster.
Required
member_ip member_ip
Specifies the IP address of a member that is being added to the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas.
Required
Example
curl -ku admin:admin -X GET https://172.27.109.86/api/running/clusters/cluster/clusterdemo
{
  "cluster:cluster": {
    "name": "clusterdemo",
    "nodes": {
      "node": [
        {    
          "member_ip": "172.27.109.100"
        },
        {
          "member_ip": "172.27.109.48"
        },
        {
          "member_ip": "172.27.109.86"
        }
      ]
    }
  }
}
curl -ku admin:admin -X PATCH https://172.27.109.86/api/add_cluster_node/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"clusterdemo","nodes":{"node":[{"member_ip":"172.27.109.212"}]}}]}'
  curl -ku admin:Sfish@123 -X GET https://172.27.109.86/api/running/clusters/cluster/clusterdemo
{
  "cluster:cluster": {
    "name": "clusterdemo",
    "exists": true,
    "nodes": {
      "node": [
        {
          "member_ip": "172.27.109.100"
        },
        {
          "member_ip": "172.27.109.212"
        },
        {
          "member_ip": "172.27.109.48"
        },
        {
          "member_ip": "172.27.109.86"
        }
      ]
    }
  }
}
  API History
Release
Modification
2.8.0
The new add cluster node API is introduced.
2.5.0
The cluster API to add a node is deprecated.
1.0
The cluster API to add a node is introduced.
Replace Cluster Members
Method
PUT
Module
https://ip-address:port-number/api/running/clusters/cluster/name -H "Content-type: application/vnd.yang.data+json" \-d '{"cluster": {"name": "name", "nodes": {"node": [{"member_ip":"member_ip"}, {"member_ip":"member_ip"}, {"member_ip":"member_ip"}]}}}'
Description
Replaces all current cluster member IP addresses with only the member IP addresses you specify in this API. To retain any of the current cluster member IP addresses, you must explicitly specify them. For example, you have cluster members A through D with the following IP addresses:
·       Member A - 192.0.2.111
·       Member B - 192.0.2.112
·       Member C - 192.0.2.113
·       Member D - 192.0.2.114
You want to keep member A and replace members B through D with new IP addresses. You need to include member A, along with the new IP addresses, in the PUT method.
Parameters
Name
Description
Importance
name name
Specifies the name of the cluster.
Required
member_ip member_ip
Specifies the IP address of the member that is being changed in the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas.
Required
Example
curl -u admin:admin -X GET https://192.0.2.130/api/running/clusters/cluster
{
  "cluster:cluster": {
    "name": "cluster1",
    "nodes": {
      "node": [
        {
          "member_ip": "192.0.2.134"
        },
        {
          "member_ip": "192.0.2.136"
        }
      ]
    }
  }
}  
  curl -u admin:admin -X PUT https://192.0.2.130/api/running/clusters/cluster/cluster1 -H "Content-type:application/vnd.yang.data+json" -d '{"cluster": {"name": " cluster1", "nodes": {"node": [{"member_ip": "192.0.2.111"}, {"member_ip": "192.0.2.121"}, {"member_ip": "192.0.2.131"}]}}}'
  curl -u admin:admin -X GET https://192.0.2.130/api/running/clusters/cluster
{
  "cluster:cluster": {
    "name": "cluster1",
    "nodes": {
      "node": [
        {
          "member_ip": "192.0.2.111"
        },
        {
          "member_ip": "192.0.2.121"
        },
        {
          "member_ip": "192.0.2.131"
        }
      ]
    }
  }
}
API History
Release
Modification
2.5.0
This API is deprecated
1.0
This API is introduced.
Delete a Member from a Cluster
Method
DELETE
Module
Release 2.5.0
https://ip-address:port-number/api/running/clusters/cluster/name/nodes/node/ip-address
Note: Support for this API in releases earlier to 2.5.0 is deprecated.
Starting from 2.8.0
https:// ip-address:port-number /api/delete_cluster_node/name/ip-addresss -H "Content-Type:application/vnd.yang.data+json"
Note: We recommend you use the new API from 2.8.0 release onwards to delete a member from a cluster.
Description
Deletes a specific member of a cluster.
Parameters
Name
Description
Importance
name
Name of the cluster.
Required
ip-address
IP address of the member that is being removed from the cluster. 
Required
Example
curl -ku admin:admin -X GET https://172.27.109.86/api/running/clusters/cluster/clusterdemo
{
  "cluster:cluster": {
    "name": "clusterdemo",
    "nodes": {
      "node": [
        {    
          "member_ip": "172.27.109.100"
        },
        {
          "member_ip": "172.27.109.48"
        },
        {
          "member_ip": "172.27.109.86"
        }
      ]
    }
  }
}
  curl -ku admin:admin -X DELETE https://172.27.109.86/api/delete_cluster_node/cluster1/172.27.109.100 -H "Content-Type:application/vnd.yang.data+jso n"
  curl -ku admin:Sfish@123 -X GET https://172.27.109.86/api/running/clusters/cluster/clusterdemo
{
  "cluster:cluster": {
    "name": "clusterdemo",
    "exists": true,
    "nodes": {
      "node": [
        {
          "member_ip": "172.27.109.48"
        },
        {
          "member_ip": "172.27.109.86"
        }
      ]
    }
  }
}
API History
Release
Modification
2.8.0
The delete cluster node API is introduced.
2.5.0
The cluster API to delete a node is deprecated.
2.0.0
The cluster API to delete a node is introduced.
Delete a Cluster
Method
DELETE
Module
Release 2.5.0
https://ip-address:port-number/api/running/clusters/cluster/name
Note: Support for this API in releases earlier to 2.5.0 is deprecated.
Release 2.8.0
https://ip-address:port-number/api/delete_cluster/name -H "Content-Type:application/vnd.yang.data+json"
Note: We recommend you use the new API from 2.8.0 release onwards to delete a cluster.
Description
Deletes a specific cluster.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
Example
curl -ku admin:admin -X DELETE https://172.27.109.86/api/delete_cluster/clusterdemo -H "Content-Type:application/vnd.yang.data+json"
  API History
Release
Modification
2.8.0
The new delete cluster API is introduced.
2.5.0
The cluster API to delete a cluster is deprecated.
1.0
The cluster API to delete a cluster is introduced.
Enable Node Failure detection and VNF Service migration
Method
POST
Module
https://ip-address:port-number/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":" "name","enable-node-redundancy":"enable-node-redundancy","eviction-timeout":"eviction-timeout","nodes":{"node":[{"member_ip":"member_ip "},{"member_ip":"member_ip"},{"member_ip":"member_ip"}]}}]}'
Description 
To enable node failure detection and VNF migration for the cluster.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
enable-node-redundancy
Enables or disables the node redundancy for the cluster. Valid values are true or false.
Required
eviction-timeout
Enter the node eviction timeout in seconds.
Required
member_ip
Specifies the IP address of a member that is being assigned to the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas.
Required
Example
curl -ku admin:admin -X POST https://172.27.109.86/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"clusterdemo","enable-node-redundancy": true,"eviction-timeout":10,"nodes":{"node":[{"member_ip":"172.27.109.86"},{"member_ip":"172.27.109.48"},{"member_ip":"172.27.109.100"}]}}]}'
API History
Release
Modification
2.8.0
This API is introduced.
Update Node Eviction Parameters
Method
PATCH
Module
https://ip-address:port-number/api/add_cluster_node /running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":" "name","enable-node-redundancy":"enable-node-redundancy","eviction-timeout":"eviction-timeout"}]}'
Description 
To update node eviction parameters.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
enable-node-redundancy
Enables or disables the node redundancy for the cluster. Valid values are true or false.
Required
eviction-timeout
Enter the node eviction timeout in seconds.
Required
Example
curl -ku admin:Sfish@123 -X PATCH https://172.27.109.86/api/add_cluster_node/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"clusterdemo","enable-node-redundancy": true,"eviction-timeout":10}]}'                
  API History
Release
Modification
2.8.0
This API is introduced.
Enable Storage Network
Method
POST
Module
https://ip-address:port-number/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":" "name","enable-storage-netwrok":"enable-storage-network","gluster-disk-allocation":"gluster-disk-allocation","nodes":{"node":[{"member_ip":" member_ip "},{"member_ip":"member_ip"},{"member_ip":"member_ip"}]}}]}'
Description 
To enable storage network for the cluster.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
enable-storage-network
Enables or disables the storage network. Valid values are true or false.
Required
gluster-disk-allocation
Specifies the gluster disk allocation
in percentage.
The default disk capacity value of the gluster is 80% and the remaining disk capacity is allocated for the local storage.
The VNFs are deployed in the gluster location using the distributed storage network for the cluster.
  Note: You can recover the VNFs deployed in the gluster location during Day-N configuration, when the storage network is enabled.
Required
member_ip
Specifies the IP address of a member that is being assigned to the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas.
Required
Example
curl -ku admin:admin -X POST  https://172.27.109.86/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":"clusterdemo","enable-storage-network":true, "gluster-disk-allocation":10,"nodes":{"node":[{"member_ip":"172.27.109.86"},{"member_ip":"172.27.109.48"},{"member_ip":" 172.27.109.100 "}]}}]}'
  API History
Release
Modification
2.8.0
This API is introduced.
  Enable Configuration Sync for Cluster
Release 2.9.0 and Later Releases
Method
POST
Module
https://ip-address/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":name,"enable-config-sync”: enable-config-sync,"nodes":{"node":[{"member_ip":member_ip},{"member_ip":member_ip},{"member_ip":member_ip}]}}]}'
  Description
To enable configuration sync for cluster nodes.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
enable-config-sync
Enables configuration sync for cluster nodes
Required
member_ip
Specifies the IP address of a member that is being assigned to the cluster. You can add multiple members at a time by specifying their IP addresses in the member_ip parameter separated by commas
Required
Examples
curl -ku admin:admin -X POST https://172.27.109.86/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":user,"enable-config-sync”:true,"nodes":{"node":[{"member_ip":172.27.109.86},{"member_ip":172.27.109.100},{"member_ip":172.27.109.120}]}}]}'
  API History
Release
Modification
2.9.0
This API is introduced.
  Update Configuration Sync
Release 2.9.0 and Later Releases
Method
PATCH
Module
https://ip-address/api/add_cluster_node/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":name,"enable-config-sync": enable-config-sync,"sync-node":[{"sync_ip":sync-ip},{"sync_ip":sync-ip}]}]}'
  Description
To update the configuration sync parameters for cluster or to update the nodes on which configuration sync is performed.
Parameters
Name
Description
Importance
name
Name of the cluster
Required
enable-config-sync
Enables configuration syncing for cluster nodes
Required
sync_ip
Specifies the IP address of a node to which the configuration should be synced to. You can add multiple nodes at a time by specifying their IP addresses in the sync_ip parameter separated by commas
Required
  Examples
curl -ku admin:admin -X POST https://172.27.109.86/api/new_post_cluster/running/clusters -H "Content-Type:application/vnd.yang.data+json" -d '{"cluster":[{"name":user,"enable-config-sync”:true,"sync-node”:[{"sync_ip":172.27.109.86},{"sync_ip":172.27.109.100},{"sync_ip":172.27.109.120}]}}]}'
  Note:
·       The “sync-node” list should contain all cluster member IP addresses for which the configuration has to be synced.
·       To disable configuration sync on one cluster node, the sync-node list should omit the node being disabled and contain all enabled nodes.
  API History
Release
Modification
2.9.0
This API is introduced.
  Collected Package API
Release 2.3.1 and Later Releases
Method
POST
Module
https://ip-address:port-number/api/running/collectd/_operations/collectd-stat  -H "Content-Type: application/vnd.yang.data+json"
Description
Collectd package collects system and application performance metrics periodically and provides memory, disk and CPU statistics. The collectd package provides historical resource utilization. Hence, duration enums such as 30 minutes, 10 hour, 1 day, 15 days, 30 days are allowed. You can select any of these durations and get statistics for the specific time interval.
A graphical representation of the following statistics is provided:
·       A memory graph representing memory-free and memory-used parameters.
·       A disk graph representing disk operations per second.
·       A CPU graph representing CPU utilization of the kernel space and user space (cpu-system and cpu-user)
Parameters
Name
Description
Importance
memory-used
Statistics based on physical memory utilized.
Required
memory-free
Statistics based on memory that is available and using power.
Required
disk-ops
Statistics based on performance of hard disks.
Required
duration
Statistics based on the duration such as 30 minutes, 10 hour, 1 day, 15 days, or 30 days.
Required
cpu-system
Statistics based on CPU utilization of the kernel space.
Required
cpu-user
Statistics based on CPU utilization of the user space
Required
Examples
curl -k -u admin:admin -X POST https://192.0.2.1/api/ running/collectd/_operations/collectd-stat -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"parameter":"memory-used", "duration":"30d"}}'
  curl -k -u admin:admin -X POST https://192.0.2.1/api/running/collectd/_operations/collectd-stat -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"parameter":"memory-free", "duration":"30d"}}'
  curl -k -u admin:admin -X POST https://192.0.2.1/api/running/collectd/_operations/collectd-stat -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"parameter":"disk-ops", "duration":"30d"}}'
  curl -k -u admin:admin -X POST https://192.0.2.1/api/running/collectd/_operations/collectd-stat -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"parameter":"cpu-system", "duration":"30d"}}'
  curl -k -u admin:admin -X POST https://192.0.2.1/api/running/collectd/_operations/collectd-stat -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"parameter":"cpu-user", "duration":"30d"}}'
API History
Release
Modification
2.3.1
This API is introduced.
Factory Default Reset API
Release 2.2.5 and Later Releases
Method
POST
Module
https://ip-address:port-number/api/operations/factory-default-reset/all -H "Content-Type: application/vnd.yang.data+json"
Description
Allows restoring Cisco CSP 2100 to original factory defaults. After the API is executed, Cisco CSP 2100 reboots automatically, and you are prompted with the configuration services questionnaire similar to clean installation. For more information about how to set up your Cisco CSP 2100 through clean installations, see the Cisco Cloud Services Platform Quick Start Guide.
Note: Executing the API, erases all configuration. Connectivity is lost, and admin password is changed to factory default password.
After factory-reset of ovs-dpdk enabled device, the device resets back to factory default ovs-dpdk disabled setting. For more information about the ovs dpdk configuration, see the OVS DPDK APIs.
Parameters
None
Example
curl -k -u admin:admin -X POST https://192.0.2.1/api/operations/factory-default-reset/all -H "Content-Type: application/vnd.yang.data+json"
API History
Release
Modification
2.2.5
This API is introduced.
Installation and Upgrade APIs
Release 2.1.0 and Later Releases
Specify ISO Installation Mode
Method
POST
Module
https://ip-address:port-number/api/running/system/install/iso/mode/_operations/mode
Description
Specifies the installation mode for installing Cisco CSP 2100. This REST API only specifies the installation mode. It does not initiate the Cisco CSP 2100 installation.
Parameters
Name
Description
Importance
mode
Specifies the installation mode. The value can be one of the following:
·       clean-install: Specifies to not retain any existing configurations and settings.
·       software-update: Specifies to retain the existing configurations and settings in the new installation.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/iso/mode/_operations/clean-install
  {
  "output": {
    "results": "success"
  }
}
  curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/iso/mode/_operations/software-update
  {
  "output": {
    "results": "success"
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Upgrade the Cisco CSP 2100 Software Using An ISO File
Method
POST
Module
https://ip-address:port-number/api/running/system/install/iso/update/_operations/update -H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"image":"imagename "}}'
Description
Upgrades the Cisco CSP 2100 software using an ISO image file.
Note:
·       To upgrade the Cisco CSP 2100 software by using this REST API, Cisco FlexFlash must be enabled in the Cisco Integrated Management Controller (CIMC). To enable the Cisco FlexFlash or to check that the Cisco FlexFlash is enabled, in the CIMC, click Storage > Cisco FlexFlash and then click the Virtual Drive Info tab. For detailed configuration information about the CIMC, see Cisco Integrated Management Controller Configuration Guides.
·       You cannot use this REST API to upgrade the Cisco CSP 2100 software from Release 2.1.x to Release 2.2.0. Use the CIMC console to upgrade the Cisco CSP 2100 software from Release 2.1.x to Release 2.2.0. You can use this API to upgrade from Release 2.2.0 to later versions.
Parameters
Name
Description
Importance
image imagename
Specifies the name of the Cisco CSP 2100 ISO software update image available in the Cisco CSP 2100 repository.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/iso/update/_operations/update -H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"image": "csp-2100-210.iso"}}'
{
  "output": {
    "results": "success"
  }
  API History
Release
Modification
2.1.0
This API is introduced.
Release 1.0 and Release 2.0.0
Specify ISO Installation Mode
Method
POST
Module
https://ip-address:port-number/api/running/system/install -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"mode":"mode"}}'
Description
Specifies the installation mode for installing Cisco CSP 2100 by using an ISO image. This REST API only specifies the installation mode. It does not initiate the Cisco CSP 2100 installation.
Parameters
Name
Description
Importance
mode mode
Specifies the installation mode. The value can be one of the following:
·       clean-install: Specifies to not retain any existing configurations and settings.
·       update-software: Specifies to retain the existing configurations and settings in the new installation.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install -H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"mode": "clean-install"}}'
  {
  "output": {
    "results": "success"
  }
}
  API History
Release
Modification
2.1.0
This API is removed.
1.0
This API is introduced.
Check the Cisco CSP 2100 Software Upgrade Status
Method
GET
Module
https://ip-address:port-number/api/running/package-install/show-upgrade-status
Description
Shows the status of the Cisco CSP 2100 software upgrade process.
Parameters
None
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/package-install/show-upgrade-status
API History
Release
Modification
2.1.0
This API is removed.
1.0
This API is introduced.
Patch Upgrade APIs
Patch Upgrade Cisco CSP 2100 Release Notes
Method
POST
Module
https://ip-address:port-number/api/running/install/package-upgrade/_operations/rel-notes -d '{"input":{"package-file":"filename"}}'
Description
Lists the Cisco CSP 2100 bugs available in Release Notes for a patch upgrade.
Parameters
Name
Description
Importance
package-file filename
Specifies the name of the package file for upgrade, which is available in the Cisco CSP 2100 repository.
Required
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/patch-upgrade/_operations/rel-notes -d '{"input":{"package-file": " csp-2100-70.tar.gz"}}'
{
  "system:output": {
    "results": "RELEASE NOTES",
    "results": "=============",
    "results": "CSCvXXXXX - Vm not booting when NFS is down",
    "results": "CSCvYYYYY - Cluster certs not working with FQDN"
  }
}
API History
Release
Modification
2.6.0
This API is introduced.
Patch Upgrade Cisco CSP 2100 software
Method
POST
Module
https://ip-address:port-number/api/running/install/package-upgrade/_operations/update -d '{"input":{"package-file":"filename", "force": "force"}}'
Description
Updates CSP software from current version to its next patch version.
Parameters
Name
Description
Importance
package-file filename
Specifies the name of the package file for upgrade, which is available in the Cisco CSP 2100 repository.
Required
force force
Enables or disables the upgrade of CSP software during failure. Valid values are true and false.
Optional
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/patch-upgrade/_operations/rel-notes -d '{"input":{"package-file": "csp-2100-70.tar.gz","force": "true"}}'
{
   "system:output": {
    "results": "Starting patch upgrade",
    "results": "Performing validation checks on the upgrade package file ",
    "results": "Validation checks passed, upgrading csp from 02.05.00.70 to 02.05.01",
    "results": "Installing upgrade software in the background, check installation status after 5 mins"
  }
}
API History
Release
Modification
2.6.0
This API is introduced.
Check Status of Patch Upgrade
Method
POST
Module
https://ip-address:port-number/api/running/install/patch-upgrade/_operations/check status
Description
Checks and shows the status of the patch upgrade operation.
Parameters
None
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/system/install/patch-upgrade/_operations/check-status
{
   "system:output": {
    "results": "update_status: 12/02/2019, 17:59:49 - Validating upgrade tar ball - success\n",
    "results": "update_status: 12/02/2019, 17:59:49 - Patch upgrade in progress\n",
    "results": "update_status: 12/02/2019, 18:00:09 - Patch upgrade complete\n" 
}
}
API History
Release
Modification
2.6.0
This API is introduced.
NTP Server APIs
Get Information About NTP Servers
Method
GET
Module
https://ip-address:port-number/api/running/ntps
https://ip-address:port-number/api/running/ntps/ntp/ntp_server
https://ip-address:port-number/api/running/ntps?deep
Description
Retrieves information about all NTP servers or a specific NTP server.
To get detailed information about all NTP servers or a specific NTP server, use the ?deep parameter.
Parameters
Name
Description
Importance
ntp_server
Host name or IP address of the NTP server
Optional
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/ntps
{
  "ntp:ntps": {
    "ntp": [
      {
        "ntp_server": "time.cisco.com"
      }
    ]
  }
}
  API History
Release
Modification
1.0
This API is introduced.
Get Information About NTP Server Status
Method
POST
Module
https://ip-address:port-number/api/operational/ntp_status/_operations/ntp_get_status
Description
Retrieves information about the status of the NTP server.
Parameters
None
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/operational/ntp_status/_operations/ntp_get_status
{
  "output": {
    "ntp_status": [
      {
        "remote": "1.2.3.4",
        "refid": ".INIT.",
        "st": "16",
        "t": "u",
        "when": "-",
        "poll": "1024",
        "reach": "0",
        "delay": "0.000",
        "offset": "0.000",
        "jitter": "0.000"
      }
    ]
  }
}
API History
Release
Modification
2.0.0
This API is introduced.
Add an NTP Server
Method
PATCH
Module
https://ip-address:port-number/api/running/ntps/ntp -H "Content-Type: application/vnd.yang.data+json" -d '{"ntp": {"ntp_server":"ntp_server"}}'
Description
Adds an NTP server.
Parameters
Name
Description
Importance
ntp_server ntp_server
Specifies the host name or the IP address of the NTP server.
Required
Examples
curl -u admin:admin -X PATCH https://192.0.2.1/api/running/ntps/ntp -H "Content-Type: application/vnd.yang.data+json" -d '{"ntp": {"ntp_server":"1.1.1.3"}}'
  curl -u admin:admin -X PATCH https://192.0.2.1/api/running/ntps/ntp -H "Content-Type: application/vnd.yang.data+json" -d '{"ntp": {"ntp_server":"time.cisco.com"}}'
API History
Release
Modification
1.0
This API is introduced.
Delete an NTP Server
Method
DELETE
Module
https://ip-address:port-number/api/running/ntps/ntp/ntp_server
Description
Deletes an NTP server.
Parameters
Name
Description
Importance
ntp_server
Host name or IP address of the NTP server
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/ntps/ntp/1.1.1.3
  curl -u admin:admin -X DELETE https://192.0.2.1/api/running/ntps/ntp/time.cisco.com
API History
Release
Modification
1.0
This API is introduced.
Port Isolation APIs
Get Status Information About Port Isolation of VNF
Method
GET
Module
https://ip-address:port-number/api/running/system-settings/vm/switching-mode
Description
Retrieves status information about port isolation of VNF management interfaces.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/system-settings/vm/switching-mode
{
"system_setting:switching-mode": "VEB" 
}

API History
Release
Modification
2.2.5
This API is introduced.
Enable or Disable Port Isolation of VNF
Method
PUT
Module
https://ip-address:port-number/api/running/system-settings/vm/switching-mode -H "Content-type: application/vnd.yang.data+json" -d '{"switching-mode": "switchingmode"}
Description
Enables or disables port isolation of VNF management interfaces.
Parameters
Name
Description
Importance
switching-mode switchingmode
Specifies the switching modes. Valid values are:
protected: Disables communication between VNF management ports.
VEB: Enables communication between VNF management ports.
Default mode is VEB.
Optional
Example
curl -u admin:admin -X PUT https://192.0.2.1/api/running/s ystem-settings/vm/switching-mode -H " Content-type:application/vnd.yang.data+json" -d '{"switching-mode":"protected"}'
API History
Release
Modification
2.2.5
This API is introduced.
OVS DPDK APIs
Get Status Information About OVS DPDK
Method
GET
Module
https://ip-address:port-number/api/ operational/system-settings/ovs/dpdk
Description
Retrieves information about the status of ovs dpdk.
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/operational/system-settings/ovs/dpdk
API History
Release
Modification
2.3.0
This API is introduced.
Enable or Disable OVS with DPDK
Method
POST
Module
https://ip-address:port-number/api/running/system-settings/_operations/ovs-dpdk -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"action":"action"}}'
Description
Enables or disables the Open vSwitch (OvS) with Data Plane Development Kit (DPDK) modes.
Parameters
Name
Description
Importance
action action
Sets the ovs dpdk mode. Valid values are enable and disable.
Required
Usage Guidelines
By default, ovs-dpdk is disabled on upgrade and clean install modes. DPDK offers poll mode drivers that enables direct transfer of packets between user space and physical interface, and bypass kernel network stack.
Note: The system reboots on enabling or disabling ovs-dpdk.
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/system-settings/_operations/ovs-dpdk -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"action":"enable"}}'
  curl -u admin:admin -X POST https://192.0.2.130/api/running/system-settings/_operations/ovs-dpdk -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"action":"disable"}}'
API History
Release
Modification
2.3.0
This API is introduced.
pNIC APIs
Get Information About pNICs
Method
GET
Module
https://ip-address:port-number/api/running/pnics
https://ip-address:port-number/api/running/pnics/pnic/name
https://ip-address:port-number/api/running/pnics?deep
Description
Retrieves information about all pNICs or a specific pNIC.
To get detailed information about all pNICs or a specific pNIC, use the ?deep parameter.
Parameters
Name
Description
Importance
name
Name of the pNIC. PNICs are named in Eth<pcie slot>-<port> format. The slot 0 corresponds to LOM port and slot 9 corresponds to mLOM ports.
Optional
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/pnics
{
  "pnic:pnics": {
    "pnic": [
      {
        "name": "Eth4-0"
      },
      {
        "name": "Eth4-1"
      },
      {
        "name": "Eth4-2"
      },
      {
        "name": "Eth4-3"
      },
      {
        "name": "Eth1-0"
      },
      {
        "name": "Eth1-1"
      }
    ]
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/pnics /pnic/Eth1-0
{
    "pnic:pnic": {
    "name": "Eth1-1",
    "type": "ethernet",
    "sriov_numVFs": 0,
    "sriov_switch_mode": "VEB",
    "lldp": "enabled"
  }
}
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Get Statistics for pNICs
Method
GET
Module
https://ip-address:port-number/api/operational/pnics -H "Content-type:application/vnd.yang.collection+json"
https://ip-address:port-number/api/operational/pnics/pnic -H "Accept:application/vnd.yang.collection+json"
https://ip-address:port-number/api/operational/pnics/pnic/name
Description
Retrieves statistics for all pNICs or a specific pNIC. The pNIC statistics are updated every 10 seconds.
Parameters
Name
Description
Importance
name
Name of the pNIC
Optional
Example
curl -u admin:admin -X GET https://192.0.2.1/api/operational/pnics -H " Content-type:application/vnd.yang.collection+json"
{
  "collection": {
    "pnic:pnic": [
      "name": "Eth4-0",
      "type": "ethernet",
      "speed": "1G",
      "passthrough": "none",
      "sriov_intf": "none",
      "sriov_numVFs": 0,
      "sriov_switch_mode": "VEB",
      "pch_state": "not_created",
      "link_state": "down",
      "lldp": "enabled",
      "mac_address": "a0:36:9f:19:08:68",
      "mtu": 9000,
      "refcnt": 0,
      "stats": {
        "receive": {
          "bytes": 0,
          "packets": 0,
          "errors": 0,
          "dropped": 0,
          "rate_mbps": "0.0",
          "broadcast": 0,
          "multicast": 0
        },
        "transmit": {
          "bytes": 0,
          "packets": 0,
          "errors": 0,
          "dropped": 0,
          "collisions": 0,
          "rate_mbps": "0.0",
          "broadcast": 0,
          "multicast": 0
        }
      }
    },
    ….
    {
      "name": "Eth0-1",
      "type": "ethernet",
      "speed": "1G",
      "passthrough": "none",
      "sriov_intf": "none",
      "sriov_numVFs": 0,
      "sriov_switch_mode": "VEB",
      "pch_state": "not_created",
      "link_state": "down",
      "lldp": "enabled",
      "mac_address": "00:06:f6:2b:28:63",
      "mtu": 9000,
      "refcnt": 0,
      "stats": {
        "receive": {
          "bytes": 0,
          "packets": 0,
          "errors": 0,
          "dropped": 0,
          "rate_mbps": "0.0",
          "broadcast": 0,
          "multicast": 0
        },
        "transmit": {
          "bytes": 0,
          "packets": 0,
          "errors": 0,
          "dropped": 0,
          "collisions": 0,
          "rate_mbps": "0.0",
          "broadcast": 0,
          "multicast": 0
        }
      }
    }
  ]
}
API History
Release
Modification
1.0
This API is introduced.
Modify a pNIC
Method
PATCH
Module
https://ip-address:port-number/api/running/pnics/pnic -H "Content-type: application/vnd.yang.data+json" -d '{"pnic": {"name": "name", "adminstatus": "adminstatus", " promiscuous": "promiscuousmode ", "bond_mode": "bond_mode", "lacp_type": "lacp_type", "sr-iov": {"numVFs": "numVFs", "switchMode": "switchMode"}, "lldp":"lldp_mode", "trunks": "vlan_num", "member_of": "portchannel_name"}}}}'
Description
Modifies a pNIC.
Note: You cannot modify the name of a pNIC.
Parameters
Name
Description
Importance
name name
Specifies the name of the pNIC. You cannot modify the name of a pNIC.
Required
adminstatus adminstatus
Shuts down or re-enables a disabled pNIC. Valid values are up and down.
This parameter is not available if the pNIC is configured as a passthrough interface.
Optional
promiscuous
Specifies the promiscuous mode. Valid values are enabled and disabled. Default is disabled.
This parameter is available only when the pNIC is configured as a passthrough interface. When promiscuous mode is enabled, traffic is passed to the vNIC independent of the packet MAC address.
Optional
bond_mode bond_mode
Specifies the mode of the bond. Valid values are balance-slb, active-backup, and balance-tcp. For more information about these values, see the Create a Port Channel section.
Optional
lacp_type lacp_type
Specifies the link aggregation control protocol (LACP) type for the bond. Valid values are active, passive, and off.
Optional
sr-iov
Provides SR-IOV support.
Note: SR-IOV feature is supported with the 10G and 40G interfaces.
Optional
numVFs numVFs
Specifies the number of VFs. Up to 63 VFs are supported on a 10G interface and up to 64 VFs are supported on a 40G interface. Use 0 to disable the SR-IOV support.
Note:
·       You cannot disable the SR-IOV support if any existing service is already using this feature.
·       To add more VFs to a pNIC, you first need to disable the SR-IOV support and then enable it.
·       VF interfaces come up only when the physical pNIC is up and running.
Optional
switchMode switchmode
Specifies the switch mode. Valid values are:
·       VEB: Virtual Ethernet Bridge mode
·       VEPA: Virtual Ethernet Port Aggregator (VEPA) mode. This mode is reserved for switches with a VEPA-capable hardware, that is, switches that support IEEE 802.1Qbg. 
Default mode is VEB.
Optional
lldp lldp_mode
Sets the LLDP mode. Valid values are enabled and disabled. Default is enabled.
Optional
type
Specifies the type. Valid values are ethernet and port-channel. Default is ethernet.
Optional
trunks vlan_num
Specifies the VLAN number. Valid range is from 1 to 4096. Default is 1. Enter VLANs separated by commas, VLAN ranges separated by dashes, or a combination of both.
Optional
member_of portchannel_name
Specifies the name of the port channel.
Optional
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/pnics
{
  "pnic:pnics": {
    "pnic": [
      {
        "name": "Eth4-0"
      },
      {
        "name": "Eth4-1"
      },
      {
        "name": "Eth4-2"
      },
      {
        "name": "Eth4-3"
      },
      {
        "name": "Eth7-0",
        "type": "ethernet",
        "lldp": "enabled"
      },
      {
        "name": "Eth7-1",
        "type": "ethernet",
        "lldp": "enabled"
      }
    ]
  }
}
curl -u admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic/Eth7-1 -H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name":"Eth7-1", "lldp":"disabled"}}'
  curl -u admin:admin -X GET https://192.0.2.130/api/running/pnics/pnic
{
  "pnic:pnics": {
    "pnic": [
      {
        "name": "Eth4-0"
      },
      {
        "name": "Eth4-1"
      },
      {
        "name": "Eth4-2"
      },
      {
        "name": "Eth4-3"
      },
      {
        "name": "Eth7-0",
        "type": "ethernet",
        "lldp": "enabled"
      },
      {
        "name": "Eth7-1",
        "type": "ethernet",
        "lldp": "disabled"
      }
    ]
  }
}
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.4.0
The SR-IOV feature support for 40G interface has been added.
2.1.0
The adminstatus, promiscuous, sr-iov, numVFs, switchMode parameters are added.
2.0.0
The passthrough parameter is removed.
1.0
This API is introduced.
Get Information about LLDP Configuration
Method
GET
Module
https://ip-address:port-number/api/running/pnics/pnic/name/lldp
Description
Retrieves the Link Layer Discovery Protocol (LLDP) information for a specific pNIC.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
Example
curl -u admin:admin -X GET https://192.0.2.130/api/running/pnics/pnic/Eth4-0/lldp
{
  "pnic:lldp": "enabled"
}
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Enable or Disable LLDP
Method
PATCH
Module
https://ip-address:port-number/api/running/pnics/pnic -H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name":"name", "lldp":"lldp_mode"}}'
Description
Enable or disables LLDP.
Parameters
Name
Description
Importance
name name
Specifies the name of the pNIC.
Required
lldp lldp_mode
Sets the LLDP mode. Valid values are enabled and disabled. Default is enabled.
Required
Example
curl -u admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic -H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name":"Eth4-0", "lldp":"enabled"}}'
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Create a Port Channel
Method
POST
Module
https://ip-address:port-number/api/running/pnics -H "Content-type: application/vnd.yang.data+json" -d '{"pnic":{"name":"name", "type":"port_channel", "bond_mode":"bond_mode", "lacp_type":"lacp_type", "trunks":"vlan_num"}}'
Description
Creates a port channel.
Starting from 2.8.0, you can configure the port-channels that have SR-IOV enabled pNICs as subordinate interfaces. The SR-IOV enabled port-channels cannot be assigned to VNF services during deployment because these port-channels are not intended to carry data traffic.
Note: After creating a port channel, you must assign at least two pNIC members to the port channel. For information about how to assign a pNIC to a port channel, see the Assign a pNIC to a Port Channel section.
Parameters
Name
Description
Importance
name name
Specifies the name of the port channel. PNICs are named in Eth<pcie slot>-<port> format. The slot 0 corresponds to LOM port and slot 9 corresponds to mLOM ports.
Required
type
Specifies the type of the port. You must specify the type as port_channel.
Required
bond_mode bond_mode
Specifies the mode of the bond. Valid values are the following:
·       balance-slb: In this mode, load balancing is done between the pNIC members of a port channel based on the MAC address. This is the default mode.
·       active-backup: In this mode, load balancing is done between two members of a port channel. One pNIC acts as the active member and carries all the traffic. The other pNIC acts as the backup member and carries traffic only when the active pNIC fails.
·       balance-tcp: In this mode, load balancing is done between the pNIC members of a port channel based on the L2, L3, and L4 protocol information such as destination MAC address, IP address, and TCP port. This mode requires the upstream switch to support 802.3ad with successful LACP negotiation.
Default is balance-slb.
Optional
lacp_type lacp_type
Specifies the LACP type for the bond. Valid values are active, passive, and off. Default is off.
Optional
trunks vlan_num
Specifies the VLANs. Valid range is from 1 to 4096. Default value is 1. Enter VLANs separated by commas, VLAN ranges separated by dashes, or a combination of both.
Optional
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/pnics -H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name": "portchannel1", "type": "port_channel", "bond_mode": "active-backup", "lacp_type": "passive", "trunks": "100,105-109"}}’
API History
Release
Modification
2.5.0
The pNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Assign a pNIC to a Port Channel
Method
PATCH
Module
https://ip-address:port-number/api/running/pnics/pnic/name -H "Content-type: application/vnd.yang.data+json" -d '{"pnic":{"member_of":"portchannel_name"}}'
Description
Assigns a pNIC member to a port channel.
Starting from 2.8.0, you can associate the SR-IOV enabled pNICS to the port-channel.           
Parameters
Name
Description
Importance
name
Name of the pNIC.
Required
member_of portchannel_name
Specifies the name of the port channel.
Required
Example
curl -u admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic/Eth4-2 –H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"member_of": "portchannel1"}}'
  curl -u admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic/Eth4-3 –H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"member_of": "portchannel1"}}’
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Configure Link State Tracking of Individual pNIC
Method
PATCH
Module
https://ip-address:port-number/api/running/pnics/pnic/name -H "Content-type: application/vnd.yang.data+json" -d '{"pnic": {"name"":"name", "link-state-tracking":"link-state"}}''
Description
Allows you to enable or disable the link-state tracking. Link-state tracking provides redundancy in the network when used with server network.
Note: This feature is available for port channel and non-passthrough pNICs.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
link-state-tracking link-state
Enables or disables link state tracking. Valid values are Enabled and Disabled.
Required
Example
curl -ku admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic –H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name":"Eth0-1", "link-state-tracking":"enabled"}}'
  curl -ku admin:admin -X PATCH https://192.0.2.130/api/running/pnics/pnic –H "Content-Type: application/vnd.yang.data+json" -d '{"pnic": {"name":"Eth0-1", "link-state-tracking":"disabled"}}'
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.1
This API is introduced.
Delete a Port Channel
Method
DELETE
Module
https://ip-address:port-number/api/running/pnics/pnic/name
Description
Deletes a specific port channel.
Note: Before deleting a port channel, you must unassign the pNICs assigned to the port channel.
Parameters
Name
Description
Importance
name
Name of the port channel
Required
Example
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/pnics/pnic/Eth4-2/member_of
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/pnics/pnic/Eth4-3/member_of
  curl -u admin:admin -X DELETE https://192.0.2.1/api/running/pnics/pnic/portchannel1
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
1.0
This API is introduced.
Get Description About an Individual pNIC
Method
GET
Module
https://ip-address:port-number/api/running/pnics/pnic/name/description
Description
Retrieves description about an individual pNIC member.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/pnics/pnic/Eth3-1/description
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.0
This API is introduced.
Configure Description of an Individual pNIC
Method
POST
Module
https://ip-address:port-number/api/running/pnics/pnic/name -H "Content-type: application/vnd.yang.data+json" -d '{"description":"new description"}'
Description
Allows you to add a description for a pNIC.
Note: Only users who belong to the admin-group can modify all pNIC descriptions.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
description new description
Specifies a description for an individual pNIC. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Note: Configuring the pNIC description configures the corresponding ifAlias SNMP MIB of pNIC.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/pnics/pnic/Eth3-1 –H "Content-Type: application/vnd.yang.data+json" -d '{"description":"new description"}'
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.0
This API is introduced.
Modify the Description of an Individual pNIC
Method
PUT
Module
https://ip-address:port-number/api/running/pnics/pnic/name/description -H "Content-type: application/vnd.yang.data+json" -d '{"description":"new description"}'
Description
Allows you to edit and modify a pNIC description.
Note: Only users who belong to the admin-group can modify all pNIC descriptions.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
description new description
Specifies a new description of an individual pNIC that is being changed. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Note: Configuring the pNIC description configures the corresponding ifAlias SNMP MIB of pNIC.
Required
Example
curl -ku admin:admin -X PUT https://192.0.2.130/api/running/pnics/pnic/Eth3-1/description –H "Content-Type: application/vnd.yang.data+json" -d '{"description":"new description"}'
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.0
This API is introduced.
Delete the Description of an Individual pNIC
Method
DELETE
Module
https://ip-address:port-number/api/running/pnics/pnic/name/description
Description
Deletes a pNIC description.
Note: Only users who belong to the admin-group can delete all pNIC descriptions.
Parameters
Name
Description
Importance
name
Name of the pNIC
Required
description
Specifies the existing description of an individual pNIC.
Required
Example
curl -ku admin:admin -X DELETE https://192.0.2.130/api/running/pnics/pnic/Eth3-1/description
API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.0
This API is introduced.
Get Information About LLDP Neighbors
Method
GET
Module
https://ip-address:port-number/api/operational/lldp/ lldp?deep
Description
Retrieves LLDP neighbor information for all interfaces.
To get detailed information about LLDP neighbor, use the ?deep parameter.
Parameters
None
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/operational/lldp?deep –H "Content-Type: application/vnd.yang.collection+json"
{
  "pnic:lldp": {
    "neighbors": [
      {
        "name": "Eth1-0",
        "device_id": "sf-k6-45-sw1.cisco.com",
        "holdtime": 120,
        "caps": "B ",
        "platform": "Cisco Cloud Services Platform",
        "portid": "Local: Eth105/1/3",
        "description": "Ethernet105/1/3""
} ,
      {
        "name": "Eth1-0",
        "device_id": "sf-k6-45-sw1.cisco.com",
        "holdtime": 120,
        "caps": "B ",
        "platform": "Cisco Cloud Services Platform",
        "portid": "Local: Eth105/1/4",
        "description": "Ethernet105/1/4"
      },
      {
        "name": "Eth4-0",
        "device_id": "sf-k6-45-sw1.cisco.com",
        "holdtime": 120,
        "caps": "B ",
        "platform": "Cisco Cloud Services Platform ",
        "portid": "Local: Eth105/1/7",
        "description": "Ethernet105/1/7"
      },
      {
        "name": "Eth4-1",
        "device_id": "sf-k6-45-sw1.cisco.com",
        "holdtime": 120,
        "caps": "B ",
        "platform": "Cisco Cloud Services Platform ",
        "portid": "Local: Eth105/1/8",
        "description": "Ethernet105/1/8"
      },
      {
        "name": "Eth4-2"
      },
      {
        "name": "Eth4-3"
      },
      {
        "name": "Eth7-0"
      },
      {
        "name": "Eth7-1"
      }
    ],
    "stats": [
      {
        "name": "Eth1-0",
        "tx_frames": 22891,
        "discard_rx": 0,
        "error_rx": 0,
        "rx_frames": 0,
        "discarded_tlvs": 0,
        "unrec_tlvs": 0,
        "ageouts": 0
      },
      {
        "name": "Eth1-1",
        "tx_frames": 22891,
        "discard_rx": 0,
        "error_rx": 0,
        "rx_frames": 0,
        "discarded_tlvs": 0,
        "unrec_tlvs": 0,
        "ageouts": 0
      },
      {
        "name": "Eth4-0",
        "tx_frames": 22894,
        "discard_rx": 0,
        "error_rx": 0,
        "rx_frames": 23205,
        "discarded_tlvs": 0,
        "unrec_tlvs": 0,
        "ageouts": 0
      },
      {
        "name": "Eth4-1",
        "tx_frames": 22894,
        "discard_rx": 0,
        "error_rx": 0,
        "rx_frames": 23205,
        "discarded_tlvs": 0,
        "unrec_tlvs": 0,
        "ageouts": 0
      },
      {
        "name": "Eth4-2"
      },
      {
        "name": "Eth4-3"
      },
      {
        "name": "Eth7-0"
      },
      {
        "name": "Eth7-1"
      }
    ]
  }
}
  API History
Release
Modification
2.5.0
The PNIC name has been changed to the new format, Eth<slot>-port.
2.3.0
This API is introduced.
Configure Card Mode of an Individual pNIC
Method
POST
Module
https://ip-address:port-number/api/running/ system-settings/pnic-breakout/_operations/list-intf  -d '{"input": {"nic_mode_pair": [{ "devno":"devno", "mode":"mode" }] } }'
Description
It lists or converts card mode or both into XL71. Allows 40G XL710 PNIC to be run in breakout mode of 4x10G.
Parameters
Name
Description
Importance
denvo denvo
Specifies the device number that is listed when using the list-intf command.
Required
mode mode
Specifies one of the supported modes for XL710 card such as, 2x40, 4x10.
Required
Example
Example for listing breakout
curl -u admin:admin -X POST https://192.0.2.130/api/running/ system-settings/pnic-breakout/_operations/list-intf"
{
"system_setting:output": {
"results": "Devno PCI CMODE PNICS",
"results": "-------------------------------",
"results": "1 5e 2x40 ['Eth1-1', 'Eth1-2']"
}
}
  Example for converting card mode
curl -u admin:admin -X POST https://192.0.2.130/api/running/ system-settings/pnic-breakout/_operations/update -d'{"input": {"nic_mode_pair": [{ "devno":"1", "mode":"4*10" }] } }
{
"system_setting:output": {
"results": "Processing nic 1 mode 4x10",
"results": "pnics under pnic:1 = ['Eth1-1', 'Eth1-2']",
"results": "pnic:Eth1-1 not used",
"results": "pnic:Eth1-2 not used",
"results": "updating pnic firmware",
"results": "Rebooting the box now"
}
}
API History
Release
Modification
2.5.0
This API is introduced.
RADIUS APIs
Get Information About the RADIUS Servers
Method
GET
Module
https://ip-address:port-number/api/running/security_servers/radius-server
https://ip-address:port-number/api/running/security_servers/radius-server/host/hostname
Description
Retrieves information about all RADIUS servers or a specific RADIUS server.
Parameters
Name
Description
Importance
hostname
Hostname or IP address of the RADIUS server.
Optional
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/radius-server
{
  "security:radius-server": {
    "host":
    [
      {
        "server": "1.1.1.1"
      },
      {
        "server": "2.2.2.2"
      }
     ],
    "options": {
      "retransmit": 2,
      "timeout": 2
    }
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/radius-server/host/3.3.3.3
{
  "security:host": {
    "server": "3.3.3.3",
    "secret": {
      "key": "7",
      "shared-secret": "wawy3"
    }
  }
}
  API History
Release
Modification
2.2.0
This API is introduced.
Add a RADIUS Server
Method
POST
Module
https://ip-address:port-number/api/running/security_servers/radius-server -H "Content-Type:application/vnd.yang.data+json" -d '{"host": {"server":"hostname", "secret": {"key": "key", "shared-secret": "shared-secret"}, "auth-port":"auth-port", "acct-port ":"acct-port"}}'
Description
Adds a RADIUS server.
Parameters
Name
Description
Importance
server hostname
Hostname or IPv4 address of the RADIUS server.
Required
secret
Specifies the information about the secret to authenticate communication between the RADIUS server and the Cisco CSP 2100.
Required
key key
Specifies a preshared key for the RADIUS server. Supported key value are as follows:
·       0: Clear text preshared key
·       7: Encrypted preshared key
Required
shared-secret shared-secret
Specifies the preshared secret to authenticate communication between the RADIUS server and the Cisco CSP 2100. The preshared secret is alphanumeric, case sensitive, and has a maximum of 63 characters.
Required
auth-port auth-port
Configures the RADIUS server to perform authentication functions and associates a specific host with the port that receives RADIUS authentication messages. The default port is 1812. The range is from 0 to 65535.
Optional
acct-port acct-port
Configures the RADIUS server to perform accounting functions and associates a specific host with the port that receives RADIUS accounting messages. The default port is 1813. The range is from 0 to 65535.
Optional
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running//security_servers/radius-server -H "Content-Type:application/vnd.yang.data+json" -d '{"host": {"server":"10.10.1.1", "secret": {"key": "0", "shared-secret": "myRaDIUSpassword"}, "auth-port":"1645", "acct-port":"1646"}}'
API History
Release
Modification
2.2.0
This API is introduced.
Configure Timeout Duration
Method
PATCH
Module
https://ip-address:port-number/api/running/security_servers/radius-server/options -H "Content-Type: application/vnd.yang.data+json" -d '{"option": {"timeout": "seconds"}}'
Description
Configures the duration to wait for a response from a RADIUS server before declaring a timeout failure.
Parameters
Name
Description
Importance
timeout seconds
Timeout interval for the RADIUS server. The default timeout interval is 3 seconds and the valid range is from 1 to 10 seconds.
Required
Example
curl -u admin:admin -X PATCH https://198.51.100.1/api/running/security_servers/radius-server/options -H "Content-Type: application/vnd.yang.data+json" -d '{"option": {"timeout" : "6"}}'
API History
Release
Modification
2.2.0
This API is introduced.
Configure Retransmit Count
Method
PATCH
Module
https://ip-address:port-number/api/running/security_servers/radius-server/options -H "Content-Type: application/vnd.yang.data+json" -d '{"option": {"retransmit": "count"}}'
Description
Configures the number of retransmits allowed before reverting to local authentication.
Parameters
Name
Description
Importance
retransmit count
Number of retransmits allowed before reverting to local authentication. The default number of retransmits is 1 and the valid range is from 0 to 5.
Required
Example
curl -u admin:admin -X PATCH https://198.51.100.1/api/running/security_servers/radius-server/options -H "Content-Type: application/vnd.yang.data+json" -d '{"option": {"retransmit" : "3"}}'
API History
Release
Modification
2.2.0
This API is introduced.
Delete a RADIUS Server
Method
DELETE
Module
https://ip-address:port-number/api/running/security_servers/radius-server/host/hostname
Description
Deletes a RADIUS server.
Parameters
Name
Description
Importance
hostname
Hostname or IP address of the RADIUS server.
Required
Example
curl -u admin:admin -X DELETE https://192.0.2.130/api/running/security_servers/radius-server/host/10.10.1.1
API History
Release
Modification
2.2.0
This API is introduced.
Repository APIs
Get Information About All Files
Method
POST
Module
https://ip-address:port-number/api/operational/repository/_operations/get_images -H "Content-type: application/vnd.yang.data+json"
Description
Retrieves information about all files available in the repository.
Parameters
None
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/repository/_operations/get_images -H "Content-Type:application/vnd.yang.data+json"
{
  "output": {
    "image": [
      {
        "name": "n1000v-dk9.5.2.1.SV3.1.4.iso "
      },
      {
        "name": "vwaas150.tmp"
      },
      {
        "name": "banner.txt"
      }
    ]
  }
}
API History
Release
Modification
2.0.0
This API is introduced.
Get Information About a File
Method
POST
Module
https://ip-address:port-number/api/operational/repository/image/image_name/_operations/get_image -H "Content-type: application/vnd.yang.data+json"
Description
Retrieves detailed information about a file available in the repository.
Parameters
Name
Description
Importance
image_name
Name of the file
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/repository/image/test-file/_operations/get_image -H "Content-Type:application/vnd.yang.data+json"
API History
Release
Modification
2.0.0
This API is introduced.
Get Information About a Remote File
Method
POST
Module
https://ip-address:port-number/api/operational/repository/mount/ storage_name/image/image_name/_operations/get_image -H "Content-type: application/vnd.yang.data+json"
Description
Retrieves detailed information about a remote file.
Parameters
Name
Description
Importance
storage_name
Storage space name
Required
image_name
Name of the file
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/repository/mount/nfs_name/image/test-file/_operations/get_image -H "Content-Type:application/vnd.yang.data+json"
API History
Release
Modification
2.0.0
This API is introduced.
Copy Files  to Cisco CSP 2100
Method
POST
Modules
To copy an image file to Cisco CSP 2100, use the following REST APIs:
1.     curl -u username:password -c cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/login
When you run this REST API to login to Cisco CSP 2100, a .txt file with specified name is created containing information about the user authentication credentials. This REST API must return "OK" response. If it returns "Unauthorized" response, it means that the user credentials are incorrect.
2.     curl -b cookie_filename.txt -F 'file=@/filepath/filename' -X POST https://CSP2100_MGMT_IP/api/uploadfile
3.     curl -b cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/logout
  Description
Copies the specified image file to Cisco CSP 2100.
Parameters
Name
Description
Importance
cookie_filename.txt
Name of the file that is created when you run the REST API to login to Cisco CSP 2100. This file contains information about the user authentication credentials. By default, this file is created in the current working directory. If required, you can specify a different path for this file.
Required
/filepath/filename
Location and name of the image file to be copied.
Required
Example
curl -u admin:admin -c cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://
192.0.2.130/api/login
OK
  curl -b cookie.txt -F 'file=@/path/Tiny_ssh.iso' -X POST https://192.0.2.130/api/uploadfile
  curl -b cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://192.0.2.130/api/logout
OK
API History
Release
Modification
1.0.0
This API is introduced.
Create New Text File
Method
POST
Module
https://ip-address:port-number/api/running/file-create/_operations/create -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"file-name": "file-name", "content": "content"}}'
Description
Allows you to create a new text file that resides in the local repository. The new files does not overwrite existing files or can be edited after creation. These new files are not copied to other nodes in cluster mode.
Parameters
Name
Description
Importance
file-name file-name
Specifies the name of the text file. If the specified name of the text file exists, creating a file process is aborted. Valid values are alphanumeric, underscore, dash, period. The range is from 1 to 80 characters.
Required
content content
Specifies the text to be included in file. Valid values are a string up to 4096 characters and spaces are allowed in the content.
Optional
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/file-create/_operations/create -H "Content-Type:application/vnd.yang.data+json" -d '{"input": { "file-name":"rest-built.txt", "content":" new file\n really nice\n"}}'
{
"output": {
    "results": ": Created file: rest-built.txt"
  }
}
API History
Release
Modification
2.3.0
This API is introduced.
Copy Files from Cisco CSP 2100 (Release 2.2.3 and Later Releases)
Method
GET
Modules
To copy a file from Cisco CSP 2100 in Release 2.2.3 and later releases, use the following REST APIs:
1.     curl -u username:password -c cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/login
When you run this REST API to login to Cisco CSP 2100, a .txt file with specified name is created containing information about the user authentication credentials. This REST API must return "OK" response. If it returns "Unauthorized" response, it means that the user credentials are incorrect.
2.     curl -b cookie_filename.txt -o destination_filename -X GET https://CSP2100_MGMT_IP/api/getfile/filetype/source_filename
3.     curl -b cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/logout
Description
Copies the specified image, log, or certificate file to a local or remote system.
Parameters
Name
Description
Importance
cookie_filename.txt
Name of the file that is created when you run the REST API to login to Cisco CSP 2100. This file contains information about the user authentication credentials. By default, this file is created in the current working directory. If required, you can specify a different path for this file.
Required
destination_filename
Name with which the file is copied.
Required
filetype
Type of the file to be copied. Valid options are image, log, and certificate.
Required
source_filename
Name of the file to be copied.
Required
Example
  curl -u admin:admin -c cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https:// 192.0.2.130/api/login
OK
  curl -b cookie.txt -o messages -X GET https://192.0.2.130/api/ getfile/log/messages
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  118k  100  118k    0    18   245k     37 --:--:-- --:--:-- --:--:--  328k
  curl -b cookie.txt -o Tiny_ssh.iso -X GET https://192.0.2.130/api/getfile/image/Tiny_ssh.iso
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  169M  100  169M    0    20  21.9M      2  0:00:07  0:00:07 --:--:-- 24.7M
  curl -b cookie.txt -o sample_certificate.crt -X GET https://192.0.2.130/api/getfile/certificate/sample.crt
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0    11    0    11    0    19     40     70 --:--:-- --:--:-- --:--:--     0
  curl -b cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://192.0.2.130/api/logout
OK
API History
Release
Modification
2.2.3
This API is introduced.
Copy Files from Cisco CSP 2100 (Release 2.2.2)
Method
POST
Modules
To copy files from Cisco CSP 2100 in Release 2.2.2, use the following REST APIs:
1.     curl -u username:password -c cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/login
When you run this REST API to login to Cisco CSP 2100, a .txt file with specified name is created containing information about the user authentication credentials. This REST API must return "OK" response. If it returns "Unauthorized" response, it means that the user credentials are incorrect.
2.     curl -b cookie_filename.txt -o destination_filename -X POST -d '{"filetype": "filetype"}' https://CSP2100_MGMT_IP/api/download/source_filename
3.     curl -b cookie_filename.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://CSP2100_MGMT_IP/api/logout
Description
Copies the specified image, log, or certificate file to a local or remote system.
Parameters
Name
Description
Importance
cookie_filename.txt
Name of the file that is created when you run the REST API to login to Cisco CSP 2100. This file contains information about the user authentication credentials. By default, this file is created in the current working directory. If required, you can specify a different path for this file.
Required
destination_filename
Name with which the file is copied.
Required
filetype filetype
Specifies the type of the file to be copied. Valid options are image, log, and cert.
Required
source_filename
Name of the file to be copied.
Required
Examples
curl -u admin:admin -c cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https:// 192.0.2.130/api/login
OK
  curl -b cookie.txt -o messages -X POST -d '{"filetype":"log"}' https://192.0.2.130/api/download/messages
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  118k  100  118k    0    18   245k     37 --:--:-- --:--:-- --:--:--  328k
  curl -b cookie.txt -o Tiny_ssh.iso -X POST -d '{"filetype":"image"}' https://192.0.2.130/api/download/Tiny_ssh.iso
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  169M  100  169M    0    20  21.9M      2  0:00:07  0:00:07 --:--:-- 24.7M
  $ curl -b cookie.txt -o sample_certificate.crt -X POST -d '{"filetype":"cert"}' https:// 192.0.2.130/api/download/sample.crt
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0    11    0    11    0    19     40     70 --:--:-- --:--:-- --:--:--     0
  $ curl -b cookie.txt -X POST -H "X-Requested-With: XMLHttpRequest" https://192.0.2.130/api/logout
OK
API History
Release
Modification
2.2.3
This API is removed and a new API is introduced for Release 2.2.3 and later releases. New API is described in the Copy Files from Cisco CSP 2100 (Release 2.2.3 and Later Releases) section.
2.2.2
This API is introduced.
Delete an Image File
Method
POST
Module
https://ip-address:port-number/api/operational/images/image/filename/_operations/delete-image
Description
Deletes an image file from the repository.
Parameters
Name
Description
Importance
filename
Name of the image file.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/images/image/TinyCore-5.3.iso/_operations/delete-image
{
  "output": {
    "results": "success TinyCore-5.3.iso"
  }
}
API History
Release
Modification
2.0.0
This API is introduced.
Rename an Image File
Method
POST
Module
https://ip-address:port-number/api/operational/images/image/filename/_operations/rename-image
Description
Rename an image file from the repository.
Parameters
Name
Description
Importance
new-image-name filename
Specifies name of the new image file.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/operational/images/image/TinyCore-5.3.iso/_operations/rename-image' -d '{"input":{"new-image-name":"NewCore5.4.iso"}}'
{
  "output": {
    "results": " New Core-5.4.iso"
  }
}
API History
Release
Modification
2.6.1
This API is introduced.
Resource APIs
Get Information About a Resource
Method
GET
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100
https://ip-address:port-number/api/running/resources/resource/csp-2100/name
Description
Retrieves information about the system resources for Cisco CSP 2100. For each Cisco CSP 2100, there is only one resource and the resource name are set to csp-2100.
Parameters
Name
Description
Importance
name
Name of the resource feature.
Required
Example
curl -u admin:admin -X GET https://192.0.2.130/api/running/resources/resource/csp-2100
{
"resource:resource": {
"resource_name": "csp-2100",
"ip_address": "172.23.232.32",
"netmask": "255.255.255.0",
"default_gw": "172.23.232.1",
"mgmt_mtu": 1500,
"mgmt_pnic": "eth-LOM-1",
"mgmt_pnic_mode": "shared",
"mgmt_vlan": 1,
"host_name": "cyril-csp",
"dns_server": "171.70.168.183",
"dns": [
{
"dnsip": "171.70.168.183"
},
{
"dnsip": "8.8.8.8"
}
],
"domain_name": "cisco.com",
"csp_version": "02.04.00.00",
"num_cpus_used": 14,
"num_cpus_total": 14,
"ram_used_mb": 47816,
"ram_total_mb": 47816,
"disk_space_used_gb": "164.0",
"disk_space_total_gb": 1689,
"num_service": 9
}
}
  curl -u admin:admin -X GET https://192.0.2.130/api/running/resources/resource/csp-2100/mgmt_vlan
{
        "resource:mgmt_vlan": 1
}
    API History
Release
Modification
2.5.0
New command, dns has been introduced.
1.0
This API is introduced.
Modify a Resource
Method
PATCH
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource": {"default_gw": "default_gw", "dns_server": "dns_server", "dns": {"dnsip":"dnsip"}, "domain_name": "domain_name", "host_name": "host_name", "ip_address": "ip_address", "log_severity": "log_severity", {"ip-receive-acl": {"source":"source_ip_address", "service": "service", "priority": "priority", "action": "action"}}, "mgmt_mtu": "mgmt_mtu ", "mgmt_pnic": "pnic_name ", "mgmt_pnic_mode": "mgmt_pnic_mode", "mgmt_vlan": "vlan_num", "netmask": "netmask", {"syslog_server": {"host": "ip/hostname ", "host": "ip/hostname "}}, "rsyslog_tcp_port": "rsyslog_tcp_port", "rsyslog_udp_port": "rsyslog_udp_port", "rsyslog_udp_only": "rsyslog_udp_only", "service-mgmt-pnic": pnic_name, {"storagelist": {"storage": [{"mount_name": "mount_name", "storagetype": "nfs", "storage_space_total_gb": "storage_space", "server_ip": "server_ip", "server_path": "server_path"}]}}}}'
Method
POST
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"host-vnic": {"vnic-name": "nfs_network", "vnic-ip": "vnic-ip", "vnic-netmask": "vnic-netmask", "route": [{"network": "network", "next-hop": "next-hop"} , { "network": "network", "next-hop": "next-hop"}], "vnic-vlan": "vnic-vlan", "external-pnic": "pnic-name"}}'
Description
Modifies the csp-2100 resource. For each Cisco CSP 2100, there is only one resource and the resource name is set to csp-2100.
Parameters
Name
Description
Importance
default_gw default_gw
Specifies the default gateway for the resource.
Optional
dns_server dns_server (Deprecated)
Specifies the DNS server for the resource (Deprecated).
Optional (Deprecated)
dns dnsip
Specifies multiple DNS servers for a resource.
Optional
domain_name domain_name
Specifies the domain name for the resource.
Optional
host_name host_name
Specifies the host name for the resource.
Optional
ip_address ip_address
Specifies the IP address of the resource.
Optional
log_severity log_severity
Specifies the severity level for log messages. Valid values are debug, info, notice, warning, error, critical, alert, and emerg. Default is info.
Optional
ip-receive-acl
Enables the Access Control List (ACL) access for the management interface. When this feature is enabled, only specified source networks can access the management interface. For detailed information about the parameters for this feature, see the Configure ACL Access for the Management Interface section.
Optional
mgmt_mtu mgmt_mtu
Specifies the maximum transmission unit (MTU) size for the management interface. By default, the MTU size for the management interface (mgmt0) is 1500 bytes. To support jumbo frames, you can configure the MTU size of up to 9000 bytes.
Note: To maintain connectivity, when you change MTU setting on CSP 2100, ensure that similar MTU configuration is also applied to the upstream switch.
Optional
mgmt_pnic pnic_name
Specifies the management pNIC for Cisco CSP 2100. You can specify a pNIC or a port channel as the management pNIC.
Optional
mgmt_pnic_mode mgmt_pnic_mode
Specifies the mode for the management pNIC. Valid values are shared and dedicated. Default is shared.
In shared mode, the management interface pNIC can be shared with any service VMs. The management interface pNIC carries the management traffic of Cisco CSP 2100 and the management and data traffic of any service using this pNIC. In dedicated mode, the management interface pNIC carries only the management traffic of Cisco CSP 2100.
In shared mode, you can change the management interface pNIC to any available pNIC. In dedicated mode, you can change the management interface pNIC only to a pNIC that is not associated with any service.
Note: If you try to change the mode of the management interface pNIC to dedicated while a service is currently using it, you get the “Management PNIC already in service use” error. Similarly, if the management interface pNIC is in dedicated mode and you try to create a service using the management pNIC, you get the “PNIC is dedicated to management” error.
Optional
mgmt_vlan vlan_num
Specifies the management VLAN corresponding to the management (mgmt0) interface. Valid range is from 1 to 4094.
Optional
netmask netmask
Specifies the netmask.
Optional
host-vnic host-vnic
Specifies an additional host vnic to create an alternate network for the host to communicate. You can use this to create a dedicated network for NFS traffic. A host-vnic configuration requires an external PNIC, which is separate from the CSP management. The IP and route configuration of the host-vnic is used to communicate through that PNIC.
Optional
syslog_server
Specifies the IPv4 IP address or host name of the remote syslog servers. This IP address or host name must be reachable from Cisco CSP 2100.
You can configure the Cisco CSP 2100 syslog as a client to send internal log messages to multiple remote syslog servers on TCP and UDP ports or only UDP port. The remote syslog server should be capable of receiving RFC-5424 formatted logging messages. If the rsyslog_udp_only parameter is not set to true, you must specify both transport ports.
Note: You can send log messages to a maximum of eight syslog servers.
Optional
rsyslog_tcp_port rsyslog_tcp_port
Specifies the TCP port for the remote syslog server.
Note: You must configure the remote syslog server and specify the same TCP port for transport. For example, if you have specified port 9020 as rsyslog_tcp_port, then on the remote syslog server, configure the TCP port for 9020.
You cannot set this parameter if the rsyslog_udp_only parameter is set to true.
Optional
rsyslog_udp_port rsyslog_udp_port
Specifies the UDP port for the remote rsyslog server.
Note: You must configure the remote syslog server and specify the same UDP port for transport. For example, if you have specified port 514 as rsyslog_udp_port, then on the remote syslog server, configure the UDP port for 514.
Optional
rsyslog_udp_only rsyslog_udp_only
Specifies that the remote syslog server uses only UDP transport. Valid values are true and false.
Note: When you set this parameter to true, you cannot set the rsyslog_tcp_port parameter.
Optional
service-mgmt-pnic pnic_name
Specifies the single pNIC or port channel to be used as the dedicated service management interface. Following are the guidelines for the dedicated service management interface:
·       Only one dedicated service management interface can be active at a time.
·       The specified pNIC cannot be a member of a port channel.
·       The specified pNIC cannot be same as the Cisco CSP 2100 management pNIC (mgmt_pnic).
·       The dedicated service management interface can be changed only when it is not in use. In addition, the port or the port channel that you are planning to assign as the dedicated service management interface should not be in use.
·       The dedicated service management interface can be used by multiple services and on multiple vNICs in the same service.
·       The dedicated service management interface is deleted only when it is not in use.
Optional
storagelist
Adds NFS storage space.
For information about the storagelist parameters, see the Add NFS Storage Space and Delete NFS Storage Space sections.
Optional
Examples
curl -u admin:admin -X PATCH https://192.0.2.130/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource": {"syslog_server": {"host":"192.0.2.137"}, "rsyslog_udp_port":"514", "rsyslog_tcp_port":"9020"}}’
  curl -u admin:admin -X PATCH https://192.0.2.130/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource" : {"mgmt_mtu" : "1800"}}’
  curl -u admin:admin -X PATCH https://192.0.2.130/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource" : {"service-mgmt-pnic" : " Eth130-1"}}’
  curl -u admin:admin -X PATCH https://192.0.2.130/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource" : {"syslog_server" : {"host":"192.0.2.137", "host":"192.0.2.146"}}}’
  curl -u admin:admin -X POST https://192.0.2.130/api/running/resources/resource/csp-2100 -H "ContentType: application/vnd.yang.data+json" -d '{"host-vnic" : { "vnic-name": "nfs_network", "vnic-ip":"25.10.10.30","vnic-netmask": "255.255.255.0", "route": [{ "network": "25.20.20.0/24", "next-hop": "25.10.10.1"},{ "network": "25.90.20.0/24", "next-hop": "25.10.10.1"}], "vnic-vlan":"90","external-pnic":"Eth1-4"}}'
API History
Release
Modification
2.5.0
·       New command, dns has been introduced.
·       The host-vnic parameter has been introduced.
2.2.5
The syslog_server parameter is introduced and rsyslog_ip parameter is removed.
2.2.0
The ip-receive-acl, mgmt_vlan, and service-mgmt-pnic parameters are added.
2.1.0
The mgmt_mtu and mgmt_pnic_mode parameters are added.
2.0.0
The storagelist and rsyslog_udp_only parameters are added.
1.0
This API is introduced.
Delete a Configured Resource Feature
Method
DELETE
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/name
Description
Deletes a configured resource feature.
Parameters
Name
Description
Importance
name
Name of the configured resource parameter that you want to delete.
You cannot delete the csp-2100 resource and the ip_address, netmask, default_gw, mgmt_pnic, host_name, csp_version, num_cpus_total, and ram_total_mb parameters.
Note: When you delete the configured management VLAN, the management VLAN is reset to 1.
Required
Example
curl -u admin:admin -X DELETE https://192.0.2.130/api/running/resources/resource/csp-2100/mgmt_vlan
  curl -u admin:admin -X DELETE https://198.51.100.1/api/running/resources/resource/csp-2100/ip-receive-acls/ip-receive-acl/"192.168.0.0/16"'
  curl -u admin:admin -X DELETE https://192.0.2.130/api/running/resources/resource/csp-2100/syslog_server/192.0.2.146 -H "Content-Type: application/vnd.yang.data+json"
  API History
Release
Modification
2.0.0
This API is introduced.
Configure ACL Access for the Management Interface
Method
POST or PATCH
Module
POST:
https://ip-address:port-number/api/running/resources/resource/csp-2100/ip-receive-acls -H "Content-Type: application/vnd.yang.data+json" -d '{"ip-receive-acl": {"source": "source_ip_address", "service": "service", "priority": "priority", "action": "action"}}'
PATCH:
https://ip-address:port-number/api/running/resources/resource/csp-2100/ip-receive-acls -H "Content-Type: application/vnd.yang.data+json" -d '{"resource: ip-receive-acls":  {"ip-receive-acl": {"source": "source_ip_address", "service": "service", "priority": "priority", "action": "action"}}}'
Description
Configures the ACL access for the management interface.
Parameters
Name
Description
Importance
ip-receive-acl
Enables the ACL access for the management interface. When this feature is enabled, only specified source networks can access the management interface.
Required
source source_ip_address
Specifies the IPv4 IP address of the source network in the ip-address/prefix format. If the source network is specified as 0.0.0.0/0, the configuration is applicable to all source networks.
Required
service service
Specifies the service type for the management ACL access. Valid values are:
·       ssh: Includes port 22 and port 2024.
·       https: Includes port 80, port 443 and all ports to access the service console.
·       snmp: Includes port 161 and configured NET-SNMP port.
·       netconf: Includes port 2022. This port is required for communication between nodes of a cluster.
·       icmp: Provides ability to ping the host.
You can specify one, more than one, or all service types in this parameter. To specify multiple service types, enter the values within the square brackets []; for example, service ["ssh", "snmp"].
If you do not specify any specific service, the configuration is applicable to all services.
Optional
priority priority
Specifies the priority for the ACL rule. Each ACL rule must have a unique priority value. Valid range is from 0 to 65,535. ACL rule with priority 0 has the highest priority. Whenever an ACL rule with priority 0 is matched, Cisco CSP 2100 performs the action associated with this ACL rule and does not look up any lower priority ACL rules.
Required
action action
Specifies the action for the packets received from the source network. Valid values are:
·       accept: Accept the packets.
·       reject: Reject the packets and return the error to the source network.
·       drop: Drop packets immediately and do not send any information to the source network.
Required
Examples
Specify a Single Service Type
curl -u admin:admin -X PATCH https://198.51.100.1/api/running/resources/resource/csp-2100/ip-receive-acls -H "Content-Type: application/vnd.yang.data+json"-d '{"resource:ip-receive-acls" : {"ip-receive-acl": {"source":"192.168.0.0/16", "service":"ssh", "priority": "0","action": "accept"}}}'
Specify Multiple Service Types
curl -u admin:admin -X PATCH https://198.51.100.1/api/running/resources/resource/csp-2100/ip-receive-acls  -H "Content-Type: application/vnd.yang.data+json" -d '{"resource:ip-receive-acls" : {"ip-receive-acl": {"source":"192.168.0.0/16", "service": ["ssh", "snmp"],"priority": "0", "action": "accept"}}}'
API History
Release
Modification
2.2.0
This API is introduced.
Configure break
Method
GET
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/ip-receive-acls
https://ip-address:port-number/api/running/resources/resource/csp-2100/ip-receive-acls/ip-receive-acl/"ip-address/prefix"
https://ip-address:port-number/api/running/resources/resource/csp-2100/ip-receive-acls?deep
Description
Retrieves information about all source networks or a specific source network for ACL access for the management interface.
To get detailed information about all source networks or a specific source network, use the ?deep parameter.
Parameters
Name
Description
Importance
ip-address/prefix
IP address of the source network.
Note: You must specify the ip-address/prefix value within the quotation marks ("") as shown in the Example section.
Required
Example
curl -u admin:admin -X GET 'https://198.51.100.1/api/running/resources/resource/csp-2100/ip-receive-acls/ ip-receive-acl/"192.168.0.0/16" '
{
  "resource: ip-receive-acl": {
    "source": "192.168.0.0/16",
    "service": ["sshd"],
    "action": "accept"
    "priority": "0"
  }
}
  curl -u admin:admin -X GET https://198.51.100.1/api/running/resources/resource/csp-2100/ip-receive-acl s?deep
{
  "resource: ip-receive-acls": {
    " ip-receive-acl": [
      {
        "source": "192.168.0.0/16",
        "service": ["sshd"],
        "action": "accept"
        "priority": "0"
      },
      {
        "source": "203.0.113.0/24",
        "action": "accept"
        "priority": "20"
      }
    ]
  }
}
  API History
Release
Modification
2.2.0
This API is introduced.
Add an NFS Storage Space
Method
PATCH
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100 -H "Content-Type: application/vnd.yang.data+json" -d '{"resource": {"storagelist":{"storage":[{"mount_name":"name", "storagetype":"nfs", "storage_space_total_gb":"storage_space", "server_ip":"server_ip", "server_path":"server_path"}]}}}'
Description
Adds an NFS storage space.
Parameters
Name
Description
Importance
mount_name name
Specifies the storage space name.
Required
storagetype
Specifies the storage type. Valid value is nfs.
Required
storage_space_total_gb storage_space
Specifies the total storage space (in GB).
Required
server_ip server_ip
Specifies the IP address of the server.
Required
server_path server_path
Specifies the path on the server.
Required
Example
curl -u admin:admin -X PATCH https://192.0.2.130/api/running/resources/resource/csp-2100 -H "Content-Type:application/vnd.yang.data+json" -d '{"resource": {"storagelist":{"storage":[{"mount_name":"beavernfs1", "storagetype":"nfs", "storage_space_total_gb":"100", "server_ip":"10.10.10.2", "server_path":"/shared"}]}}}'
API History
Release
Modification
2.0.0
This API is introduced.
Delete an NFS Storage Space
Method
DELETE
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/storagelist/storage/name
Description
Deletes an NFS storage space.
Note: Before deleting an NFS storage space, make sure that no service on this host is using this NFS storage space.
Parameters
Name
Description
Importance
name
Storage space name
Required
Example
curl -u admin:admin -X DELETE https://192.0.2.130/api/running/resources/resource/csp-2100/storagelist/storage/beavernfs1
API History
Release
Modification
2.0.0
This API is introduced.
Get Information About the CSP 2100 Version
Method
GET
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/csp_version
Description
Retrieves information about the Cisco CSP 2100 version.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.130/api/running/resources/resource/csp-2100/csp_version
{
  "resource:csp_version": "001.000.000"
}
API History
Release
Modification
1.0
This API is introduced.
Get Description About the CSP 2100 Resource
Method
GET
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/description
Description
Retrieves description about the Cisco CSP 2100.
Parameters
None
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/resources/resource/csp-2100/description
API History
Release
Modification
2.3.0
This API is introduced.
Configure Description of the CSP 2100 Resource
Method
POST
Module
https://ip-address:port-number/api/running/ resources/resource/csp-2100 -H "Content-type: application/vnd.yang.data+json" -d '{"description":"new description"}'
Description
Allows you to add a description for the CSP resource.
Parameters
Name
Description
Importance
description new description
Specifies a description for a CSP resource. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/resources/resource/csp-2100 –H "Content-Type: application/vnd.yang.data+json" -d '{"description":"new description"}'
API History
Release
Modification
2.3.0
This API is introduced.
Modify the Description of the CSP 2100 Resource
Method
PUT
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/description -H "Content-type: application/vnd.yang.data+json" -d '{"description":"new description"}'
Description
Allows you to edit and modify a CSP-2100 description.
Note: Only users who belong to the admin-group can modify CSP-2100 descriptions
Parameters
Name
Description
Importance
description new description
Specifies a new description of a CSP 2100 resource that is being changed. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Required
Example
curl -ku admin:admin -X PUT https://192.0.2.130/api/running/resources/resource/csp-2100/description –H "Content-Type: application/vnd.yang.data+json" -d '{"description":"new description"}'
API History
Release
Modification
2.3.0
This API is introduced.
Delete the Description of the CSP 2100 Resource
Method
DELETE
Module
https://ip-address:port-number/api/running/resources/resource/csp-2100/description
Description
Deletes description of a CSP 2100 resource.
Note: Only users who belong to the admin-group can delete CSP resource description.
Parameters
None
Example
curl -ku admin:admin -X DELETE https://192.0.2.130/api/running/resources/resource/csp-2100/description
API History
Release
Modification
2.3.0
This API is introduced.
Services APIs
Get Information About Services
Method
GET
Module
https://ip-address:port-number/api/running/services
https://ip-address:port-number/api/running/services/service/name
https://ip-address:port-number/api/running/services?deep
Description
Retrieves information about all services or a specific service.
To get detailed information about all services or a specific service, use the ?deep parameter.
Parameters
Name
Description
Importance
name
Name of the service
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/services
{
  "vsb: services": {
    "service": [
      {
        "name": "service1"
      },
      {
        "name": "service2"
      }
    ]
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/services/service/service1
{
    "service:service": {
    "name": "service1",
    "uuid": "5f7af622-125e-46f0-8686-f66e0f758d05",
    "memory": 2048,
    "numcpu": 1,
    "macid": 0,
    "disk_size": "4.0",
    "iso_name": "Tiny_ssh.iso",
    "vm_status": "vm_alive",
    "monitoring_total-recovery-count": "0",
    "monitoring_monitor-action-state": "recovery",
    "key": "7",
    "vnc_password":
"U2FsdGVkX1/0T6nxc+B0ta/O3AkJ0C5JWbjAz/eyoQDPuoF9pw1IhvjVM/LSRhxENc2rhLblhNH0cU4tuLeFnw==",
    "power": "on",
    "vnics": {
      "vnic": [
        {
          "nic": 0
        }
      ]
    }
  }
}
curl -ku admin:admin -X GET https://192.0.2.1/api/running/services/service/tiny1/vnics/vnic/0/
{
  "vsb:vnic": {
    "nic": 0,
    "mgmt-vnic": true,
    "network_name": "Eth130-2"
  }
}
  API History
Release
Modification
1.0
This API is introduced.
Create or Import a Service
Method
POST
Module
https://ip-address:port-number/api/running/services -H "Content-type: application/vnd.yang.data+json" –d '{"service":{"name":"name", "day0_filename":"day0_filename", "day0-dest-filename": "day0-dest-filename",  "day0-volume-id": "day0-volume-label", "disk_size":"disk_size", "disk-resize":"true_false", "disk_loc":"disk_loc", "disk_storage_name":"disk_location", "disk_type":"disk_type", "firmware":"firmware_type", "secure-boot":"true_false", "image_storage_name":"image_location", "ip": "vnf_mgmt_ip", "iso_name":"iso_name", "cache-mode": "none|writethrough", "vnf-group ":"VNF user group ", "key":"key_value", "vnc_password":"vnc_password", "macid":"mac_id", "monitor":"monitor", "memory":"memory", "novnc-port": "port_num", "numcpu":"numcpu", "power":"mode", "description":"new description", "monitoring": {"monitoring": [{"status": "monitoring-status", "boot-time":"boot-time", "poll-interval":"poll-interval", "failure-retry-cnt":"failure-retry-cnt", "recovery-policy”: {“ip-monitoring” : “recovery-policy”, “link-state-monitoring” : ”recovery-policy”}, "max-recovery-retries":"max-recovery-retries"}]},"properties":"properties", "serial_ports": {"serial_port": [{"serial":"serial_number", "serial_type":"serial_type","service_port":"service_port"}]},"storage_disks": {"storage_disk": [{"storage_disk_id":"id", "storage_disk_location":"disk_location", "storage-disk-image-file ":"image_file_name ", "storage_disk_format":"disk_format", "storage_disk_device":"disk_device", "storage_disk_space_used_gb":"disk_space_used",  "storage_disk_space_total_gb":"disk_space_total"}]}, "uuid":"uuid", "vm_type":"vm_type", "vnc_password":"vnc_password", "vnics": {"vnic": [{"nic":"nic_num", "mgmt-vnic":"mgmt-vnic ", "span-port":"span-port ", "model":"model", "native":"vlan_num", "network_name":"network_name", "tagged":"tagged", "type":"type", "passthrough_mode":"pt_mode",  "vlan":"vlan_num", "spoofchk":"spoofchk", “monitor-vnic”:”true/false”}]}}}'
Description
Creates or imports a service.
To import a service using an exported image available in the Cisco CSP 2100 repository, specify the name of the exported service in the iso_name parameter. For all other parameters, specify the values that the exported service used.
Starting from release 2.8.0, you can configure the firmware type and secure boot for VNF when creating a service.
Starting from release 2.7.0, you can configure the UUID when creating a service.
Starting from release 2.3.1, you can configure span-port on VNICs to true or false that marks them for spanning later through the span-ports tcpdump action start/stop/show command.
Starting with release 2.3.0, you can configure the monitoring service to monitor the VNF, associate a service with a VNF user group.
Starting with release 2.3.0, the description parameter can be configured for a specific service. To remove the service description, use the no form of this command.
Starting with release 2.3.0, you can configure the monitoring service to monitor the VNF and associate a service with a VNF user group.
Starting with release 2.3.0, the VNC password can be encrypted with the key field.
Starting from release 2.2.5, ISO volume label can be configured only for the first day0 ISO file.
Note: After creating a service, if you want to modify it, you can use the PATCH method.
Parameters
Name
Description
Importance
name name
Specifies the name of the service.
Note: Once created, you cannot modify the name of a service.
Required
day0_filename day0_filename
Specifies the name of the day0 configuration text or ISO file. The day0 configuration file contains the configuration information that is applied when a service is created. The day0 configuration file must reside in the same directory in which the boot image is located.
Starting with Release 2.3.0, you can specify an empty day0 filename.
Starting with Release 2.3.0, you can specify up to eight day0 configuration files. When specifying multiple files, separate the file names only with a comma as shown in the following example:
"hello.txt,hello1.txt,config.txt"
Note: Do not use spaces between the file names or between the comma and file names.
Optional
day0-dest-filename day0-dest-filename
Specifies the name of the day0 destination text or ISO file. The day0 destination file is required for the services that require a predefined configuration file name.
Following are the guidelines for the day0 destination filename:
·       Starting with Release 2.3.0, you can specify up to eight day0 destination files. When specifying multiple files, separate the file names only with a comma as shown in the following example:
day0-dest-filename "/config/banner/,/config/banner/,/config/banner/"
·       Starting with Release 2.3.0, you can specify folder structure format for the day0-dest-filename parameter. For example:
day0-dest-filename "/config/banner/,/config/banner/,/config/banner/"
Note: The folder structure must begin and end with a forward slash. If the folder structure does not end with a forward slash, the last string in the folder structure is considered as the destination filename. Also, the folder structure cannot include consecutive dots, such as ellipsis. You do not need to specify a value for the day0_filename and can only specify the folder structure for day0-dest-filename.
·       To use the same filename as the day0_filename, do not specify a value for the day0-dest-filename parameter. For example:
"day0_filename": "myday0file"
"day0_filename": "file1,file2", "day0-dest-filename":"dest-file1, "
When the value of day0-dest-filename parameter is blank or no value is specified, the filename specified in the day0_filename parameter is used for the day0-dest-filename parameter.
·       To maintain one to one mapping between the day0_filename and the day0-dest-filename parameter values, specify the same number of commas in the day0-dest-filename parameter values as you have specified in the day0_filename parameter values. For example, for the following values for the day0_filename parameter containing one comma: "day0_filename": "file1,file2",the day0-dest-filename parameter values must also contain one comma as shown in the following examples:
Optional
  o    "day0_filename": "file1,file2", "day0-dest-filename": ","
o    "day0_filename": "file1,file2", "day0-dest-filename": "dest-file1,dest-file2"
  day0-volume-id day0-volume-label
Specifies the volume label to be used for ISO file. Valid values are a string up to 32 characters and spaces are allowed in the volume label.
Note: You can specify a volume label only for the first day0 ISO file if the first day0 filename configuration is available. All remaining ISO files are system assigned default volume labels.
Optional
disk_loc disk_loc
Specifies the image file to be used for service storage.
This parameter is applicable only for Release 1.0.
Optional
disk_size disk_size
Specifies the total amount of disk space available (in GB) for this service.
This parameter is not configurable when a QCOW2 image is selected in the iso_name parameter and the disk-resize parameter is set to false.
Optional
disk-resize true_false
Enables or disables the resizing of bootable QCOW2 image. Valid values are true and false. Default value is false.
Optional
disk_storage_name disk_location
Specifies the location of the service image file. Default value is local. You can set the location to be an NFS storage mount point or gluster.
Note:  Gluster is supported when you create the cluster location with the storage network enabled.
Optional
disk_type disk_type
Specifies the disk type. Valid choices are ide and virtio.
Optional
firmware firmware_type
Specifies the firmware type of VNF. Valid values are legacy and uefi type. Default value is legacy.
Optional
image_storage_name image_location
Specifies the location of the boot image specified as iso_name. The location can be an NFS storage mount point. Default value is local.
To specify the NFS location, the NFS storage must have been added as described in the Add NFS Storage Space section.
Optional
ip vnf_mgmt_ip
Specifies the VNF management IP address to be used in the service
The VNF Management IP value entered in this parameter does not get configured in the service. This parameter serves only as a reference to the VNF management IP address mapped to a service.
Optional
iso_name iso_name
Specifies the ISO, OVA, QCOW software image file, and zip file to be used to create the service.
Note: With Cisco VSM and Cisco VSG services, only ISO image files are supported.
Required
cache-mode cache-mode
Specifies the cache mode of a service. Valid values are none or writethrough.
Optional
vnf-group VNF user group
Specifies the name of the VNF group of a service.
Optional
vnc_password vnc_password
Specifies the VNC password that is being encrypted for the service.
Ensure that the VNC password meets the following criteria:
·       a string between 8 to 64 characters.
·       at least one digit
·       at least one special character such as, _, -, ~, #, @, =, +, ^, ]
·       at least one upper case character
·       at least one lower case character
·       no two or more same characters can be provided consecutively
·       should not match exactly with any dictonary word.
Optional
key key_value
Allows you to configure vnc password with the key field. Default value is zero.
Note: VNC password is encrypted and saved with the key value set as seven after encryption.
Note: The save and load feature, where the VNC password with key 0 and weak strength has been configured before 2.2.5 does not work. However, the save and load feature with key 7 always work.
Required if vnc_password is set.
macid
Specifies the MAC ID. The MAC ID is automatically generated. You cannot set this parameter.
Optional
monitor action
If monitoring is enabled for a VM and the VM is powered on, you can pause or resume the monitoring of the VM. Valid values are pause or resume.
Optional
memory memory
Specifies the memory allocated for the service. Default is 2048.
Optional
novnc-port port_num
Specifies the port number for the service console. Each service must use a unique port number. Valid range is from 8721 to 8784.
Note: Before changing the port of a service, you must set the power mode of the service to off.
Optional
numcpu numcpu
Specifies the number of virtual CPUs for this service.
Optional
power mode
Specifies the power state upon activation. Valid values are off, on, reboot, and reset. Default is off.
Optional
description new description
Specifies a description about the service. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Optional
monitoring
Enables or disables configuring monitoring. For more information about VM monitoring, see the Add VM Monitoring to a Service section.
Required
properties properties
Specifies the properties of the service to be passed to the boot script of the image. You can specify information such as domain ID, svs mode, password, HA role, and VNC_password as shown in the Example section.
Optional
secure-boot
Enables or disables the secure boot for VNF when the firmware type is set to uefi. Valid values are true and false. The default value is false.
Optional
serial_ports
Specifies information about the serial ports. For information about the serial ports parameters, see the Assign Serial Interfaces to a Service section.
Optional
storage_disks
Specifies information about the storage disks. For information about the storage disks parameters, see the Add Storage Disks to a Service section.
Optional
uuid
Specifies the unique string to identify the service.
The uuid value is automatically generated. You cannot set this parameter.
–
vm_type vm_type
Specifies the type of the virtual machine for the service. Valid value is generic.
Optional
vnc_password vnc_password
Specifies the VNC password for the service.
Optional
vnics
Specifies the vNICs associated with this service. You can add multiple vNICs at a time by specifying the information in the vnic parameter separated by commas.
For information about the vNIC parameters, see the Assign vNICs to a Service section.
Optional
Examples
Example for creating a service
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type: application/vnd.yang.data+json"  -d  '{"service": {"name":"VSM_test7", "iso_name":"n1000v-dk9.5.2.1.SV3.1.3.125.iso","power":"on","description":"new description","memory":"8192","disk_size":"8","numcpu":"3",
    "vnics": { "vnic": [{ "nic":"0","vlan":"555","network_name":"Eth4-1"},{ "nic":"1","type":"access","vlan":"1922","network_name":"Eth4-0"},{ "nic":"2","type":"access","vlan":"2333","network_name":"Eth7-0"}]},"properties":"DomainId=252, SvsMode=L2, HostName=vsm-sv-auto,Password= admin, ManagementIpV4=192.0.2.159, ManagementIpV4Subnet=255.255.255.0, ControlVlan=575, PacketVlan=575,GatewayIpV4=192.0.2.1, SaveBootVars=True, HARole=primary","vnc_password":"abc123"}}'
  Example for modifying a service
curl -u admin:admin -X PATCH https://192.0.2.1/api/running/services/service/VSM_test7 -H "Content-Type: application/vnd.yang.data+json" -d '{"service": {"power":"off"}}'
  Example for creating a service using NFS
  1.     Verify that the mount (nfs0) has been created.
curl -u admin:admin -X GET https://192.0.2.130/api/running/resources/resource/csp-2100
{"resource": {"resource_name": "csp-2100", "rsyslog_udp_only": true, "rsyslog_udp_port": 514, "ram_used_mb": 18432, "disk_space_total_gb": 398, "num_cpus_total": 6, "storagelist": {"storage": [{"mount_name": "nfs0"}]}, "domain_name": "osp51.cisco.com", "default_gw": "192.0.2.1", "ram_total_mb": 60161, "csp_version": "01.00.00.155", "netmask": "255.255.255.0", "dns_server": "171.70.168.183", "dns": [ { "dnsip": "171.70.168.183" }, { "dnsip": "8.8.8.8" } ], "host_name": "osp51", "disk_space_used_gb": "17.2", "num_cpus_used": 6, "mgmt_pnic": "Eth4-0", "num_service": 4, "ip_address": "192.0.2.130", "syslog_server": {"host":"10.1.1.1"}}}
  2.     Use the nfs0 mount to create a new service.
curl -u admin:admin -X POST https://192.0.2.130/api/running/services -H "Content-Type:application/vnd.yang.data+json" -d '{"service":{"name":"vsm2_from_NFS0","iso_name":"n1000v-dk9.5.2.1.SV3.1.1.iso","power":"on","memory":"8192","disk_size":"8","image_storage_name":"nfs0", "vnics":{"vnic":[{"nic":"0","type":"access","network_name":"Eth133-0"}]}}}'
  Example for using Day0 Configuration and Day0 Destination File
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type: application/vnd.yang.data+json"  -d  '{"service": {"name": "avi_rest","iso_name": "se-pc-ss-ui.qcow2","day0_filename": "avi_config1.yml,avi_config2.yml", "day0-dest-filename": "avi_meta_data_se_pc_1.yml,", "power": "on","vnics": {"vnic": [{"nic": 0, "network_name":
"Eth130-1"}]}}}'
  Example for using Day0 Volume Label
curl -ku admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type: application/vnd.yang.data+json"  -d  '{"service": {"name": "avi_rest","iso_name": "se-pc-ss-ui.qcow2","day0_filename": "avi_config1.yml", "day0-volume-id": "TEST", "power": "on","vnics": {"vnic": [{"nic": 0, "network_name":
"Eth131-1"}]}}}'
  Example for using Multiple Day0 configuration and Day0 Destination File Names
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type: application/vnd.yang.data+json"  -d  '{"service": {"name": "avi_rest","iso_name": "se-pc-ss-ui.qcow2","day0_filename": "hello.txt,hello1.txt,config.txt", "day0-dest-filename": " / config/banner/,/config/banner/,/config/banner/", "power": "on","vnics": {"vnic": [{"nic": 0, "network_name":
"Eth130-0"}]}}}'
  Example for using VNC Password Ecryption
curl -u admin:admin -X POST https://192.0.2.1/api/running/services/service/tiny1 -H "Content-Type: application/vnd.yang.data+json"  -d '{"service": {"name": "avi_rest","iso_name": "se-pc-ss-ui.qcow2","power": "on","vnics": {"vnic": [{"nic": "0","vlan":"477","network_name":"Eth7-0"
}]}, "key":"0", "vnc_password":"vnc3"}}'
  Example for associating a service with a VNF user group.
curl -ku admin:admin -X POST https://192.0.2.1/api/running/csp_users/groups -H "Content-Type:application/vnd.yang.data+json" -d '{"service": {"name":" vsm-sf ", "power": "on" , "iso_name":"n1000v-dk9.5.2.1.SV3.1.3.125.iso" , "vnf-group":"abc-vnf-test" , "vnics: {"vnic":[{"nic"":"0", "vlan": "477", "network_name": "Eth7-0"}]}}}'
  Example for creating a service with uefi and secure-boot
curl -ku 'admin:admin' -X POST https://172.27.109.118/api/running/services -d '{"service" : { "name": “uefivnf", "firmware": "uefi", "secure-boot": true, "iso_name":"ubuntu-16.04-server-amd64.iso"}}'
API History
Release
Modification
  2.9.0
·       The link-state-monitoring feature is added. Recovery-policy now has two leaf nodes: ip-monitoring and link-state-monitoring.
  ·       The monitor-vnic keyword is added to vNIC. This can be set to “true” to enable link-state-monitoring for the VNF.
  2.8.0
The firmware and secure-boot parameters are added.
2.7.0
The services are exported in zip format and not tar.gz files.
2.5.0
New command, dns has been introduced.
2.3.1
·       vnc_password strong strength validation and strong encryption scheme has been introduced.
·       The VNIC span-port, spoofchk  parameters are added.
2.3.0
·       The description parameter is added.
·       The day0 file name and day0 destination file name supports multiple files.
·       vnc_password encryption and key field is added.
·       VM monitoring parameters are added.
·       The vnf-group parameter has been added.
2.2.5
The day0-volume-id parameter is added.
2.2.4
The disk-resize and storage-disk-image-file parameters are added.
2.2.2
The day0-dest-filename parameter is added.
2.2.0
The novnc-port and ip parameters are added.
2.0.0
The day0_filename, disk_storage_name, image_storage_name, serial_ports, and storage_disks parameters added to this API.
1.0
This API is introduced.
Retain UUID of a Service
Method
POST
Module
https://ip-address:port-number/api/running/services -H "Content-type: application/vnd.yang.data+json" –d '{"service":{"name":"name", "iso_name":"iso_name", "memory":"memory", “numcpu":"numcpu", "power":"mode", "description":"new description", "uuid":"uuid", "vnics": {"vnic": [{"nic":"nic_num", "mgmt-vnic":"mgmt-vnic ", "span-port":"span-port ", "model":"model", "native":"vlan_num", "network_name":"network_name",}]}}}'
Description
Retain a UUID of an exported service when importing the service.
Parameters
Name
Description
Importance
name
Specifies the name of the service to be exported.
Required
iso_name iso_name
Specifies the ISO, OVA, or QCOW software image file, and zip file to be used to create the service.
Note: With Cisco VSM and Cisco VSG services, only ISO image files are supported.
Required
memory memory
Specifies the memory allocated for the service. The default value is 2048 (MB).
Optional
numcpu numcpu
Specifies the number of virtual CPUs for this service.
Required
uuid uuid
Specifies a unique string to identify the service. The uuid value is automatically generated when exporting the service.
Required
vnic
Specifies the number for the vNIC.
Valid range is from 0 to 23. In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9. 
Optional
network_name network_name
Specifies the name of the network. A network name is required for creating a vNIC. You can specify a pNIC name or a non-pNIC name as the network name. If the name of the network is not a pNIC name, then the network is virtual, and it is accessible only within services on the same Cisco CSP 2100.
Required
Usage Guidelines
Before exporting the service, you must note down the UUID of the service and during import you can configure the UUID on the service that you have created.
API History
Release
Modification
2.7.0
The option to retain a UUID of an exported service is introduced.
The services are exported in zip format and not tar.gz files.
Get Description About a Service
Method
GET
Module
https://ip-address:port-number/api/running/ services/service/name/description
Description
Retrieves description about a specific service.
Parameters
Name
Description
Importance
name
Specifies the name of the service.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/services/service/tiny1/description
API History
Release
Modification
2.3.0
This API is introduced.
Modify the Description of a Service
Method
PUT
Module
https://ip-address:port-number/api/running/services/service/name/description -H "Content-type: application/vnd.yang.data+json" -d '{"description":"new description"}'
Description
Allows you to edit and modify the description of a specific service.
Note: Only users who belong to the service-group can modify the service descriptions.
Parameters
Name
Description
Importance
name
Name of the service
Required
description new description
Specifies a new description of the specific service that is being changed. Valid values are a string up to 256 characters, underscores, dashes, periods, and commas.
Required
Example
curl -ku admin:admin -X PUT https://192.0.2.130/api/running/services/service/tiny1/description –H "Content-Type: application/vnd.yang.data+json" -d '{"description":"new description"}'
API History
Release
Modification
2.3.0
This API is introduced.
Delete the Description of a Service
Method
DELETE
Module
https://ip-address:port-number/api/running/services/service/name/description
Description
Deletes the description of a service.
Note: Only users who belong to the service-group can delete description of a service
Parameters
Name
Description
Importance
name
Name of the service
Required
Example
curl -ku admin:admin -X DELETE https://192.0.2.130/api/running/services/service/tiny1/description
API History
Release
Modification
2.3.0
This API is introduced.
Modify the Emulator-Pin of a Service
Method
PUT
Module
https://ip-address:port-number/api/running/services/service/name/emulator-pin -H "Content-type: application/vnd.yang.data+json" -d '{"emulator-pin":"emulator pin"}'
Description
Allows you to edit and modify the emulator thread pinning of a specific service.
Parameters
Name
Description
Importance
name
Name of the service
Required
emulator-pin emulator pin
Configures the emulator thread pinning on a CPU or range of CPUs. You can configure for emulator thread pinning when powering on a VM.
Required
Example
curl -ku admin:admin -X PUT https://192.0.2.130/api/running/services/service/tiny1/emulator-pin –H "Content-Type: application/vnd.yang.data+json" -d '{"emulator-pin":"emulator pin"}'
API History
Release
Modification
2.4.1
This API is introduced.
Get Mapping Information Between Physical CPUs and Virtual CPUs
Method
GET
Module
https://ip-address:port-number/api/operations/ services/?deep
Description
Retrieves mapping information between physical CPUs and virtual CPUs per service. You can view the emulator pinning and vhost-threads mapping. This information is consumed by the resource utilization graph on the GUI.
You can filter the service name, and view the CPU graph per service.
Parameters
Name
Description
Importance
services
Name of the service
Required
API History
Release
Modification
2.6.0
This API is introduced.
Export a Service
Method
POST
Module
https://ip-address:port-number/api/running/services/service/name/_operations/export -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"exported_service_name": "exported_name", "exported_location ": "nfs | local",  "exported_nfs_location ": " exported_nfs_location ", "export_live ": "true|false"}}'
Description
Exports a service.
When you export a service, a file named exported_service_name.tar.gz or service_name-clone.tar.gz file is created in the Cisco CSP 2100 repository. It takes few minutes to create this file.
Parameters
Name
Description
Importance
name
Specifies the name of the service to be exported.
Required
exported_service_name
  exported_location
           exported_nfs_location
         export_live
Specifies a name for the exported service. If you do not specify a name, the following name is used by default: service_name-clone.
Valid values are local or nfs. When you export a service, and exported_location is not set or set to "local", a file named exported_service_name.tar.gz or service_name-clone.tar.gz file is created in the Cisco CSP 2100 repository. It takes few minutes to create this file.
When the exported_location parameter is set to "nfs", the exported_nfs_location parameter is a mandatory configuration and it should be a valid configured nfs mount. The exported file is then created in the repository of nfs mount.
Valid values are true or false. When export_live is not set or set to false, the VM is paused in the background by CSP when the export is in progress, which causes traffic loss. The VM resumes when export is complete. If export_live is set to true, the VM is exported live and there is no traffic loss.
Optional
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/services/service/test-service/_operations/export -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"exported_service_name": "test-service-export","exported_live": "true"}}'
API History
Release
Modification
2.3.1
The exported_location, exported_nfs_location, and export_live parameters has been added.
2.0.0
This API is introduced.
Cancel Exporting a Service
Method
POST
Module
https://ip-address:port-number/api/running/services/service/name/_operations/export -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"cancel": ""}}'
Description
Cancels an ongoing export of a service.
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/services/service/test-service/_operations/export -H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"cancel": ""}}'
API History
Release
Modification
2.6.0
This API is introduced.
Assign vNICs to a Service
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/services/service/name/vnics -H "Content-type: application/vnd.yang.data+json" d '{"vnics": {"vnic": [{"nic":"nic_num", "mgmt-vnic":"mgmt-vnic ", "model":"model", "native":"vlan_num", "network_name":"network_name", "tagged":"tagged", "type":"type", "passthrough_mode":"pt_mode", "vlan":"vlan_num"}]}}'
Description
Assigns vNICs to a service. You can add multiple vNICs at a time by specifying the information in the vnic parameter separated by commas.
Note:
·       When a service has passthrough as well as non-passthrough vNICs, we recommend that you first define the non-passthrough vNICs and then define the passthrough vNICs.
·       A network name is required for creating a vNIC. Therefore, you must either specify the network name in the network_name parameter or set the mgmt-vnic parameter to true. For more information, see the description of these parameters.
Parameters
Name
Description
Importance
name
Name of the service.
Required
nic nic_num
Specifies a number for the vNIC. Valid range is from 0 to 23.
In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9.
Required
mgmt-vnic mgmt-vnic
Configures the vNIC to use the dedicated service management interface. Valid values are true and false. When the value of this parameter is true, the configured dedicated service management interface (service-mgmt-pnic) is automatically specified as the value of the network_name parameter. No other value is supported in the network_name parameter.
To remove the dedicated service management interface, specify false as the value of this parameter and specify a value in the network_name parameter (as shown in the Examples section).
Optional
span-port span-port
Configures the vNIC to be spanned or not when you issue the span-ports tcpdump action start command from the CLI, REST, or web interface. This flag is always editable. Default is false.
Note: Cannot be enabled on vNICs if the type parameter is configured as passthrough.
Optional
model model
Specifies the model of the vNIC. Valid values are e1000 or virtio. Default is virtio.
Note: For Cisco VSM and Cisco VSG services, you must specify the model as e1000.
Optional
native vlan_num
Specifies the native VLAN number. Sets the native characteristics when the interface is in trunk mode. If you do not configure a native VLAN, the default VLAN 1 is used as the native VLAN.
Optional
network_name network_name
Specifies the name of the network. A network name is required for creating a vNIC. You can specify a pNIC name or a non-pNIC name as the network name. If the name of the network is not a pNIC name, the network is virtual, and it is accessible only within services on the same Cisco CSP 2100.
If the mgmt-vnic parameter is set to true, the configured dedicated management port for services (service-mgmt-pnic) is automatically specified as the value of the network_name parameter. No other value is supported in the network_name parameter.
Optional
tagged tagged
Specifies the tag setting for the port. Valid values are true and false.
Optional
type type
Specifies the type of the port. Valid values are access, passthrough, and trunk. Default is access.
Optional
passthrough_mode pt_mode
Configures the passthrough mode for a service. In the passthrough mode, a pNIC is not connected to a vSwitch and the data of the pNIC is directly passed to the configured service. Valid values are macvtap, pcie, sriov, and none. Default is none.
If the type parameter is configured as passthrough, the passthrough_mode parameter must be configured as macvtap or pcie.
Optional
vlan vlan_num
Specifies the VLAN number. If the type parameter is configured as trunk, this parameter specifies a set of VLAN numbers and ranges.
Note: You can configure a single VLAN on an SR-IOV VF interface. A VLAN tag is put on the VF interface when the vNIC using a SR-IOV VF is specified.
Optional
spoofchk spoofchk
Specifies the spoofchk knob state on SR-IOV VF. Valid values are off, on.
Note: This parameter can be only configured on SR-IOV VF.
Optional
monitor-vnic
  Specifies when the vNIC should be monitored as part of link-state-monitoring feature. If set to “true”, monitoring status needs to be enabled.
  Optional
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/services/service/VSM_1/vnics -H "Content-Type: application/vnd.yang.data+json"  -d  '{"vnics": {"vnic": [{ "nic":"0","vlan":"555","network_name":"Eth4-1"},{"nic":"1","type":"access","vlan":"1922","network_name":"Eth4-1"},{"nic":"2","type":"access","vlan":"2333","network_name":"Eth7-1"}]}'
  curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "content-type: application/vnd.yang.data+json" -d '{"service": {"name":"VSM_2", "iso_name":"TinyCore-5.3.iso","power":"on", "vnics": {"vnic": [{"nic": "0","type":"passthrough","passthrough_mode":"pcie", "network_name":"Eth1-1"}]}, "numcpu":"1","memory":"4096","disk_size":"3"}}'
  curl -u admin:admin -X POST https://192.0.2.1/api/running/services/ -H "Content-Type: application/vnd.yang.data+json" -d
'{"service": {"name": "tiny3","iso_name": "TinyCore.iso","power": "on","vnics": {  "vnic": [{"nic": 0, "mgmt-vnic": "false", "network_name": "Eth130-2"},   {"nic": 1, "mgmt-vnic": "true"}]}}}'
  curl -u admin:admin -X POST https://192.0.2.1/api/running/service/tiny1/vnics/vnic/0 -H "Content-Type: application/vnd.yang.data+json" -d '{"vnic": [{"nic": {"mgmt-vnic": "false", "network_name": "Eth130-2"}]}'
  curl -u admin:admin -X PUT https://192.0.2.1/api/running/ services/service/tiny1/vnics/vnic/0/span-port -H "Content-Type: application/vnd.yang.data+json" -d '{"span-port": "true"}'
API History
Release
Modification
2.3.1
The span-port, spoof-chk parameters are added.
2.2.0
The mgmt-vNIC parameter is added.
2.0.0
The passthrough_mode parameter added to this API.
1.0
This API is introduced.
SPAN and TCPDump vNICs
Method
POST
Module
https://ip-address:port-number/api/running/span-ports/_operations/tcpdump -H "Content-type: application/vnd.yang.data+json" –d '{" input ": {" action ": " action"}}'
Description
Globally performs the port spanning and tcpdump on every vNIC that was marked as span-port true through the REST API or the web interface. The start action initiates the spanning and tcpdump, which generates pcap files for each spanned vNIC. The pcap files can be downloaded through the web interface at, Debug>TCP Dump>TCP Dump Files.
After running the spanning and tcpdump, the spanning and tcpdump should be stopped with the stop action form of this API. The subsequent start or stop action overwrites pcap files, if start or stop is run for the same vNICs. The pcap files have a maximum limit of 400K packets. There are no restrictions on a user to run this command.
If there are no VNICs enabled for spanning on VNF vNICs, you should not use these commands. You can check the vNICs that are enabled for spanning with the action show commands.
Parameters
Name
Description
Importance
action action
Valid values are start, stop, and show.
The show action gives you a list of each service coupled with its vNICs, their network_names and nic numbers that are span-port enabled.
The start action spans and then runs tcpdump to a pcap file for each vNIC shown by the show action.
The stop action cleanly removes all the spanned ports, and finishes the tcpdump to pcap files.
Required
Example
  curl -ku admin:admin -X POST https://192.0.2.1/api/running/span-ports/_operations/tcpdump -H "Content-type:application/vnd.yang.data+json" -d '{"input": {"action": "start"}}'
{
  "output": {
    "results": "tcpdump started"
    }
}
  curl -ku admin:admin -X POST https://192.0.2.1/api/running/span-ports/_operations/tcpdump -H "Content-type:application/vnd.yang.data+json" -d '{"input": {"action": "stop"}}'
{
  "output": {
    "results": "all tcpdumps stopped"
    }
}
  curl -ku admin:admin -X POST https://192.0.2.1/api/running/span-ports/_operations/tcpdump -H "Content-type:application/vnd.yang.data+json" -d '{"input": {"action": "show"}}'
{
  "output": {
    "results": "{'tiny1': [['Eth130-3', '0'], ['Eth3-0', '2']]}"
    }
}
  API History
Release
Modification
2.3.1
This API is introduced.
Get Information About vNIC, VF MAC Addresses, and SRIOV Interfaces
Method
GET
Module
https://ip-address:port-number/api/operational/services
https://ip-address:port-number/api/operational/services/service/name/vnics/vnic/nic_num/mac-address
https://ip-address:port-number/api/operational/services/deep?
Description
Retrieves information about the MAC addresses of vNIC and VF associated with a service.
To get detailed information about statistics of all NIC interfaces per service, use the ?deep parameter.
Parameters
Name
Description
Importance
name
Name of the service
Required
nic_num
vNIC number
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/operational/services/service/test1/vnics/vnic/0/mac-address
{
  "vsb:mac-address": "02:3C:17:E7:0B:0F"
}
  curl -u admin:admin -X GET https://192.0.2.1/api/operational/services?deep
{
  "vsb:services": {
    "service": [
      {
        "name": "csr1",
        "is_import": 0,
        "pinning": {
          "cpu-map": [
            {
              "vcpu": 0,
              "pcpu": 1
            },
            {
              "vcpu": 1,
              "pcpu": 2
            }
          ],
          "emu-map": "1",
          "vhost-map": [
            {
              "ind": 0,
              "pid": 11789,
              "pcpu": "1"
            }
          ]
        },
        "uuid": "fdd07d0b-395b-4aac-87e7-51b527a3252b",
        "memory": 8192,
        "numcpu": 2,
        "macid": 8,
        "disk_size": "8.0",
        "disk-resize": false,
        "rng-device": false,
        "disk_type": "virtio",
        "cache-mode": "none",
        "iso_name": "csr1000v-universalk9.16.08.01a.qcow2",
        "vnf-group": "default-vnf-group",
        "power": "on",
        "monitoring": {
          "vm_status": "vm_unmonitored",
          "status": "disabled",
          "boot-time": 600,
          "poll-interval": 30,
          "failure-retry-cnt": 5,
          "max-recovery-retries": 3,
          "error": "None",
          "total-recovery-count": 0,
          "monitor-action-state": "none"
        },
        "state": "deployed",
        "error": "None",
        "vnc_port": 5900,
        "proxy_vnc_port": 8785,
        "uptime": "PT14M25S",
        "cpu_load": 9,
        "disk_used_mb": "918.0",
        "memory_used_kb": "70416",
        "crypto_bw_mb": 0,
        "vnics": {
          "vnic": [
            {
              "nic": 0,
              "mac-address": "02:3c:17:b4:a5:08",
              "vlan": "100",
              "tagged": false,
              "type": "access",
              "passthrough_mode": "none",
              "model": "virtio",
              "span-port": false,
              "mgmt-vnic": false,
              "network_name": "Eth0-1",
              "vf_network_name": "vnet0",
              "stats": {
                "receive": {
                  "rx-packets": "101",
                  "bytes": "11406",
                  "errors": "0",
                  "dropped": "0"
                },
                "transmit": {
                  "tx-packets": "101",
                  "bytes": "11406",
                  "errors": "0",
                  "dropped": "0"
                }
              }
            },
            {
              "nic": 1,
              "mac-address": "02:4c:17:b4:a5:08",
              "vlan": "10",
              "tagged": false,
              "type": "passthrough",
              "passthrough_mode": "sriov",
              "spoofchk": "on",
              "model": "virtio",
              "span-port": false,
              "mgmt-vnic": false,
              "network_name": "Eth2-3",
              "vf_network_name": "Eth2-3_vf0_129s10",
              "stats": {
                "receive": {
                  "rx-packets": "101",
                  "bytes": "12214",
                  "errors": "0",
                  "dropped": "0"
                },
                "transmit": {
                  "tx-packets": "101",
                  "bytes": "11810",
                  "errors": "0",
                  "dropped": "0"
                }
              }
            },
            {
              "nic": 2,
              "mac-address": "02:5c:17:b4:a5:08",
              "vlan": "20",
              "tagged": false,
              "type": "passthrough",
              "passthrough_mode": "sriov",
              "spoofchk": "on",
              "model": "virtio",
              "span-port": false,
              "mgmt-vnic": false,
              "network_name": "Eth2-3",
              "vf_network_name": "Eth2-3_vf1_129s10f1",
              "stats": {
                "receive": {
                  "rx-packets": "101",
                  "bytes": "12214",
                  "errors": "0",
                  "dropped": "0"
                },
                "transmit": {
                  "tx-packets": "101",
                  "bytes": "11810",
                  "errors": "0",
                  "dropped": "0"
                }
              }
            }
          ]
        }
      }
API History
Release
Modification
2.6.0
Displays statistics of all NIC interfaces per service.
2.2.4
This API is introduced.
Assign Serial Port to a Service
Method
POST
Module
https://ip-address:port-number/api/running/services -H "Content-type: application/vnd.yang.data+json" –d '{"service": {"name": "name", "serial_ports": {"serial_port": [{"serial":"serial_number", "serial_type":"serial_type", "service_port":"service_port"}]}}}'
Description
Assigns serial port to a service. You can assign up to four serial ports to a service. You can add multiple serial ports at a time by specifying the information in the serial_port parameter separated by commas.
Parameters
Name
Description
Importance
name name
Specifies the name of the service.
Required
serial serial_number
Specifies a number for the serial port. Valid range is from 0 to 3.
Required
serial_type serial_type
Specifies the type of the serial port. Valid values are console and telnet.
The console value is valid only on serial number 0.
Required
service_port service_port
Specifies the telnet port number for the telnet serial type. Valid range is from 1024 to 65,535.
Required
Example
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type:application/vnd.yang.data+json" -d '{"service":{"name":"test-ubuntu","iso_name":"ubuntu-12.04-server-amd64.iso","power":"on","memory":"8192","disk_size":"20", "vnics":{"vnic":[{"nic":"0","type":"access","network_name":"Eth130-0"}]},"serial_ports":{"serial_port":[{"serial":"0","serial_type":"console"}, {"serial":"1", "serial_type": "telnet", "service_port": "1700"}, {"serial":"2","serial_type": "telnet", "service_port": "1701"},{"serial":"3","serial_type": "telnet", "service_port": "1702"}]}}}'
API History
Release
Modification
2.0.0
This API is introduced.
Add VM Monitoring to a Service
Method
POST
Module
https://ip-address:port-number/api/running/services/ -H "Content-type: application/vnd.yang.data+json" –d '{"service": {"name": "name", "monitoring": {"monitoring": [{"status":"monitoring-status", " boot-time ":" boot-time ", "poll-interval ":"poll-interval ", "failure-retry-cnt ":"failure-retry-cnt", "recovery-policy": {“ip-monitoring” : “recovery-policy”, “link-state-monitoring” : ”recovery-policy”}, "max-recovery-retries":"max-recovery-retries"}]}}}'
Description
Adds VM monitoring to a service.
Parameters
Name
Description
Importance
name name
Specifies the name of the service.
Required
monitoring status
Enables or disables configuring monitoring. Valid values are Enabled and Disabled.
Required
boot-time boot-time
Specifies the time in seconds to be waited after deployment, until monitoring starts. Configure according to the VM boot time.
Required
poll-interval poll-interval
Specifies the time interval in seconds at which the polling should be performed.
Required
failure-retry-cnt failure-retry-cnt
Specifies the number of ping failures before recovery attempt. Valid range is from 0 to 999.
Required
recovery-policy ip-monitoring
  Specifies the recovery action to be taken when IP monitoring failure is detected. Valid values are reboot, shutdown, or none.
  Required
recovery-policy link-state-monitoring
  Specifies the recovery action to be taken when link state failure is detected for the vNICs that have monitor-vNIC set to true. Valid values are shutdown or none.
  Required
max-recover-retries max-recover-retries
Specifies the number of times recovery policy should be attempted. Valid range is from 0 to 16.
Required
  Example
curl -ku admin:admin -X POST https://192.0.2.1/api/running/services/ -H "Content-Type:application/vnd.yang.data+json" -d '{"service": { "name": "csr", "iso_name": "csr1000v-universalk9.16.04.01.iso", "power": "on", "ip": "10.193.75.160", "vnics": { "vnic": [ {"nic": 0, "mgmt-vnic": "false", "network_name": "Eth1-0", “monitor-vnic”:”true”} ] }, "monitoring": { "status": "enabled", "boot-time": 600, "poll-interval": 30, "failure-retry-cnt": 2, "recovery-policy": {“ip-monitoring” : “none”, “link-state-monitoring” : ”none”}, "max-recovery-retries": 2 } } }'
API History
Release
Modification
2.9.0
Added support for link-state-monitoring.
2.3.0
This API is introduced.
Get VM Monitoring Information About a Service
Method
GET
Module
https://ip-address:port-number/api/running/ services/service/name/monitoring
Description
Retrieves VM monitoring information about a specific service.
Parameters
Name
Description
Importance
name
Specifies the name of the VM.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/services/service/tiny1/monitoring
API History
Release
Modification
2.3.0
This API is introduced.
Create VNF User Groups
Method
POST
Module
https://ip-address:port-number/api/running/csp_users/groups -H "Content-Type:application/vnd.yang.data+json" -d '{"group": {"name": "group_name", "type": "group_type "}}'
Description
Creates a new VNF user group.
Parameters
Name
Description
Importance
name VNF user group
Specifies the VNF group name of a service. Valid values are an alphanumeric string except admin-group, operator-group, service-group, and vnf-operator-group.
Required
type group_type
Specifies the group type that can be either, none, service, operator, or vnf-operator. The type none gives permissions that is equivalent to type service. Each of these group types mimic the permissions of the base groups of the same prefix. This behavior means that the operator type vnf-groups has read-only permissions on VNFs that have this group as their vnf-group. It is similar to a base operator-group. Default is of type service.
Optional
Examples
curl -ku admin:admin -X POST https://192.0.2.1/api/running/csp_users/groups -H "Content-Type:application/vnd.yang.data+json" -d '{"group": {"name":"vnf-abc-test", "type": "service"}}'
API History
Release
Modification
2.3.1
This API is extended for group type, operator and vnf-operator.
2.3.0
This API is introduced.
Delete VNF User Group from Service
Method
DELETE
Module
https://ip-address:port-number/api/running/csp_users/groups/group/group-name
Description
Deletes a configured VNF user group.
Parameters
Name
Description
Importance
group-name
VNF group name of a service
Required
Example
curl -ku admin:admin -X DELETE https://192.0.2.130/api/running/csp_users/groups/group/vnf-abc-test
API History
Release
Modification
2.3.0
This API is introduced.
Modify VNF User Group of Service
Method
PATCH
Module
https://ip-address:port-number/api/running/services /service/VM-name -H "Content-Type:application/vnd.yang.data+json" -d '{"service": {" vnf-group": " new-vnf-group"}}'
Description
Modifies an existing VNF user group associated with a service.
Parameters
Name
Description
Importance
vnf-group new-vnf- group
Specifies the name of the new VNF group of a service.
Required
Example
curl -ku admin:admin -X PATCH https://192.0.2.1/api/running/services/service/vsm-sf -H "Content-Type:application/vnd.yang.data+json" -d '{"service": {"vnf-group":"abc-vnf-test"}}'
API History
Release
Modification
2.3.0
This API is introduced.
Add Storage Disks to a Service
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/services -H "Content-type: application/vnd.yang.data+json" –d '{"service": {"name": "name", {"storage_disk": [{"storage_disk_id":"id", "storage_disk_location":"disk_location", "storage-disk-image-file ":"image_file_name ","storage_disk_format":"disk_format", "storage_disk_device":"disk_device", "storage_disk_space_used_gb":"disk_space_used", "storage_disk_space_total_gb":"disk_space_total", "storage_disk_type":"disk_type"}]}}}'
Description
Adds storage disks to a service. You can add up to two storage disks to a service.
Note: Before adding a storage disk to a service, you must set the power mode of the service to off.
Parameters
Name
Description
Importance
name name
Specifies the name of the service.
Required
storage_disk_id id
Specifies the ID of the storage disk. For releases earlier to 2.8.0, valid range is from 1 to 2.
Starting from 2.8.0, valid values are 1 to 5.
Required
storage_disk_location disk_location
Specifies the location of the storage disk. It can be a local location or an NFS-mounted location.
Optional
storage-disk-image-file image_file_name
Specifies the local or NFS-mounted ISO, RAW, or QCOW2 image file to be used as the additional storage disk for a service. A QCOW2 or RAW image is mounted as disk and an ISO image is mounted as CDROM. You can add up to two additional storage disks.
Optional
storage_disk_format disk_format
Specifies the format of the storage disk. Valid values are raw and qcow2. Default is raw.
Optional
storage_disk_device disk_device
Specifies the storage device. Valid values are disk or cdrom. Default is disk.
Optional
storage_disk_space_used_gb disk_space_used
Specifies the total amount of used disk space (in GB). You cannot set this parameter.
–
storage_disk_space_total_gb disk_space_total
Specifies the total amount of available disk space (in GB).
Optional
storage_disk_type disk_type
  Specifies the storage disk type. Valid choices are ide and virtio. Default is ide.            
Optional
Examples
Create a service with storage disks
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type:application/vnd.yang.data+json" -d '{"service":{"name":"test-ubuntu","iso_name":"ubuntu-12.04-server-amd64.iso","power":"on","memory":"8192","disk_size":"20", "vnics":{"vnic":[{"nic":"0","type":"access","network_name":"Eth130-0"}]},"storage_disks":{"storage_disk":[{"storage_disk_id":"1","storage_disk_space_total_gb":"5","storage_disk_format":"qcow2","storage_disk_device":"disk","storage_disk_location":"local"}, {"storage_disk_id":"2","storage_disk_space_total_gb":"4","storage_disk_format":"raw","storage_disk_device":"disk","storage_disk_location":"local", "storage_disk_type": "virtio"}]}}}'
  Add a storage disk to a service
curl -u admin:admin -X PATCH https://192.0.2.1/api/running/services/service/rhel1 -H "Content-Type: application/vnd.yang.data+json" -d '{"service": {"storage_disks":{"storage_disk":[{"storage_disk_id": 2, "storage_disk_location": "local", "storage_disk_format": "raw", "storage_disk_space_total_gb": 30, "storage_disk_device": "disk"}]}}}'
  Create a service with storage disks and set disk_storage_type
curl -u admin:admin -X POST https://192.0.2.1/api/running/services -H "Content-Type: application/vnd.yang.data+json" -d '{"service": {"name": "TinyTest", "iso_name": "TinyLinux.qcow2", "power": "on", "vnics": { "vnic": [{ "nic":"0","vlan":"10","network_name":"Eth0-1"}]}, "storage_disks": {"storage_disk": [{"storage_disk_id":"1", "storage_disk_format":"qcow2", "storage_disk_device":"disk", "storage_disk_space_total_gb": 4.0, "storage_disk_type": "virtio"}]}}}'
API History
Release
Modification
2.2.4
The storage-disk-image-file parameter is added.
2.2.0
The storage-disk-type parameter is added.
2.0.0
This API is introduced.
Delete Storage Disks
Method
DELETE
Module
https://ip-address:port-number/api/running/services/service/name/storage_disks
https://ip-address:port-number/api/running/services/service/name/storage_disks/storage_disk/id
Description
Deletes all storage disks or a specific storage disk.
Note: Before deleting a storage disk, you must set the power mode of the service to off.
Parameters
Name
Description
Importance
name
Name of the service
Required
id
ID of the storage disk
Optional
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/services/service/service2/storage_disks
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/services/service/service2/ storage_disks/storage_disk/2
API History
Release
Modification
1.0
This API is introduced.
Saving .img File of Services
Method
PUT
Module
https://ip-address:port-number/api/running/services
https://ip-address:port-number/api/running/services/service/name/
Description
Deploys a service by using the .img file format and also saves the .img file of the service, before deleting it.
Note: You cannot save the .img file of a service in a powered on state and hence ensure that you power off the service to save it before deploying the service.
Parameters
Name
Description
Importance
name
Name of the service
Required
retain-vm-disk true_false
Enables or disables the saving of the .img file of a service. Valid values are true and false. Default value is false.
Optional
Examples
curl -ku admin:admin -X PUT https://192.0.2.1/api/running/services/service/test -H "Content-Type: application/vnd.yang.data+json"  -d  '{"retain-vm-disk": {"True"}'
API History
Release
Modification
2.5.0
This API is introduced.
Delete Services
Method
DELETE
Module
https://ip-address:port-number/api/running/services
https://ip-address:port-number/api/running/services/service/name
Description
Deletes all services or a specific service.
Note: Before deleting a service, you must set its power mode to off.
Parameters
Name
Description
Importance
name
Name of the service
Optional
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/services
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/services/service/service2
API History
Release
Modification
1.0
This API is introduced.
  Session APIs
Get Information About Configured Session Idle Timeout
Method
GET
Module
https://ip-address:port-number/api/running/session
Description
Retrieves information about the configured idle timeout for sessions.
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/session
{
  "tailf-aaa:session": {
    "idle-timeout": 120
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Configure Session Idle Timeout
Method
POST
Module
https://ip-address:port-number/api/running/session -H "Content-type: application/vnd.yang.data+json" -d '{"session": {"idle-timeout": seconds}}'
Description
Configures the idle timeout for sessions.
Parameters
Name
Description
Importance
seconds
Number of seconds. The range is from 0 to 8182 seconds. Use 0 to disable the session idle timeout.
Required
Usage Guidelines
Only the members of admin-group group can configure the idle timeout for a session. The configured idle timeout is applicable to all users.
Example
curl -u admin:admin -X POST https://192.0.2.130/api/session -H "Content-Type: application/vnd.yang.data+json" -d '{"session": {"idle-timeout": 130}}'
API History
Release
Modification
2.1.0
This API is introduced.
SNMP APIs
Get Information About SNMP Agents
Method
GET
Module
https://ip-address:port-number/api/running/snmp/agent
Description
Retrieves information about the SNMP agents.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp /agent
{
  "snmp:agent": {
    "engineID": "00:00:00:09:00:01:02:03:04:05"
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Configure Engine ID of an SNMP Agent
Method
POST
Module
https://ip-address:port-number/api/running/snmp/agent -H "Content-type: application/vnd.yang.data+json" -d '{"engineID" : "engine_id"}'
Description
Specifies the engine ID for an SNMP agent.
Note: Once configured, the engine ID for an SNMP agent cannot be deleted. You must configure an SNMP agent before configuring a SNMP community, group, user, host, or trap.
Parameters
Name
Description
Importance
engineID engine_id
Specifies the ID of the local or remote SNMP engine in hexadecimal format. Engine ID must be of minimum 5 octets.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/agent -H "Content-Type: application/vnd.yang.data+json" -d ' {"engineID": “00:22:33:22:22:22:55"}'

API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Communities
Method
GET
Module
https://ip-address:port-number/api/running/snmp/communities
https://ip-address:port-number/api/running/snmp/communities/community/name
Description
Retrieves information about all SNMP communities or a specific SNMP community.
Parameters
Name
Description
Importance
name
Name of the SNMP community
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/communities
{
  "snmp:communities": {
    "community": [
      {
        "community-name": "admin"
      },
      {
        "community-name": "public"
      }
    ]
  }
}
  API History
Release
Modification
2.1.0
This API is introduced.
Create or Modify an SNMP Community
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/snmp/communities/community -H "Content-type: application/vnd.yang.data+json" -d '{"community" : {"community-name" : "name", "community-access" : "access"}}'
Description
Creates or modifies an SNMP community.
Note: You must configure an SNMP agent before configuring an SNMP community.
Parameters
Name
Description
Importance
community-name name
Specifies the name of the SNMP community.
Required
community-access access
Specifies the access for this community. Only readOnly access is supported.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/communities -H "Content-Type: application/vnd.yang.data+json" -d '{"community" : {"community-name" : "public", "community-access" : "readOnly"}}’
API History
Release
Modification
2.1.0
This API is introduced.
Delete an SNMP Community
Method
DELETE
Module
https://ip-address:port-number/api/running/snmp/communities/community/name
Description
Deletes an SNMP community.
Parameters
Name
Description
Importance
name
Name of the SNMP community
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/snmp/communities/community/public
API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Groups
Method
GET
Module
https://ip-address:port-number/api/running/snmp/groups
https://ip-address:port-number/api/running/snmp/groups/group/name
Description
Retrieves information about all SNMP groups or a specific SNMP group.
Parameters
Name
Description
Importance
name
Name of the SNMP group
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/groups
{
  "snmp:groups": {
    "group": [
      {
        "group-name": "g0",
        "group-context-prefix": "snmp",
        "group-version": 1,
        "security-level": "noAuthNoPriv"
      },
      {
        "group-name": "g1",
        "group-context-prefix": "snmp",
        "group-version": 2,
        "security-level": "noAuthNoPriv"
      },
      {
        "group-name": "g2",
        "group-context-prefix": "snmp",
        "group-version": 3,
        "security-level": "authNoPriv"
      },
      {
        "group-name": "g3",
        "group-context-prefix": "snmp",
        "group-version": 3,
        "security-level": "authPriv"
      }
    ]
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Create or Modify an SNMP Group
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/snmp/groups -H "Content-type: application/vnd.yang.data+json" -d ' {"group" : {"group-name" : "name", "group-context-prefix" : "group-context-prefix", "group-version" : version, "security-level" : "security-level "","read" : "readview ", "write" : "writeview", "notify" : "notifyview"}}'
Description
Creates or modifies an SNMP group.
Note: You must configure an SNMP agent before configuring an SNMP group.
Parameters
Name
Description
Importance
group-name name
Specifies the name of the SNMP community.
Required
group-context-prefix group-context-prefix
Specifies the context prefix.
For SNMPv1 and SNMPv2c, only snmp context prefix is supported.
For SNMPv3, starting with Release 2.2.2, you can specify any context prefix. You can also configure null context to run an SNMPv3 query without specifying the context name. To configure null context, use the \”\” character sequence as shown in the Examples section. In Release 2.2.1 and earlier releases, only snmp context prefix is supported with SNMPv3.
Required
group-version version
Specifies the SNMP version and the security level. Supported SNMP versions are as follows:
·       1: SNMPv1
·       2: SNMPv2c
·       3: SNMPv3
Required
security-level security-level
Specifies the security level for authentication and privacy. Supported security levels are as follows:
·       noAuthNoPriv: Security level that provides only user validation.
·       authNoPriv: Security level that provides authentication (MD5 or SHA).
·       authPriv: Security level that provides both authentication (MD5 or SHA) and encryption (AES or DES).
Required
read readview
Specifies the name of the view for read access.
Required
write writeview
Specifies the name of the view for write access.
Required
notify notifyview
Specifies the name of the view for notify access.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/groups -H "Content-Type: application/vnd.yang.data+json" -d ' {"group" : {"group-name" : " testgroup", "group-context-prefix" : "snmp", "group-version" : "2", "security-level" : "noAuthNoPriv”, "read" : "read-access", "write" : "write-access", "notify" : "notify-access"}}'
  curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/groups -H "Content-Type: application/vnd.yang.data+json" -d ' {"group" : {"group-name" : " testgroupv3", "group-context-prefix" : "\”\”", "group-version" : "3", "security-level" : "noAuthNoPriv”, "read" : "read-access", "write" : "write-access", "notify" : "notify-access"}}'
  API History
Release
Modification
2.1.0
This API is introduced.
Delete SNMP Groups
Method
DELETE
Module
https://ip-address:port-number/api/running/snmp/groups/group/name
https://ip-address:port-number/api/running/snmp/groups
Description
Deletes an SNMP group or all SNMP groups.
Parameters
Name
Description
Importance
name
Name of the SNMP group
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/snmp/groups/group/cust
API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Users
Method
GET
Module
https://ip-address:port-number/api/running/snmp/users
https://ip-address:port-number/api/running/snmp/users/user/name
Description
Retrieves information about all SNMP users or a specific SNMP user.
Parameters
Name
Description
Importance
name
Name of the SNMP user
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/users/user/public
{
  "snmp:user": {
    "user-name": "public",
    "user-version": 2,
    "user-group": "g2"
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Create or Modify an SNMP User
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/snmp/users -H "Content-Type: application/vnd.yang.data+json" -d '{"user" : {"user-name" : "username", "auth-protocol" : "authprotocol ", "priv-protocol" : "privprotocol ", "passphrase" : "passphrase", "user-group" : "groupname", "user-version" : version}}'
Description
Creates or modifies an SNMP user.
Note: You must configure an SNMP agent before configuring an SNMP user.
Parameters
Name
Description
Importance
user-name username
Specifies the name of the SNMP user.
Required
auth-protocol authprotocol
Specifies the authentication protocol. Valid values are:
·       MD5: Message Digest algorithm
·       SHA: Secure Hash algorithm
Required
priv-protocol privprotocol
Specifies the User-based Security Model (USM). Valid values are:
·       des: Data Encryption Standard algorithm
·       aes: Advanced Encryption Standard algorithm
Required
passphrase passphrase
Specifies the passphrase. The minimum length required for a passphrase is 8 characters.
Optional
user-group groupname
Specifies the name of the SNMP group.
Required
user-version version
Specifies the SNMP version. Valid values are:
·       1: SNMPv1
·       2: SNMPv2c
·       3: SNMPv3
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/users/ -H "Content-Type: application/vnd.yang.data+json" -d '{"user" : {"user-name" : "public", "auth-protocol" : "md5", "priv-protocol" : "aes", "passphrase" : "pass123", "user-group" : "group2”, "user-version" : 2}}'
API History
Release
Modification
2.1.0
This API is introduced.
Delete an SNMP User
Method
DELETE
Module
https://ip-address:port-number/api/running/snmp/users/user/name
Description
Deletes an SNMP user.
Parameters
Name
Description
Importance
name
Name of the SNMP user
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/snmp/users/user/authuser
  API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Hosts
Method
GET
Module
https://ip-address:port-number/api/running/snmp/hosts
https://ip-address:port-number/api/running/snmp/hosts/host/name
Description
Retrieves information about all SNMP hosts or a specific SNMP host.
Parameters
Name
Description
Importance
name
Name of the SNMP host
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/hosts
{
"snmp:hosts": {
"host": [
{
"host-name": "host1"
},
{
"host-name": "host2"
},
{
"host-name": "host3"
}
]
}
}
  curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/hosts/host/host1
{
"snmp:host": {
"host-name": "host1",
"host-port": 162,
"host-ip-address": "10.10.10.1",
"host-version": 1,
"host-security-level": "noAuthNoPriv",
"host-user-name": "admin1"
}
}
API History
Release
Modification
2.1.0
This API is introduced.
Create or Modify an SNMP Host
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/snmp/hosts -H "Content-Type: application/vnd.yang.data+json" -d ' {"host": {"host-name": "hostname", "host-ip-address": "ip-address", "host-version": "version, "host-security-level": "securitylevel", "host-user-name": "username", "host-port": "port"}}'
Description
Creates or modifies an SNMP host.
Note: You must configure an SNMP agent before configuring an SNMP host.
Parameters
Name
Description
Importance
host-name hostname
Specifies the name of the SNMP host.
Required
host-ip-address ip-address
Specifies the IP address of the SNMP host.
Required
host-version version
Specifies the version of the SNMP host. Supported SNMP versions are as follows:
·       1: SNMPv1
·       2: SNMPv2c
·       3: SNMPv3
Required
host-security-level securitylevel
Specifies the security level for authentication and privacy. Supported security levels are as follows:
·       noAuthNoPriv: Security level that provides only user validation.
·       authNoPriv: Security level that provides authentication (MD5 or SHA).
·       authPriv: Security level that provides both authentication (MD5 or SHA) and encryption (AES or DES).
Required
host-user-name username
Specifies the user name for the SNMP host.
Required
host-port port
Specifies the port of the SNMP host.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/hosts/ -H "Content-Type: application/vnd.yang.data+json" -d '{"host": {"host-name":"host1", "host-ip-address":"1.1.1.1", "host-port":"162", "host-version":"2", "host-security-level":"noAuthNoPriv", "host-user-name":"public"}}'
API History
Release
Modification
2.1.0
This API is introduced.
Delete SNMP Hosts
Method
DELETE
Module
https://ip-address:port-number/api/running/snmp/hosts/host/name
https://ip-address:port-number/api/running/snmp/hosts
Description
Deletes an SNMP host or all SNMP hosts.
Parameters
Name
Description
Importance
name
Name of the SNMP host
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/snmp/hosts/host/host1
API History
Release
Modification
2.1.0
This API is introduced.
Configure an SNMP Trap
Method
POST
Module
https://ip-address:port-number/api/running/snmp/enable/traps -H "Content-Type: application/vnd.yang.data+json" -d '{"trap-type": "name"}'
Description
Configures an SNMP trap.
Note: You must configure an SNMP agent before configuring an SNMP trap.
Parameters
Name
Description
Importance
trap-type name
Specifies the name of the SNMP trap. Valid SNMP traps are linkDown and linkUp.
Required
Example
curl -u admin:admin -X POST https://192.0.2.130/api/running/snmp/enable/traps -H "Content-Type:application/vnd.yang.data+json" -d '{"trap-type":"linkUp"}'
API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Server Agents
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server
https://ip-address:port-number/api/running/snmp-server?deep
Description
Retrieves information about SNMP server agents.
To get detailed information about the SNMP server agent use the ?deep parameter.
Parameters
None
Example
curl -ku admin:admin -X GET https://192.0.2.1/api/running/snmp -server
{
  "snmp-server:snmp-server": {
    "view": [
  {
        "name": "myview"
      }
],
    "community": [
      {
        "name": "private"
      },
{
        "name": "public"
      }
    ],
    "group": [
      {
        "name": "mygroup"
      }
    ],
"user": [
      {
        "name": "v3user",
        "group-name": "mygroup"
      }
    ]
  }
}
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server View
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/view/view-name
Description
Retrieves information about SNMP server view entry.
Parameters
Name
Description
Importance
view-name
Label for the view record that you are retrieving. The name is used to reference the record.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/view/myview
{
"snmp-server:view": {
    "name": "myview",
    "rule": [
    {
    "mibs": "ALL",
    "included-opt": "included"
    },
    {
    "mibs": "IF-MIB",
    "included-opt": "excluded"
    }
    ]
}
}
API History
Release
Modification
2.3.0
This API is introduced.
Create or Modify an SNMP Server View
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' {"view": {"name": "view-name", "rule": [{"mibs": "oid-enum-string", "included-opt": "included | excluded"}]}}'
Description
Creates or modifies an SNMP server view entry.
Parameters
Name
Description
Importance
name view-name
Label for the view record that you are updating or creating. The name is used to reference the record. Valid values are a string up to 32 characters.
Required
rule
Specifies a list of configuration of mibs and included-opt.
Required
mibs oid-enum-string
Object identifier enum can be 13 predefined enum text strings. These predefined text strings are ALL, CISCO-ENTITY-EXT-MIB, CISCO-PROCESS-MIB, DISMAN-EVENT-MIB, ENTITY-MIB, HOST-RESOURCE-MIB, IF-MIB, IP-MIB, LIBVIRT-MIB, LM-SENSORS-MIB, SNMP-FRAMEWORK-MIB, SNMPv2-MIB, TCP-MIB, UDP-MIB. Only these 14 predefined MIBs can be defined in the view configuration. You can use "tab" key to view the list of predefined MIBs.
Required
Included-opt included|excluded
Type of view. You must specify either included or excluded.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"view": {"name":" myview ", "rule":[{"mibs":"IF-MIB", "included-opt":"excluded"}]}}'
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server Community
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/community/community-name
Description
Retrieves information about SNMP community access string.
Parameters
Name
Description
Importance
community-name
Community name that acts like a password and permits access to the SNMP protocol.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/community/ public?with-defaults
{
"snmp-server:community": {
    "name": "public",
    "view": "myview",
    "access": "rw",
    }
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring an SNMP Server Community
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' {"community": {"name": "community-name", "view": "view-name", "access": "access-type "}}'
Description
Sets up the community access string to permit access to the Simple Network Management Protocol (SNMP).
Parameters
Name
Description
Importance
name community-name
Community name that acts like a password and permits access to the SNMP protocol. Valid values are a string up to 32 characters.
Required
view view-name
Name of a previously defined view. The view defines the objects available to the community.
Optional
access access-type
Specifies either read-write (rw) or read-only (ro) access.
Optional
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"community": {"name":" mypublic","view":"myview ,"access":"rw" }}'
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server Group
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/group/group-name
Description
Retrieves information about SNMP server group.
Parameters
Name
Description
Importance
group-name
The name of the group.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/group/mgroup?with-defaults
{
"snmp-server:group": {
    "name": "mgroup",
    "security-model": "v3",
    "security-level": "priv",
    "read": "mview",
    "write": "myview",
    "notify": "myview"
    }
}
API History
Release
Modification
2.3.0
This API is introduced.
Specifying an SNMP Server Group Name
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' {"group": {"name": "group-name", "security-model": "security-model", "security-level": "security-level", "read": "readview", "write": "writeview", "notify": "notifyview"}}'
Description
Configures a new Simple Network Management Protocol (SNMP) group, or a table that maps SNMP users to SNMP views.
Parameters
Name
Description
Importance
name group-name
The name of the group. Valid values are a string up to 32 characters.
Required
security-model security-model
Specifies either of the following security models:
·       v1: The least secure of the possible security models.
·       v2c: The second least secure of the possible security models.
·       v3: The most secure of the possible security models. If v3 has been configured, at least one of the security levels must be specified.
Required
security-level security-level
Specifies either of the following security levels:
·       auth: Specifies authentication of a packet without encrypting.
·       noauth: Specifies no authentication of a packet
·       priv: Specifies authentication of a packet with encryption.
Required if security-model is v3
read readview
A string (not to exceed 32 characters) that is the name of the view that enables you only to view the contents of the agent.
Note: By default, it is assumed to be ALL MIBs, unless you use the read option to override this state.
Optional
write writeview
A string (not to exceed 32 characters) that is the name of the view that enables you to enter data and configure the contents of the agent.
Optional
notify notifyview
A string (not to exceed 32 characters) that is the name of the view that enables you to specify a notify, inform, or trap.
Optional
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"group": {"name":" mygroup","security-model":"v3 ,"security-level":"priv","read":"myview","write":"myview","notify":"myview"}}'
  API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server User
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/user/name,group-name
Description
Retrieves information about SNMP server user.
Parameters
Name
Description
Importance
name
The name of the user for v3 or community name for v1 and v2c.
Required
group-name
The name of the group for local or host name when remote host is configured.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/user/newuser,mycsp
{
"snmp-server:user": {
    "name": "newuser",
    "group-name": "mycsp",
    "remote": "mycsp",
    "security-model": "v2c"
    }
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring an SNMP Server User
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' {"user": {"name": "user-name", "group-name": "group-name", "remote": "remote-host", "encrypted": "null string", "security-model": "security-model", "auth": "auth-protocol", "auth-password": "auth-password", "priv": "privacy-protocol", "priv-password": "priv-password", "engineID": "engineID-string"}}'
Description
Configures a new user to a Simple Network Management Protocol (SNMP) group.
Parameters
Name
Description
Importance
name user-name
The name of the user for v3 or community name for v1 and v2c. Valid values are a string up to 32 characters.
Required
group-name group-name
The name of the group for local or host name when remote host is configured. Valid values are a string up to 32 characters.
Required
remote remote-host
Specifies a remote host name, or the IPv4 address of trap server.
Optional
encrypted null string
Specifies whether the auth-password or priv-password appears in encrypted format (a series of digits, masking the true characters of the string usually in hex key format).
Optional
security-model security-model
Specifies either of the following security models:
·       v1: Specifies that SNMPv1 should be used.
·       v2c: Specifies that SNMPv2c should be used.
·       v3: Specifies that the SNMPv3 security model should be used. Allows the use of the encrypted and/or auth keywords.
Required
auth auth-protocoll
Specifies which of the following authentication level should be used:
·       The HMAC-MD5-96 authentication level.
·       The HMAC-SHA-96 authentication level.
Optional
auth-password auth-password
A string (between 8 to 64 characters) that enables the agent to receive packets from the host.
Required when auth is configured
priv priv-protocol
Specifies either of the following algorithms to be used:
·       des: Specifies the use of the 56-bit DES algorithm.
·       aes: Specifies the use of AES algorithm.
Optional
priv-password priv-password
Specifies the User-based Security Model (USM). Valid values are a string between 8 to 64 characters.
Required when priv is configured
engineID engineID-string
Specifies the ID of the local or remote SNMP engine in hexadecimal format. The length of the engine ID can be between 5 to 32 octets. Default value is local CSP engine ID for remote user key generation.
Optional
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"user": {"name":" cspremoteuser","group-name":" 10.193.75.211","remote":"10.193.75.211","security-model":"v3" ,"auth":"md5","auth-password":"myauthpwd","priv":"aes","priv-password":"myprivpwd" }}'
  API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server Host
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/host/name
Description
Retrieves information about SNMP server host.
Parameters
Name
Description
Importance
name
Name or IPv4 of the host (the targeted recipient).
Required
Examples
The following example retrieves host information for version v3.
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/host/10.193.75.211?with-defaults
{
"snmp-server:host": {
    "name": "10.193.75.211",
    "inform-type ": "informs",
    "version": "3",
    "security-level": "priv"
    "username": "trapuser"
    "udp-port": "162"
    }
}
  The following example retrieves host information for version v1 or v2c.
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/host/10.193.75.211
{
"snmp-server:host": {
    "name": "10.193.75.211",
    "version": "2c",
    "remote-community": "remotepublic"
    }
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring an SNMP Server Host
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' '{"name": "name", "inform-type": "inform-type", "version": "version", "security-level": "security-level", "username": "username", "remote-community": "remote-community", "udp-port": "udp-port"}'
Description
Specifies the recipient of a Simple Network Management Protocol (SNMP) notification operation.
Parameters
Name
Description
Importance
name name
Name or IPv4 of the host (the targeted recipient). Valid values are a string up to 32 characters.
Required
inform-type inform-type
Specifies either of the following inform types:
·       traps: Sends SNMP traps to this host. This is the default.
·       informs: Sends SNMP informs to this host.
Optional
version version
Version of the SNMP used to send the traps. Version 3 is the most secure model, because it allows packet encryption with the priv keyword. When you use the version keyword, one of the following must be specified:
·       1—SNMPv1. This option is not available with informs.
·       2c—SNMPv2C.
·       3—SNMPv3. The three optional security-level keywords can follow the version 3 keyword.
Required
security-level security-level
If version 3 has been configured, at least one of the following security level fields must be specified.
·       auth—Enables Message Digest 5 (MD5) and Secure Hash Algorithm (SHA) packet authentication.
·       noauth—(Default) The noAuthNoPriv security level. This is the default if the [auth | noauth | priv] keyword choice is not specified.
·       priv— Enables Data Encryption Standard (DES) packet encryption (also called "privacy").
Required for version 3
username username
When v1 or v2c are specified, enter the password-like remote community string sent with the notification operation. When version 3 is specified, enter the SNMPv3 username.
Required
remote-community remote-community
When v1 or v2c are specified in version, remote-community is mandatory and username is not required. If v3 is specified, username is mandatory and remote-community is not required.
Required
udp-port udp-port
UDP port of the host to use. The default value is 162.
Optional
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"name":" 10.193.75.211","inform-type":" informs","version":"3","security-level":"priv" ,"username":"cspremoteuser","udp-port":"162"}'
  API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server Contact
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/contact
Description
Retrieves information about SNMP server contact information.
Parameters
Name
Description
Importance
contact
String that describes the SNMP system contact information. The maximum length of the contact string can be 255 characters.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/contact
{
"snmp-server:contact":
    "cspadmin@cisco.com"
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring SNMP Server Contact Information
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' '{"contact": "contact"}'
Description
Sets the system contact (sysContact) string.
Parameters
Name
Description
Importance
contact contact
String that describes the system contact information. The maximum length of the contact string can be 255 characters.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"contact":" cspadmin@cisco.com"}'
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server Location
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/location
Description
Retrieves the system location string.
Parameters
Name
Description
Importance
location
String that describes the system location information. The maximum length of the location string can be 255 characters.
Required
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/location
{
"snmp-server:location":
    "rack5@lab24"
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring SNMP Server Location Information
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' '{"location": "location"}'
Description
Sets the system location string.
Parameters
Name
Description
Importance
location location
String that describes the system location information. The maximum length of the location string can be 255 characters.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"location":" rack5@lab24"}'
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server EngineID
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/engineID/local
Description
Retrieves a name for local Simple Network Management Protocol (SNMP) engine on CSP 2100.
Parameters
Name
Description
Importance
local
Specifies the local copy of SNMP on CSP 2100.
Optional
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/engineID/local
{
"snmp-server:local": "000000090000641225a85355"
}
API History
Release
Modification
2.3.0
This API is introduced.
Configuring SNMP Server EngineID Information
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d ' '{"engineID": {"local": "engineID"}}'
Description
Configures a name for local Simple Network Management Protocol (SNMP) engine on CSP 2100.
Parameters
Name
Description
Importance
engineID local engineID
The name of a copy of SNMP. The length of the engineID string can be 12 octets.
Required
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server -H "Content-Type: application/vnd.yang.data+json" -d '{"engineID":{"local": " 001122334455667788991122"}}'
API History
Release
Modification
2.3.0
This API is introduced.
Get Information About SNMP Server enable
Method
GET
Module
https://ip-address:port-number/api/running/snmp-server/enable
Description
Retrieves information about enabled SNMP traps.
Parameters
None
Example
curl -ku admin:admin -X GET https://192.0.2.130/api/running/ snmp-server/enable
{
"snmp-server:enable": {
"traps": {
}
}
}
API History
Release
Modification
2.3.0
This API is introduced.
Configure SNMP Server Enable
Method
POST
Module
https://ip-address:port-number/api/running/snmp-server/enable -H "Content-Type: application/vnd.yang.data+json" -d '{"traps": {}}'
Description
Enables the trap functionality to send the notification to remote trap server.
Parameters
None
Example
curl -ku admin:admin -X POST https://192.0.2.130/api/running/snmp-server/enable -H "Content-Type:application/vnd.yang.data+json" -d '{"traps":{}}'
API History
Release
Modification
2.3.0
This API is introduced.
Delete SNMP Traps
Method
DELETE
Module
https://ip-address:port-number/api/running/snmp/enable/traps
Description
Deletes SNMP traps.
Parameters
None
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/snmp/enable/traps
API History
Release
Modification
2.1.0
This API is introduced.
Get Information About SNMP Traps
Method
GET
Module
https://ip-address:port-number/api/running/snmp/traps
Description
Retrieves information about enabled SNMP traps.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/snmp/enable/traps
{
"snmp:traps": {
"trap-type": ["linkUp", "linkDown"]
}
}
API History
Release
Modification
2.1.0
This API is introduced.
  System APIs
Get CPU Pinning Status
Method
GET
Module
https://ip-address:port-number/api/operational/system-settings/cpupin-state
Description
Retrieves the current state of the cpupin configuration. If cpupin configuration has been modified, the status is updated after rebooting the Cisco CSP 2100 host.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.1/api/operational/system-settings/cpupin-state --insecure
{
"system_setting:cpupin-state": 0
}
API History
Release
Modification
2.3.1
The path of getting CPU pin has been updated.
2.2.5
This API is introduced.
Enable or Disable CPU Pinning
Method
PUT
Module
https://ip-address:port-number/api/running/cpupin -H "Content-Type: application/vnd.yang.data+json" -d '{"system-setting":"cpupin"}'
Description
Enable or disable pinning each VNF CPU to a particular system CPU. If CPU pinning mode is updated, ensure that you reboot the Cisco CSP 2100 host for the updated mode to be applied.
Parameters
Name
Description
Importance
system-setting  cpupin
Sets the CPU pinning mode. Valid values are enable and disable. Default is enable.
Required
Examples
Example for enabling CPU pin
curl -u admin:admin -X PUT https://192.0.2.130/api/running/system-settings/cpupin -H "Content-Type: application/vnd.yang.data+json" -d '{"system-setting:cpupin":"enable"}'
  Example for disabling CPU pin
curl -u admin:admin -X PUT https://192.0.2.130/api/running/system-settings/cpupin -H "Content-Type: application/vnd.yang.data+json" -d '{"system-setting:cpupin":"disable"}'
API History
Release
Modification
2.3.1
The path for CPU pinning has been updated.
2.2.5
This API is introduced.
Get Information About Disk I/O Statistics
Method
POST
Module
https://ip-address:port-number/api/running/show/system/_operations/iostat
https://ip-address:port-number/api/running/show/system/_operations/iostat -H "Content-Type:application/vnd.yang.data+json" -d '{"input": {"disk":"name", "extend": ""}}'
Description
Retrieves the disk I/O statistics for all disks or specified disks or extended disk I/O statistics for all disks.
Name
Description
Importance
disk name
Displays the statistics for the specified disk. You can specify multiple disks in the following format: "name1 name2".
Optional
extend
Displays the extended statistics for all disks.
Optional
Examples
curl -u admin:admin -X POST https://192.0.2.1/ api/running/show/system/_operations/iostat
{
 "output": {
                  "result": "\nLinux 3.10.0-693.5.2.el7.x86_64 (csp) \t12/07/2017 \t_x86_64_\t(32 CPU)\navg-cpu: 
%user   %nice %system %iowait  %steal   %idle\n           0.03    0.00    0.03    0.00    0.00   99.94\n
Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\n
sda               1.97        11.56        16.60     730597    1049668\n
sda1              0.00         0.00         0.00         88          0\nsda2              1.55         6.21        11.28     392645     713120\nsda3              0.00         0.02         0.00       1340          0\nsda4              0.00         0.00         0.00         14          0\nsda5              0.35         5.23         0.00     330765        164\nsda6              0.07         0.08         5.32       4929     336384\ndm-0              0.02         0.12         0.01       7496        788\n"
                        }
}
curl -u admin:admin -X POST https://192.0.2.1/ api/running/show/system/_operations/iostat -H "Content-Type:application/vnd.yang.data+json" -d '{"input": { "disk":"sda1 sda2"}}'
{
"output": {
                  "result": "\nLinux 3.10.0-693.5.2.el7.x86_64 (csp) \t12/07/2017 \t_x86_64_\t(32 CPU)\navg-cpu: 
%user   %nice %system %iowait  %steal   %idle\n          
0.03    0.00    0.03    0.00    0.00   99.94\n
Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\n
sda1              0.00         0.00         0.00         88          0\n
sda2              1.55         6.21        11.28     392653     713384\n"
             }
}
curl -u admin:admin -X GET https://192.0.2.1/ api/running/show/system/_operations/iostat -H "Content-Type:application/vnd.yang.data+json" -d '{"input": {"extend":""}}'
{
"output": {
                  "result": "\nLinux 3.10.0-693.5.2.el7.x86_64 (csp) \t12/07/2017 \t_x86_64_\t(32 CPU)\navg-cpu: 
%user   %nice %system %iowait  %steal   %idle\n          
0.03    0.00    0.03    0.00    0.00   99.94\n
Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\n
sda               0.01     0.59    1.23    0.74    11.55    16.60    28.56     0.01    4.49    1.31    9.75   0.38   0.07\n
sda1              0.00     0.00    0.00    0.00     0.00     0.00     8.00     0.00    2.55    2.55    0.00   2.55   0.00\n
sda2              0.01     0.57    0.86    0.69     6.21    11.28    22.60     0.00    2.98    1.65    4.64   0.45   0.07\n
sda3              0.00     0.00    0.00    0.00     0.02     0.00    14.18     0.00    2.08    2.08    0.00   1.93   0.00\n
sda4              0.00     0.00    0.00    0.00     0.00     0.00     5.60     0.00    4.00    4.00    0.00   4.00   0.00\n
sda5              0.00     0.00    0.35    0.00     5.23     0.00    29.76     0.00    0.36    0.34   18.78   0.21   0.01\n
sda6              0.00     0.02    0.01    0.05     0.08     5.32   162.11     0.00   61.43    4.33   76.60   1.26   0.01\ndm-0              0.00     0.00    0.01    0.01     0.12     0.01    15.99     0.00    1.52    0.09    3.89   1.48   0.00\n"
          }
}
API History
Release
Modification
2.2.4
This API is introduced.
TACACS+ APIs
Get Information About TACACS+ Servers
Method
GET
Module
https://ip-address:port-number/api/running/security_servers/tacacs-server
https://ip-address:port-number/api/running/security_servers/tacacs-server/host/hostname
https://ip-address:port-number/api/running/security_servers/tacacs-server?deep
Description
Retrieves information about a specific TACACS+ server or all TACACS+ servers.
To get detailed information about the TACACS+ servers, use the ?deep parameter.
Note: If you have not yet configured a TACACS+ server or deleted all configured TACACS+ servers, use your Cisco CSP 2100 user account credentials with the REST APIs. After configuring a TACACS+ server, use your configured TACACS+ host’s user account credentials with the REST APIs.
Parameters
Name
Description
Importance
hostname
Name of the TACACS+ server
Required
Example
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/tacacs-server
{
  "tacacs-server": {
    "host": [
      {
        "server": "10.10.10.2"
      },
      {
        "server": "last.cisco.com"
      }
    ]
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/tacacs-server?deep
{
  "security:tacacs-server": {
    "host": [
      {
        "server": "10.10.10.2",
        "secret": {
          "key": "7",
          "shared-secret": " sec_code "
        }
      },
      {
        "server": "last.cisco.com",
        "secret": {
          "key": "7",
          "shared-secret": "shenf1"
        }
      }
    ]
  }
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/security_servers/tacacs-server/host/last.cisco.com
{
  "host": {
    "server": "last.cisco.com",
    "secret": {
      "key": "7",
      "shared-secret": "shenf1"
    }
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Add or Modify a TACACS+ Server
Method
POST or PATCH
Module
https://ip-address:port-number/api/running/security_servers/tacacs-server -H "Content-Type:application/vnd.yang.data+json" -d '{"host": {"server":"hostname", "secret": {"key": "key_value", "shared-secret":"shared-secret"}}}'
Description
Adds or modifies a TACACS+ server.
Parameters
Name
Description
Importance
server hostname
Specifies the hostname or IPv4 or IPV6 address of the TACACS+ server.
Note: You cannot modify the hostname.
Required
key key_value
Defines the type of the shared-secret key. Valid values are the following:
·       0: The shared-secret key is specified in clear text. This is the default.
·       7: The shared-secret key is specified in encrypted text.
Optional
shared-secret shared-secret
Specifies the preshared secret to authenticate communication between the TACACS+ server and Cisco CSP 2100. The preshared secret is alphanumeric, case sensitive, and has a maximum of 63 characters.
If the specified shared-secret is in clear text, Cisco CSP 2100 encrypts the shared-secret and changes the key parameter to 7. If the specified shared-secret is already encrypted, Cisco CSP 2100 does not make any change.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/security_servers/tacacs-server -H "Content-Type:application/vnd.yang.data+json" -d '{"host": {"server":"10.10.10.2", "secret": {"key":"0", "shared-secret":"tac_test"}}}'
API History
Release
Modification
2.1.0
This API is introduced.
Delete a TACACS+ Server
Method
DELETE
Module
https://ip-address:port-number/api/running/security_servers/tacacs-server/host/hostname
Description
Deletes a configured TACACS+ server.
Note: After deleting the last reachable TACACS+ server, use your Cisco CSP 2100 user account credentials with the REST APIs.
Parameters
Name
Description
Importance
hostname
Hostname or IP address of the TACACS+ server
Required
Example
curl -u tacacs_user:password -X DELETE https://192.0.2.130/api/running/security_servers/tacacs-server/host/10.10.10.2
API History
Release
Modification
2.1.0
This API is introduced.
  Time Zone APIs
Get Information About the Time Zone
Method
GET
Module
https://ip-address:port-number/api/running/running/clock/timezone
https://ip-address:port-number/api/running/running/clock
Description
Retrieves information about the configured time zone of Cisco CSP 2100.
If a time zone is not configured, you can retrieve information about the default time zone with the ?with-defaults=report-all parameter.
https://ip-address:port-number/api/running/running/clock/timezone?with-defaults=report-all
Parameters
None
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/clock/timezone
{
  "clock:timezone": "Asia/Bangkok"
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/clock/timezone?with-defaults=report-all
{
  "clock:timezone": "America/New_York"
}
curl -u admin:admin -X GET https://192.0.2.1/api/running/clock?with-defaults=report-all
{
  "clock:clock": {
    "timezone": "America/New_York"
  }
}
API History
Release
Modification
2.2.2
This API is introduced.
Configure the Time Zone for Cisco CSP 2100
Method
POST
Module
https://ip-address:port-number/api/running/clock -H "Content-Type:application/vnd.yang.data+json" -d '{"clock:timezone": "Continent/City"}'
Description
Configures the time zone for Cisco CSP 2100.
Parameters
Name
Description
Importance
continent/city
Name of the continent and city separated by a forward slash (/).
Required
Usage Guidelines
To view all continent/city values supported in Cisco CSP 2100, you can use the clock timezone ? CLI command.
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/clock -H "Content-Type:application/vnd.yang.data+json" -d '{"clock:timezone": "America/Los_Angeles"}'
API History
Release
Modification
2.2.2
This API is introduced.
Change the Time Zone for Cisco CSP 2100
Method
PATCH
Module
https://ip-address:port-number/api/running/clock/timezone -H "Content-Type:application/vnd.yang.data+json" -d '{"timezone": "Continent/City"}'
Description
Changes the time zone for Cisco CSP 2100.
Parameters
Name
Description
Importance
continent/city
Name of the continent and city separated by a forward slash (/).
Required
Usage Guidelines
To view all continent/city values supported in Cisco CSP 2100, you can use the clock timezone ? CLI command.
Examples
curl -u admin:admin -X PATCH https://192.0.2.1/api/running/clock/timezone -H "Content-Type:application/vnd.yang.data+json" -d '{"timezone": "Asia/Bangkok"}'
API History
Release
Modification
2.2.2
This API is introduced.
Delete the Configured Time Zone
Method
DELETE
Module
https://ip-address:port-number/api/running/clock/timezone
Description
Deletes the configured time zone. The Cisco CSP 2100 time zone is set to the default: America/New_York.
Parameters
None
Example
curl –u admin:admin -X DELETE https://192.0.2.130/api/running/clock/timezone
API History
Release
Modification
2.2.2
This API is introduced.
Technical Support Information API
Generate Technical Support Information
Method
POST
Module
https://ip-address:port-number/api/running/support/_operations/show-tech –H "Content-Type: application/vnd.yang.data+json" -d '{"input": {"operation": "generate-report"}}'
Description
Generates technical support information to diagnose an issue or to attach to a Cisco TAC case.
Parameters
None
Usage Guidelines
This REST API creates a csp_show_tech.tar.gz file in the log directory. The csp_show_tech.tar.gz file contains relevant log files and configuration files and it can take up to 15 minutes to create this file. If a csp_show_tech.tar.gz file already exists in the log directory, the existing file is overwritten.
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/support/_operations/show-tech –H "Content-Type: application/vnd.yang.data+json" -d '{"input":{"operation": "generate-report"}}'
API History
Release
Modification
1.0
This API is introduced.
User APIs
Get Information About the Cisco CSP 2100 Users
Method
GET
Module
https://ip-address:port-number/api/running/csp_users
https://ip-address:port-number/api/running/csp_users?deep 
https://ip-address:port-number/api/running/csp_users/users/user/username
Description
Retrieves information about a specific Cisco CSP 2100 user or all users.
To get detailed information about all users, use the ?deep parameter.
Parameters
Name
Description
Importance
username
Name of the user
Required
Examples
curl -u admin:admin -X GET https://192.0.2.1/api/running/csp_users
{
  "csp_user:csp_users": {
    "users": {
      "user": [
        {
          "name": " abc-admin "
        },
        {
          "name": " abc-oper"
        }
      ]
    }
  }
}
  curl -u admin:admin -X GET https://192.0.2.1/api/running/csp_users/users/user?deep
{"users": {"user": [{"group": "admin-group", "name": "abc-admin"}, {"group": "operator-group", "name": "abc-oper"}, {"group": "service-group", "name": "abc-service"}]}}
{
  "csp_user:csp_users": {
    "users": {
      "user": [
        {
          "name": " abc-admin ",
          "group": "admin-group",
          "password": "$6$ELkOUGuH$Kxe/44dlO1OjIjvm2cbvQK84WTpwQlsD8MYGA2Q/qOuyeLoe7o6e94ptF3PUFo8r6tNlGLLEhzhvR./BYdx.."
        },
        {
          "name": " abc-oper ",
          "group": " operator-group ",
          "password": "$6$f8rtb/kZ$nA/CvUq8Cpl399jk/wpliHVJcEpydzVAhFqm4ssn3LjOLZLhBGTKKloeijopivbVjrQDyOwPQsDDtpgW6/uxL0"
        }
      ]
    }
  }
}
  curl -u admin:admin -X GET https://192.0.2.1/api/running/csp_users/users/user/abc-oper
{
  "csp_user:user": {
    "name": "abc-oper",
    "group": " operator -group",
    "password": "$6$f8rtb/kZ$nA/CvUq8Cpl399jk/wpliHVJcEpydzVAhFqm4ssn3LjOLZLhBGTKKloeijopivbVjrQDyOwPQsDDtpgW6/uxL0"
  }
}
API History
Release
Modification
2.1.0
This API is introduced.
Create a New User
Method
POST
Module
https://ip-address:port-number/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user": {"name": "username", "password": "password", "group": "group"}}'
Description
Creates a new user.
Note: Only the members of the admin-group group can use this API to create a new user.
Parameters
Name
Description
Importance
name username
Specifies the username.
Required
password password
Specifies the password in clear text. In running configuration, the password is displayed as a hashed entry.
The password is mandatory, the user is considered as a local user and is authenticated locally by the Cisco CSP 2100.
A user can also be defined remotely. In such cases, remote authentication is used to authenticate the user. Local authentication is used only if the remote authentication is not available. Local authentication is not used as the secondary authentication method if the remote authentication is rejected.
Required
group group
Specifies the group for the user. Valid values are admin-group, operator-group, service-group, and vnf-operator-group.
Required
  Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user":{"name": "abc-oper","password": "newSecret@123456","group": "operator-group"}}'
API History
Release
Modification
2.3.0
Introduced a new VNF group, vnf-operator-group
2.1.0
This API is introduced.
Change a User’s Password
Release 2.2.2 and Later Releases
Method
POST
Module
https://ip-address:port-number/api/running/change-password/_operations/users -H "Content-Type:application/vnd.yang.data+json" -d '{"user": {"username":"username", "old-password": "old-password", "new-password": "new-password"}}'
Description
Changes a user’s password.
Note: Only the members of the admin-group group can use this API to change the password of other users. Members of other groups can only change their own password.
Parameters
Name
Description
Importance
username username
Specifies the username.
Required
old-password old-password
Specifies the old password.
Required
new-password new-password
Specifies the new password.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/change-password/_operations/users -H "Content-Type:application/vnd.yang.data+json" -d '{"user":{"username": "abc-oper","old-password": " oldSecret@123456", "new-password": "newSecret@123456"}}'
API History
Release
Modification
2.2.2
This API is introduced.
Release 2.1.0
Method
POST
Module
https://ip-address:port-number/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user": {"name":"username", "password": "new_password"}}'
Description
Changes a user’s password.
Note: Only the members of the admin-group group can use this API to change the password of other users. Members of other groups can only change their own password.
Parameters
Name
Description
Importance
name username
Specifies the username.
Required
password new_password
Specifies the new password.
Required
Examples
curl -u admin:admin -X POST https://192.0.2.1/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user":{"name": "abc-oper","password": " Secret@123456"}}'
API History
Release
Modification
2.1.0
This API is introduced.
Change a User’s Group
Method
PATCH
Module
https://ip-address:port-number/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user": {"name":"username", "group": "new_group"}}'
Description
Changes a user’s group.
Note: Only the members of the admin-group group can use this API to change a user’s group.
Parameters
Name
Description
Importance
name username
Specifies the username.
Required
group new_group
Specifies the new group.
Required
  Examples
curl -u admin:admin -X PATCH https://192.0.2.1/api/running/csp_users/users/user -H "Content-Type:application/vnd.yang.data+json" -d '{"user":{"name": "abc-test","group": "operator-group"}}'
API History
Release
Modification
2.1.0
This API is introduced.
Delete a User
Method
DELETE
Module
https://ip-address:port-number/api/running/csp_users/users/user/username
Description
Deletes a user.
Note: Only the members of the admin-group group can use this API to delete a user.
Parameters
Name
Description
Importance
username
Specifies the username to be deleted.
Required
Examples
curl -u admin:admin -X DELETE https://192.0.2.1/api/running/csp_users/users/user/abc-oper
API History
Release
Modification
2.1.0
This API is introduced.
Get Status Information about Password Expiry
Method
GET
Module
https://ip-address:port-number/api/operational/system-settings/password/expiry
Description
Retrieves the status of password expiry for CSP.
Parameters
None
Example
curl -u admin:admin -X GET https://192.0.2.1/api/operational/system-settings/password/expiry
  API History
Release
Modification
2.4.0
This API is introduced.
Enable or Disable Password Expiry on CSP
Method
POST
Module
https://ip-address/api/running/system-settings/operations/password-expiry -H "Content-type: application/vnd.yang.data+json" -d '{"input": {"action": "enable|disable"}}’
Description
Enables or disables password expiry for CSP host.
Parameters
Name
Description
Importance
action enable|disable
Specifies the password states on CSP. Valid values are:
disable: Prevents expiry of password for CSP host. Therefore, you are not prompted to change password.
enable: Enables expiry of password for CSP host.
By default, password state is enable.
Optional
Example
curl -k -u admin:admin -X POST https://192.0.2.1/api/running/s ystem-settings/operations/passowrd-expiry -H " Content-type:application/vnd.yang.data+json" -d '{"input":{"action":"disable"}}'
{
   "system_setting:output": {
    "results": "Password expiry disabled for all users"   
    }
]
API History
Release
Modification
2.4.0
This API is introduced.
Enable or Disable TPM based Disk Encryption
Method
POST
Module
https://ip-address/api/running/system-settings/tpm -H "Content-type: application/vnd.yang.data+json" -d '{"system-settings:tpm": {"encryption": "enable|disable"}}’
Description
Enables or disables TPM based disk encryption.
Parameters
Name
Description
Importance
disable
Disables TPM based disk encryption. By default, encryption state is disable.
Optional
enable
Enables TPM based disk encryption of private certificates and ssh keys folder.
Required
Example
curl -ku admin:admin -X PUT https://192.0.2.1/api/running/s ystem-settings/tpm -H " Content-type:application/vnd.yang.data+json" -d '{"system-settings":{"encryption":"enable"}}'
  curl -ku admin:admin -X GET https://192.0.2.1/api/running/s ystem-settings/tpm?with-defaults --insecure
  {
"system_setting:tpm": {
"encryption": "disable"
}
}
  curl -ku admin:admin -X GET https://192.0.2.1/api/operational/system-settings/tpm/encryption-status --insecure
{
"system_setting:encryption-status":"encryption_complete"
}
API History
Release
Modification
2.6.0
This API is introduced.
vNICs APIs
Get Statistics for vNICs
Method
GET
Module
https://ip-address:port-number/api/operational/vnic_stats/vnic_stat -H "Accept:application/vnd.yang.collection+json"
https://ip-address:port-number/api/operational/vnic_stats/vnic_stat/name
Description
Retrieves statistics for all vNICs or a specific vNIC. The vNIC statistics are updated every 10 seconds.
In the output of this REST API, the vNIC name is shown in the vnetnum format. For each running service, the num value is increased (vnet0, vnet1, and so on) corresponding to the (first, second, and so on) vNIC for each service.
Starting with release 2.3.0, the MAC address field is not displayed. Use the Get method of Service APIs to know about the vNIC and VF MAC addresses.
Starting with release 2.6.0, use the Get method of Service APIs to view statistics of all NIC interfaces.
Parameters
Name
Description
Importance
name
Name of the vNIC
Optional
Example
curl -u admin:admin -X GET https://192.0.2.1/api/operational/vnic_stats/vnic_stat -H "Accept:application/vnd.yang.collection+json"
{
  "collection": {
    "vnic_stats:vnic_stat": [
    {
      "name": "vnet0",
      "service_name": "tiny1",
      "stats": {
        "receive": {
          "bytes": 648,
          "packets": 8,
          "errors": 0,
          "dropped": 0,
          "rate_mbps": "0.0"
        },
        "transmit": {
          "bytes": 1412802,
          "packets": 4131,
          "errors": 0,
          "dropped": 0,
          "rate_mbps": "0.0"
        }
      }
    }
  ]
}
curl -u admin:admin -X GET https://192.0.2.1/api/operational/vnic_stats/vnic_stat/vnet0
{
  "vnic_stats:vnic_stat": {
    "name": "vnet0",
    "service_name": "tiny_rest15b",
    "stats": {
      "receive": {
        "bytes": 828,
        "packets": 10,
        "errors": 0,
        "dropped": 0,
        "rate_mbps": "0.0"
      },
      "transmit": {
        "bytes": 103200894,
        "packets": 301757,
        "errors": 0,
        "dropped": 0,
        "rate_mbps": "0.0"
      }
    }
  }
}
  API History
Release
Modification
2.6.0
This command has been deprecated.
2.3.0
Removed MAC address field to be displayed.
1.0
This API is introduced.
Get Bandwidth for vNICs
Method
GET
Module
https://ip-address:port-number/api/running/services/service/a/vnics/vnic/0 -H "Content-Type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":"nic_num", "bandwidth": "bandwidth"}]}'
Description
Retrieves bandwidth of all vNICs or a specific vNIC.
Parameters
Name
Description
Importance
nic nic_num
A number for the vNIC.
Valid range is from 0 to 23. In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9.
Required
bandwidth bandwidth
Bandwidth in megabits per second and should be a positive integer.
Optional
Example
curl -ku admin:admin -X GET https://192.0.2.1/api/running/services/service/a/vnics/vnic/0 -H " Content-type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":”0”, "bandwidth": "20000"}]}'
{
  "vsb:vnic": {
    "nic": 0,
    "tagged": false,
    "bandwidth": 20000,
    "adminstatus": "up",
    "type": "access",
    "passthrough_mode": "none",
    "model": "virtio",
    "span-port": false,
    "mgmt-vnic": false,
    "network_name": "Eth2-1"
}
API History
Release
Modification
2.6.0
This API is introduced.
Configure vNIC Bandwidth
Method
PATCH
Module
https://ip-address:port-number/api/running/services/service/a/vnics/vnic/0 -H "Content-Type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":"nic_num", "bandwidth": "bandwidth"}]}'
Description
Enables you to configure vNIC bandwidth. By default, the configured bandwidth is 0.
Parameters
Name
Description
Importance
nic nic_num
A number for the vNIC.
Valid range is from 0 to 23. In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9.
Required
bandwidth bandwidth
Bandwidth in megabits per second and should be a positive integer.
The maximum bandwidth for an interface based on the configured value is controlled. For SRIOV, the actual bandwidth is closer to the configured value, and for OVS and DPDK it varies but maximum is the configured value.
Optional
Example
curl -ku admin:admin -X PATCH https://192.0.2.1/api/running/services/service/a/vnics/vnic/0 -H " Content-type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":” 0”, "bandwidth": " 20000"}]}'
API History
Release
Modification
2.6.0
This API is introduced.
Get Adminstatus of vNICs
Method
GET
Module
https://ip-address:port-number/api/running/services/service/a/vnics/vnic/1 -H "Content-Type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":"nic_num", "adminstatus": "adminstatus"}]}'
Description
Retrieves adminstatus of all vNICs or a specific vNIC.
Parameters
Name
Description
Importance
nic nic_num
A number for the vNIC.
Valid range is from 0 to 23. In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9.
Required
adminstatus adminstatus
Shuts down or re-enables a disabled vNIC. Valid values are up and down. The default value is up in the absence of explicit user configuration.
Optional
Example
curl -ku admin:admin -X GET https://192.0.2.1/api/running/services/service/a/vnics/vnic/1 -H " Content-type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":”1”, "adminstatus": "up"}]}'
{
  "vsb:vnic": {
    "nic": 1,
    "tagged": false,
    "adminstatus": "up",
    "type": "access",
    "passthrough_mode": "none",
    "model": "virtio",
    "span-port": false,
    "mgmt-vnic": false,
    "network_name": "Eth1-1" }
}
API History
Release
Modification
2.6.0
This API is introduced.
Configure vNIC Adminstatus
Method
PATCH
Module
https://ip-address:port-number/api/running/services/service/a/vnics/vnic/1 -H "Content-Type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":"nic_num", "adminstatus": "adminstatus"}]}'
Description
Configures shut down or re-enables a disabled vNIC. By default, all vNICs have the status as, up.
Parameters
Name
Description
Importance
nic nic_num
A number for the vNIC.
Valid range is from 0 to 23. In Release 2.2.3 and earlier releases, valid supported range is from 0 to 9.
Required
adminstatus adminstatus
Shuts down or re-enables a disabled vNIC. Valid values are up and down. The default value is up in the absence of explicit user configuration.
Optional
Example
curl -ku admin:admin -X PATCH https://192.0.2.1/api/running/services/service/a/vnics/vnic/1 -H " Content-type:application/vnd.yang.data+json" -d '{"vnic": [{"nic":” 1”, "adminstatus": " up"}]}'
API History
Release
Modification
2.6.0
This API is introduced.
Start, Stop, Show Counters APIs
Method
POST
Modules
https://ip-addres:port-number/api/running/start-stop-counters/_operations/start-counters -d '{"input": {"parameter": "value"}}’
https://ip-addres:port-number/api/running/start-stop-counters/_operations/stop-counters -d '{"input": {"parameter": "value"}}’
https://ip-addres:port-number/api/running/start-stop-counters/_operations/show-counters -d '{"input": {"parameter": "value"}}’
Description
Provides statistics data of an interface within a period for traffic monitoring or debugging purpose.
Note: Always note that the output of REST API includes the "\n" newline string, and "\" escape character for the double quote ".
Parameters
Name
Description
Importance
all
Specifies all interfaces in CSP. It has three possible values, "all-intf", all-pnics, all-services".
·       all-intf: for all interfaces including physical interfaces and virtual interfaces.
·       all-pnics: for all physical interfaces.
·       all-services: for all interfaces inside the services.
Required
pnic
Specifies a physical interface
Required
service-node
Specifies a service name with "service" and an optional "vnic" for virtual interface name in the form of object, { "service" : "myservice", "vnic" : "1" }.
Optional
period
Supported only in start-counters API. It records the statistics data of an interface and the unit is seconds.
Optional
Example
curl -ku 'admin:admin' -d '{"input":{"all":"all-intf"}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/start-counters
  curl -ku 'admin:admin' -d '{"input":{"all":"all-intf"}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/stop-counters
  curl -ku 'admin:admin' -d '{"input":{"all":"all-intf"}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/show-counters
  curl -ku 'admin:admin' -d '{"input":{"service-node":{"service" : "tiny2", "vnic": "0"}}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/start-counters
  curl -ku 'admin:admin' -d '{"input":{"service-node":{"service" : "tiny2", "vnic": "0"}}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/stop-counters
  curl -ku 'admin:admin' -d '{"input":{"service-node":{"service" : "tiny2", "vnic": "0"}}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/show-counters
  {
"start-stop-counters:output": {
"counters": " \n{\"tiny2\": {\"0\": {\"rx_multicast\": 0, \"rx_packets\": 0, \"tx_multicast\": 0, \"rx_bytes\": 0, \"tx_errors\": 0, \"start_time\": \"2019-10-30 20:16:32\", \"tx_bytes\": 0, \"tx_broadcast\": 0, \"stop_time\": \"2019-10-30 20:16:44\", \"rx_broadcast\": 0, \"duration\": \"0 days,0 hours,0 mins,12 secs\", \"collisions\": 0, \"tx_dropped\": 0, \"rx_dropped\": 0, \"tx_packets\": 0, \"rx_errors\": 0}}}\n"
}
}
  For a period of 15 seconds:
  curl -ku 'admin:admin' -d '{"input":{"pnic": "Eth0-1", "period": 15}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/start-counters
  After 15 seconds:
  curl -ku 'admin:admin' -d '{"input":{"pnic": "Eth0-1"}}'-X POST https://192.0.2.1/api/running/start-stop-counters/_operations/show-counters
  {
"start-stop-counters:output": {
"counters": " \n{\"@CSP\": {\"Eth0-1\": {\"rx_multicast\": 0, \"rx_packets\": 0, \"tx_multicast\": 0, \"rx_bytes\": 0, \"tx_errors\": 0, \"start_time\": \"2019-10-31 18:15:03\", \"tx_bytes\": 0, \"tx_broadcast\": 0, \"stop_time\": \"2019-10-31 18:15:12\", \"rx_broadcast\": 0, \"duration\": \"0 days,0 hours,0 mins,9 secs\", \"collisions\": 0, \"tx_dropped\": 0, \"rx_dropped\": 0, \"tx_packets\": 0, \"rx_errors\": 0}}}\n"
}
}
API History
Release
Modification
2.6.0
This API is introduced.

  Obtaining Documentation and Submitting a Service Request
For information on obtaining documentation, using the Cisco Bug Search Tool (BST), submitting a service request, and gathering additional information, see What’s New in Cisco Product Documentation.
To receive new and revised Cisco technical content directly to your desktop, you can subscribe to the What’s New in Cisco Product Documentation RSS feed. The RSS feeds are a free service.
 
  THE SPECIFICATIONS AND INFORMATION REGARDING THE PRODUCTS IN THIS MANUAL ARE SUBJECT TO CHANGE WITHOUT NOTICE. ALL STATEMENTS, INFORMATION, AND RECOMMENDATIONS IN THIS MANUAL ARE BELIEVED TO BE ACCURATE BUT ARE PRESENTED WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED. USERS MUST TAKE FULL RESPONSIBILITY FOR THEIR APPLICATION OF ANY PRODUCTS.
THE SOFTWARE LICENSE AND LIMITED WARRANTY FOR THE ACCOMPANYING PRODUCT ARE SET FORTH IN THE INFORMATION PACKET THAT SHIPPED WITH THE PRODUCT AND ARE INCORPORATED HEREIN BY THIS REFERENCE. IF YOU ARE UNABLE TO LOCATE THE SOFTWARE LICENSE OR LIMITED WARRANTY, CONTACT YOUR CISCO REPRESENTATIVE FOR A COPY.
The Cisco implementation of TCP header compression is an adaptation of a program developed by the University of California, Berkeley (UCB) as part of UCB’s public domain version of the UNIX operating system. All rights reserved. Copyright © 1981, Regents of the University of California.
NOTWITHSTANDING ANY OTHER WARRANTY HEREIN, ALL DOCUMENT FILES AND SOFTWARE OF THESE SUPPLIERS ARE PROVIDED “AS IS” WITH ALL FAULTS. CISCO AND THE ABOVE-NAMED SUPPLIERS DISCLAIM ALL WARRANTIES, EXPRESSED OR IMPLIED, INCLUDING, WITHOUT LIMITATION, THOSE OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OR ARISING FROM A COURSE OF DEALING, USAGE, OR TRADE PRACTICE.
IN NO EVENT SHALL CISCO OR ITS SUPPLIERS BE LIABLE FOR ANY INDIRECT, SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST PROFITS OR LOSS OR DAMAGE TO DATA ARISING OUT OF THE USE OR INABILITY TO USE THIS MANUAL, EVEN IF CISCO OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
Any Internet Protocol (IP) addresses and phone numbers used in this document are not intended to be actual addresses and phone numbers. Any examples, command display output, network topology diagrams, and other figures included in the document are shown for illustrative purposes only. Any use of actual IP addresses or phone numbers in illustrative content is unintentional and coincidental.
All printed copies and duplicate soft copies are considered un-Controlled copies and the original on-line version should be referred to for latest version.
Cisco has more than 200 offices worldwide. Addresses, phone numbers, and fax numbers are listed on the Cisco website at www.cisco.com/go/offices.

  Cisco and the Cisco logo are trademarks or registered trademarks of Cisco and/or its affiliates in the U.S. and other countries. To view a list of Cisco trademarks, go to this URL: www.cisco.com/go/trademarks. Third-party trademarks mentioned are the property of their respective owners. The use of the word partner does not imply a partnership relationship between Cisco and any other company. (1110R)
  © 2015-2018 Cisco Systems, Inc. All rights reserved.
  Was this Document Helpful?
Yes No Feedback
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)
This Document Applies to These Products
Cloud Services Platform 2100