End-User Guides
Cisco SD-WAN Cloud OnRamp Configuration Guide, Cisco IOS XE Release 17.x
Bias-Free Language
Book Contents
Download
Print
Updated:
January 28, 2022
Chapter: Cisco SD-WAN Cloud Interconnect with Equinix
Chapter Contents
Table 1. Feature History
Feature Name
Release Information
Description
Cisco SD-WAN Cloud Interconnect with Equinix
Cisco IOS XE Release 17.6.1a
Cisco vManage Release 20.6.1
You can deploy a Cisco Cloud Services Router 1000v (Cisco CSR 1000v) instance as the Interconnect Gateway in the Equinix fabric and connect an SD-WAN branch location to the Interconnect Gateway. From the Interconnect Gateway, you can create software-defined interconnects to an AWS Cloud OnRamp or another interconnect gateway in the Equinix fabric.
Cisco SD-WAN Cloud Interconnect with Equinix: Google Cloud and Microsoft Azure
Cisco IOS XE Release 17.8.1a
Cisco vManage Release 20.8.1
You can create software-defined interconnects to Google Cloud VPCs, or Microsoft Azure VNets or Virtual WANs to link your branch location to the cloud resources through the Equinix fabric. You can also create, update and delete device links from Interconnect Gateway in the Equinix fabric.
Encrypted Multicloud Interconnects with Equinix
Cisco vManage Release 20.9.1
You can extend the SD-WAN fabric from the Interconnect gateway in Equinix into the AWS, Google Cloud and Microsoft Azure Cloud Service Providers. You can provision a secure private SD-WAN connection between an Interconnect Gateway and Cloud Service Providers through the Cloud OnRamp workflows in Cisco vManage.
Support for Cisco Catalyst 8000V Edge Software, Edit Connections and Audit Management in Equinix
Cisco IOS XE Release 17.12.1a
Cisco Catalyst SD-WAN Manager Release 20.12.1
You can deploy a Cisco Catalyst 8000v Edge Software instance as the Interconnect Gateway in the Equinix fabric and connect an SD-WAN branch location to the Interconnect Gateway.
With this feature, you can edit host VPC tags and other properties of a connection after connections are created.
The audit management feature helps in understanding if the interconnect cloud and provider states are in sync with the Cisco vManage state. The audit helps in identifying the gaps or disconnects between Cisco vManage intent and what is realized in the cloud.
Prerequisites for Cisco SD-WAN Cloud Interconnect with Equinix
Restrictions for Cisco SD-WAN Cloud Interconnect with Equinix
Information About Cisco SD-WAN Cloud Interconnect with Equinix
Configuration Workflow for Cisco SD-WAN Cloud Interconnect with Equinix
Device Links
Create Interconnect Between Interconnect Gateways
Audit Management
Troubleshoot Cisco SD-WAN Cloud Interconnect with Equinix
Prerequisites for Cisco SD-WAN Cloud Interconnect with Equinix
Create an account on the Equinix portal. Refer to the New User Equinix Fabric Portal Access documentation from Equinix.
After creating the account, generate the client ID (consumer key) and client secret key (consumer secret) for the account. Refer to the Generating Client ID and Client Secret Key documentation in the Equinix Developer Platform Knowledge Center.
Also, create billing accounts for each region in which you would like to deploy an Interconnect Gateway using this account. Refer to the Billing Account Management documentation from Equinix.
For a connection that requires a public peering between an Interconnect Gateway and a Cloud provider, specify a public BGP peering IP address. Ensure that your organization is permitted to use the public IP address before you create the connection. Alternatively, you can allocate the public IP address for BGP peering from the Equinix portal.
Ensure you have UUIDs for the required number of Cisco CSR 1000v instances that you wish to deploy as Interconnect Gateways.
Ensure that Cisco vManage can connect to the Internet.
As part of the configuration workflows, Cisco vManage connects to the Equinix portal via the Internet.
The Cisco vManage certificate must be signed by Cisco (Automated) PKI or Symantec as the root CA for Cisco vManage to be able interact with Equinix. We recommend using a Cisco (Automated) PKI certificate. Do not use an Enterprise CA certificate.
Restrictions for Cisco SD-WAN Cloud Interconnect with Equinix
Interconnects to AWS
While creating a connection to an AWS cloud resource, be mindful of the AWS quotas and limitations. Cisco vManage does not enforce all the AWS quotas and limitations.
You cannot use cloud resources belonging to different AWS accounts as part of a single connection.
Equinix only supports public, private, and transit VIFs over a hosted connection. Hosted VIFs are not supported.
Attach either private VIFs or transit VIFs to a Direct Connect gateway. You cannot attach a combination of private VIFs and transit VIFs to the same Direct Connect gateway.
From Cisco vManage Release 20.9.2 and Cisco vManage Release 20.10.1, for a transit-hosted connection, in an AWS region, you can associate only one transit gateway with a Direct Connect gateway.
When editing interconnect transit connection, if a new transit gateway is selected without a VPC tag in the same region, connection is discarded.
While Cisco vManage enforces this restriction from Cisco vManage Release 20.9.2 and Cisco vManage Release 20.10.1, we recommend that you associate only one transit gateway with a Direct Connect gateway in an AWS region with Cisco vManage Release 20.9.1 and earlier releases.
All connections to a particular VPC must
peer with the same Direct Connect gateway
have the same transit gateway or virtual private gateway attachment
For a transit VIF, the transit gateway and Direct Connect gateway must use different BGP ASNs.
After you create a connection, you cannot edit it. You can delete the connection and create a new connection with the desired settings.
Starting from Cisco IOS XE Release 17.12.1a, you can create and edit the connections.
At each location, at a time, you can perform only a single interconnect operation such as deploying an Interconnect Gateway, or creating or deleting a connection.
All interconnect and cloud operations are time bound. If an operation times out, Cisco vManage reports a failure. Currently, the time out values are not configurable.
While creating host VPC tags, choose to use the tag with either the AWS Multi Cloud workflow or the Interconnect Connectivity workflow. This choice cannot be altered after the tag is created and persists till the deletion of the tag.
If a host VPC is associated with a tag and the tag is in use in an Interconnect Connectivity flow, the host VPC cannot be dissociated from the tag in use and associated with another tag.
A host VPC tag selected for Interconnect Connectivity cannot be edited after creation.
Starting from Cisco IOS XE Release 17.12.1a, you can create and edit the host VPC tag.
If you modify the Global Settings, the changes are applied to any new gateways or connections created after the modification. The changes do not affect gateways or connections created before the modification.
After you create an Interconnect Gateway at an Equinix location using Cisco vManage Release 20.6.1, if you upgrade Cisco SD-WAN Manager software to a later release, port 443 on the Interconnect Gateway is disabled. To overcome this limitation, do one of the following:
Enable port 443 manually.
Delete the existing Interconnect Gateway and create a new Interconnect Gateway after the Cisco SD-WAN Manager software upgrade.
Interconnects to Microsoft Azure
While creating host VNet tags, choose to use the tag with either the Microsoft Azure Multi Cloud workflow or the Interconnect Connectivity workflow. This choice cannot be altered after the tag is created and persists till the deletion of the tag.
If a host VNet is associated with a tag and the tag is in use in an Interconnect Connectivity flow, the host VNet cannot be dissociated from the tag in use and associated with another tag.
A host VNet tag selected for Interconnect Connectivity cannot be edited after creation.
Starting from Cisco IOS XE Release 17.12.1a, you can create and edit the host VNet tags.
While creating a private-peering connection to a Microsoft Azure ExpressRoute from an Interconnect Gateway, you can attach to the connection only the VNets, virtual WANs, and virtual hubs that belong to the same resource group as the ExpressRoute circuit. Attaching VNets, virtual WANs, and virtual hubs from a different resource group is not a supported configuration.
Interconnects to Google Cloud
Each Cloud Router must use the same ASN for all its BGP sessions.
Device Links
The fixed Bandwidth for all links in a device group can range from 50 Mbps to 10 Gbps.
The cumulative bandwidth of all links at a given metro should not be greater than 10 Gbps.
Restrictions for Encrypted Multicloud Interconnects
Usage Notes for Cisco SD-WAN Cloud Interconnect with Equinix
Restrictions for Encrypted Multicloud Interconnects
Minimum supported release: Cisco vManage Release 20.9.1
Interconnects to AWS
As per AWS requirement,
The minimum instance type must be x-large for Cloud Gateways.
A maximum of 10 Cloud Gateways can be attached to a single interconnect connection.
One Cloud Gateway can be connected to 30 interconnect connections.
Interconnects to Microsoft Azure
A single Cloud Gateway can be attached to 8 different cloud interconnect connections and one interconnect connection can connect to 5 different Cloud Gateways.
To connect to Cloud Gateways in different regions, the express route circuit must be of Premium type.
For Microsoft Azure deployments, SD-WAN tunnel color is not configured on the WAN interface of the Cloud Gateway through automation and you must manually update the WAN interface color. Ensure that the template color matches the color of the branch router, Interconnect Gateway and Cloud Gateway.
Interconnects to Google Cloud
Cloud Interconnect connection to Google Cloud Gateway is supported only with redundancy enabled.
Only one Google Cloud Gateway can be attached to a single connection.
Existing Google Cloud Gateways are not supported for cloud interconnects.
A maximum of 5 Google Cloud Routers can be created for a combination of region and network.
Usage Notes for Cisco SD-WAN Cloud Interconnect with Equinix
Table 2. Connection Configuration Limits
Description Count
Interconnect Gateway
Maximum number of connections (VXC) per Interconnect Gateway
20
Note: Aggregate VXC bandwidth should not exceed the bandwidth capacity of the Interconnect Gateway.
Interconnects to AWS
Maximum number of VPCs per connection to AWS for a private VIF 10
Number of VPCs per connection to AWS for a transit VIF
Default: 15
Maximum: 15000
Maximum number of transit gateways per connection to AWS for a transit VIF 3
Maximum number of Direct Connect gateways per connection 1
Maximum number of VIFs (private or transit) per AWS Direct Connect gateway
Default: 30
Limit can be increased on request.
Maximum number private, public, or transit VIFs per AWS Direct Connect hosted connection 1
Maximum number of prefixes from branch location to AWS for a transit VIF 100
Maximum number of prefixes per AWS transit gateway from AWS to a branch location for a transit VIF
20
Interconnects to Microsoft Azure
Maximum number of Interconnect Gateways that can connect to an ExpressRoute
2
Maximum number of VNets to which an ExpressRoute can connect
10
Maximum number of ExpressRoutes that can connect to a VNet
4
Maximum number of ExpressRoutes that can connect to a virtual hub
8 per peering location
Maximum aggregate throughput per virtual WAN ExpressRoute gateway
20 Gbps
Maximum number of VNets that can connect to a virtual hub
500 - (total number of virtual hubs in the virtual WAN)
Interconnects to AWS
When you delete a private VIF connection to AWS, Cisco vManage deletes the VIF, the virtual private gateway, and the route table that were created while establishing the connection.
When you delete a transit VIF connection, Cisco vManage removes any attachments and associations to a Direct Connect gateway, transit gateway, or virtual private gateway that were created while establishing the connection.
While creating a connection to AWS, if you created a Direct Connect gateway or transit gateway from Cisco vManage, deleting the connection does not delete the gateway. Manage these AWS resources as required.
When you create a connection, a new route table is created and set as the Main route table for the host VPCs attached to the connection. A default route is created in the Main route table to the transit gateway and route propagation is enabled. Edit the routes and propagation as required.
From Cisco vManage Release 20.5.1, the static routes and subnet associations required to be accessed by the interconnect should be moved to the newly created Main route table by Cisco vManage.
Interconnects to Google Cloud
For nonredundant connectivity, you must deploy a Google Cloud Router in each network-region and create a VLAN attachment for each Google Cloud Router.
For redundant connectivity, you must deploy two Google Cloud Routers in each network-region and create a VLAN attachment for each Google Cloud Router.
For use with interconnect attachments, you must set the Google ASN for the Google Cloud Routers to 16550.
Interconnects to Microsoft Azure
Only one pair of Interconnect Gateways can connect to a particular ExpressRoute to provide a HA connection to the VNet attched to the ExpressRoute.
To connect a second pair of Interconnect Gateways to the same vNet, do as follows: create another ExpressRoute; attach the vNet to the ExpressRoute; and connect the Interconnect Gateways to the ExpressRoute
You can have a maximum four such ExpressRoutes connecting to a VNet, and connect each Express Route to a pair of Interconnect Gateways.
An ExpressRoute can connect to maximum of 10 VNets. You can attach VNets to an ExpressRoute while creating connections to the ExpressRoute from Interconnect Gateways. VNets are attached based on the VNet tags you choose for the connection.
If you choose a VNet tag that applies to more than 10 VNets or choose a combination of VNet tags so that the total number of select VNets is more than 10, interconnect creation fails.

Note
Any VNets that you may have attached to the ExpressRoute from the Azure portal are also considered while determining the number VNets that you can attach to the ExpressRoute while creating the connection from the interconnect gateways.
You can connect a VNet to either a VNet gateway or an ExpressRoute gateway. So, if you have created a private peering to a VNet through a VNet gateway, you cannot create a private peering to the same VNet through an ExpressRoute gateway, and vice-versa.
If a VNet is connected to virtual hub in a virtual WAN, the same VNet cannot be connected to another virtual WAN.
Each region of a virtual WAN must have only one virtual hub.
All the VNets in a region must connect to a single virtual hub in the same region.
Interconnects to Microsoft Azure
Redundant connectivity is the default and only supported configuration. You must create connections to Microsoft Azure from a pair of Interconnect Gateways in the Equinix fabric.
When choosing a pair of Interconnect Gateways from which you wish to create the primary and secondary connections to a Microsoft Azure ExpressRoute, ensure that the Interconnect Gateways are configured to use the same BGP ASN for BGP peering.
Information About Cisco SD-WAN Cloud Interconnect with Equinix
From Cisco vManage, you can deploy a Cisco Cloud Services Router 1000v (Cisco CSR 1000v) instance in the fabric of the SDCI provider Equinix and add the instance as a WAN edge device in the Cisco SD-WAN fabric. As a WAN edge device, the Cisco CSR 1000v instance links a branch location to the Equinix fabric. In the Equinix fabric, the Cisco CSR 1000v instance acts as an Interconnect Gateway. From the Interconnect Gateway, you can create a direct Layer 2 connection (an interconnect) in the Equinix fabric to a Cloud OnRamp or another Interconnect Gateway. The interconnects link branch locations, or link branch locations to cloud service providers through the Interconnect Gateways in the Equinix fabric.
In this setup, the Cisco SD-WAN fabric acts as the overlay network, and the Equinix fabric acts as the underlay network. The Equinix fabric provides efficient, high-speed, low-latency, high-bandwidth connectivity to cloud resources in multiple global locations. We recommend that you deploy the Cisco CSR 1000v instance at an Equinix location closest to your branch location.
You can create the following types of connections from an Interconnect Gateway:
Table 3. Connection Types
Destination
Connection Types
Supported Software Releases
Amazon Web Services
Direct Connect Private Hosted Connection to AWS Direct Connect Gateway from Interconnect Gateway
Direct Connect Public Hosted Connection to AWS from Interconnect Gateway
Direct Connect Transit Hosted Connection to AWS Direct Connect Gateway from Interconnect Gateway
Cisco CSR 1000v with Cisco IOS XE Release 17.3.3
Cisco vManage Release 20.6.1
Microsoft Azure
Partner ExpressRoute Circuit - Microsoft Peering
Partner ExpressRoute Circuit - Private Peering
Cisco CSR 1000v with Cisco IOS XE Release 17.3.3
Cisco vManage Release 20.8.1
Google Cloud
Partner Interconnect Attachment to a Google Cloud Router
Cisco CSR 1000v with Cisco IOS XE Release 17.3.3
Cisco vManage Release 20.8.1
Interconnect Gateway
Link between SD-WAN Branch Locations connected to the Interconnect Gateways
Cisco CSR 1000v with Cisco IOS XE Release 17.3.3 and Cisco vManage Release 20.6.1.
Cisco Catalyst 8000v Edge Software with Cisco IOS XE Release 17.12.1a and Cisco Catalyst SD-WAN Manager Release 20.12.1
Cisco vManage serves as a unified management portal and enables you to peform the following tasks:
configure and deploy the Cisco CSR 1000v instance at an Equinix location.
create cloud interconnects to public cloud resources
create interconnects to link SD-WAN branch locations through the Equinix fabric

Note
Starting from Cisco IOS XE Release 17.12.1a and Cisco Catalyst SD-WAN Manager Release 20.12.1, you can deploy a Cisco Catalyst 8000v Edge Software instance as the Interconnect Gateway in the Equinix fabric and connect an SD-WAN branch location to the Interconnect Gateway. Existing CSR deployments can be used to create connections.
Contact Cisco Support for any questions or issues regarding this solution.
Points to Consider
If you are upgrading from an earlier Cisco vManage version to Cisco Catalyst SD-WAN Manager Release 20.12.1, to enable Cisco Catalyst 8000v,
Re-authenticate the existing Equinix account through Edit Account Credentials and provide the Customer Key and Customer Secret. You can use the same Key and the Secret that you used for previous versions. It internally updates the billing accounts and locations available for Cisco Catalyst 8000v. For information on editing account details, see View, Edit, or Delete an Interconnect Account.
After the account is re-authenticated, you must update the Global Settings for Interconnect Gateways to select the Cisco Catalyst 8000v software version and other parameters for new Gateways. For information on updating global settings, see Configure Global Settings for Equinix Interconnect Gateways.
Benefits of Cisco SD-WAN Cloud Interconnect with Equinix
Encrypted Multicloud Interconnects
Benefits of Cisco SD-WAN Cloud Interconnect with Equinix
Branch locations connect seamlessly to the Equinix fabric over the Cisco SD-WAN fabric.
Interconnects to public cloud with assured SLAs.
End-to-end traffic security, segmentation, and policy through the Cisco SD-WAN fabric.
Cisco vManage provides a single pane to manage your connectivity to any cloud.
End-to-end visibility across the Cisco SD-WAN and Equinix fabric.
Links between Cisco SD-WAN branch locations and between Cisco SD-WAN branch locations and a public cloud.
Encrypted Multicloud Interconnects
Minimum supported release: Cisco vManage Release 20.9.1
You can provision a secure private SD-WAN connection between an Interconnect Gateway and Cloud Service Providers through the Cloud OnRamp workflows in Cisco vManage. You can terminate the virtual cross connects from the Interconnect Gateway in the cloud interconnect provider to the existing Cloud Gateways which are created as part of the Multicloud workflow. For more information, see Cloud OnRamp for Multicloud. This feature enables support for both internet and private paths to access VPC and VNET workloads.
Benefits
Provides end to end encryption from branch sites to Cloud Gateways through the cloud interconnect provider backbone.
Supports multiple VPN segments over single virtual cross connect.
Supports modification of VPC and VNET tags before and after the connection creation. VPN to VPC or VNET tag mapping can be performed using the Multicloud Intent Management screen.
Route advertisements are controlled by Interconnect Gateways and Cloud Gateways to overcome prefix advertisements restrictions imposed by cloud service providers.
Configuration Workflow for Cisco SD-WAN Cloud Interconnect with Equinix
Prerequisite Configuration
Create an account on the Equinix portal. Refer to the New User Equinix Fabric Portal Access documentation from Equinix.
After creating the account, generate the client ID (consumer key) and client secret key (consumer secret) for the account. Refer to the Generating Client ID and Client Secret Key documentation in the Equinix Developer Platform Knowledge Center.
Also, create billing accounts for each region in which you would like to deploy an Interconnect Gateway using this account. Refer to the Billing Account Management documentation from Equinix.
Associate Equinix account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Ensure you have UUIDs for the required number of Cisco CSR 1000v instances that you wish to deploy as Interconnect Gateways.
Attach Equinix Template to a Cisco CSR 1000v instance.
Create Interconnect Gateway at Equinix location closest to your SD-WAN branch location.
For connectivity to AWS, create an Interconnect Gateway at the Equinix location.
For connectivity between SD-WAN branch locations, for each branch location, create an Interconnect Gateway at the closest Equinix location.
Workflow to Create Interconnect to AWS
Before you perform the following configuration procedures, ensure that the prerequisite conditions are met and the prerequisite configuration is applied.
Associate AWS account with Cisco vManage.
Discover Host Private Networks to connect to AWS Virtual Private Clouds (VPCs).
Create one of the following types of connection:
Connection Type Tip
Direct Connect - Public Hosted Connection Use this connection for a link to a public AWS resource, with the link having a fixed bandwidth up to 10 Gbps.
Direct Connect - Private Hosted Connection Use this connection for a dedicated link to an AWS VPC, with a link bandwidth up to 10 Gbps.
Direct Connect - Transit Hosted Connection Use this connection for dedicated links to up 5,000 AWS VPCs via a transit gateway, with a link bandwidth up to 10 Gbps. You can attach up to three transit gateways to a Direct Connect gateway and connect to up to 15,000 VPCs.
Workflow to Link Cisco SD-WAN Branch Locations
Before you perform the following configuration procedure, ensure that the prerequisite conditions are met and the prerequisite configuration is applied.
Create an Interconnect between the Interconnect Gateways.
Workflow to Create Interconnect to Google Cloud
Before you perform the following configuration procedure, ensure that the prerequisite conditions are met and the prerequisite configuration is applied.
Create the required VPC network using the Google Cloud portal.
Deploy Google Cloud Routers in network-regions to which you wish to connect.
For nonredundant connectivity, using the Google Cloud portal, deploy a Google Cloud Router in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.
For redundant connectivity, using the Google Cloud portal, deploy two Google Cloud Routers in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.
Associate Google Cloud account with Cisco vManage.
Create Interconnects to Google Cloud Routers from Interconnect Gateways
Workflow to Create Interconnect to Microsoft Azure
Before you perform the following configuration procedure, ensure that the prerequisite conditions are met and the prerequisite configuration is applied.
Associate Microsoft Azure account with Cisco vManage.
Create the required Azure ExpressRoute circuits.
Discover Host Private Networks to connect to Azure Virtual Networks (VNets).
Create one of the following types of connection:
Public Peering Connection to an Azure ExpressRoute
Private Peering Connection to an Azure ExpressRoute
Configure Prerequisites for Cisco SD-WAN Cloud Interconnect with Equinix
Associate Equinix Account with Cisco vManage
Prerequisites
Create an account on the Equinix portal. Refer to the New User Equinix Fabric Portal Access documentation from Equinix.
After creating the account, generate the client ID (consumer key) and client secret key (consumer secret) for the account. Refer to the Generating Client ID and Client Secret Key information in the Equinix Developer Platform Knowledge Center.
Create billing accounts for each region in which you would like to deploy an Interconnect Gateway using this account. Refer to the Billing Account Management documentation from Equinix.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Associate Interconnect Account.
Configure the following:
Interconnect Provider Choose EQUINIX.
Account Name Enter a name of your choice. This name is used to identify the Equinix account in workflows that define the cloud or site-to-site interconnects.
Description (Optional) Enter a description.
Customer Key Enter the client ID (consumer key).
Customer Secret Enter the client secret key (consumer secret).
Click Add.
Cisco vManage authenticates the account and saves the account details in a database.
Configure Global Settings for Equinix Interconnect Gateways
Prerequisites
Create an account on the Equinix portal. Refer to the New User Equinix Fabric Portal Access documentation from Equinix.
After creating the account, generate the client ID (consumer key) and client secret key (consumer secret) for the account. Refer to the Generating Client ID and Client Secret Key information in the Equinix Developer Platform Knowledge Center.
Create billing accounts for each region in which you would like to deploy an Interconnect Gateway using this account. Refer to the Billing Account Management documentation from Equinix.
Associate Equinix account with Cisco vManage.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Global Settings.
To add global settings, click Add.
To modify global settings, click Edit.
Configure the following:
Interconnect Provider Choose EQUINIX.
Software Image Choose a Cisco CSR 1000v image.
Instance Size
Instance Size determines the compute footprint and throughput of each Cisco CSR 1000v instance. Choose one of the following:
Small: 2vCPU, 4 GB DRAM, up to 1 Gbps
Medium: 4vCPU, 4 GB DRAM, up to 2.5 Gbps
Large: 6vCPU, 4 GB DRAM, up to 2.5 Gbps
Interconnect Transit Color
Choose the color to be assigned for connection between Interconnect Gateways.
This color is restricted to prevent direct peering between branch locations. Do not assign the same color to another connection in the SD-WAN fabric.
Note
  It is recommended to use private colors. Do not use default colors.
BGP ASN
Enter a BGP ASN for peering between Interconnect Gateway and cloud provider.
You can enter an ASN of your choice or reuse an existing ASN used by your organization.
Interconnect CGW SDWAN Color
Minimum supported release: Cisco vManage Release 20.9.1
Choose the color to be used for the interface through which the Interconnect Gateway connects to the Cloud Gateway.
Note
  Color assigned to an interface must be unique for the Interconnect Gateway devices and common across Cloud Interconnect providers.
For Microsoft Azure deployments, SD-WAN tunnel color is not configured on the WAN interface of the Cloud Gateway through automation and you must manually update the WAN interface color. Ensure that the template color matches the color of the branch router, Interconnect Gateway, and Cloud Gateway.
To save the newly added global settings, click Save.
To save the modified global settings, click Update.
Attach Equinix Template to Cisco CSR 1000v Instance
Before you can deploy a Cisco CSR 1000v instance as an Interconnect Gateway at an Equinix location, you must attach the Equinix default template to the device. We recommend that you attach the template named Default_EQUINIX_DHCP_DNS_ICGW_CSR1000V_Template_V02.
From the Cisco vManage menu, choose Configuration > Templates.
Click Device Templates.

Note
In Cisco vManage Release 20.7.x and earlier releases, Device Templates is titled Device.
Choose the Template Type as Default and find the template named Default_EQUINIX_DHCP_DNS_ICGW_CSR1000V_Template_V02.
Click … and click Attach Devices.
Choose the UUID of desired Cisco CSR 1000v instance from the list of Available Devices and move the instance to the list of Selected Devices.
Click Attach.
The template contains variables. To enter values for the variables in the template, click … and click Edit Device Template.
Enter the values for the following variables and click Update:
DNS Address (vpn_dns_primary)
DNS Address (vpn_dns_secondary)
Color (vpn_if_tunnel_color_value)
System IP (system-ip)
Site ID (site-id)
Hostname (host-name)
Click Next.
Click Configure Devices.
Create Interconnect Gateway at an Equinix Location
Deploy a Cisco CSR 1000v instance as the Interconnect Gateway at the desired Equinix location. We recommend that you deploy the deploy the Cisco CSR 1000v instance at an Equinix location closest to your branch location.
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Attach Equinix Template to Cisco CSR 1000v Instance.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Create Interconnect Gateway.
Configure the following:
Interconnect Provider Choose EQUINIX.
Gateway Name Enter a name to uniquely identify the gateway.
Description (Optional) Enter a description.
Account Name Choose an Equinix account by the account name entered while associating the account details on Cisco vManage.
Location
Click the Refresh button to update the list of available locations.
Choose the Equinix location where the Cisco CSR 1000v instance must be deployed.
Billing Account ID
Choose the appropriate billing account for the location.
UUID Choose the UUID of a Cisco CSR 1000v instance that has the Equinix default template attached.
Settings
Choose one of the following:
Default: Use instance size and software image defined in the Interconnect Global Settings.
Custom: Choose a specific instance size and software image for this gateway.
Click Add.
When the configuration task is successful, the Interconnect Gateway is listed in the Gateway Management page.

Note
Before proceeding further, verify that the Device Status column for the Interconnect Gateway shows In Sync and the certificate is successfully installed.
Create Interconnect to AWS
Associate AWS Account with Cisco vManage
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Cloud.
Click Associate Cloud Account.
Configure the following:
Cloud Provider Choose Amazon Web Services.
Cloud Account Name Enter a name of your choice.
Description (Optional) Enter a description.
Use for Cloud Gateway Choose No.
Log in to AWS with Choose Key or IAM Role.
Role ARN Enter the API/Secret Key or the Role ARN.
Click Add.
Cisco vManage uses the API/Secret Key or the Role ARN to authenticate the user account with AWS as part of the API workflow to create connections to AWS.
Discover Host Private Networks and Tag AWS VPCs
A number of host VPCs can be grouped together using a tag. VPCs under the same tag are considered as a singular unit. Tag the AWS VPCs to which you wish to create software-defined cloud interconnects from an Interconnect Gateway.
Prerequisite
Associate AWS Account with Cisco vManage.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Host Private Networks.
Cloud Provider: choose Amazon Web Services.
The available host VPCs are discovered and listed in a table.
The host VPC table includes the following columns:
Cloud Region
Account Name
Host VPC Name
Host VPC Tag
Interconnect Enabled
Account ID
Host VPC ID
Select the VPCs that you wish to tag using the check boxes in the left-most column.
Click Tag Actions.
You can perform the following actions:
Add Tag - group the selected VPCs and tag them together.
Edit Tag - migrate the selected VPCs from one tag to another.
Delete Tag - remove the tag for the selected VPCs.
Click Add Tag and configure the following:
Tag Name Enter a name for the tag that links the selected VPCs.
Region List of regions that correspond to the selected VPCs. Click X to omit a region and associated VPCs from the tag.
Selected VPCs List of VPC IDs of the selected host VPCs. Click X to omit a VPC from the tag.
(Cisco vManage Release 20.8.1 and earlier)
Enable for Interconnect Connectivity
(From Cisco vManage Release 20.9.1)
Enable for SDCI partner Interconnect Connections
To use the VPC tag while creating a cloud interconnect connection to AWS, check the check box.
If enabled, the tag can only be used for Cloud Interconnect connections and is not available for Multicloud Gateway Intent Mapping.
If you do not check the check box, you cannot use the VPC tag to create a Cloud Interconnect connection.
Note
  Do not enable this setting when you use Cloud Gateways to connect VPC workloads. You cannot edit this setting when the tag is in use by a connection.
Click Add.
On the Discover Host Private Networks page, the VPCs you selected earlier are tagged and the tag name is shown in the Host VPC Tag column. If you chose to use the VPC tag for software-defined cloud interconnects, the Interconnect Enabled column reads Yes.
Create Direct Connect Public Hosted Connection to AWS from Interconnect Gateway
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Associate AWS Account with Cisco vManage.
Attach Equinix Template to Cisco CSR 1000v Instance.
Create Interconnect Gateway at an Equinix Location.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose EQUINIX.
Choose Interconnect Account: choose an Equinix account by its account name; the account name is the name you entered while associating the account with Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the Direct Connect connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose AWS.
Connection Name Enter a unique name for the connection.
AWS Account Choose an AWS account by the account name entered while associating the AWS account details on Cisco vManage.
Configure the following and click Next:
Equinix Hosted Connection VIF Type Choose Public.
Location
Click the Refresh button to update the list of available locations.
Choose an AWS Direct Connect location.
Bandwidth
Choose the connection bandwidth.
Unit: Mbps.
Interconnect IP Address Enter the public IP Address (CIDR) to be used as the BGP Peer ID of the Interconnect Gateway.
Amazon IP Address Enter the public IP Address (CIDR) to be used as the AWS BGP Peer ID.
Prefixes Enter the summary AWS addresses and prefixes you wish to advertise to the branch location.
Segment Choose the segment ID for this connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When the configuration task is successful, the connection is listed in the Interconnect Connectivity page.
Create Direct Connect Private Hosted Connection to AWS Direct Connect Gateway from Interconnect Gateway
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Associate AWS Account with Cisco vManage.
Discover Host Private Networks and tag AWS VPCs.
Attach Equinix template to Cisco CSR1000v Instance.
Create Interconnect Gateway at an Equinix Location.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose EQUINIX.
Choose Interconnect Account: choose an Equinix account by its account name; the account name is the name you entered while associating the account with Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the Direct Connect connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose AWS.
Connection Name Enter a unique name for the connection.
AWS Account Choose an AWS account by the account name entered while associating the AWS account details on Cisco vManage.
Configure the following and click Next:
Equinix Hosted Connection VIF Type Choose Private.
Location
Click the Refresh button to update the list of available locations.
Choose an AWS Direct Connect location.
Bandwidth
Choose the connection bandwidth.
Unit: Mbps.
Direct Connect Gateway
Click the Refresh button to fetch the Direct Connect gateways associated with the selected AWS account.
Choose the Direct Connect Gateway to which the Direct Connect connection must be created.
Alternatively, create a new Direct Connect Gateway by clicking Add New Direct Connect Gateway.
Enter a Gateway Name.
Enter a BGP ASN for the gateway.
Click Save.
Settings
Choose one of the following:
Global:
BGP peering IP address is picked from an internally reserved /16 subnet (198.18.0.0/16).
BGP ASN is picked from the Global Settings.
Custom:
Enter a custom /30 CIDR IP address for BGP peering.
Enter custom BGP ASN for peering.
Note
  You can specify a custom BGP ASN only for the first interconnect from an Interconnect Gateway. After an interconnect is created from an interconnect gateway, the BGP ASN cannot be modified for any interconnects created subsequently.
Segment Choose the segment ID for this connection.
Attachment
Cisco vManage Release 20.8.1 and earlier:
Choose VPC.
VPC Tags: Choose VPC tags to identify VPCs for which traffic must be routed through this connection.
Cisco vManage Release 20.9.1 and later:
Choose one of the following:
VPC
Segment: Choose the segment ID for this connection.
VPC Tags: Choose VPC tags to identify VPCs for which traffic must be routed through this connection.
Cloud Gateway
Cloud Gateways: Choose the Cloud Gateways to attach to this connection. If the drop-down is empty, you must first create the cloud gateway using the Multicloud workflows. For a single connection, AWS supports up to 10 Cloud Gateways. Each Cloud Gateway can be connected to 30 Interconnect Connections.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When the configuration task is successful, the connection is listed in the Interconnect Connectivity page.
Create Direct Connect Transit Hosted Connection to AWS Direct Connect Gateway from Interconnect Gateway
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Associate AWS Account with Cisco vManage.
Discover Host Private Networks and Tag AWS VPCs.
Attach Equinix Template to Cisco CSR 1000v Instance.
Create Interconnect Gateway at an Equinix Location.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose EQUINIX.
Choose Interconnect Account: choose an Equinix account by its account name; the account name is the name you entered while associating the account with Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the Direct Connect connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose AWS.
Connection Name Enter a unique name for the connection.
AWS Account Choose an AWS account by the account name entered while associating the AWS account details on Cisco vManage.
Configure the following and click Next:
Equinix Hosted Connection VIF Type Choose Transit.
Location
Click the Refresh button to update the list of available locations.
Choose an AWS Direct Connect location.
Bandwidth
Choose the connection bandwidth.
Unit: Mbps.
Direct Connect Gateway
Click the Refresh button to fetch the Direct Connect gateways associated with the selected AWS account.
Choose the Direct Connect Gateway to which the Direct Connect connection must be created.
Alternatively, create a new Direct Connect Gateway by clicking Add New Direct Connect Gateway.
Enter a Gateway Name.
Enter a BGP ASN for the gateway.
Click Save.
Settings
Choose one of the following:
Global:
BGP peering IP address is picked from an internally reserved /16 subnet (198.18.0.0/16).
BGP ASN is picked from the Global Settings.
Custom:
Enter a custom /30 CIDR IP address for BGP peering.
Enter custom BGP ASN for peering.
Note
  You can specify a custom BGP ASN only for the first interconnect from an Interconnect Gateway. After an interconnect is created from an interconnect gateway, the BGP ASN cannot be modified for any interconnects created subsequently.
Segment Choose the segment ID for this connection.
Attachment
Choose Transit Gateway.
Transit Gateway:
Click the Refresh button to fetch the transit gateways associated with the selected AWS account.
Choose the transit gateway to which the Direct Connect connection must be created.
Alternatively, create a new transit gateway by clicking Add New Transit Gateway.
Enter a Gateway Name.
Enter a BGP ASN for the gateway.
Select AWS Region.
Click Save.
VPC Tags: Choose VPC tags to identify VPCs for which traffic must be routed through this connection.
Click Add Prefixes.
Enter the IPv4 CIDR prefixes for the selected VPCs.
You can find the IPv4 CIDR addresses from the AWS VPC Dashboard.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When the configuration task is successful, the connection is listed in the Interconnect Connectivity page.
Create Interconnects to Google Cloud
Associate Google Cloud Account with Cisco vManage
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Cloud .
Click Associate Cloud Account.
Configure the following:
Cloud Provider Choose Google Cloud.
Cloud Account Name Enter a name of your choice.
Description (Optional) Enter a description.
Use for Cloud Gateway Choose No.
Private Key ID
Click Upload Credential File.
You must generate this file by logging in to the Google Cloud console. The private key ID may be in the JSON or the REST API format. The format depends on the method of key generation. For more details, see Google Cloud documentation.
Click Add.
Cisco vManage uses the Private Key ID to authenticate the user account with Google Cloud as part of the workflow to create connections to Google Cloud.
Create Interconnect to Google Cloud Routers from Interconnect Gateways
Prerequisites
Create the required VPC network using the Google Cloud console.
Deploy Google Cloud Routers in network-regions to which you wish to connect.
For nonredundant connectivity, on the Google Cloud console, deploy a Google Cloud Router in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.
For redundant connectivity, on the Google Cloud console, deploy two Google Cloud Routers in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.

Note
For use with interconnect attachments, you must set the Google ASN for the Google Cloud Routers to 16550.
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Attach Equinix Template to Cisco Catalyst 1000v Instance.
Create Interconnect Gateway at a Equinix Location closest to your SD-WAN branch location.
For redundant connectivity to Google Cloud, create a pair of Interconnect Gateways in the Equinix fabric. For nonredundant connectivity, deploy an Interconnect Gateway at a Equinix location.
Create necessary network segments (see Segmentation Configuration Guide).
Associate Google Cloud Account with Cisco vManage.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose Equinix.
Choose Interconnect Account: choose a Equinix account by the account name entered while associating the account details on Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose Google Cloud.
Google Account Choose a Google account by the account name entered while associating the Google account details with Cisco vManage.
Attachment
Minimum supported release: Cisco vManage Release 20.9.1
Choose Shared VPC to attach a Google Cloud Router and Google Cloud Interconnect to the connection..
Region
Minimum supported release: Cisco vManage Release 20.9.1
Choose a Google Cloud region.
VPC Network
Minimum supported release: Cisco vManage Release 20.9.1
Choose the VPC network to deploy this connection.
Redundancy
For Cisco vManage Release 20.8.1 and earlier:
Choose Enable if you want to create connections with redundancy.
Primary Google Cloud Interconnect Attachment:
Click the refresh symbol next to the Primary Google Cloud Interconnect Attachment drop-down list.
Choose the desired interconnect attachment. The interconnect attachment name has the format <region-name>::<cloud-router-name>::<interconnect-attachment-name>.
Secondary Google Cloud Interconnect Attachment:
Choose the desired interconnect attachment. The interconnect attachment name has the format <region-name>::<cloud-router-name>::<interconnect-attachment-name>.
The secondary interconnect attachment options are determined based on the region and network to which the primary interconnect attachment belongs. If you do not have an unused interconnect attachment in the same region and network as the primary interconnect attachment, the drop-down list is empty and indicates that you must create a redundant interconnect attachment on the Google Cloud portal.
Choose Disable if you want to create the connection without redundancy.
Google Cloud Interconnect Attachment:
Click the refresh symbol next to the Google Cloud Interconnect Attachment drop-down list.
Choose the desired interconnect attachment. The interconnect attachment name has the format <region-name>::<cloud-router-name>::<interconnect-attachment-name>.
For Cisco vManage Release 20.9.1 and later:
Google Cloud Router:
Click the refresh symbol next to the Google Cloud Router drop-down list.
Choose a Google Cloud router or click Add New Google Cloud Router.
If you clicked Add New Google Cloud Router, configure the router settings in the Add Google Cloud Router slide-in pane.
Configure the following and click Save:
Region: Choose the Google Cloud router region.
VPC Network: Choose the Google Cloud router network.
Cloud Router Name: Enter a unique Google Cloud router name.
Note
  Google Cloud routers are always created with a BGP ASN of 16550, MTU of 1500 and with default routing enabled.
Google Cloud Interconnect Attachment:
Click the refresh symbol next to the Google Cloud Interconnect Attachment drop-down list.
Choose the desired interconnect attachment or click Add New Google Cloud Interconnect Attachment.
If you clicked Add New Google Cloud Interconnect Attachment, configure the router settings in the Add Google Cloud Interconnect Attachment slide-in pane.
Configure the following and click Save:
Region: Choose the Google Cloud Interconnect attachment region.
VPC Network: Choose the Google Cloud network for the interconnect attachment.
Cloud Router Name: Choose the Google Cloud router deployed for the selected region and VPC network for the interconnect attachment.
IC Attachment Name: Enter a unique name for the interconnect attachment.
Secondary Zone: If you want to deploy this attachment on the secondary zone, check the checkbox.
Configure the following settings for the primary VLAN attachment and click Next:
Peering Location
Click the Refresh button to update the list of available locations.
Choose a Equinix location closest to the GCP region where you created the Google Cloud Router and the primary VLAN attachment.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Choose the connection bandwidth (in Mbps). The list of permitted bandwidth values is populated based on the chosen peering location.
If you enabled redundancy in Step 8, configure the following settings for the secondary VLAN attachment and click Next:
Peering Location
Click the Refresh button to update the list of available locations.
Choose a Equinix location closest to the GCP region where you created the Google Cloud Router and the secondary VLAN attachment.
Tip
  For redundancy, choose a location other than the peering location associated with the primary VLAN attachment.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Bandwidth of the secondary connection is set to the same value as that of the primary connection.
Source Gateway Choose the interconnect gateway from which a connection must be established to the secondary VLAN attachment.
Configure the following and click Next:
Settings
Choose Auto-generated or Custom.
Auto-generated: The Interconnect BGP ASN is selected by the system
Custom: Specify Interconnect BGP ASN of your choice for peering with the interconnect VLAN attachments.
Note
  You can specify a custom BGP ASN only for the first interconnect from an Interconnect Gateway. After an interconnect is created from an interconnect gateway, the BGP ASN cannot be modified for any interconnects created subsequently.
BGP peering IP addresses for interconnects to Google Cloud Routers are auto-assigned by Google from the subnet (169.254.0.0/16). The IP addresses cannot be configured from Cisco vManage.
Segment Choose a segment ID for this connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When you save the connection configuration, a configuration task is launched and creates the interconnects between the Interconnect Gateway and the interconnect attachments of the Google Cloud routers.
When the task is successful, the connections are listed on the Interconnect Connectivity page. You can also view the connection details on the Google Cloud console.
What to do Next: On the Google Cloud console, manage the routes advertised from the Google Cloud Routers towards the interconnect gateway via BGP.
Create Interconnect Connection to a Cloud Gateway In Google Cloud
Prerequisites
Create the required VPC network using the Google Cloud console.
Deploy Google Cloud Routers in network-regions to which you wish to connect.
For nonredundant connectivity, on the Google Cloud console, deploy a Google Cloud Router in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.
For redundant connectivity, on the Google Cloud console, deploy two Google Cloud Routers in each network-region to which you wish to connect and create a VLAN attachment for each Google Cloud Router.

Note
For use with interconnect attachments, you must set the Google ASN for the Google Cloud Routers to 16550.
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Attach Equinix Template to Cisco Catalyst 1000v Instance.
Create Interconnect Gateway at a Equinix Location closest to your SD-WAN branch location.
For redundant connectivity to Google Cloud, create a pair of Interconnect Gateways in the Equinix fabric. For nonredundant connectivity, deploy an Interconnect Gateway at a Equinix location.
Create necessary network segments (see Segmentation Configuration Guide).
Associate Google Cloud Account with Cisco vManage.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose Equinix.
Choose Interconnect Account: choose a Equinix account by the account name entered while associating the account details on Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose Google Cloud.
Google Account Choose a Google account by the account name entered while associating the Google account details with Cisco vManage.
Attachment
Choose Cloud Gateway to connect to a Cloud Gateway.
Cloud Gateways: You can select only one Cloud Gateway from the drop-down list.
Configure the following and click Next:
PRIMARY
Google Cloud Router Choose the Google Cloud router.
Google Cloud Interconnect Attachment Choose the desired interconnect attachment or click Add New Google Cloud Interconnect Attachment.
If you clicked Add New Google Cloud Interconnect Attachment, configure the router settings in the Add Google Cloud Interconnect Attachment slide-in pane.
Configure the following and click Save:
Region: Choose the Google Cloud Interconnect attachment region.
VPC Network: Choose the associated network to the attachment.
Cloud Router Name: Choose the Google Cloud router deployed for the selected region and VPC network.
ID Attachment Name: Enter a unique attachment name.
Secondary Zone: If you want to deploy this attachment on the secondary zone, check the checkbox.
SECONDARY
Google Cloud Router Choose the Google Cloud router.
Google Cloud Interconnect Attachment Choose the desired interconnect attachment or click Add New Google Cloud Interconnect Attachment.
If you clicked Add New Google Cloud Interconnect Attachment, configure the router settings in the Add Google Cloud Interconnect Attachment slide-in pane.
Configure the following and click Save:
Region: Choose the Google Cloud Interconnect attachment region.
VPC Network: Choose the associated network to the attachment.
Cloud Router Name: Choose the Google Cloud router deployed for the selected region and VPC network.
ID Attachment Name: Enter a unique attachment name.
Secondary Zone: If you want to deploy this attachment on the secondary zone, check the checkbox.
Configure the following settings for the primary VLAN attachment and click Next:
Peering Location
Click the Refresh button to update the list of available locations.
Choose a Equinix location closest to the GCP region where you created the Google Cloud Router and the primary VLAN attachment.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Choose the connection bandwidth (in Mbps). The list of permitted bandwidth values is populated based on the chosen peering location.
If you enabled redundancy in Step 8, configure the following settings for the secondary VLAN attachment and click Next:
Peering Location
Click the Refresh button to update the list of available locations.
Choose a Equinix location closest to the GCP region where you created the Google Cloud Router and the secondary VLAN attachment.
Tip
  For redundancy, choose a location other than the peering location associated with the primary VLAN attachment.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Bandwidth of the secondary connection is set to the same value as that of the primary connection.
Source Gateway Choose the interconnect gateway from which a connection must be established to the secondary VLAN attachment.
Configure the following and click Next:
Settings
Choose Auto-generated or Custom.
Auto-generated: The Interconnect BGP ASN is selected by the system
Custom: Specify Interconnect BGP ASN of your choice for peering with the interconnect VLAN attachments.
Note
  You can specify a custom BGP ASN only for the first interconnect from an Interconnect Gateway. After an interconnect is created from an interconnect gateway, the BGP ASN cannot be modified for any interconnects created subsequently.
BGP peering IP addresses for interconnects to Google Cloud Routers are auto-assigned by Google from the subnet (169.254.0.0/16). The IP addresses cannot be configured from Cisco vManage.
Segment Choose a segment ID for this connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When you save the connection configuration, a configuration task is launched and creates the interconnects between the Interconnect Gateway and the interconnect attachments of the Google Cloud routers.
When the task is successful, the connections are listed on the Interconnect Connectivity page. You can also view the connection details on the Google Cloud console.
What to do Next: On the Google Cloud console, manage the routes advertised from the Google Cloud Routers towards the interconnect gateway via BGP.
Create Interconnects to Microsoft Azure
Associate Microsoft Azure Account with Cisco vManage
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Cloud .
Click Associate Cloud Account.
Configure the following:
Cloud Provider Choose Microsoft Azure.
Cloud Account Name Enter a name of your choice.
Description (Optional) Enter a description.
Use for Cloud Gateway Choose No.
Tenant ID Enter the ID of your Azure Active Directory (AD).
Tip
  To find the tenant ID, go to your Azure Active Directory and click Properties.
Subscription ID Enter the ID of the Azure subscription you want to use.
Client ID Enter your existing Azure application ID. See Azure documentation for more information on how to register an application in Azure AD, get the client ID and secret key, and more.
Secret Key Enter the password associated with the client ID.
Click Add.
Discover Host Private Networks and Tag Microsoft Azure VNets
Tag the Microsoft Azure VNets to which you wish to create software-defined cloud interconnects from an Interconnect Gateway. Azure VNets grouped using the same VNet tag are considered a singular unit.
Prerequisite
Associate Microsoft Azure Account with Cisco vManage.
Add a Tag
Group VNets and tag them together.

Note
VNets belonging to different resource groups cannot be used together.
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Host Private Networks.
Cloud Provider: choose Microsoft Azure.
The available host VNets are discovered and listed in a table.
Choose the Azure VNets that you wish to tag by checking the corresponding check boxes.
Click Tag Actions.
Click Add Tag and configure the following:
Field Description
Tag Name Enter a name for the tag.
Region
If you selected VNets before clicking Add Tag, this field shows the list of regions that correspond to the selected VNets.
If you did not select VNets before clicking Add Tag or wish to select more regions, choose regions from the drop-down list.
Click X to omit a region and associated VNets from the tag.
Selected VNets
If you selected VNets before clicking Add Tag, this field shows the list of VNet IDs of the selected host VNets.
If you did not select VNets before clicking Add Tag or wish to select more VNets, choose VNets from the drop-down list.
Click X to omit a VNet from the tag.
(From Cisco vManage Release 20.9.1) Enable for SDCI partner Interconnect Connections
(Cisco vManage Release 20.8.1 and earlier) Enable for Interconnect Connectivity
To use the VNets tag while creating Interconnect Connections to Microsoft Azure, check the check box.
If enabled for Interconnect Connetions, the tag cannot be used in the Microsoft Azure Multicloud workflow.
If not enabled for Interconnect Connections, the tag can only be used with Microsoft Azure Multicloud workflow.
Note
  Do not enable this setting when you use Cloud Gateways to connect VNet workloads.
Click Add.
On the Host Private Networks page, the Azure vNets you selected earlier are tagged and the tag name is shown in the VNET Tag column. If you chose to use the vNet tag for cloud interconnects, the Interconnect Enabled column reads Yes.
Edit a Tag
Add VNets to or remove VNets from an existing tag.
From Cisco vManage Release 20.10.1, edit a VNet tag associated with an Interconnect Connection subject to the following conditions:
If only one VNet is associated with a VNet tag, you cannot remove the VNet from the tag. To remove the VNet from the tag, delete the Interconnect Connection and then edit the tag.
For a private-peering connection with a virtual WAN attachment, the VNets you wish to associate with the tag must be from the same regions as the VNets already associated with the tag.
To attach VNets from a new region to the private-peering connection, do the following:
Create a new tag for the region and associate required VNets.
Edit the private-peering connection and attach the VNet tag to the connection.
For a private-peering connection with a VNet attachment, you can associate VNets from a new region to the tag while editing the tag.

Note
In Cisco vManage Release 20.9.x and earlier releases, you cannot edit a VNet tag that is associated with an Interconnect Connection.
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Host Private Networks.
Cloud Provider: choose Microsoft Azure.
The available host VNets are discovered and listed in a table.
Click Tag Actions.
Click Edit Tag and modify the following as required:
Field Description
Tag Name
From the drop-down list, choose a tag name.
Region
This field shows the list of regions that correspond to the VNets associated with the tag.
Choose additional regions from the drop-down list.
Click X to omit a region and associated VNets from the tag.
Selected VNets
This field shows the list of VNets associated with the tag.
Choose additional VNets from the drop-down list.
Click X to omit a VNet from the tag.
(From Cisco vManage Release 20.9.1) Enable for SDCI partner Interconnect Connections
(Cisco vManage Release 20.8.1 and earlier) Enable for Interconnect Connectivity
(Read only) Indicates whether the VNet is configured to be used while configuring Interconnect Connections or for Multicloud Gateway intent mapping.
Click Update.
Delete a Tag
Remove a tag that groups together VNets.

Note
You cannot delete a VNet tag while the tag is associated with an Interconnect Connection.
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Host Private Networks.
Cloud Provider: choose Microsoft Azure.
The available host VNets are discovered and listed in a table.
Click Tag Actions.
Click Delete Tag.
Tag Name: From the drop-down list, choose a tag name.
Click Delete.
Create Microsoft-Peering Connection to Microsoft Azure ExpressRoute from Interconnect Gateways
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Associate Microsoft Azure Account with Cisco vManage.
Attach Equinix Template to Cisco Catalyst 1000v Instance.
Create Interconnect Gateways at Equinix Location.
For connectivity to Microsoft Azure, create a pair of Interconnect Gateways in the Equinix fabric. Redundant connectivity is the default and only supported configuration.
Procedure
From the Cisco vManage menu, go to Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose Equinix.
Choose Interconnect Account: Choose a Equinix account by the account name entered while associating the account details on Cisco vManage.
Choose Interconnect Gateway: Choose the Interconnect Gateway from which the connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose Microsoft Azure.
Azure Account Choose a Microsoft Azure account by the account name entered while associating the account details with Cisco vManage.
ExpressRoute
Click the Refresh button to update the list of available ExpressRoutes
Choose an ExpressRoute or click Add New ExpressRoute.
Note
  Starting from Cisco vManage Release 20.8.1, Equinix ExpressRoutes are available.
Starting from Cisco vManage Release 20.8.1, all the ExpressRoutes created for the respective interconnect providers displayed in the list of available ExpressRoutes drop-down are color-coded depending on their provisioning status. Here is the list of colors and their significance,
Black: Not Provisioned.
Grey: Provisioned.
Red: Failed.
Only the non-provisioned ExpressRoutes from the chosen Azure account are available for selection. You can check the state of ExpressRoutes on the Microsoft Azure portal.
If you clicked Add New ExpressRoute, configure the ExpressRoute settings in the Create New ExpressRoute slide-in pane.
Configure the following and click Save:
Resource Group: Choose a resource group associated with the Microsoft Azure account.
Region: Choose an Azure region.
Instance Name: Enter a name for the ExpressRoute instance.
Provider: Choose Equinix.
Peering Location: Click the Refresh button to update the list of available locations. Choose an ExpressRoute location.
Bandwidth: Choose the bandwidth of the ExpressRoute circuit.
SKU: Choose the Premium or the Standard SKU.
Billing Model: Choose Metered billing or Unlimited.
Configure the following settings for the primary connection to the ExpressRoute and click Next:
Peer Location The location is chosen automatically based on the ExpressRoute you chose earlier.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Choose the connection bandwidth (in Mbps). The list of permitted bandwidth values is populated based on the chosen ExpressRoute.
Configure the following settings for the secondary connection to the ExpressRoute and click Next:
Peer Location The location is chosen automatically based on the ExpressRoute you chose earlier.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) The bandwidth of the secondary connection is set to the same value as that of the primary connection.
Source Gateway Choose the interconnect gateway from which the secondary connection must be established.
Configure the following and click Next:
Deployment Type
Choose Public.
Primary IPv4 Subnet
Enter a /30 CIDR public IP address for BGP peering from the primary Interconnect Gateway.
Before creating the connection, ensure that your organization is permitted to use the public IPv4 address.
Secondary IPv4 Subnet
Enter a /30 CIDR public IP address for BGP peering from the secondary Interconnect Gateway.
Before creating the connection, ensure that your organization is permitted to use the public IPv4 address.
BGP Advertise Prefix Enter the summary addresses and prefixes you wish to advertise to the Interconnect Gateway.
Segment Choose a segment ID for this connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When you save the connection configuration, a configuration task is launched. This task creates the following resources:
virtual cross connects in the Equinix fabric between the Interconnect Gateways and the ExpressRoute
Microsoft Azure public/private peerings for ExpressRoute circuits
a vNet gateway, if a vNet gateway does not exist for a vNet
connections between the ExpressRoute and the vNet gateways
When the task is successful, the connections are listed on the Interconnect Connectivity page.
You can also view the connection details on the Microsoft Azure portal.
Create Private-Peering Connection to Microsoft Azure ExpressRoute from Interconnect Gateways
Prerequisites
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Associate Microsoft Azure Account with Cisco vManage.
Discover Host Private Networks and tag Microsoft Azure VNets.
Attach Equinix Template to Cisco Catalyst 1000v Instance.
Create Interconnect Gateways at Equinix Location.
For connectivity to Microsoft Azure, create a pair of Interconnect Gateways in the Equinix fabric. Redundant connectivity is the default and only supported configuration.
Procedure
From the Cisco vManage menu, go to Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose Equinix.
Choose Interconnect Account: choose a Equinix account by the account name entered while associating the account details on Cisco vManage.
Choose Interconnect Gateway: choose the Interconnect Gateway from which the Direct Connect connection must be created.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Cloud.
Cloud Service Provider Choose Microsoft Azure.
Azure Account Choose a Microsoft Azure account by the account name entered while associating the account details with Cisco vManage.
ExpressRoute
Click the Refresh button to update the list of available ExpressRoutes
Choose an ExpressRoute or click Add New ExpressRoute.
Note
  Starting from Cisco vManage Release 20.8.1, Equinix ExpressRoutes are available.
Starting from Cisco vManage Release 20.8.1, all the ExpressRoutes created for the respective interconnect providers displayed in the list of available ExpressRoutes drop-down are color-coded depending on their provisioning status. Here is the list of colors and their significance,
Black: Not Provisioned.
Grey: Provisioned.
Red: Failed.
Only the non-provisioned ExpressRoutes from the chosen Azure account are available for selection. You can check the state of ExpressRoutes on the Microsoft Azure portal.
If you clicked Add New ExpressRoute, configure the ExpressRoute settings in the Create New ExpressRoute slide-in pane.
Configure the following and click Save:
Resource Group: Choose a resource group associated with the Microsoft Azure account.
Region: Choose an Azure region.
Instance Name: Enter a name for the ExpressRoute instance.
Provider: Choose Equinix.
Peering Location: Click the Refresh button to update the list of available locations. Choose an ExpressRoute location.
Bandwidth: Choose the bandwidth of the ExpressRoute circuit.
SKU: Choose the Premium or the Standard SKU.
Billing Model: Choose Metered billing or Unlimited.
Configure the following settings for the primary connection to the ExpressRoute and click Next:
Peer Location The location is chosen automatically based on the ExpressRoute you chose earlier.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) Choose the connection bandwidth (in Mbps). The list of permitted bandwidth values is populated based on the chosen ExpressRoute.
Configure the following settings for the secondary connection to the ExpressRoute and click Next:
Peer Location The location is chosen automatically based on the ExpressRoute you chose earlier.
Connection Name Enter a unique name for the connection.
Bandwidth (Mbps) The bandwidth of the secondary connection is set to the same value as that of the primary connection.
Source Gateway Choose the interconnect gateway from which the secondary connection must be established.
Configure the following and click Next:
Deployment Type
Choose Private.
BGP-Peering Settings
Choose Auto-generated or Custom.
Auto-generated: The interconnect BGP ASN, and the primary and secondary IPv4 subnets are selected by the system. The IPv4 subnets are selected from an internally reserved /16 subnet (198.18.0.0/16).
Custom:
Note
  You can specify a custom BGP ASN and custom IPv4 subnets only for the first interconnect from an Interconnect Gateway. After an interconnect is created from an interconnect gateway, the BGP ASN cannot be modified for any interconnects created subsequently.
BGP ASN: Specify an ASN of your choice for the primary and secondary peering with the ExpressRoute.
Primary IPv4 Subnet: Enter a /30 CIDR IP address for BGP peering with the primary Interconnect Gateway.
Secondary IPv4 Subnet: Enter a /30 CIDR IP address for BGP peering with the secondary Interconnect Gateway.
Attachment
Choose one of the following:
vNet: Attach VNets to the connection using VNet tags.
vWAN: Attach virtual WAN to the connection and choose VNets from the regions of the virtual WAN using VNet tags.
Minimum supported release: Cisco vManage Release 20.9.1
Cloud Gateway: Attach cloud gateways to the connection. You can select upto 5 cloud gateways per connection.
VNet Settings
VNet Tags: Choose VNet tags to identify VNets for which traffic must be routed through this connection.
virtual WAN Settings
vWAN: Choose or add a new virtual WAN.
Note
  You can choose the virtual WAN to be attached only for the first connection to Microsoft Azure from an Interconnect Gateway for the selected resource group of the ExpressRoute Circuit.The same virtual WAN is attached to any subsequent connection in the same resource group to which you choose to attach a virtual WAN.
Starting from Cisco vManage Release 20.8.1, Cisco vManage supports one virtual WAN per Microsoft Azure resource group per Microsoft Azure account. Once that vWAN is chosen and used as part of a virtual WAN connection, subsequent virtual WAN connections to the same Microsoft Azure resource group use the same virtual Wan.
The Microsoft Azure resource group is determined for the connection when the ExpressRoute Circuit is selected for it. All other Microsoft Azure resources belonging to the connection must be in the same Microsoft Azure resource group as that of the selected ExpressRoute Circuit.
vNet: Choose VNet tags to identify VNets for which traffic must be routed through this connection.
Cisco vManage finds VNets based on the chosen VNet Tags, and identifies the regions to which the VNets belong. For the chosen virtual WAN and the identified regions, Cisco vManage finds and lists the available virtual hubs for verification. For regions where a virtual hub does not exist, you must specify the name and address-prefix to add a virtual hub.
vHub Settings:
Click Add Settings. Or, if you're modifying the configuration, click Edit Settings.
Review the virtual hub name and address-prefix for applicable regions. If a virtual hub does not exist in a region, enter the virtual hub name and address-prefix to be used for the region.
Note
  Ensure that the virtual hub address-prefix that you enter does not overlap with the address-prefixes of any VNets.
To apply changes, click Save. To discard changes, click Cancel.
Segment Choose a segment ID for this connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When you save the connection configuration, a configuration task is launched.
For VNet attachmment, the configuration task creates the following resources:
virtual cross connects in the Equinix fabric between the Interconnect Gateways and the ExpressRoute
Microsoft Azure public/private peerings for the ExpressRoute circuits
a vNet gateway, if a vNet gateway does not exist for a vNet
connections between the ExpressRoute and the vNet gateways
For virtual WAN attachment, the configuration task creates the following resources:
virtual cross connects in the Equinix fabric between the Interconnect Gateways and the ExpressRoute
Microsoft Azure public/private peerings for the ExpressRoute circuits
necessary virtual hubs
connections between vNets and virtual hubs
an ExpressRoute Gateway for each virtual hub, if necessary
connections between the ExpressRoute Gateway and ExpressRouteCircuits
When the task is successful, the connections are listed on the Interconnect Connectivity page.
You can also view the connection details on the Microsoft Azure portal.
Device Links
Device link groups create a full-mesh network between two or more edge devices. Device links connects all the edge devices, that are part of a group, together to create a WAN. All the device links in a mesh share the same bandwidth between the edge devices.

Note
Only one device link is supported per Equinix account.
Point to point connection cannot be formed between interconnect gateways belonging to a device link group.
When you upgrade to Cisco vManage Release 20.9.2 and Cisco vManage Release 20.10.1, you have to modify the device link by adding or removing some devices to push new configuration to the devices. Otherwise, the BFD session for site-to-site connection goes down when site-to-site and device link are present on the same Interconnect Gateway.
Add Device Links
Delete Device Links
Update Device Links
Add Device Links
From the Cisco vManage menu, go to Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Click Device Links.
Click Add Device Links.
Choose Account name from the drop down menu. This is the Equinix account that has been associated to Cisco vManage through Account Association.
Enter Device link name.
Choose Bandwidth from the drop down menu.

Note
The maximum bandwidth supported by Equinix is 10000 Mbps per metro.
(Optional)
Enter Subnet.

Note
Provide IP subnets for interconnect gateway device link interface.
The subnet should be in 10.0.0.0/8, 172.16.0.0/12 and 192.168.0.0/16 range.
The subnet should not conflict with 172.31.251.0/21.
The subnet should not conflict with other connections.
If you do not enter the subnet, 198.19.0.0/16 is used by default.
Select Gateway Name from the drop down menu. Select at least two gateway names.
Click Save.
Delete Device Links
From the Cisco vManage menu, go to Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Click Device Links.
Existing device links are summarized in a table.
In the table, find the desired link and click ....
To delete a device link, click Delete and confirm that you wish to delete the device link.
Update Device Links
From the Cisco vManage menu, go to Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Click Device Links.
Existing device links are summarized in a table.
In the table, find the desired link and click ....
To edit the device link, click Edit.
In the Edit Device Link page, you can only update the Bandwidth and Gateway Name to add or remove gateways.

Note
Bandwidth and Gateway Name are the only two parameter that can be edited.
When adding or removing devices, at least two devices should be present in the device link.
The maximum bandwidth supported by Equinix is 10000 Mbps per metro.
Click Save.
Create Interconnect Between Interconnect Gateways
From Cisco vManage, you can create an interconnect between Interconnect Gateways at two or more Equinix locations. By doing so, you can link the SD-WAN branch locations connected to these Interconnect Gateways via the Equinix fabric.
Prerequisites
For each SD-WAN branch location to be connected through the Equinix fabric, complete the following configuration prerequisites:
Associate Equinix Account with Cisco vManage.
Configure Global Settings for Interconnect Gateways.
Create necessary network segments (see Segmentation Configuration Guide).
Identify the nearest Equinix location.
Create an Interconnect Gateway at the Equinix location closest to the branch location.

Note
If you have a VRF defined in two branch locations and wish to exchange traffic attached to the VRF through the connection between the Interconnect Gateways, you must configure the VRF and an appropriate Centralized Policy on the Interconnect Gateways to route the branch traffic through the connection between the Interconnect Gateways.
Procedure
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Choose Interconnect Provider: choose EQUINIX.
Choose Interconnect Account: choose an Equinix account by its account name; the account name is the name you entered while associating the account with Cisco vManage.
Choose Interconnect Gateway: choose the source Interconnect Gateway.
Click Add Connection.
Configure the following and click Next:
Destination Type Choose Edge.
Connection Name Enter a unique name for the connection.
Interconnect Gateway Choose destination Interconnect Gateway.
Bandwidth
Choose the connection bandwidth.
Unit: Mbps.

Note
Interconnect gateways belonging to a device link group cannot be used to form a point to point connection.
Review the connection summary.
To create the connection, click Save.
To modify the connection settings, click Back.
When the configuration task is successful, the connection is listed in the Interconnect Connectivity page.
Verify and Modify Configuration for Cisco SD-WAN Cloud Interconnect with Equinix
View Interconnect Gateway and Connection Summary
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud > Interconnect. On this page, you can view a summary of the Interconnect Gateways and connections that you have created. If you have not created any Interconnect Gateways, page provides an overview of the workflow for creating and managing Interconnect Gateways and connections.
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
The following information is displayed:
Interconnect Gateways
Total number of Interconnect Gateways
Number of Interconnect Gateways that reachable (Up)
Number of Interconnect Gateways that are unreachable (Down)
Connections
Total number of connections
Number of connections in the Up state
Number of connections in the Down state
Summary Table Summarized list of all Interconnect Gateways and connections from the gateways.
Device Link
Total number of Device Link
Number of Device Link in the Up state
Number of Device Link in the Down state
View or Delete Connections

Note
When you delete a connection to AWS, Cisco vManage deletes only the VIF, the virtual private gateway, and the route table that were created while establishing the connection.
While creating a connection to AWS, if you created a Direct Connect gateway or transit gateway from Cisco vManage, deleting the connection does not delete the gateway. Manage these AWS resources as required.
When deleting a connection to AWS, because of uncommon timing issues in the order in which the resources are torn down by AWS and Equinix, it is possible that Cisco vManage returns an error stating a failure in connection deletion with a 400 error returned by the service provider. Cisco vManage fully clears the connection from its database, and clears all related device configurations. It is recommended that you login to the Equinix portal and verify that the interface configuration and association has been deleted from the Equinix database as well, so that the same interface can be reused at a later time for a different connection.
Failure to verify the status of the interface in Equinix portal might lead to errors in creating any new connection for the same device.
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Existing connections are summarized in a table.
In the table, find the desired connection and click ....
To view more information about a connection, click View.
To delete a connection, click Delete and confirm that you wish to delete the connection.
Edit Connection Configuration
Minimum supported release: Cisco Catalyst SD-WAN Manager Release 20.12.1
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Interconnect Connectivity.
Existing connections are summarized in a table.
To modify connection configuration, click ... for the desired connection and click Edit.
The following tables describe the editable parameters based on connection destination and connection type, if any. Configure the parameters as required.
Along with these editable parameters, Cisco vManage also displays read-only properties about the connection.

Note
You can modify the properties of active connections only.
Table 4. Editable Properties of Interconnect Connections to AWS
Field Description
Applicable Connection Types
Bandwidth
Modify the connection bandwidth.
Unit: Mbps.
Private and Public Hosted VIF
Segment
Choose a different segment ID for this connection.
All connections to AWS
Transit Gateway
Click the Refresh button to fetch the transit gateways associated with the selected AWS account.
Choose the transit gateway to which the Direct Connect connection must be created.
Note
  You can remove a transit gateway subject to the following conditions:
The transit gateway that you wish to remove is not the only transit gateway associated with the connection.
You remove VPC tags corresponding to the region served by the transit gateway in the same edit operation.
You cannot replace an existing transit gateway for a region with another transit gateway from the same region.
Transit Hosted Connections
VPC Tags
Choose VPC tags to identify VPCs for which traffic must be routed through this connection.
Private Hosted VIF and Private Hosted Connections with VPC attachments
Transit Hosted Connections
Allowed Prefixes
Click Edit Prefixes.
Enter the IPv4 CIDR prefixes for the selected VPCs. You can find the IPv4 CIDR addresses from the AWS VPC Dashboard.
Note
  You can only add more prefixes. You cannot remove existing prefixes.
Transit Hosted Connections
Table 5. Editable Properties of Interconnect Connections to Google Cloud
Field Description
Connection Speed
Choose the desired bandwidth from the Connectivity Speed drop-down list.
In the case of redundant connnections, modify the connection speed of either the primary or the secondary connection. The peer connection is updated to use the same connection speed.
The bandwidth options for a connection may depend on the associated peering location.
Note
  Modify the property of either the primary or the secondary connection. The peer connection is updated to use the same configuration.
Table 6. Editable Properties of Interconnect Connections to Microsoft Azure
Field Description
Applicable Connection Types
Bandwidth
Modify the connection bandwidth.
Unit: Mbps.
Note
  You can only increase the bandwidth of connections to Microsoft Azure. For connections to Microsoft Azure, you must increase the bandwidth of the ExpressRoute on the Azure portal before increase the connection bandwidth on Cisco vManage.
Private and Public (Microsoft) Peering Connections
Segment
Choose a different segment ID for this connection.
Private and Public (Microsoft) Peering Connections
BGP Advertise Prefix
Enter the summary addresses and prefixes you wish to advertise to the Interconnect Gateway.
Public (Microsoft) Peering Connections
vNet Settings
vNet
Choose VNet tags to identify the VNets for which traffic must be routed through this connection.
Private Peering Connections
vHub Settings
Click Edit Settings.
Review the virtual hub name and address-prefix for applicable regions. If a virtual hub does not exist in a region, enter the virtual hub name and address-prefix to be used for the region.
Note
  Ensure that the virtual hub address-prefix that you enter does not overlap with the address-prefixes of any VNets.
To apply changes, click Save. To discard changes, click Cancel.
Private Peering Connections
Table 7. Editable Properties of Interconnect Connections Between Edge Devices
Field Description
Bandwidth
Modify the connection bandwidth.
Unit: Mbps.
To apply the changes, click Update or Save.
View, Edit, or Delete an Interconnect Gateway
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Gateway Management.
Existing Interconnect Gateway details are summarized in a table.
In the table, find the desired Interconnect Gateway and click ....
To view more information about the Interconnect Gateway, click View.
To edit the Interconnect Gateway description, click Edit Interconnect Gateway.
To delete the Interconnect Gateway, click Delete and confirm that you wish to delete the gateway.
Deleting the Interconnect Gateway disconnects the branch location from the Equinix fabric.
View, Edit, or Delete an Interconnect Account
From the Cisco vManage menu, choose Configuration > Cloud OnRamp for Multicloud.
Click Interconnect.
Click Account Management.
The available interconnect accounts are listed in a table.
For the desired interconnect account, click ... and do as follows:
To view more details about the interconnect account, click View.
To modify interconnect account details, click Edit Account Information.
You can modify the Account Name and the Description.
To modify interconnect account credentials, click Edit Account Credentials.
You can modify the Customer Key and Customer Secret for the account.

Note
Modifying the credentials on Cisco vManage, does not modify the credentials with the Interconnect Provider. Use this configuration option only to replicate any changes to the account credentials that you have performed on the relevant portal of the Interconnect Provider.
To delete the interconnect account, click Remove and confirm that you wish to remove the account.
Audit Management
Minimum supported release: Cisco Catalyst SD-WAN Manager Release 20.12.1
The audit management support added to the fabric of the SDCI provider Equinix helps you check if the cloud state is in sync with the Cisco vManage state or not. The audit process involves scanning the provider resources, interconnect gateways, and connections to the cloud. When there are errors, they are displayed and if there are no errors, the status is displayed as In Sync.
Accessing the Audit Report
In the Cloud onRamp for Multicloud window, navigate to the Interconnect tab.
In the Intent Management pane, click Audit.
In the Intent Management- Audit screen, under Interconnect Gateways, choose an Interconnect Provider from the drop-down list.
Choose the Interconnect Connections
Choose a Destination Type and choose a Cloud Provider from the drop-down list when the Destination Type is cloud to view the desired audit report.
Select the Device Links option.
Parameter Name
Description
Interconnect Provider
Choose the interconnect provider type from the drop-down. The options are:
Megaport
Equinix
Interconnect Connections
Enable or disable the interconnect connections.
Destination Type
Choose the destination type from the drop-down. The options are:
Cloud
Edge
Cloud Provider
Choose the cloud provider from the drop-down. The options are:
Amazon Web Servcies
Microsoft Azure
Google Cloud
Device Links
Choose the device links for the interconnect provider.

Note
The following are the types of reports generated post the audit along with the details:
Edge Gateway indicates that there are edge gatways created using Cisco vManage workflows with the respective details.
Edge Connections indicates that there are edge connections created using Cisco vManage workflows with the respective details.
Unknown Edge Gateways indicates that Cisco vManage is unable to recognize certain edge gateways.
Unknown Edge Connections indicates that Cisco vManage is unable to recognize certain edge connections.
The following are the statuses that are displayed in the audit report along with the details:
In Sync
Out of Sync
AUDIT_INFO
Benefits of Audit
Audit helps in identifying the gaps or disconnects between Cisco vManage intent and what has been realized in the cloud. The gaps are in terms of cloud resources, connectivity and states. When such gaps are detected, Cisco vManage flags such gaps and helps you take corrective action.
Troubleshoot Cisco SD-WAN Cloud Interconnect with Equinix
Scenario Resolution
Unable to add Interconnect Account
Verify that the account credentials associated with Cisco vManage are correct.
If you updated the credentials with Interconnect Provider, update the account credentials on Cisco vManage.
While attempting to create an Interconnect Gateway, the device list is empty Verify that you have attached the Equinix template to the devices. (Recommended template: Default_EQUINIX_DHCP_DNS_ICGW_CSR1000V_Template_V02)
While attempting to create an Interconnect Gateway, cannot find the desired location Click the Refresh button to update the list of available locations.
Creation of Interconnect Gateway failed
Check the configuration task progress on Cisco vManage for any error messages.
If you are using the Interconnect Global Settings, check whether the selected software image is available at the Interconnect Provider location.
If the VM instance is not deployed or the IP pool is exhausted, check with the Interconnect provider.
Certificate is not installed successfully for Interconnect Gateway
From the Cisco SD-WAN Manager menu, click Maintenance > Device Reboot. From the Device Reboot page, reboot the Interconnect Gateway.
While creating a Direct Connect connection, the Direct Connect gateway or the transit gateway list is empty
On the AWS portal, verify that the desired Direct Connect gateway or transit gateway is available.
Click the Refresh button to fetch the list of gateways from AWS.
If a gateway is not available in AWS, create the gateway through Cisco vManage.
While creating a Direct Connect connection, host VPC tags are not listed Verify that the host VPC tags are available and enabled for Interconnect Connectivity.
Creation of Direct Connect connection failed
Check the configuration task progress on Cisco vManage for any error messages.
If you are using the Interconnect Global Settings, check whether the internal IP address pool has been exhausted. If yes, delete some connections and retry.
If you are using custom settings, ensure that you haven’t entered overlapping CIDR subnets for peering.
Check whether you have reached any connection limits. See Usage Notes for Cisco SD-WAN Cloud Interconnect with Equinix.
Verify permissions of the Interconnect Provider account and the AWS account.
Traffic flow issues
Ensure that the required security rules for inbound and outbound traffic are configured for the host VPC.
Verify whether the virtual interface has been created and attached to the Direct Connect gateway.
In AWS, verify whether the BGP peering status is in the UP state for the virtual interface.
Verify whether the correct route table is being used as the main routing table for the host VPC and whether the necessary routes are being propagated towards the virtual private gateway or the transit gateway.
Verify whether the virtual private gateway or transit gateway is attached to the Direct Connect gateway.
Latency issues
Verify whether the Interconnect Gateway location is in close proximity to the Direct Connect location chosen while creating the connection.
Ensure that you have configured the appropriate bandwidth for the connection.
Cloud Gateways are not displayed in the drop-down list
Ensure that the necessary Cloud Gateways are created using the Multicloud workflow and the minimum requirements listed in this document are met.
Traffic to VPC or VNET workload is sent over the internet even after creating an Interconnect Connection to the Cloud Gateway
When an SD-WAN branch is connected to a Cloud Gateway through the internet and through an Interconnect Connection from an Interconnect Gateway to access the same VPC or VNET workload, by default, traffic from the branch is sent through the internet.
To make the private path through the Interconnect Gateway the preferred path, apply appropriate control and data policies to the WAN edge device at the branch, the Interconnect Gateway, and the Cloud Gateway.
Was this Document Helpful?
Yes No
Feedback
Customers Also Viewed
Cisco SD-WAN Cloud OnRamp Configuration Guide, Cisco IOS XE Release 17.x --- Cisco SD-WAN Cloud Interconnect with Megaport
Identify vEdge Certificate Expired on May 9, 2023
Cisco SD-WAN Getting Started Guide --- Install and Upgrade Cisco IOS XE Release 17.2.1r and Later
+ Show 3 More
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)