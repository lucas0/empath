Configuration Guides
Cisco UCS C-Series Servers Integrated Management Controller CLI Configuration Guide, Release 4.0
Bias-Free Language
Book Contents
Translations
Download
Print
Updated:
July 27, 2018
Chapter: Managing Storage Adapters
Chapter Contents
This chapter includes the following sections:
Creating Virtual Drives from Unused Physical Drives
Creating Virtual Drive from an Existing Drive Group
Setting a Virtual Drive as Transport Ready
Clearing a Virtual Drive as Transport Ready
Importing Foreign Configuration
Unlocking Foreign Configuration Drives
Clearing Foreign Configuration
Enabling JBOD
Disabling JBOD
Clearing a Boot Drive
Enabling Security on a JBOD
Clearing a Secure Physical Drive
Clearing a Secure SED Foreign Configuration Physical Drive
Retrieving Storage Firmware Logs for a Controller
Self Encrypting Drives (Full Disk Encryption)
Deleting a Virtual Drive
Initializing a Virtual Drive
Set as Boot Drive
Editing a Virtual Drive
Securing a Virtual Drive
Modifying Attributes of a Virtual Drive
Making a Dedicated Hot Spare
Making a Global Hot Spare
Preparing a Drive for Removal
Toggling Physical Drive Status
Setting a Physical Drive as a Controller Boot Drive
Removing a Drive from Hot Spare Pools
Undo Preparing a Drive for Removal
Enabling Auto Learn Cycles for the Battery Backup Unit
Disabling Auto Learn Cycles for the Battery Backup Unit
Starting a Learn Cycle for a Battery Backup Unit
Toggling the Locator LED for a Physical Drive
Clear Controller Configuration
Restoring Storage Controller to Factory Defaults
Viewing Storage Controller Logs
Viewing Physical Drive Details
Viewing NVMe Controller Details
Viewing NVMe Physical Drive Details
Viewing SIOC NVMe Drive Details
Viewing PCI Switch Details
Viewing Details of a Particular PCI Switch
Managing the FlexUtil Controller
Creating Virtual Drives from Unused Physical Drives
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # create virtual-drive
At this point, you are prompted to enter information corresponding to the RAID level, the physical drives to be used, the size, enabling full disk encryption of the drive and the write policy for the new virtual drive. Enter the appropriate information at each prompt.
When you have finished specifying the virtual drive information, you are prompted to confirm that the information is correct. Enter y (yes) to confirm, or n (no) to cancel the operation.
Note 
Enabling full disk encryption secures the drive.
Step 4
Server /chassis/storageadapter # show virtual-drive
Displays the existing virtual drives.
Example
This example shows how to create a new virtual drive that spans two unused physical drives.
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # create-virtual-drive
Please enter RAID level
0, 1, 5, 10, 50 --> 1

Please choose from the following 10 unused physical drives:
    ID  Size(MB)       Model        Interface  Type
     1  571776         SEAGATE      SAS        HDD
     2  571776         SEAGATE      SAS        HDD
     4  571776         SEAGATE      SAS        HDD
     5  428672         SEAGATE      SAS        HDD
     6  571776         SEAGATE      SAS        HDD
     7  571776         SEAGATE      SAS        HDD
     8  571776         SEAGATE      SAS        HDD
     9  428672         SEAGATE      SAS        HDD
    10  571776         SEAGATE      SAS        HDD
    11  953344         SEAGATE      SAS        HDD

Specify physical disks for span 0:
  Enter comma-separated PDs from above list--> 1,2
  Please enter Virtual Drive name (15 characters maximum)--> test_v_drive
  Please enter Virtual Drive size in MB, GB, or TB
   Example format: '400 GB' --> 10 GB

Optional attribute:

  stripsize: defaults to 64K Bytes

     0: 8K Bytes
    1: 16K Bytes
    2: 32K Bytes
    3: 64K Bytes
    4: 128K Bytes
    5: 256K Bytes
    6: 512K Bytes
    7: 1024K Bytes
  Choose number from above options or hit return to pick default--> 2
stripsize will be set to 32K Bytes (6 and 'strip-size\:32k')

  Disk Cache Policy: defaults to Unchanged

     0: Unchanged
    1: Enabled
    2: Disabled
  Choose number from above options or hit return to pick default--> 0
Disk Cache Policy will be set to Unchanged (0 and 'disk-cache-policy\:unchanged'                                                                                                             )

  Read Policy: defaults to No Read Ahead

     0: No Read Ahead
    1: Always
  Choose number from above options or hit return to pick default--> 0
Read Policy will be set to No Read Ahead (0 and 'read-policy\:no-read-ahead')

  Write Policy: defaults to Write Through

     0: Write Through
    1: Write Back Good BBU
    2: Always Write Back
  Choose number from above options or hit return to pick default--> 0
Write Policy will be set to Write Through (0 and 'write-policy\:write-through')

  IO Policy: defaults to Direct I/O

     0: Direct I/O
    1: Cached I/O
  Choose number from above options or hit return to pick default--> 0
IO Policy will be set to Direct I/O (0 and 'io-policy\:direct-io')

  Access Policy: defaults to Read Write

     0: Read Write
    1: Read Only
    2: Blocked
  Choose number from above options or hit return to pick default--> 0
Access Policy will be set to Read Write (0 and 'access-policy\:read-write')
Enable SED security on virtual drive (and underlying drive group)?
Enter y or n--> y
Virtual drive and drive group will be secured

New virtual drive will have the following characteristics:
  - Spans: '[1.2]'
  - RAID level: '1'
  - Name: 'test_v_drive'
  - Size: 10 GB
  - stripsize: 32K Bytes
  - Disk Cache Policy: Unchanged
  - Read Policy: No Read Ahead
  - Write Policy: Write Through
  - IO Policy: Direct I/O
  - Access Policy: Read Write
  - Encryption: FDE

OK? (y or n)--> y

Server /chassis/storageadapter # show virtual-drive
Virtual Drive Health         Status               Name             Size       RAID Level Boot Drive
------------- -------------- -------------------- ---------------- ---------- ---------- ----------
0             Good           Optimal                               150528 MB  RAID 0     false
1             Good           Optimal                               20480 MB   RAID 0     true
2             Good           Optimal                               114140 MB  RAID 0     false
3             Good           Optimal              test_v_drive     10000 MB   RAID 1     false
4             Good           Optimal              new_from_test    500 MB     RAID 1     false

Server /chassis/storageadapter # 
Creating Virtual Drive from an Existing Drive Group
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # carve-virtual-drive
At this point, you are prompted to enter information corresponding to the virtual drives to be used, and the size and the write policy for the new virtual drive. Enter the appropriate information at each prompt.
When you have finished specifying the virtual drive information, you are prompted to confirm that the information is correct. Enter y (yes) to confirm, or n (no) to cancel the operation.
Step 4
Server /chassis/storageadapter # show virtual-drive
Displays the existing virtual drives.
Example
This example shows how to carve a new virtual drive out of unused space in an existing RAID 1 drive group:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # carve-virtual-drive
  < Fetching virtual drives...>

ID  Name              RL  VDSize        MaxPossibleSize PD(s)
----------------------------------------------------------------
0  RAID0_12          0   100 MB        Unknown         1,2

Please choose from the above list the virtual drive number
whose space the new virtual drive will share--> 0
New virtual drive will share space with VD 0

Please enter Virtual Drive name (15 characters maximum)--> test_v_drive
Please enter Virtual Drive size in MB, GB, or TB (maximum: Unknown)
  Example format: '400 GB' --> 10 GB

Optional attributes:

  stripsize: defaults to 64K Bytes
     0: 8K Bytes
    1: 16K Bytes
    2: 32K Bytes
    3: 64K Bytes
    4: 128K Bytes
    5: 256K Bytes
    6: 512K Bytes
    7: 1024K Bytes
  Choose number from above options or hit return to pick default--> 0
stripsize will be set to 8K Bytes (4 and 'strip-size\:8k')

  Disk Cache Policy: defaults to Unchanged
     0: Unchanged
    1: Enabled
    2: Disabled
  Choose number from above options or hit return to pick default--> 0
Disk Cache Policy will be set to Unchanged (0 and 'disk-cache-policy\:unchanged')

  Read Policy: defaults to No Read Ahead
     0: No Read Ahead
    1: Always
  Choose number from above options or hit return to pick default--> 0
Read Policy will be set to No Read Ahead (0 and 'read-policy\:no-read-ahead')

  Write Policy: defaults to Write Through
     0: Write Through
    1: Write Back Good BBU
    2: Always Write Back
  Choose number from above options or hit return to pick default--> 0
Write Policy will be set to Write Through (0 and 'write-policy\:write-through')

  IO Policy: defaults to Direct I/O
     0: Direct I/O
    1: Cached I/O
  Choose number from above options or hit return to pick default--> 0
IO Policy will be set to Direct I/O (0 and 'io-policy\:direct-io')

  Access Policy: defaults to Read Write
     0: Read Write
    1: Read Only
    2: Blocked
  Choose number from above options or hit return to pick default--> 0
Access Policy will be set to Read Write (0 and 'access-policy\:read-write')

New virtual drive will have the following characteristics:
  - It will share space with virtual drive 0
  - Name: 'amit'
  - Size: 10 GB
  - stripsize: 8K Bytes
  - Disk Cache Policy: Unchanged
  - Read Policy: No Read Ahead
  - Write Policy: Write Through
  - IO Policy: Direct I/O
  - Access Policy: Read Write

OK? (y or n)--> y
Server /chassis/storageadapter # show virtual-drive
Virtual Drive Health         Status               Name             Size       RAID Level Boot Drive
------------- -------------- -------------------- ---------------- ---------- ---------- ----------
0             Good           Optimal                               150528 MB  RAID 0     false
1             Good           Optimal                               20480 MB   RAID 0     true
2             Good           Optimal                               114140 MB  RAID 0     false
3             Good           Optimal              test_v_drive     10000 MB   RAID 1     false
4             Good           Optimal              new_from_test    500 MB     RAID 1     false

Server /chassis/storageadapter # 
Setting a Virtual Drive as Transport Ready
Before you begin
You must log in with admin privileges to perform this task.
The virtual drive must be in optimal state to enable transport ready.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot ID
Enters the command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters the command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # set-transport-ready {include-all | exclude-all | include-dhsp}
Sets the virtual drive to transport ready and assigns the chosen properties.
Enter the initialization type using which you can set the selected virtual drive as transport ready. This can be one of the following:
exlude-all— Excludes all the dedicated hot spare drives.
include-all— Includes any exclusively available or shared dedicated hot spare drives.
include-dhsp— Includes exclusive dedicated hot spare drives.
When you are prompted to confirm the action. Enter y to confirm.
Note 
When you set a virtual drive to transport ready all the physical drives associated with it are displayed as Ready to remove.
Step 5
(Optional) Server /chassis/storageadapter/virtual-drive # show detail
(Optional)
Display the virtual drive properties with the change.
Example
This example shows how to set virtual drive 5 to transport ready:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-HBA
Server /chassis/storageadapter # scope virtual-drive 5
Server /chassis/storageadapter/virtual-drive # set-transport-ready exclude-all
Since they belong to same drive group, all these virtual drives will be set to Transport Ready - 0
Are you sure you want to proceed?[y|N]y
Server /chassis/storageadapter/virtual-drive # show detail
Virtual Drive 0:
    Health: Good
    Status: Optimal
    Visibility : Visible
    Name: RAID0_124_RHEL
    Size: 2858160 MB
    Physical Drives: 1, 2, 4
    RAID Level: RAID 0
    Boot Drive: false
    FDE Capable: 0
    FDE Enabled: 0
    Target ID: 0
    Strip Size: 64 KB
    Drives Per Span: 3
    Span Depth: 1
    Access Policy: Transport Ready
    Cache Policy: Direct
    Read Ahead Policy: None
    Requested Write Cache Policy: Write Through
    Current Write Cache Policy: Write Through
    Disk Cache Policy: Unchanged
    Auto Snapshot: false
    Auto Delete Oldest: true
    Allow Background Init: true
Server /chassis/storageadapter/virtual-drive # 
Clearing a Virtual Drive as Transport Ready
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot ID
Enters the command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters the command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # clear-transport-ready
This reverts the selected transport ready virtual drive to its original status.
When you are prompted to confirm the action. Enter y to confirm.
Step 5
(Optional) Server /chassis/storageadapter/virtual-drive # show detail
(Optional)
Display the virtual drive properties with the change.
Example
This example shows how to revert the selected transport ready virtual drive to its original state:
Server # scope chassis
Server /chassis # scope server 1
Server /chassis # scope storageadapter SLOT-HBA
Server /chassis/storageadapter # scope virtual-drive 5
Server /chassis/storageadapter/virtual-drive # clear-transport-ready
Since they belong to same drive group, all these virtual drives will be moved out of Transport Ready - 0
Are you sure you want to proceed?[y|N]y
Server /chassis/storageadapter/virtual-drive # show detail
Virtual Drive 0:
    Health: Good
    Status: Optimal
    Visibility : Visible
    Name: RAID0_124_RHEL
    Size: 2858160 MB
    Physical Drives: 1, 2, 4
    RAID Level: RAID 0
    Boot Drive: false
    FDE Capable: 0
    FDE Enabled: 0
    Target ID: 0
    Strip Size: 64 KB
    Drives Per Span: 3
    Span Depth: 1
    Access Policy: Read-Write
    Cache Policy: Direct
    Read Ahead Policy: None
    Requested Write Cache Policy: Write Through
    Current Write Cache Policy: Write Through
    Disk Cache Policy: Unchanged
    Auto Snapshot: false
    Auto Delete Oldest: true
    Allow Background Init: true
Server /chassis/storageadapter/virtual-drive # 
Importing Foreign Configuration
When one or more physical drives that have previously been configured with a different controller are inserted into a server, they are identified as foreign configurations. You can import these foreign configurations to a controller.

Important
You cannot import a foreign configuration in the following two scenarios:
When the secure virtual drive was created on server 1 (from which you want to import the configuration) using the remote key, and on server 2 (to which you want to import) using the local key.
When server 2 is configured with another KMIP server, which is not a part of the server 1 KMIP server cluster.
In order to import the foreign configuration in these scenarios, change the controller security on server 2 from local key management to remote key management, and use the same KMIP server from the same cluster where the server 1 KMIP is configured.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # import-foreign-config
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to import all foreign configurations on the MegaRAID controller in slot 3:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # import-foreign-config
Are you sure you want to import all foreign configurations on this controller?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter # 
Unlocking Foreign Configuration Drives
When a set of physical drives hosting a secured drive group are inserted into a different server or controller (or the same controller but whose security-key has been changed while they were not present), they become foreign configurations. Since they are secured, these foreign configurations must be unlocked before they can be imported. The following procedure explains how to unlock a foreign configuration drive:
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # unlock-foreign-configuration
At the prompt, enter the security key and enter yes at the confirmation prompt.
Step 4
(Optional) Server /chassis/storageadapter # scope physical-drive 2
(Optional)
Enters the physical drive command mode.
Step 5
(Optional) Server /chassis/storageadapter/physicsl-drive # show detail
(Optional)
Displays the status of the unlocked foreign drive.
Example
This example shows how to unlock a foreign configuration drive:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # unlock-foreign-configuration
Please enter the security key to unlock the foreign configuration -> testSecurityKey
Server /chassis/storageadapter # import-foreign-config
Are you sure you want to import all foreign configurations on this controller?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter # scope physical-drive 2
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 2:
    Controller: SLOT-HBA
    Health: Good
    Status: Online
    .
    .
    FDE Capable: 1
    FDE Enabled: 1
    FDE Secured: 1
    FDE Locked: 0
    FDE locked foreign config: 0

Server /chassis/storageadapter/physical-drive # 
Clearing Foreign Configuration

Important
This task clears all foreign configuration on the controller. Also, all configuration information from all physical drives hosting foreign configuration is deleted. This action cannot be reverted.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # clear-foreign-config
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to clear all foreign configurations on the MegaRAID controller in slot 3:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # clear-foreign-config
Are you sure you want to clear all foreign configurations on this controller?
All data on the drive(s) will be lost.
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter # 
Enabling JBOD

Note
You can enable Just a Bunch of Disks (JBOD) only on some UCS C-Series servers.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis /storageadapter # enable-jbod-mode
Enables the JBOD Mode for the selected controller
Example
This example enables the JBOD mode for the selected controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # enable-jbod-mode 
Are you sure you want to enable JBOD mode?
Enter 'yes' to confirm -> yes
Server/chassis/storageadapter # show settings
PCI Slot SLOT-3:
    Info Valid: Yes
    Enable JBOD Mode: true
Disabling JBOD

Note
This option is available only on some UCS C-Series servers.
Before you begin
JBOD mode must be enabled for the selected controller.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis /storageadapter # disable-jbod-mode
Disables the JBOD Mode for the selected controller
Example
This example disables the JBOD mode for the selected controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # disable-jbod-mode 
Are you sure you want to disable JBOD mode?
Enter 'yes' to confirm -> yes
Server/chassis/storageadapter # show settings
PCI Slot SLOT-3:
    Info Valid: Yes
    Enable JBOD Mode: false
Clearing a Boot Drive

Important
This task clears the boot drive configuration on the controller. This action cannot be reverted.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # clear-boot-drive
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to clear the boot drive configuration on the MegaRAID controller in slot 3:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # clear-boot-drive
Are you sure you want to clear the controller's boot drive? 
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter # 
Enabling Security on a JBOD
you can enable security on a physical drive only if it is a JBOD. The following procedure explains how to enable security on a JBOD:
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 2
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter # enable-security-on-jbod
At the confirmation prompt, enter yes.
Enables security on the JBOD.
Step 5
(Optional) Server /chassis/storageadapter/physicsl-drive # show detail
(Optional)
Displays details of the physical drive.
Example
This example shows how to enable security on a JBOD:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
savbu-stordev-dn1-2-cimc /chassis/storageadapter # scope physical-drive 2
server /chassis/storageadapter/physical-drive # enable-security-on-jbod
Are you sure you want to enable security on this JBOD?
NOTE: this is not reversible!
Enter 'yes' to confirm -> yes
server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 2:
    .
    .
    Status: JBOD
    .
    .
    FDE Capable: 1
    FDE Enabled: 1
    FDE Secured: 1
server /chassis/storageadapter/physical-drive # 
Clearing a Secure Physical Drive
Clearing a secure drive converts an FDE drive from secured to unsecured. The Physical drive status must be Unconfigured good to perform this action. This erases the data on the physical drive. The following procedure explains how to clear a secure SED physical drive:
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 2
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter/physicsl-drive # clear-secure-drive
At the confirmation prompt, enter yes.
This clears the secure SED physical drive and all the data will be lost.
Step 5
(Optional) Server /chassis/storageadapter/physicsl-drive # show detail
(Optional)
Displays the physical drive details.
Example
This example shows how to clear an SED foreign configuration physical drive:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 2
Server /chassis/storageadapter/physical-drive #  clear-secure-drive
Are you sure you want to erase all data from this physical drive?
NOTE: this is not reversible!  ALL DATA WILL BE LOST!!
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 2:
    Controller: SLOT-HBA
    Health: Good
    Status: Unconfigured Good
    .
    .
    FDE Capable: 1
    FDE Enabled: 0
    FDE Secured: 0


Server /chassis/storageadapter/physical-drive # 
Clearing a Secure SED Foreign Configuration Physical Drive
Coverts a locked foreign configuration Full Disk Encryption drive to a unsecured and unlocked drive. This erases the data on the physical drive. The following procedure explains how to clear a secure SED foreign configuration physical drive:
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 2
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter/physicsl-drive # clear-secure-foreign-config-drive
At the confirmation prompt, enter yes.
This clears the secure SED foreign configuration physical drive and all the data will be lost.
Step 5
(Optional) Server /chassis/storageadapter/physicsl-drive # show detail
(Optional)
Displays the physical drive details.
Example
This example shows how to clear an SED foreign configuration physical drive:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 2
Server /chassis/storageadapter/physical-drive # clear-secure-foreign-config-drive
Are you sure you want to erase all data from this foreign-configuration physical drive?
NOTE: this is not reversible!  ALL DATA WILL BE LOST!!
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 2:
    Controller: SLOT-HBA
    Health: Good
    Status: Unconfigured Good
    .
    .
    FDE Capable: 1
    FDE Enabled: 0
    FDE Secured: 0
    FDE Locked: 0
    FDE Locked Foreign Config: 0

Server /chassis/storageadapter/physical-drive # 
Retrieving Storage Firmware Logs for a Controller
This task retrieves the Storage Firmware Logs for the controller and places it in the /var/log location. This ensures that this log data is available when Technical Support Data is requested.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # get-storage-fw-log
Step 4
Server /chassis/storageadapter # show detail
Displays the status of the retrieval process.
Important 
Retrieving Storage Firmware Logs for a controller could take up to 2-4 minutes. Until this process is complete, do not initiate exporting technical support data.
Example
This example shows how to retrieve Storage Firmware Logs for a MegaRAID controller in slot 3:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # get-storage-fw-log
Server /chassis/storageadapter # show detail
PCI Slot SLOT-3:
TTY Log Status: In progress (8192 bytes fetched)
Server /chassis/storageadapter # show detail
PCI Slot SLOT-3:
TTY Log Status: In progress (90112 bytes fetched)
Server /chassis/storageadapter # show detail
PCI Slot SLOT-3:
TTY Log Status: Complete (172032 bytes fetched)
Self Encrypting Drives (Full Disk Encryption)
Cisco IMC supports self encrypting drives (SED). A special hardware in the drives encrypts incoming data and decrypts outgoing data in real-time. This feature is also called Full Disk Encryption (FDE).
The data on the drive is encrypted on its way into the drive and decrypted on its way out. However, if you lock the drive, no security key is required to retrieve the data.
When a drive is locked, an encryption key is created and stored internally. All data stored on this drive is encrypted using that key, and stored in encrypted form. Once you store the data in this manner, a security key is required in order to un-encrypt and fetch the data from the drive. Unlocking a drive deletes that encryption key and renders the stored data unusable. This is called a Secure Erase. The FDE comprises a key ID and a security key.
The FDE feature supports the following operations:
Enable and disable security on a controller
Create a secure virtual drive
Secure a non-secure drive group
Unlock foreign configuration drives
Enable security on a physical drive (JBOD)
Clear secure SED drives
Clear secure foreign configuration
Scenarios to consider While Configuring Controller Security in a Dual or Multiple Controllers Environment

Note
Dual or Multiple controllers connectivity is available only on some servers.
Controller security can be enabled, disabled, or modified independently. However, local and remote key management applies to all the controllers on the server. Therefore security action involving switching the key management modes must be performed with caution. In a scenario where both controllers are secure, and you decide to move one of the controllers to a different mode, you need to perform the same operation on the other controller as well.
Consider the following two scenarios:
Scenario 1—Key management is set to remote; both controllers are secure and use remote key management. If you now wish to switch to local key management, switch the key management for each controller and disable remote key management.
Scenario 2—Key management is set to local; both controllers are secure and use local key management. If you now wish to switch to remote key management, enable remote key management and switch the key management for each controller.
If you do not modify the controller security method on any one of the controllers, it renders the secure key management in an unsupported configuration state.
Enabling Drive Security on a Controller
Disabling Drive Security on a Controller
Modifying Controller Security Settings
Verifying the Security Key Authenticity
Switching Controller Security From Remote to Local Key Management
Switching Controller Security From Local to Remote Key Management
Enabling Drive Security on a Controller
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # enable-controller-security
At this point, you are prompted to enter a security key, you can either enter a security key of your choice or you can use the suggested security key. If you choose to assign a security key of your choice, enter the security key at the prompt.
Depending on whether you want to use the suggested security key or a security key of your choice, enter y (yes) to confirm, or n (no) to cancel the operation at the appropriate prompt.
Step 4
Server /chassis/storageadapter # show detail
Displays the storage drive details.
Example
The following example shows how to enable security on a controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # enable-controller-security
Use generated key-id 'UCSC-MRAID12G_FHH18250010_1d85dcd3'?  (y or n)--> y
Use suggested security-key '6ICsmuX@oVB7e9wXt79qsTgp6ICsmuX@'?  (y or n)--> n
Enter security-key --> testSecurityKey
Will use security-key 'testSecurityKey'
Server /chassis/storageadapter show detail
PCI Slot SLOT-HBA:
    <stuff deleted>
    Controller is Secured: 1

Server /chassis/storageadapter #
Disabling Drive Security on a Controller
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # disable-controller-security
A confirmation prompt appears.
At the confirmation prompt, enter yes to confirm, or n (no) to cancel the operation.
Another prompt to enter the security key appears. Enter the security key.
This disables the controller security.
Step 4
Server /chassis/storageadapter # show detail
Displays the storage drive details.
Example
The following example shows how to disable security on a controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter #  disable-controller-security
Note: this operation will fail if any secured drives are present.
Are you sure you want to disable security on this controller?
Enter 'yes' to confirm -> yes
Please enter the controller's security-key -> testSecurityKey
savbu-stordev-dn1-2-cimc /chassis/storageadapter # show detail
PCI Slot SLOT-HBA:
    <stuff deleted>
    Controller is Secured: 0

Server /chassis/storageadapter #
Modifying Controller Security Settings
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # modify-controller-security
At this point, you are prompted to enter the current security key, option to choose whether you want to reset the key-id and the new security key. Enter the appropriate information.
At the confirmation prompt, enter y (yes) to confirm, or n (no) to cancel the operation.
Example
The following example shows how to modify the security settings of a controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # modify-controller-security
Please enter current security-key --> testSecurityKey
Keep current key-id 'UCSC-MRAID12G_FHH18250010_1d85dcd3'? (y or n)--> n
Enter new key-id: NewKeyId
Will change key-id to 'NewKeyId'
Keep current security-key? (y or n)--> y

Server /chassis/storageadapter #
Verifying the Security Key Authenticity
If you are not sure about the security key, you can use this procedure to verify whether the security key that you provide matches the controller security key.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # verify-controller-security-key
At the prompt, enter the security key and press Enter.
If you enter a security key that does not match the controller security key, a verification failure message appears.
Example
The following example shows how to verify the security key of a controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter #  verify-controller-security-key
Please enter the security key to verify -> WrongSecurityKey
verify-controller-security-key failed.
Error: "r-type: RAID controller: SLOT-HBA command-status: Lock key from backup failed verification"
savbu-stordev-dn1-2-cimc /chassis/storageadapter # 
savbu-stordev-dn1-2-cimc /chassis/storageadapter # verify-controller-security-key
Please enter the security key to verify -> testSecurityKey

Server /chassis/storageadapter #
Switching Controller Security From Remote to Local Key Management
This task allows you to switch controller security from local management to remote management, and from remote to local management.
Before you begin
You must log in with admin privileges to perform this task.
KMIP must be enabled.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters chassis command mode.
Step 2
Server /chassis # scope storageadapter Slot-ID
Enters storage adapter command mode.
Step 3
Server /chassis/storageadapter # switch-to-local-key-mgmt
Enter y at the confirmation prompt.
Note 
If you have multiple controller you must switch the security on those as well.
Step 4
Server /chassis/server/storageadapter # key id
Enter the new key ID at the prompt. Switches to local key management.
Example
The following example shows how to switch controller security from remote to local key management:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-HBA 1
Server /chassis/storageadapter # switch-to-local-key-mgmt
Executing this command will require you to disable remote key management once switch is complete.
Do you want to continue(y or n)?y
Proceeding to switch to local key management.
Enter new security-key: test
Will change security-key to 'test'
Switch to local key management complete on controller in SLOT-HBA. 
***Remote key management needs to be disabled***
Please disable remote key management.
Server /chassis/server/storageadapter #
What to do next
After you switch from Remote to Local Key Management, ensure that you disable KMIP secure key management.
Switching Controller Security From Local to Remote Key Management
This task allows you to switch controller security from local management to remote management, and from remote to local management.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters chassis command mode.
Step 2
Server /chassis # scope storageadapter Slot-ID
Enters storage adapter command mode.
Step 3
Server /chassis/storageadapter # switch-to-remote-key-mgmt
Enter y at the confirmation prompt.
Step 4
Server /chassis/storageadapter # security id
Enter the security key at the prompt. Switches to remote key management.
Example
The following example shows how to switch controller security from local to remote key management:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-HBA 1
Server /chassis/server/storageadapter # switch-to-remote-key-mgmt
Changing the security key requires existing security key.
Please enter current security-key --> test
Switch to remote key management complete on controller in SLOT-HBA.
Server /chassis/server/storageadapter #
Deleting a Virtual Drive

Important
This task deletes a virtual drive, including the drives that run the booted operating system. So back up any data that you want to retain before you delete a virtual drive.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # delete-virtual-drive
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to delete virtual drive 3.
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope virtual-drive 3
Server /chassis/storageadapter/virtual-drive # delete-virtual-drive
Are you sure you want to delete virtual drive 3?
All data on the drive will be lost.  Enter 'yes' to confirm -> yes
Server /chassis/storageadapter/virtual-drive # 
 
Initializing a Virtual Drive
All data on a virtual drive is lost when you initialize the drive. Before you run an initialization, back up any data on the virtual drive that you want to save.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # start-initialization
Initializes the specified virtual drive.
Step 5
Server /chassis/storageadapter/virtual-drive # cancel-initialization
(Optional) Cancels the initialization of the specified virtual drive.
Step 6
Server /chassis/storageadapter/physical-drive # get-operation-status
Displays the status of the task that is in progress on the drive.
Example
This example shows how to initialize virtual drive 3 using fast initialization:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope virtual-drive 3
Server /chassis/storageadapter/virtual-drive # start-initialization
Are you sure you want to initialize virtual drive 3?
All data on the drive will be lost.  Enter 'yes' to confirm -> yes
Fast (0) or full (1) initialization?  -> 0
Server /chassis/storageadapter/virtual-drive # get-operation-status

progress-percent: 20%
elapsed -seconds: 30
operation-in-progress: initializing virtual drive

Server /chassis/storageadapter/virtual-drive # 
Set as Boot Drive
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter # set-boot-drive
Specifies the controller to boot from this virtual drive.
Example
This example shows how to specify the controller to boot from virtual drive 3:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope virtual-drive 3
Server /chassis/storageadapter/virtual-drive # set-boot-drive
Are you sure you want to set virtual drive 3 as the boot drive?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter/virtual-drive #
Editing a Virtual Drive
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server chassis /storageadapter # scope virtual-drive drive number
Enters command mode for the specified virtual drive.
Step 4
Server chassis /storageadapter /virtual-drive # modify-attributes
Prompts you to select a different current policy.
Step 5
Server chassis /storageadapter /virtual-drive# set raid-level value
Specifies the RAID level for the specified virtual drive.
Step 6
Server chassis /storageadapter /virtual-drive# set physical-drive value
Specifies the physical drive for the specified virtual drive.
Example
This example shows to edit a virtual drive:
Server# scope chassis
Server /chassis # scope storageadapter slot-3
Server /chassis/storageadapter # scope virtual-drive 3
Server /chassis/storageadapter/virtual-drive #set raid-level 1
Server /chassis/storageadapter/virtual-drive *# physical-drive 1
Server /chassis/storageadapter/virtual-drive* #commit
Server /chassis/storageadapter /virtual-drive # modify-attribute
Current write policy: Write Back Good BBU

    0: Write Through
    1: Write Back Good BBU
    2: Always Write Back
  Choose number from above options--> 0
The following attribute will be modified:
  - Write Policy: Write Through

OK? (y or n)--> y
Server /chassis/storageadapter/virtual-drive #
 
Securing a Virtual Drive

Important
This task secures all the VDs in an existing drive group, where virtual-drive is the target ID of a virtual drive in the drive group.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive drive-number
Enters command mode for the specified virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # secure-drive-group
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to secure the virtual drive group.
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope virtual-drive 3
Server /chassis/storageadapter/virtual-drive # secure-drive-group
This will enable security for virtual drive 16, and all virtual drives sharing this drive group.
It is not reversible.  Are you quite certain you want to do this?
Enter 'yes' to confirm -> yes
server /chassis/storageadapter/virtual-drive # show detail
Virtual Drive 16:
    .
    .
    FDE Capable: 1
    FDE Enabled: 1
    .
    .
 server /chassis/storageadapter/virtual-drive #
 
Modifying Attributes of a Virtual Drive
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope virtual-drive 3
Enters the command mode for the virtual drive.
Step 4
Server /chassis/storageadapter/virtual-drive # modify-attributes
Prompts you to select a different current policy.
Example
This example shows how to carve a new virtual drive out of unused space in an existing RAID 1 drive group:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope virtual-drive
Server /chassis/storageadapter/virtual-drive # modify-attributes

Current write policy: Write Back

  0: Write Through
  1: Write Back
  2: Write Back even if Bad BBU

Choose number from above options --> 0

The following attribute will be modified:

 - Write policy: Write Through

OK? (y or n) --> y

operation in progress.

Server /chassis/storageadapter/virtual-drive #  
Making a Dedicated Hot Spare
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive drive-number
Enters command mode for the specified physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # make-dedicated-hot-spare
You are prompted to choose a virtual drive for which the dedicated hot spare is being created.
Example
This example shows how to make physical drive 3 a dedicated hot spare for virtual drive 6:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # make-dedicated-hot-spare
  5: VD_OS_1, RAID 0, 102400 MB, physical disks: 1
  6: VD_OS_2, RAID 0, 12288 MB, physical disks: 1
  7: VD_OS_3, RAID 0, 12288 MB, physical disks: 1
  8: VD_DATA_1, RAID 0, 12512 MB, physical disks: 1
  9: RAID1_2358, RAID 1, 40000 MB, physical disks: 2,3,5,8
  11: JFB_RAID1_67, RAID 1, 20000 MB, physical disks: 6,7
  12: JFB_Crv_R1_40, RAID 1, 40000 MB, physical disks: 6,7
  13: JFB_R1_10GB, RAID 1, 10000 MB, physical disks: 6,7

  Please choose from the above 8 virtual drives-->6

Server /chassis/storageadapter/physical-drive # 
Making a Global Hot Spare
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive drive-number
Enters command mode for the specified physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # make-global-hot-spare
Step 5
Server /chassis/storageadapter/physical-drive # get-operation-status
Displays the status of the task that is in progress on the drive.
Example
This example shows how to make physical drive 3 a global hot spare:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # make-global-hot-spare
Server /chassis/storageadapter/physical-drive #
Preparing a Drive for Removal
You can confirm this task only on physical drives that display the Unconfigured Good status.
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive drive-number
Enters command mode for the specified physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # prepare-for-removal
Example
This example shows how to prepare physical drive 3 for removal.
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # prepare-for-removal
Server /chassis/storageadapter/physical-drive # 
Toggling Physical Drive Status
Before you begin
You must log in with admin privileges to perform this task.
The controller must support the JBOD mode and the JBOD mode must be enabled.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 4
Enters command mode for the physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # make-unconfigured-good
Modifies the status of the drive to Unconfigured good.
Step 5
Server /chassis/storageadapter/physical-drive # make-jbod
Enables the JBOD mode on the physical drive.
Example
This example shows how to toggle between the status of the physical drive:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 4
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 4:
    Controller: SLOT-4
    Health: Good
    Status: JBOD
    Boot Drive: true
    Manufacturer: ATA
    Model: ST500NM0011
    Predictive Failure Count: 0
    Drive Firmware: CC02
    Coerced Size: 476416 MB
    Type: HDD
Server /chassis/storageadapter/physical-drive # make-unconfigured-good
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 4:
    Controller: SLOT-4
    Health: Good
    Status: Unconfigured Good
    Boot Drive: true
    Manufacturer: ATA
    Model: ST500NM0011
    Predictive Failure Count: 0
    Drive Firmware: CC02
    Coerced Size: 476416 MB
    Type: HDD
Server /chassis/storageadapter/physical-drive # make-jbod
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 4:
    Controller: SLOT-4
    Health: Good
    Status: JBOD
    Boot Drive: true
    Manufacturer: ATA
    Model: ST500NM0011
    Predictive Failure Count: 0
    Drive Firmware: CC02
    Coerced Size: 476416 MB
    Type: HDD
Setting a Physical Drive as a Controller Boot Drive
Before you begin
You must log in with admin privileges to perform this task.
The controller must support the JBOD mode and the JBOD mode must be enabled.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 4
Enters command mode for the physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # set-boot-drive
You are prompted to confirm the action. Enter yes to confirm.
Note 
If you do not enter yes , the action is aborted.
Example
This example shows how to set a physical drive as a boot drive for a controller:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # show detail
PCI Slot SLOT-4:
    Health: Good
    Controller Status: Optimal
    ROC Temperature: Not Supported
    Product Name: MegaRAID 9240-8i (RAID 0,1,10,5)
    Serial Number: SP23807413
    Firmware Package Build: 20.11.1-0159
    Product ID: LSI Logic
    Battery Status: no battery
    Cache Memory Size: 0 MB
    Boot Drive: none
    Boot Drive is PD: false
    TTY Log Status: Not Downloaded
Server /chassis/storageadapter # scope physical-drive 4
Server /chassis/storageadapter/physical-drive # set-boot-drive 
Are you sure you want to set physical drive 4 as the boot drive?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter/physical-drive # exit
Server /chassis/storageadapter # show detail
PCI Slot SLOT-4:
    Health: Good
    Controller Status: Optimal
    ROC Temperature: Not Supported
    Product Name: MegaRAID 9240-8i (RAID 0,1,10,5)
    Serial Number: SP23807413
    Firmware Package Build: 20.11.1-0159
    Product ID: LSI Logic
    Battery Status: no battery
    Cache Memory Size: 0 MB
    Boot Drive: 4
    Boot Drive is PD: true
    TTY Log Status: Not Downloaded
Removing a Drive from Hot Spare Pools
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive drive-number
Enters command mode for the specified physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # remove-hot-spare
Removes a drive from the host spare pool.
Example
This example shows how to remove physical drive 3 from the hot spare pools:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # remove-hot-spare
Server /chassis/storageadapter/physical-drive #
Undo Preparing a Drive for Removal
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive drive-number
Enters command mode for the specified physical drive.
Step 4
Server /chassis/storageadapter/physical-drive # undo-prepare-for-removal
Example
This example shows how to respin physical drive 3 after preparing the drive for removal.
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # undo-prepare-for-removal
Server /chassis/storageadapter/physical-drive # 
Enabling Auto Learn Cycles for the Battery Backup Unit
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope bbu
Enter the battery backup unit command mode.
Step 4
Server /chassis/storageadapter # enable-auto-learn
Enables the battery auto-learn cycles
Example
This example shows how to enable the battery auto-learn cycles:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-2
Server /chassis/storageadapter # scope bbu
Server /chassis/storageadapter/bbu # enable-auto-learn
Automatic BBU learn cycles will occur without notice if enabled.
Are you sure? [y/n] --> y
enable-auto-learn initiated
Server /chassis/storageadapter/bbu #
Disabling Auto Learn Cycles for the Battery Backup Unit
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope bbu
Enter the battery backup unit command mode.
Step 4
Server /chassis/storageadapter # disable-auto-learn
Disables the battery auto-learn cycles
Example
This example shows how to disables the battery auto-learn cycles:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-2
Server /chassis/storageadapter # scope bbu
Server /chassis/storageadapter/bbu # disable-auto-learn
Automatic BBU learn cycles will no longer occur if disabled.
Are you sure? [y/n] --> y
disable-auto-learn initiated

Server /chassis/storageadapter/bbu #
Starting a Learn Cycle for a Battery Backup Unit
Before you begin
You must be logged in as an admin to use this command.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope bbu
Enter the battery backup unit command mode.
Step 4
Server /chassis/storageadapter # start-learn-cycle
Starts the learn cycle for the battery.
Example
This example shows how to initiate the learn cycles for a battery:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-2
Server /chassis/storageadapter # scope bbu
Server /chassis/storageadapter/bbu # start-learn-cycle
Server /chassis/storageadapter/bbu #
Toggling the Locator LED for a Physical Drive
Before you begin
You must be logged in as an admin to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 3
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter/physical-drive # locator-led {on | off}
Enables or disables the physical drive locator LED.
Example
This example shows how to enable the locator LED for physical drive 3:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-2
Server /chassis/storageadapter # scope physical-drive 3
Server /chassis/storageadapter/physical-drive # locator-led on
Server /chassis/storageadapter/physical-drive* # commit
Server /chassis/storageadapter/physical-drive # 
Clear Controller Configuration
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters chassis command mode.
Step 2
Server /chassis # scope storageadapter Slot-ID
Enters storage adapter command mode.
Step 3
Server /chassis/storageadapter # clear-all-config
Enter yes at the confirmation prompt. Clears the controller configuration.
Example
The following example shows how to clear the controller configuration:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-HBA 1
Server /chassis/storageadapter # clear-all-config 
Are you sure you want to clear the controller's config and delete all VDs?
Enter 'yes' to confirm -> yes
Enter administrative password to proceed with operation\n
Password -> Password accepted. Performing requested operation.
Server /chassis/storageadapter #
Restoring Storage Controller to Factory Defaults
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters chassis command mode.
Step 2
Server /chassis # scope storageadapter Slot-ID
Enters storage adapter command mode.
Step 3
Server /chassis/storageadapter # set-factory-defaults
Enter yes at the confirmation prompt. Restores the controller configuration parameters to factory defaults.
Example
The following example shows how to restore the controller configuration parameters to factory defaults:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-HBA 1
Server /chassis/storageadapter # set-factory-defaults 
This operation will restore controller settings to factory default values. Do you want to proceed?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter #
Viewing Storage Controller Logs
Before you begin
You must log in with admin privileges to perform this task.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # show log
Displays the storage controller logs.
Example
This example shows how to display storage controller logs:
Server # scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # show log

Time                        Severity         Description
----                        --------        -------------
Fri March 1 09:52:19 2013   Warning      Predictive Failure
Fri March 1 07:50:19 2013   Info         Battery charge complete 
Fri March 1 07:50:19 2013   Info         Battery charge started
Fri March 1 07:48:19 2013   Info         Battery relearn complete
Fri March 1 07:47:19 2013   Info         Battery is discharging
Fri March 1 07:45:19 2013   Info         Battery relearn started

Server /chassis/storageadapter # 
Viewing Physical Drive Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter slot
Enters command mode for an installed storage card.
Step 3
Server /chassis/storageadapter # scope physical-drive 2
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter/physicsl-drive # show detail
Displays the physical drive details.
Example
This example shows how to view the physical drive information:
Server# scope chassis
Server /chassis # scope storageadapter SLOT-3
Server /chassis/storageadapter # scope physical-drive 202
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 202:
    Controller: SLOT-HBA
    Info Valid: Yes
    Info Invalid Cause:
    Enclosure Device ID: 252
    Device ID: 8
    Drive Number: 202
    Health: Good
    Status: Online
    Boot Drive: false
    Manufacturer: ATA
    Model: INTEL SSDSC2BB480G4
    Predictive Failure Count: 0
    Drive Firmware: 0370
    Type: SSD
    Block Size: 512
    Physical Block Size: 4096
    Negotiated Link Speed: 6.0 Gb/s
    Locator LED: false
    FDE Capable: 0
    FDE Enabled: 0
    FDE Secured: 0
    FDE Locked: 0
    FDE Locked Foreign Config: 0
    Enclosure Association: Direct Attached
    Enclosure Logical ID: N/A
    Enclosure SAS Address[0]: N/A
    Enclosure SAS Address[1]: N/A
    Power Cycle Count: 106
    Power On Hours: 10471
    Percentage Life Left: 100
    Wear Status in Days: 1825
    Percentage Reserved Capacity Consumed: 0
    Time of Last Refresh : 2017-03-04 13:47
    Operating Temperature: 34
    Media Error Count: 0
    Other Error Count: 0
    Interface Type: SATA
    Block Count: 937703088
    Raw Size: 457862 MB
    Non Coerced Size: 457350 MB
    Coerced Size: 456809 MB
    SAS Address 0: 4433221108000000
    SAS Address 1: 0x0
    Power State: active
Viewing NVMe Controller Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # show nvmeadapter
Displays the available NVMe adapters.
Step 3
Server /chassis/nvmeadapter # scope nvmeadapter NVMe Adapter Name
Enters the chosen NVMe adapter command mode.
Step 4
Server /chassis/nvmeadapter # show detail
Displays the NVMe controller details.
Example
This example shows how to view the controller information:
Server# scope chassis
Server /chassis # show nvmeadapter
PCI Slot                     
---------------------------- 
NVMe-direct-U.2-drives       
PCIe-Switch                  
Server /chassis # scope nvmeadapter PCIe-Switch
Server /chassis/nvmeadapter # show detail
PCI Slot: PCIe-Switch
    Health: Good
    Drive Count: 8
    Vendor ID: MICROSEM
    Product ID: PFX 48XG3
    Component ID: 8533
    Product Revision: RevB
    P2P Vendor ID: f811
    P2P Device ID: efbe
    Running Firmware Version: 1.8.0.58-24b1
    Pending Firmware Version: 1.8.0.58
    Switch temperature: 49 degrees C
    Switch status: Optimal
    Link Status: Optimal
Server /chassis/nvmeadapter #                      
Viewing NVMe Physical Drive Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # show nvmeadapter
Displays the available NVMe adapters.
Step 3
Server /chassis/nvmeadapter # scope nvmeadapter NVMe Adapter Name
Enters the chosen NVMe adapter command mode.
Step 4
Server /chassis/nvmeadapter # show nvme-physical-drive
Displays the available physical drives.
Step 5
Server /chassis/nvmeadapter # scope nvme-physical-drive Physical Drive Number
Enters the chosen physical drive command mode.
Step 6
Server /chassis/nvmeadapter/nvme-physical-drive # show detail
Displays the NVMe physical drive details.
Example
This example shows how to view the physical drive information:
Server# scope chassis
Server /chassis # scope nvmeadapter NVMe-direct-U.2-drives
Server /chassis/nvmeadapter # show nvme-physical-drive
Physical Drive Number Product Name Manufacturer Serial Number Temperature % Drive Life Used Performance Level LED Fault status % Power on Hours 
--------------------- ----- ------------ ------------- ----------- ----------------- ----------------- ---------------- ---------------- 
REAR-NVME-1           Ci... HGST         SDM00000E5EC  48 degre... 3                 100               Healthy. Driv... 2                
REAR-NVME-2           Ci... HGST         SDM00000DC90  47 degre... 2                 100               Healthy          3           
Server /chassis/nvmeadapter # scope nvme-physical-drive REAR-NVME-1
Server /chassis/nvmeadapter/nvme-physical-drive # show detail
Physical Drive Number REAR-NVME-1:
    Product Name: Cisco UCS (SN200) 2.5 inch 800 GB NVMe based PCIe SSD
    Manufacturer: HGST
    Serial Number: SDM00000E5EC
    Temperature: 48 degrees C
    % Drive Life Used: 3
    Performance Level: 100
    LED Fault status: Healthy. Drive is overused based on current write pattern
    % Power on Hours: 2
    Firmware Revision: 
    PCI Slot: REAR-NVME-1
    Managed Id: 10
    Controller Type: NVME-SFF
    Controller Temperature: 48 degrees C
    Fault State: 0
    Throttle Start Temperature: 70 degrees C
    Shutdown Temperature: 75 degrees C
Server /chassis/nvmeadapter/nvme-physical-drive #                      
Viewing SIOC NVMe Drive Details
You must scope to a particular CMC to view the NVMe drives in SIOC associated with that CMC.

Note
This feature is available only on some S-Series servers.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope cmc [1 | 2]
Enters the CMC command mode.
Step 3
Server /chassis/CMC # scope nvmeadapter adapter name
Enters the NVMe adapter command mode.
Step 4
Server /chassis/CMC/nvmeadapter # show nvme-physical-drive detail
Displays the SIOC NVMe physical drive details.
Example
This example shows how to view SIOC NVMe drive details:
Server # scope chassis
Server /chassis # scope cmc 
Server /chassis/cmc # show detail
Firmware Image Information:
    ID: 1
    Name: CMC1
    SIOC PID: UCS-S3260-PCISIOC
    Serial Number: FCH21277K8T
    Update Stage: ERROR
    Update Progress: OS_ERROR
    Current FW Version: 4.0(0.166)
    FW Image 1 Version: 0.0(4.r17601)
    FW Image 1 State: BACKUP INACTIVATED
    FW Image 2 Version: 4.0(0.166)
    FW Image 2 State: RUNNING ACTIVATED
    Reset Reason: ac-cycle
    Secure Boot: ENABLED
Server /chassis # scope cmc 1 
Server /chassis/cmc # scope nvmeadapter NVMe-direct-U.2-drives
Server /chassis/cmc/nvmeadapter # show nvme-physical-drive detail
Physical Drive Number SIOCNVMe1:
    Product Name: Cisco 2.5 inch  1TB Intel P4501 NVMe Med. Perf. Value Endurance
    Manufacturer: Intel
    Serial Number: PHLF7303008G1P0KGN
    Temperature: 39 degrees C
    % Drive Life Used: 1
    Performance Level: 100
    LED Fault status: Healthy
    Drive Status: Optimal
    % Power on Hours: 8
    Firmware Version: QDV1CP03
    PCI Slot: SIOCNVMe1
    Managed Id: 1
    Controller Type: NVME-SFF
    Controller Temperature: 39
    Throttle State: 0
    Throttle Start Temperature: 70
    Shutdown Temperature: 80
Physical Drive Number SIOCNVMe2:
    Product Name: Cisco 2.5 inch 500GB Intel P4501 NVMe Med. Perf. Value Endurance
    Manufacturer: Intel
    Serial Number: PHLF73440068500JGN
    Temperature: 39 degrees C
    % Drive Life Used: 1
    Performance Level: 100
    LED Fault status: Healthy
    Drive Status: Optimal
    % Power on Hours: 7
    Firmware Version: QDV1CP03
    PCI Slot: SIOCNVMe2
    Managed Id: 2
    Controller Type: NVME-SFF
    Controller Temperature: 39
    Throttle State: 0
    Throttle Start Temperature: 70
    Shutdown Temperature: 80
Server /chassis/cmc/nvmeadapter #
Viewing PCI Switch Details
This feature is available only on some C-Series servers.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # show pci-switch
Displays the list of PCI switches available in the system.
Step 3
Server /chassis # show pci-switch detail
Displays the details of the PCI switches available in the system.
Example
This example shows how to view PCI Switch details:
Server # scope chassis
Server /chassis # show pci-switch
Slot-ID                   Product Name         Manufacturer
------------------------- -------------------- --------------------
PCI-Switch-1              PEX 8764             PLX
PCI-Switch-2              PEX 8764             PLX
PCI-Switch-3              PEX 8764             PLX
PCI-Switch-4              PEX 8764             PLX
Server /chassis # show pci-switch detail
PCI SWITCH:
    Slot-ID: PCI-Switch-1
    Product Name: PEX 8764
    Product Revision: 0xab
    Manufacturer: PLX
    Device Id: 0x8764
    Vendor Id: 0x10b5
    Sub Device Id: 0x8764
    Sub Vendor Id: 0x10b5
    Temperature: 43
    Composite Health: Good
    Adapter Count: 3
PCI SWITCH:
    Slot-ID: PCI-Switch-2
    Product Name: PEX 8764
    Product Revision: 0xab
    Manufacturer: PLX
    Device Id: 0x8764
    Vendor Id: 0x10b5
    Sub Device Id: 0x8764
    Sub Vendor Id: 0x10b5
    Temperature: 43
    Composite Health: Good
    Adapter Count: 3
PCI SWITCH:
    Slot-ID: PCI-Switch-3
    Product Name: PEX 8764
    Product Revision: 0xab
    Manufacturer: PLX
    Device Id: 0x8764
    Vendor Id: 0x10b5
    Sub Device Id: 0x8764
    Sub Vendor Id: 0x10b5
    Temperature: 42
    Composite Health: Good
    Adapter Count: 3
PCI SWITCH:
    Slot-ID: PCI-Switch-4
    Product Name: PEX 8764
    Product Revision: 0xab
    Manufacturer: PLX
    Device Id: 0x8764
    Vendor Id: 0x10b5
    Sub Device Id: 0x8764
    Sub Vendor Id: 0x10b5
    Temperature: 43
    Composite Health: Degraded
    Adapter Count: 3
C480-FCH2213WH02 /chassis #
Server /chassis/ #
Viewing Details of a Particular PCI Switch
This feature is available only on some C-Series servers.
Procedure
  Command or Action Purpose
Step 1
Server # scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # show pci-switch
Displays the list of PCI switches available in the system.
Step 3
Server /chassis # scope pci-switch PCI-Switch Number
Enters the PCI switch command mode of the chosen switch.
Step 4
Server /chassis/pci-switch # show detail
Displays the details of the PCI switch.
Step 5
Server /chassis/pci-switch # show adapter-list
Displays the details of the adapters present on the PCI switch.
Example
This example shows how to view details of a particular PCI Switch:
Server # scope chassis
Server /chassis # show pci-switch
Slot-ID                   Product Name         Manufacturer
------------------------- -------------------- --------------------
PCI-Switch-1              PEX 8764             PLX
PCI-Switch-2              PEX 8764             PLX
PCI-Switch-3              PEX 8764             PLX
PCI-Switch-4              PEX 8764             PLX
Server /chassis # scope pci-switch PCI-Switch-1
Server /chassis/pci-switch show detail
PCI SWITCH:
    Slot-ID: PCI-Switch-1
    Product Name: PEX 8764
    Product Revision: 0xab
    Manufacturer: PLX
    Device Id: 0x8764
    Vendor Id: 0x10b5
    Sub Device Id: 0x8764
    Sub Vendor Id: 0x10b5
    Temperature: 43
    Composite Health: Good
    Adapter Count: 3
Server /chassis/pci-switch # show adapter-list
Slot                 Link Status          Link Speed           Link Width           Status
-------------------- -------------------- -------------------- -------------------- --------------------
GPU-3                up                   8.0                  16                   Good
GPU-4                up                   8.0                  16                   Good
12                   up                   8.0                  16                   Good
Server /chassis/pci-switch #
Managing the Flexible Flash Controller
Cisco Flexible Flash
On the M5 servers, Flexible Flash Controller is inserted into the mini storage module socket. The mini storage socket is inserted into the M.2 slot on the motherboard. M.2 slot also supports SATA M.2 SSD slots.

Note
M.2 slot does not support NVMe in this release.
Some C-Series Rack-Mount Servers support an internal Secure Digital (SD) memory card for storage of server software tools and utilities. The SD card is hosted by the Cisco Flexible Flash storage adapter.
The SD storage is available to Cisco IMC as a single hypervisor (HV) partition configuration. Prior versions had four virtual USB drives. Three were preloaded with Cisco UCS Server Configuration Utility, Cisco drivers and Cisco Host Upgrade Utility, and the fourth as user-installed hypervisor. A single HV partition configuration is also created when you upgrade to the latest version of Cisco IMC or downgrade to the prior version, and reset the configuration.
For more information about installing and configuring the M.2 drives, see the Storage Controller Considerations (Embbeded SATA RAID Requirements) and Replacing an M.2 SSD in a Mini-Storage Carrier For M.2 sections in the Cisco UCS Server Installation and Service Guide for the C240 M5 servers at this URL:
https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-c-series-rack-servers/products-installation-guides-list.html
For information about the Cisco software utilities and packages, see the Cisco UCS C-Series Servers Documentation Roadmap at this URL:
http://www.cisco.com/go/unifiedcomputing/c-series-doc
Card Management Feature in the Cisco Flexible Flash Controller
The Cisco Flexible Flash controller supports management of both single and two SD cards as a RAID-1 pair. With the introduction of card management, you can perform the following tasks:

Note
If you want to upgrade from version 1.4(5e) to 1.5(4) or higher versions, you must first upgrade to version1.5(2) and then upgrade to a higher version of Cisco IMC.
Reset the Cisco Flexible Flash controller to load the latest Flex Flash firmware after every Cisco IMC firmware upgrade.
Action
Description
Reset Cisco Flex Flash
Allows you to reset the controller.
Reset Partition Defaults
Allows you to reset the configuration in the selected slot to the default configuration.
Synchronize Card Configuration
Allows you to retain the configuration for an SD card that supports firmware version 253 and later.
Configure Operational Profile
Allows you to configure the SD cards on the selected Cisco Flexible Flash controller.
RAID Partition Enumeration
Non-RAID partitions are always enumerated from the primary card and the enumeration does not depend on the status of the primary card.
Following is the behavior of the RAID partition enumeration when there are two cards in the Cisco Flexible Flash controller:
Scenario Behavior
Single card
RAID partitions are enumerated if the card is healthy, and if the mode is either Primary or Secondary-active.
Dual paired cards
RAID partitions are enumerated if one of the cards is healthy.
When only one card is healthy, all read/write operations occur on this healthy card. You must use UCS SCU to synchronize the two RAID partitions.
Dual unpaired cards
If this scenario is detected when the server is restarting, then neither one of the RAID partitions is enumerated.
If this scenario is detected when the server is running, when a user connects a new SD card, then the cards are not managed by the Cisco Flexible Flash controller. This does not affect the host enumeration. You must pair the cards to manage them. You can pair the cards using the Reset Partition Defaults or Synchronize Card Configuration options.
Upgrading from Single Card to Dual Card Mirroring with FlexFlash
You can upgrade from a single card mirroring to dual card mirroring with FlexFlash in one of the following methods:
Add an empty FlexFlash card to the server, and then upgrade its firmware to the latest version.
Upgrade the FlexFlash firmware to the latest version and then add an empty card to the server.
Prior to using either of these methods, you must keep in mind the following guidelines:
To create RAID1 mirroring, the empty card that you want to add to the server must be of the exact size of the card that is already in the server. Identical card size is a must to set up RAID1 mirroring.
Ensure that the card with valid data in the Hypervisor partition is marked as the primary healthy card. You can determine this state either in the Cisco IMC GUI or from the Cisco IMC CLI. To mark the state of the card as primary healthy, you can either use the Reset Configuration option in the Cisco IMC GUI or run the reset-config command in the Cisco IMC CLI. When you reset the configuration of a particular card, the secondary card is marked as secondary active unhealthy.
In a Degraded RAID health state all read-write transactions are done on the healthy card. In this scenario, data mirroring does not occur. Data mirroring occurs only in the Healthy RAID state.
Data mirroring is only applicable to RAID partitions. In the C-series servers, only Hypervisor partitions operate in the RAID mode.
If you have not configured SD cards for use with prior versions, then upgrading to the latest version loads the latest 253 firmware and enumerates all four partitions to the host.
While upgrading versions of the FlexFlash, you may see the following error message:
Unable to communicate with Flexible Flash controller: operation ffCardsGet, status CY_AS_ERROR_INVALID_RESPONSE”
In addition, the card status may be shown as missing. This error occurs because you accidently switched to an alternate release or a prior version, such as 1.4(x). In this scenario, you can either revert to the latest version, or you can switch back to the FlexFlash 1.4(x) configuration. If you choose to revert to the latest Cisco IMC version, then the Cisco FlexFlash configuration remains intact. If you choose to switch back to the prior version configuration, you must reset the Flexflash configuration. In this scenario, you must be aware of the following:
If multiple cards are present, and you revert to a prior version, then the second card cannot be discovered or managed.
If the card type is SD253, then you must run the reset-config command twice from the Cisco IMC CLI - once to reload the old firmware on the controller and to migrate SD253 to SD247 type, and the second time to start the enumeration.
Configuring the Flexible Flash Controller Properties for C220 M5 and C240 M5 Servers
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash
Enters the Cisco Flexible Flash controller command mode for the specified controller.
Step 3
Server /chassis/flexflash # scope operational-profile
Enters the operational profile command mode.
Step 4
Server /chassis/flexflash/operational-profile # set read-error-count- slot1-threshold threshold
Specifies the number of read errors that are permitted while accessing the Cisco Flexible Flash card in slot 1. If the number of errors exceeds this threshold, the Cisco Flexible Flash card is disabled and you must reset it manually before Cisco IMC attempts to access it again.
To specify a read error threshold, enter an integer between 1 and 255. To specify that the card should never be disabled regardless of the number of errors encountered, enter 0 (zero).
Step 5
Server /chassis/flexflash/operational-profile # set read-error-count- slot2-threshold threshold
Specifies the number of read errors that are permitted while accessing the Cisco Flexible Flash card in slot 2. If the number of errors exceeds this threshold, the Cisco Flexible Flash card is disabled and you must reset it manually before Cisco IMC attempts to access it again.
To specify a read error threshold, enter an integer between 1 and 255. To specify that the card should never be disabled regardless of the number of errors encountered, enter 0 (zero).
Step 6
Server /chassis/flexflash/operational-profile # set write-error-count-slot2-threshold threshold
Specifies the number of write errors that are permitted while accessing the Cisco Flexible Flash card in slot 2. If the number of errors exceeds this threshold, the Cisco Flexible Flash card is disabled and you must reset it manually before Cisco IMC attempts to access it again.
To specify a write error threshold, enter an integer between 1 and 255. To specify that the card should never be disabled regardless of the number of errors encountered, enter 0 (zero).
Step 7
Server /chassis/flexflash/operational-profile # commit
Commits the transaction to the system configuration.
Example
This example shows how to configure the properties of the Flash controller:
Server# scope chassis
Server /chassis # scope flexflash FlexFlash-0
Server /chassis/flexflash # scope operational-profile
Server /chassis/flexflash/operational-profile # set read-err-count-slot1-threshold 9
Server /chassis/flexflash/operational-profile *# set read-err-count-slot2-threshold 10
Server /chassis/flexflash/operational-profile *# set write-err-count-slot1-threshold 11
Server /chassis/flexflash/operational-profile *# set write-err-count-slot2-threshold 12
Server /chassis/flexflash/operational-profile *# commit
Server /chassis/flexflash/operational-profile # show detail
FlexFlash Operational Profile:
    Firmware Operating Mode: util
    SLOT1 Read Error Threshold: 9
    SLOT1 Write Error Threshold: 11
    SLOT2 Read Error Threshold: 10
    SLOT2 Write Error Threshold: 12
Resetting the Flexible Flash Controller
In normal operation, it should not be necessary to reset the Cisco Flexible Flash. We recommend that you perform this procedure only when explicitly directed to do so by a technical support representative.

Note
This operation will disrupt traffic to the virtual drives on the Cisco Flexible Flash controller.
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash index
Enters the Cisco Flexible Flash controller command mode for the specified controller. At this time, the only permissible index value is FlexFlash-0 .
Step 3
Server /chassis/flexflash # reset
Resets the Cisco Flexible Flash controller.
Example
This example resets the flash controller:
Server# scope chassis
Server /chassis # scope flexflash FlexFlash-0
Server /chassis/flexflash # reset
This operation will reset Cisco Flexible Flash controller.
Host traffic to VDs on this device will be disrupted.
Continue?[y|N] y

Server /chassis/flexflash #
Configuring the Flexible Flash Controller Cards in Mirror Mode
Configuring controller cards in mirror mode:
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash
Enters the Cisco Flexible Flash controller command mode for the specified controller.
Step 3
Server /chassis/flexflash # configure-cards-mirror SLOT-1 .
Configures SLOT-1 as healthy primary.
Step 4
Enter y at the Enable auto sync(by default auto sync is disabled)?[y|N] prompt.
Sync the card on slot 1 with the card on slot 2.
Step 5
Enter y at the Set Mirror Partition Name(Default name is Hypervisor)?[y|N] prompt.
Enables you to set the name of the mirror partition.
Step 6
Enter the name of the mirror partition at the Enter Partition Name Mirror Partition Name :Hypervisor prompt.
Sets the name of the mirror partition.
Step 7
Enter y at the Set Virtual Drive as non-removable (Default is removable)?[y|N] prompt.
Enables you to set the VD as non-removable.
The following message displays:
This action will mark the SLOT-1 as healthy primary slot and SLOT-2 (if card existing) as unhealthy secondary.
This operation may disturb the host connectivity as well.
Step 8
Enter y at the Continue?[y|N]y prompt.
Configures the cards in Mirror mode and sets the card in SLOT-1 as primary healthy and SLOT-2 (if card existing) as unhealthy secondary.
Step 9
(Optional) Server /chassis/flexflash # show physical-drive
(Optional)
Displays the status of the configured cards.
Note 
When the cards are configured in auto sync mode and if the cards go out of sync then syncing from a good card with the bad card will start automatically.
If the cards are configured in auto sync mode and if a card goes out of sync, then syncing from a good card starts automatically.
If the server is running with one auto mirror healthy card and if a new card is inserted then the metadata is automatically created on the new card and data syncing starts from auto mirror configured card to the new paired card.
Example
This example shows how to configure the controller cards in mirror mode:
Server# scope chassis
Server /chassis # scope flexflash 
Server /chassis/flexflash #  configure-cards-mirror SLOT-1
Enable auto sync(by default auto sync is disabled)?[y|N]y
Set Mirror Partition Name(Default name is Hypervisor)?[y|N]y
Enter Partition Name Mirror Partition Name :HV
Set Virtual Drive as non-removable (Default is removable)?[y|N]y
This action will mark the SLOT-1 as healthy primary slot and SLOT-2 (if card existing) as unhealthy secondary.
This operation may disturb the host connectivity as well.
Continue?[y|N]y
Server /chassis/flexflash # show detail 
Controller FlexFlash-0:
    Product Name: Cisco FlexFlash
    Controller HW: FX3S
    Vendor: Cypress
    Firmware Version: 1.3.2 build 159
    Firmware Operating Mode: mirror
    Firmware Configured Mode: mirror
    Has Error: No
    Error Description:
    Internal State: Disconnected
    Controller Status: OK
    Cards Manageable: Yes
    Startup Firmware Version: 1.3.2 build 159

Server /chassis/flexflash # show physical-drive
Physical Drive  Status    Controller   Card Type         Card mode         Health     Sync Mode
--------------- --------- ------------ ----------------- ----------------- ---------- ----------
SLOT-1          present   FlexFlash-0  FX3S configured   mirror-primary    healthy    auto
SLOT-2          present   FlexFlash-0  FX3S configured   mirror-secondary  unhealthy  auto

Server /chassis/flexflash #
Enabling Virtual Drives
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash
Enters the Cisco Flexible Flash controller command mode for the specified controller.
Step 3
Server /chassis/ flexflash # scope virtual-drive
Enters the virtual drive command mode for the specified controller.
Step 4
Server /chassis/flexflash/virtual-drive # enable-vds "SCU HUU dlfd"
Enables the virtual drives to the host.
Example
This example shows how to enable the virtual drives to the host:
Server# scope chassis
Server /chassis # scope flexflash 
Server /chassis/flexflash #  scope virtual-drive
Server /chassis/flexflash/virtual-drive # enable-vds "SCU HUU dlfd"
Server /chassis/flexflash/virtual-drive # show detail

Virtual Drive SCU:
    VD ID: 1
    Size: 2560 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive HUU:
    VD ID: 2
    Size: 1536 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive Drivers:
    VD ID: 3
    Size: 8192 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive dlfd:
    VD ID: 4
    Size: 9952 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive dfdff:
    VD ID: 5
    Size: 30432 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none

Server /chassis/flexflash/virtual-drive #
Erasing Virtual Drives
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash
Enters the Cisco Flexible Flash controller command mode for the specified controller.
Step 3
Server /chassis/ flexflash # scope virtual-drive
Enters the virtual drive command mode for the specified controller.
Step 4
Server /chassis/flexflash/virtual-drive # erase-vds "SCU HUU"
Initiates erasing FAT32.
Example
This example shows how to erase data on the virtual drives:
Server# scope chassis
Server /chassis # scope flexflash 
Server /chassis/flexflash #  scope virtual-drive
Server /chassis/flexflash/virtual-drive #  erase-vds "SCU HUU"
Server /chassis/flexflash/virtual-drive # show detail

Virtual Drive SCU:
    VD ID: 1
    Size: 2560 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: Erasing
    Last Operation completion status: none
Virtual Drive HUU:
    VD ID: 2
    Size: 1536 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Connected
    Operation in progress: Erase-Pending
    Last Operation completion status: none
Virtual Drive Drivers:
    VD ID: 3
    Size: 8192 MB
    VD Scope: Non-Raid
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive dlfd:

Server /chassis/flexflash/virtual-drive #
Syncing Virtual Drives
Before you begin
You must log in with admin privileges to perform this task.
Cisco Flexible Flash must be supported by your platform.
The cards must be configured in manual mirror mode.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash
Enters the Cisco Flexible Flash controller command mode for the specified controller.
Step 3
Server /chassis/ flexflash # scope virtual-drive
Enters the virtual drive command mode for the specified controller.
Step 4
Server /chassis/flexflash/virtual-drive # sync-vds Hypervisor
Syncs the virtual drives.
Note 
If the cards are configured in auto sync mode and if a card goes out of sync, then syncing from a good card starts automatically.
If the server is running with one auto mirror healthy card and if a new card is inserted then the metadata is automatically created on the new card and data syncing starts from auto mirror configured card to the new paired card.
Example
This example shows how to sync the virtual drives:
Server# scope chassis
Server /chassis # scope flexflash 
Server /chassis/flexflash #  scope virtual-drive
Server /chassis/flexflash/virtual-drive # sync-vds Hypervisor
Server /chassis/flexflash/virtual-drive # show detail

Virtual Drive Hypervisor:
    VD ID: 1
    Size: 30432 MB
    VD Scope: Raid
    VD Status: Degraded
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: Syncing(Manual)10% done
    Last Operation completion status: none

Server /chassis/flexflash/virtual-drive #
Viewing FlexFlash Logs
Before you begin
Cisco Flexible Flash must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexflash index
Enters the Cisco Flexible Flash controller command mode.
Step 3
Server /chassis/flexflash # show logs
Displays the Flexible Flash controller logs.
Example
An example of the Flexible Flash Controller logs.
Server # scope chassis
Server /chassis # scope chassis flexflash FlexFlash-0
Server /chassis/flexflash # show logs           
TimeStamp                    Severity      Description
---------                    –-------      -----------
2017 July 10 07:16:17 UTC    warning       "CYWB_LOG: CYWB: USB connection status, 3.0 enable=1, 3.0 mode=1"
2017 July 10 07:46:05 UTC    warning       "CYWB_LOG: CYWB: USB connection status, 3.0 enable=1, 3.0 mode=1"
2017 July 10 07:46:05 UTC    warning       "CYWB_LOG: CYWB FWLOG (usbapp): USB HSChirp event, data=1"
2017 July 10 07:45:07 UTC    warning       "CYWB_LOG: CYWB FWLOG (usbapp): USB Suspend event, data=0"
2017 July 10 07:45:06 UTC    warning       "CYWB_LOG: CYWB FWLOG (usbapp): USB VbusValid event, data=0"
2017 July 10 07:44:23 UTC    warning       "CYWB_LOG: CYWB FWLOG (usb): connect done, usb_state=4 ctrl_reg=0"
2017 July 10 07:44:23 UTC    info          "cywb_blkdev_create_disks: Finished changing disks: S0=0 S1=0 RAID=0 TOTAL=0"
2017 July 10 07:44:23 UTC    info          "cywbblkdev_blk_put: disk=cd3ad400 queue=cd3bd360 port=0 unit=0 usage=0"
2017 July 10 07:44:23 UTC    info          "cywb_blkdev_create_disks: S2 unit 0 has become unavailable"
2017 July 10 07:44:23 UTC    info          "CYWB_LOG: Found 0 RAID partitions, 0 partitions on port0 and 0 partitions on port 1"
2017 July 10 07:44:23 UTC    info          cywb_blkdev_create_disks called
2017 July 10 07:44:23 UTC    info          "cywb_blkdev_create_disks: Scheduling driver callback"
2017 July 10 07:44:23 UTC    info          "cywbblkdev: Added disk=cd3ad400 queue=cd3bd360 port=0 unit=0"
2017 July 10 07:44:23 UTC    info          "cywbblkdev: Registered block device cydiskraida with capacity 124727295 (major=254, minor=0)"
2017 July 10 07:44:23 UTC    info          cywbblkdev_blk_release exit
2017 July 10 07:44:23 UTC    info          "cywbblkdev_blk_put: disk=cd3ad400 queue=cd3bd360 port=0 unit=0 usage=1"
2017 July 10 07:44:23 UTC    info          cywbblkdev_blk_release entry
2017 July 10 07:44:23 UTC    warning       "CYWB_LOG: CyWb: Disk on port0, unit0 is busy, waiting"
2017 July 10 07:44:23 UTC    warning       "CYWB_LOG: CYWB: No device found on storage port 0"
2017 July 10 07:44:23 UTC    info          cywbblkdev_revalidate_disk called
2017 July 10 07:44:23 UTC    info          cywbblkdev_blk_open exit
2017 July 10 07:44:23 UTC    info          cywbblkdev_media_changed called
2017 July 10 07:44:23 UTC    info          cywbblkdev_blk_open entry
2017 July 10 07:44:23 UTC    info          "cywb_blkdev_create_disks: Finished changing disks: S0=0 S1=0 RAID=1 TOTAL=1"
Managing the FlexUtil Controller
The C-Series M5 Rack-Mount servers support microSD memory card for storage of server software tools and utilities. Riser 1 has this microSD memory card slot. Cisco FlexUtil supports only 32GB microSD card.
The following user visible partitions are present on the microSD card:
Server Configuration Utility (SCU) – 1.25 GB
Diagnostics – 0.25 GB
Host Update Utility (HUU) – 1.5 GB
Drivers – 8 GB
User

Note
The number of partitions and size of each partition on microSD is fixed.
At any time, two partitions can be mapped onto the host. These partitions (except the user partition ) can also be updated through a CIFS or NFS share. A second level BIOS boot order support is also available for all the bootable partitions.

Note
User partition must be used only for storage. This partition does not support OS installations.
Configuring FlexUtil Operational Profiles
Resetting FlexUtil Card Configuration
Viewing FlexUtil Properties
Viewing FlexUtil Physical Drives Details
Viewing FlexUtil Virtual Drives Details
Adding an Image to a FlexUtil Virtual Drive
Updating a FlexUtil Virtual Drive
Enabling FlexUtil Virtual Drive
Mapping an Image to a Virtual Drive
Unmapping an Image From a Virtual Drive
Erasing an Image on a Virtual Drive
Configuring FlexUtil Operational Profiles
Before you begin
You must log in as a user with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope operational-profile
Enters the operational profile command mode.
Step 4
Server /chassis/flexutil/operational-profile # set read-err-count-threshold count
Sets the read error threshold count.
Note 
Zero value for threshold will be treated as special case, cards will not be marked unhealthy if error count crosses zero threshold.
Step 5
Server /chassis/flexutil/operational-profile* # set write-err-count-threshold count
Sets the write error threshold count.
Note 
Zero value for threshold will be treated as special case, cards will not be marked unhealthy if error count crosses zero threshold.
Step 6
Server /chassis/flexutil/operational-profile* # commit
Commits the transaction to the system.
Example
This example shows how to configure the FlexUtil operational profile:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope operational-profile 
Server /chassis/flexutil/operational-profile # set read-err-count-threshold 49
Server /chassis/flexutil/operational-profile* # set write-err-count-threshold 49
Server /chassis/flexutil/operational-profile* # commit
Server /chassis/flexutilServer /chassis/flexutil/operational-profile
Resetting FlexUtil Card Configuration
Before you begin
You must log in as a user with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # reset-card-config
At the confirmation prompt enter y. Resets the FlexUtil card configuration.
Example
This example shows how to reset the FlexUtil card configuration:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # reset-card-config
This operation will wipe all the data on the card.
Any VD connected to host (except UserPartition) will be disconnected from host.
This task will take few minutes to complete.
Do you want to continue?[y|N]y
Server /chassis/flexutil #
Viewing FlexUtil Properties
Before you begin
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # show detail
Displays the FlexUtil controller properties.
Example
This example displays the FlexUtil controller properties:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # show detail
Controller Flexutil:
    Product Name: Cisco Flexutil
    Internal State: Connected
    Controller Status: OK
    Physical Drive Count: 1
    Virtual Drive Count: 5
Server /chassis/flexutil #
Viewing FlexUtil Physical Drives Details
Before you begin
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # show physical-drive detail
Displays the FlexUtil physical drives properties.
Example
This example displays the FlexUtil physical drives properties:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # show physical-drive detail
Physical Drive microSD:
    Status: present
    Controller: Flexutil
    Health: healthy
    Capacity: 30624 MB
    Write Enabled: true
    Read Error Count: 0
    Read Error Threshold: 49
    Write Error Count: 0
    Write Error Threshold : 49
    Product Name: SD32G
    Product Revision: 3.0
    Serial#: 0x1cafb
    Manufacturer Id: 39
    OEM Id: PH
    Manufacturing Date : 12/2016
    Block Size: 512 bytes
    Partition Count: 5
    Drives Enabled: SCU Diagnostics HUU Drivers UserPartition
Server /chassis/flexutil #
Viewing FlexUtil Virtual Drives Details
Before you begin
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope virtual-drive
Enters the virtual drive command mode.
Step 4
Server /chassis/flexutil/virtual-drive # show detail
Displays the FlexUtil physical drives properties.
Example
This example displays the FlexUtil physical drives properties:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope virtual-drive
Server /chassis/flexutil/virtual-drive # show detail
Virtual Drive SCU:
    ID: 1
    LUN ID: NA
    Size: 1280 MB
    VD Scope: Non-RAID
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive Diagnostics:
    ID: 2
    LUN ID: 0
    Size: 256 MB
    VD Scope: Non-RAID
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive HUU:
    ID: 3
    LUN ID: NA
    Size: 1536 MB
    VD Scope: Non-RAID
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive Drivers:
    ID: 4
    LUN ID: NA
    Size: 8192 MB
    VD Scope: Non-RAID
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Virtual Drive UserPartition:
    ID: 5
    LUN ID: NA
    Size: 11159 MB
    VD Scope: Non-RAID
    VD Status: Healthy
    VD Type: Removable
    Read/Write: R/W
    Host Accessible: Not-Connected
    Operation in progress: NA
    Last Operation completion status: none
Server /chassis/flexutil/virtual-drive #
Adding an Image to a FlexUtil Virtual Drive
Before you begin
Log in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
server # scope chassis
Enters chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope vd-image-configs
Enters the virtual drive image configuration command mode.
Step 4
Server /chassis/flexutil/vd-image-configs # vd-image-cifs {virtual-drive-name remote-share remote-file-path [mount options]
Maps a CIFS file for the FlexUtil virtual drive. You must specify the following:
Name of the virtual drive
Remote share including IP address (IPv4 or IPv6 address) and the exported directory
Path of the remote file corresponding to the exported directory.
(Optional) Mapping options
Username and password to connect to the server
Step 5
Server /chassis/flexutil/vd-image-configs # vd-image-nfs {virtual-drive-name remote-share remote-file-path [mount options]
Maps an NFS file for the FlexUtil virtual drive. You must specify the following:
Name of the virtual drive
Remote share including IP address (IPv4 or IPv6 address)
Path of the remote file
(Optional) Mapping options
Step 6
Server /chassis/flexutil/vd-image-configs # vd-image-www {virtual-drive-name | remote-share | remote-file-path [mount options]
Maps an HTTPS file to the virtual drive. You must specify the following:
Name of the virtual drive to map
Remote share including IP address and the exported directory
Path of the remote file corresponding to the exported directory.
(Optional) Mapping options
Username and password to connect to the server
Step 7
Server /chassis/flexutil/vd-image-configs # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to map an image to a FlexUtil virtual drive:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope vd-image-configs
Server /chassis/flexutil/vd-image-configs # vd-image-nfs HUU 10.10.10.10:/nfsdata ucs-c240m5-huu-3.1.0.182.iso
Server /chassis/flexutil/vd-image-configs # show detail
Virtual drive: SCU
    mount-type: nfs
    remote-share: 10.10.10.10:/nfsshare
    remote-file: ucs-cxx-scu-4.0.12.3.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

Virtual drive: Diagnostics
    mount-type: nfs
    remote-share: 10.10.10.10:/nfsshare
    remote-file: ucs-cxx-diag.5.0.1a.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

Virtual drive: HUU
    mount-type: nfs
    remote-share: 10.10.10.10:/nfsdata
    remote-file: ucs-c240m5-huu-3.1.0.182.iso
    mount-options: "nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072"

Virtual-drive: Drivers
    mount-type: None
    remote-share: None
    remote-file: None
    mount-options: None
Server /chassis/flexutil/vd-image-configs #
Updating a FlexUtil Virtual Drive
Before you begin
You must be logged in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope virtual-drive
Enters the virtual drive command mode.
Step 4
Server /chassis/flexutil/virtual-drive # update-vds virtual-drive
Updates the chosen virtual drive.
Step 5
(Optional) Server /chassis/flexutil/virtual-drive # update-vds-cancel
(Optional)
Cancels an ongoing virtual drive update.
Step 6
Server /chassis/flexutil/virtual-drive # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to updates a FlexUtil virtual drive:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope virtual-drive
Server /chassis/flexutil/virtual-drive # update-vds HUU
Server /chassis/flexutil/virtual-drive # show detail
    
Virtual-drive: SCU
    partition-id: 1
    lun-id: NA
    size: 1280 MB
    partition-scope: Non-RAID
    partition-status: Healthy
    partition-type: Removable
    writable: R/W
    host-accessible: Not-Connected
    operation-in-progress: NA
    operation-completion-status: none

 Virtual-drive: Diagnostics
    partition-id: 2
    lun-id: NA
    size: 256 MB
    partition-scope: Non-RAID
    partition-status: Healthy
    partition-type: Removable
    writable: R/W
    host-accessible: Not-Connected
    operation-in-progress: NA
    operation-completion-status: none

Virtual-drive: HUU
    partition-id: 3
    lun-id: NA
    size: 1536 MB
    partition-scope: Non-RAID
    partition-status: Healthy
    partition-type: Removable
    writable: R/W
    host-accessible: Not-Connected
    operation-in-progress: Updating
    operation-completion-status: none

Virtual-drive: Drivers
    partition-id: 4
    lun-id: NA
    size: 8192 MB
    partition-scope: Non-RAID
    partition-status: Healthy
    partition-type: Removable
    writable: R/W
    host-accessible: Not-Connected
    operation-in-progress: NA
    operation-completion-status: none

 Virtual drive: UserPartition
    partition-id: 5
    lun-id: NA
    size: 11159 MB
    partition-scope: Non-RAID
    partition-status: Healthy
    partition-type: Removable
    writable: R/W
    host-accessible: Not-Connected
    operation-in-progress: NA
    operation-completion-status: none
Server /chassis/flexutil/virtual-drive #
Enabling FlexUtil Virtual Drive
Before you begin
You must be logged in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Update the virtual drive image before maping the drive to a host.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope virtual-drive
Enters the virtual drive command mode.
Step 4
Server /chassis/flexutil/virtual-drive # enable-vds virtual-drive
Maps the virtual drive to host.
Step 5
Server /chassis/flexutil/virtual-drive # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to map a virtual drive image to a host:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope virtual-drive
Server /chassis/flexutil/virtual-drive # enable-vds HUU
Server /chassis/flexutil/virtual-drive # show detail
Virtual Drive  ID     LUN ID Size     VD Status    Host Accessible   Operation in    Last Operation 
               progress  completion status
-------------- ------ ------ -------- ------------ ----------------- ------------    -----------------
SCU            1      NA     1280 MB  Healthy      Not-Connected     NA         none
Diagnostics    2      0      256 MB   Healthy      Connected         NA              Update-Success
HUU            3      1      1536 MB  Healthy      Connected         NA              Update-Success
Drivers        4      NA     8192 MB  Healthy      Not-Connected     NA              none
UserPartition  5      NA     11159 MB Healthy      Not-Connected     NA              none
Server /chassis/flexutil/vd-image-configs #
Mapping an Image to a Virtual Drive
Before you begin
You must be logged in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope vd-image-configs
Enters the virtual drive image configuration command mode.
Step 4
/chassis/flexutil/vd-image-configs # vd-image-nfs HUU nfs/cifs share IP and path ISO image file
Specify the IP and the path of the nfs/cifs share, and the ISO image file.
Step 5
/chassis/flexutil/vd-image-configs # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to add an image to a FlexUtil virtual drive:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope vd-image-configs
Server /chassis/flexutil/vd-image-configs #  vd-image-nfs HUU 10.127.54.176:/nfsdata ucs-c240m5-huu-3.1.0.182.iso
Server /chassis/flexutil/vd-image-configs # show detail
    
    virtual-drive: SCU
    mount-type: nfs
    remote-share: 10.104.236.81:/nfsshare
    remote-file: ucs-cxx-scu-4.0.12.3.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

    virtual-drive: Diagnostics
    mount-type: nfs
    remote-share: 10.104.236.81:/nfsshare
    remote-file: ucs-cxx-diag.5.0.1a.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

    virtual-drive: HUU
    mount-type: nfs
    remote-share: 10.127.54.176:/nfsdata
    remote-file: ucs-c240m5-huu-3.1.0.182.iso
    mount-options: "nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072"

    virtual-drive: Drivers
    mount-type: None
    remote-share: None
    remote-file: None
    mount-options: None

Server /chassis/flexutil/vd-image-configs
Unmapping an Image From a Virtual Drive
Before you begin
You must be logged in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope vd-image-configs
Enters the virtual drive image configuration command mode.
Step 4
Server /chassis/flexutil/vd-image-configs # unmap virtual-drive
Unmaps the chosen virtual drive image.
Step 5
Server /chassis/flexutil/vd-image-configs # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to unmap a FlexUtil virtual drive:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope vd-image-configs
Server /chassis/flexutil/vd-image-configs # unmap HUU
Server /chassis/flexutil/vd-image-configs # show detail
Virtual drive: SCU
    mount-type: nfs
    remote-share: 10.10.10.10:/nfsshare
    remote-file: ucs-cxx-scu-4.0.12.3.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

Virtual drive: Diagnostics
    mount-type: nfs
    remote-share: 10.10.10.10:/nfsshare
    remote-file: ucs-cxx-diag.5.0.1a.iso
    mount-options: 'nolock,noexec,noac,soft,timeo=60,retry=2,rsize=3072,wsize=3072'

Virtual drive: HUU
    mount-type: None
    remote-share: None
    remote-file: None
    mount-options: None

Virtual-drive: Drivers
    mount-type: None
    remote-share: None
    remote-file: None
    mount-options: None
Server /chassis/flexutil/vd-image-configs #
Erasing an Image on a Virtual Drive
Before you begin
You must be logged in with admin privileges to perform this task.
Cisco FlexUtil must be supported by your platform.
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope flexutil
Enters the FlexUtil controller command mode.
Step 3
Server /chassis/flexutil # scope virtual-drive
Enters the virtual drive command mode.
Step 4
Server /chassis/flexutil/virtual-drive # erase-vds virtual-drive
Erases a virtual drive image.
Step 5
Server /chassis/flexutil/virtual-drive # show detail
Displays the FlexUtil virtual drive image details.
Example
This example shows how to erase a virtual drive image:
Server# scope chassis
Server /chassis # scope flexutil
Server /chassis/flexutil # scope virtual-drive
Server /chassis/flexutil/virtual-drive # erase-vds SCU
This operation will erase data on the VD
Continue?[y|N]y
Server /chassis/flexutil/virtual-drive # show detail
Virtual Drive  ID     LUN ID Size     VD Status    Host Accessible   Operation in    Last Operation 
               progress  completion status
-------------- ------ ------ -------- ------------ ----------------- ------------    -----------------
SCU            1      NA     1280 MB  Healthy      Not-Connected     Erasing         none
Diagnostics    2      0      256 MB   Healthy      Connected         NA              Update-Success
HUU            3      1      1536 MB  Healthy      Connected         NA              Update-Success
Drivers        4      NA     8192 MB  Healthy      Not-Connected     NA              none
UserPartition  5      NA     11159 MB Healthy      Not-Connected     NA              none
C220-WZP210606A7 /chassis/flexutil/virtual-drive #
Cisco Boot Optimized M.2 Raid Controller
Viewing Cisco Boot Optimized M.2 Raid Controller Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # show detail
Displays the Cisco Boot Optimized M.2 raid controller details.
Example
This example shows how to view the controller information:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # show detail
PCI Slot MSTOR-RAID:
    Health: Good
    Controller Status: Optimal
    Product Name: Cisco Boot optimized M.2 Raid controller
    Serial Number: FCH222877A7
    Firmware Package Build: 2.3.17.1009
    Product ID: Marvell
    Flash Memory Size: 2 MB
    Product PID: UCS-M2-HWRAID
Server /chassis/storageadapter #                      
Viewing Cisco Boot Optimized M.2 Raid Controller Physical Drive Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # scope physical-drive Physical Drive Number
Enters the physical drive command mode.
Step 4
Server /chassis/storageadapter/physical-drive # show general
Displays the general physical drive information.
Step 5
Server /chassis/storageadapter/physical-drive # show detail
Displays the physical drive details.
Step 6
Server /chassis/storageadapter/physical-drive # show inquiry-data
Displays the physical drive serial number.
Step 7
Server /chassis/storageadapter/physical-drive # show status
Displays the health status of the physical drive.
Example
This example shows how to view the physical drive information:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # scope physical-drive 253
Server /chassis/storageadapter/physical-drive # show general
PCI Slot MSTOR-RAID:
    Health: Good
    Controller Status: Optimal
    Product Name: Cisco Boot optimized M.2 Raid controller
    Serial Number: FCH222877A7
    Firmware Package Build: 2.3.17.1009
    Product ID: Marvell
    Flash Memory Size: 2 MB
    Product PID: UCS-M2-HWRAID
Server /chassis/storageadapter/physical-drive # show detail
Physical Drive Number 253:
    Controller: MSTOR-RAID
    Info Valid: Yes
    Info Invalid Cause:
    Drive Number: 253
    Health: Good
    Status: Online
    Manufacturer: ATA
    Model: Micron_5100_MTFDDAV240TCB
    Drive Firmware: D0MU054
    Type: SSD
    Block Size: 512
    Physical Block Size: 512
    Negotiated Link Speed: 6.0 Gb/s
    State: online
    Operating Temperature: 32
    Enclosure Association: Direct Attached
    Interface Type: SATA
    Block Count: 468862127
    Raw Size: 228936 MB
    Non Coerced Size: 228936 MB
    Coerced Size: 228936 MB
    Power State: active
Server /chassis/storageadapter/physical-drive # show inquiry-data
Physical Drive Number 253:
    Controller: MSTOR-RAID
    Info Valid: Yes
    Info Invalid Cause:
    Vendor: ATA
    Product ID: Micron_5100_MTFDDAV240TCB
    Drive Firmware: D0MU054
    Drive Serial Number: 18201CB94A2C
Server /chassis/storageadapter/physical-drive # show status  
Physical Drive Number 253:
    Controller: MSTOR-RAID
    Info Valid: Yes
    Info Invalid Cause:
    State: online
    Online: true
    Fault: false 
Server /chassis/storageadapter/physical-drive #                
Viewing Cisco Boot Optimized M.2 Raid Controller Virtual Drive Details
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # scope virtual-drive Virtual Drive Number
Enters the virtual drive command mode.
Step 4
Server /chassis/storageadapter/virtual-drive # show detail
Displays the virtual drive information.
Step 5
Server /chassis/storageadapter/virtual-drive # show lrop-info
Displays the status of the virtual drive rebuild.
Example
This example shows how to view the virtual drive information:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # scope virtual-drive 0
Server /chassis/storageadapter/virtual-drive # show detail
Virtual Drive 0:
    Health: Good
    Status : Optimal
    Name: test
    Size: 228872 MB
    Physical Drives: 253, 254
    RAID Level: RAID 1
    Target ID: 0
    Strip Size: 32 KB
Server /chassis/storageadapter/virtual-drive # show detail
LROP:
    LROP In Progress: false
    Current Long-Running Op: No operation in progress
    Percent Complete: 0
Server /chassis/storageadapter/virtual-drive #                
Creating a Cisco Boot Optimized M.2 Raid Controller Virtual Drive
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # create-virtual-drive
Enters the virtual drive name and the stripsize at the respective prompts. This creates the virtual drive.
Example
This example shows how to create a virtual drive:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # create-virtual-drive
Please enter Virtual Drive name (15 characters maximum, hit return to skip name)--> test
 
Unused physical drives available 2:
    ID  Size(MB)       Model        Interface  Type
   253  228936         ATA          SATA       SSD
   254  915715         ATA          SATA       SSD
 
PD sizes NOT equal. NOT Assigning VD_size for RAID1
 
Optional attribute:
 
  stripsize: defaults to 64K Bytes
 
     0: 32K Bytes
    1: 64K Bytes
  Choose number from above options or hit return to pick default--> 0
stripsize will be set to 32K Bytes (4 and 'strip-size\:32k')
 
New virtual drive will have the following characteristics:
  - RAID level: '1'
  - Name: 'test'
  - stripsize: 32K Bytes
 
OK? (y or n)--> y
Server /chassis/storageadapter #                
Deleting a Cisco Boot Optimized M.2 Raid Controller Virtual Drive
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # delete-virtual-drive
Enters yes at the confirmation prompts. This deletes the virtual drive.
Example
This example shows how to delete a virtual drive:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # delete-virtual-drive
Are you sure you want to delete virtual drive 0?
All data on the drive will be lost.  Enter 'yes' to confirm -> yes
Server /chassis/storageadapter #                
Importing Cisco Boot Optimized M.2 Raid Controller Foreign Configuration
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # import-foreign-config
Enter yes at the confirmation prompt to import the controller configuration.
Example
This example shows how to import the controller configuration:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # import-foreign-config
Are you sure you want to import all foreign configurations on this controller?
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter #                
Clearing Cisco Boot Optimized M.2 Raid Controller Foreign Configuration
Procedure
  Command or Action Purpose
Step 1
Server# scope chassis
Enters the chassis command mode.
Step 2
Server /chassis # scope storageadapter MSTOR-RAID
Enters the Cisco Boot Optimized M.2 raid controller command mode.
Step 3
Server /chassis/storageadapter # clear-foreign-config
Enter yes at the confirmation prompt to clear the controller configuration.
Example
This example shows how to clear the controller configuration:
Server# scope chassis
Server /chassis # show storageadapter MSTOR-RAID
Server /chassis/storageadapter # clear-foreign-config
Are you sure you want to clear all foreign configurations on this controller?
All data on the drive(s) will be lost.
Enter 'yes' to confirm -> yes
Server /chassis/storageadapter #                
Was this Document Helpful?
Yes No
Feedback
Customers Also Viewed
Cisco UCS C-Series Servers Integrated Management Controller GUI Configuration Guide, Release 2.0 --- Managing Storage Adapters
Contact Cisco
Open a Support Case
(Requires a Cisco Service Contract)